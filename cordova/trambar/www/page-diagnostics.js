webpackJsonp(["page-diagnostics"],{"../../common/src/data/sqlite-cache.js":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e){try{return JSON.parse(e)}catch(e){return null}}Object.defineProperty(t,"__esModule",{value:!0}),t.SQLiteCache=t.default=void 0;var r=a("../../common/node_modules/babel-runtime/core-js/get-iterator.js"),s=n(r),o=a("../../common/node_modules/babel-runtime/core-js/json/stringify.js"),u=n(o),d=a("../../common/node_modules/babel-runtime/regenerator/index.js"),c=n(d),i=a("../../common/node_modules/babel-runtime/helpers/asyncToGenerator.js"),m=n(i),f=a("../../common/node_modules/babel-runtime/helpers/classCallCheck.js"),p=n(f),h=a("../../common/node_modules/babel-runtime/helpers/createClass.js"),b=n(h),v=a("../../common/node_modules/lodash/lodash.js"),E=n(v),j=a("../../common/node_modules/bluebird/js/browser/bluebird.js"),g=n(j),_=a("../../common/src/data/local-search.js"),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(_),C=window.openDatabase;window.sqlitePlugin&&(C=window.sqlitePlugin.openDatabase);var k={databaseName:"database"},x=function(){function e(t){(0,p.default)(this,e),this.options=E.default.defaults({},t,k),this.tables={},this.recordCounts={},this.writeCount=0,this.readCount=0,this.deleteCount=0}return(0,b.default)(e,null,[{key:"isAvailable",value:function(){return!!C}}]),(0,b.default)(e,[{key:"initialize",value:function(){this.updateRecordCount("remote"),this.updateRecordCount("local")}},{key:"shutdown",value:function(){this.tables={}}},{key:"find",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,m.default)(c.default.mark(function e(t){var a,n,l,r,s,o,u,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.address,n=t.schema,l=t.table,r=t.criteria,void 0==a&&(a=""),e.next=4,this.fetchTable(a,n,l);case 4:if(s=e.sent,o=this.getObjectKeyName(n),u=[],!E.default.isEqual(E.default.keys(r),[o])){e.next=14;break}return d=r[o],d=d instanceof Array?E.default.sortBy(E.default.slice(d)):[d],E.default.each(d,function(e){var t={};t[o]=e;var a=E.default.sortedIndexBy(s,t,o),n=s[a];n&&n[o]===e&&u.push(n)}),e.abrupt("return",u);case 14:E.default.each(s,function(e){y.match(l,e,r)&&u.push(e)});case 15:return y.limit(l,u,t.criteria),this.readCount+=u.length,e.abrupt("return",u);case 18:case"end":return e.stop()}},e,this)}));return e}()},{key:"save",value:function(){function e(e,a){return t.apply(this,arguments)}var t=(0,m.default)(c.default.mark(function e(t,a){var n,l,r,s,o,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.address,l=t.schema,r=t.table,void 0==n&&(n=""),s=[],o=[],E.default.each(a,function(e){var t=(0,u.default)(e);if("local"===l)s.push("\n                    INSERT OR REPLACE INTO local_data\n                    (table_name, key, json)\n                    VALUES (?, ?, ?)\n                "),o.push([r,e.key,t]);else{var a=new Date(e.rtime).getTime();s.push("\n                    INSERT OR REPLACE INTO remote_data\n                    (address, schema_name, table_name, id, json, rtime)\n                    VALUES (?, ?, ?, ?, ?, ?)\n                "),o.push([n,l,r,e.id,t,a])}}),e.next=6,this.execute(s,o);case 6:return d=e.sent,this.writeCount+=d,this.updateTableEntry(n,l,r,a,!1),this.updateRecordCount(l,500),e.abrupt("return",a);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"remove",value:function(){function e(e,a){return t.apply(this,arguments)}var t=(0,m.default)(c.default.mark(function e(t,a){var n,l,r,s,o,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.address,l=t.schema,r=t.table,void 0==n&&(n=""),s=[],o=[],E.default.each(a,function(e){"local"===l?(s.push("\n                    DELETE FROM local_data\n                    WHERE table_name = ? AND key = ?\n                "),o.push([r,e.key])):(s.push("\n                    DELETE FROM remote_data\n                    WHERE address = ?\n                    AND schema_name = ?\n                    AND table_name = ?\n                    AND id = ?\n                "),o.push([n,l,r,e.id]))}),e.next=6,this.execute(s,o);case 6:return u=e.sent,this.deleteCount+=u,this.updateTableEntry(n,l,r,a,!0),this.updateRecordCount(l,500),e.abrupt("return",a);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"clean",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,m.default)(c.default.mark(function e(t){var a,n,l,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0,n=void 0,void 0===t.address){e.next=5;break}t.schema&&"*"!==t.schema?(a="\n                    DELETE FROM remote_data\n                    WHERE address = ? AND schema_name = ?\n                ",n=[t.address||"",t.schema],console.log(a)):(a="\n                    DELETE FROM remote_data\n                    WHERE address = ?\n                ",n=[t.address||""]),e.next=18;break;case 5:if(void 0===t.count){e.next=10;break}a="\n                DELETE FROM remote_data\n                WHERE rowid IN (\n                    SELECT rowid FROM remote_data ORDER BY rtime LIMIT ?\n                )\n            ",n=[t.count],e.next=18;break;case 10:if(void 0===t.before){e.next=16;break}l=new Date(t.before).getTime(),a="\n                DELETE FROM remote_data\n                WHERE rtime < ?\n            ",n=[l],e.next=18;break;case 16:return e.abrupt("return",0);case 18:return e.next=20,this.execute(a,n);case 20:return r=e.sent,r>0&&(this.deleteCount+=r,this.updateRecordCount("remote_data"),this.tables.remote={}),e.abrupt("return",r);case 23:case"end":return e.stop()}},e,this)}));return e}()},{key:"query",value:function(){function e(e,a){return t.apply(this,arguments)}var t=(0,m.default)(c.default.mark(function e(t,a){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.open();case 2:return n=e.sent,e.abrupt("return",new g.default(function(e,l){var r=function(e){l(new Error(e.message))};n.transaction(function(n){n.executeSql(t,a,function(t,a){for(var n=[],l=0;l<a.rows.length;l++)n.push(a.rows.item(l));e(n)})},r)}));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"execute",value:function(){function e(e,a){return t.apply(this,arguments)}var t=(0,m.default)(c.default.mark(function e(t,a){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.open();case 2:return n=e.sent,e.abrupt("return",new g.default(function(e,l){var r=0,s=function(e){l(new Error(e.message))},o=function(){e(r)},u=function(e,t){r+=t.rowsAffected};n.transaction(function(e){if(t instanceof Array)for(var n=0;n<t.length;n++)e.executeSql(t[n],a[n],u);else e.executeSql(t,a,u)},s,o)}));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"fetchTable",value:function(e,t,a){var n=this.getTableEntry(e,t,a);return n.promise||(n.promise=this.loadTable(e,t,a,n)),n.promise}},{key:"loadTable",value:function(){function e(e,a,n,l){return t.apply(this,arguments)}var t=(0,m.default)(c.default.mark(function e(t,a,n,r){var s,o,u,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=void 0,o=void 0,"local"===a?(s="\n                SELECT json FROM local_data\n                WHERE table_name = ?\n                ORDER BY key\n            ",o=[n]):(s="\n                SELECT json FROM remote_data\n                WHERE address = ?\n                AND schema_name = ?\n                AND table_name = ?\n                ORDER BY id\n            ",o=[t,a,n]),e.next=4,this.query(s,o);case 4:return u=e.sent,d=E.default.map(u,function(e){return l(e.json)}),r.objects=d,e.abrupt("return",d);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"open",value:function(){var e=this;return this.databasePromise||(this.databasePromise=new g.default(function(t,a){var n=e.options.databaseName,l=C(n,"","",52428800),r=["\n                        CREATE TABLE IF NOT EXISTS remote_data (\n                            address text,\n                            schema_name text,\n                            table_name text,\n                            id int,\n                            json text,\n                            rtime datetime\n                        )\n                    ","\n                        CREATE UNIQUE INDEX IF NOT EXISTS remote_data_idx_id\n                        ON remote_data (\n                            address,\n                            schema_name,\n                            table_name,\n                            id\n                        )\n                    ","\n                        CREATE INDEX IF NOT EXISTS remote_data_idx_location\n                        ON remote_data (\n                            address,\n                            schema_name,\n                            table_name\n                        )\n                    ","\n                        CREATE INDEX IF NOT EXISTS remote_data_idx_rtime\n                        ON remote_data (\n                            rtime\n                        )\n                    ","\n                        CREATE TABLE IF NOT EXISTS local_data (\n                            table_name text,\n                            key text,\n                            json text\n                        )\n                    ","\n                        CREATE UNIQUE INDEX IF NOT EXISTS local_data_idx_key\n                        ON local_data (\n                            table_name,\n                            key\n                        )\n                    "];"1.0"!==l.version&&(r.unshift("DROP TABLE IF EXISTS remote_data"),r.unshift("DROP TABLE IF EXISTS local_data"));var o=function(){t(l)},u=function(e){a(new Error(e.message))};l.transaction(function(e){var t=!0,a=!1,n=void 0;try{for(var l,o=(0,s.default)(r);!(t=(l=o.next()).done);t=!0){var u=l.value;e.executeSql(u)}}catch(e){a=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw n}}},u,o)})),this.databasePromise}},{key:"reset",value:function(e,t){var a=void 0;a="local"===t?["local"]:E.default.filter(["remote",e,t]),E.default.unset(this.tables,a)}},{key:"getObjectKeyName",value:function(e){return"local"===e?"key":"id"}},{key:"getTableEntry",value:function(e,t,a){var n=void 0;n="local"===t?["local",a]:["remote",e,t,a];var l=E.default.get(this.tables,n);return l||(l={promise:null,objects:null},E.default.set(this.tables,n,l)),l}},{key:"updateTableEntry",value:function(e,t,a,n,l){var r=this.getTableEntry(e,t,a);if(r.objects){var o=this.getObjectKeyName(t),u=!0,d=!1,c=void 0;try{for(var i,m=(0,s.default)(n);!(u=(i=m.next()).done);u=!0){var f=i.value,p=E.default.sortedIndexBy(r.objects,f,o),h=r.objects[p];h&&h[o]===f[o]?l?r.objects.splice(p,1):r.objects[p]=f:l||r.objects.splice(p,0,f)}}catch(e){d=!0,c=e}finally{try{!u&&m.return&&m.return()}finally{if(d)throw c}}}}},{key:"updateRecordCount",value:function(e,t){var a=this,n="local"===e?"local_data":"remote_data",l="updateRecordCountTimeouts."+n,r=E.default.get(this,l);r&&clearTimeout(r),r=setTimeout((0,m.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="SELECT COUNT(*) as count FROM "+n,e.next=4,a.query(t);case 4:r=e.sent,a.recordCounts[n]=r[0].count,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:E.default.set(a,l,0);case 11:case"end":return e.stop()}},e,a,[[0,8]])})),t||0),E.default.set(this,l,r)}}]),e}();t.default=x,t.SQLiteCache=x},"./diagnostics/code-push-panel.jsx":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e){if(!e.package)return null;var t=e.package;return E.default.createElement(y.default,{label:e.label},E.default.createElement("div",null,"Label: ",t.label),E.default.createElement("div",null,"Description: ",t.description),E.default.createElement("div",null,"First run: ",t.isFristRun?"yes":"no"),E.default.createElement("div",null,"Mandatory: ",t.isMandatory?"yes":"no"),E.default.createElement("div",null,"Package hash: ",b.default.truncate(t.packageHash,{length:15})),E.default.createElement("div",null,"Package size: ",t.packageSize))}Object.defineProperty(t,"__esModule",{value:!0}),t.CodePushPanel=t.default=void 0;var r=a("../../common/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(r),o=a("../../common/node_modules/babel-runtime/helpers/classCallCheck.js"),u=n(o),d=a("../../common/node_modules/babel-runtime/helpers/createClass.js"),c=n(d),i=a("../../common/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=n(i),f=a("../../common/node_modules/babel-runtime/helpers/inherits.js"),p=n(f),h=a("../../common/node_modules/lodash/lodash.js"),b=n(h),v=a("../../common/node_modules/react/index.js"),E=n(v),j=a("./widgets/settings-panel.jsx"),g=n(j),_=a("./widgets/diagnostics-section.jsx"),y=n(_);a("./diagnostics/code-push-panel.scss");var C=a("../../common/src/transport/code-push.js"),k=(n(C),function(e){function t(){return(0,u.default)(this,t),(0,m.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props.codePush,t=e.lastSyncTime,a=e.lastSyncStatus,n=e.currentPackage,r=e.pendingPackage;return E.default.createElement(g.default,{className:"code-push"},E.default.createElement("header",null,E.default.createElement("i",{className:"fa fa-gear"})," Code Push"),E.default.createElement("body",null,E.default.createElement(y.default,{label:"Update check"},E.default.createElement("div",null,"Last check: ",t),E.default.createElement("div",null,"Result: ",a)),E.default.createElement(l,{label:"Current package",package:n}),E.default.createElement(l,{label:"Pending package",package:r})))}}]),t}(v.Component));k.displayName="CodePushPanel",t.default=k,t.CodePushPanel=k},"./diagnostics/code-push-panel.scss":function(e,t){},"./diagnostics/environment-monitor-panel.jsx":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentMonitorPanel=t.default=void 0;var l=a("../../common/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=n(l),s=a("../../common/node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(s),u=a("../../common/node_modules/babel-runtime/helpers/createClass.js"),d=n(u),c=a("../../common/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),i=n(c),m=a("../../common/node_modules/babel-runtime/helpers/inherits.js"),f=n(m),p=a("../../common/node_modules/lodash/lodash.js"),h=(n(p),a("../../common/node_modules/react/index.js")),b=n(h),v=a("./widgets/settings-panel.jsx"),E=n(v),j=a("./widgets/diagnostics-section.jsx"),g=n(j);a("./diagnostics/environment-monitor-panel.scss");var _=a("../../common/src/env/environment-monitor.js"),y=(n(_),function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props.envMonitor,t=e.online,a=e.os,n=e.connectionType,l=e.battery,r=e.screenWidth,s=e.screenHeight,o=e.viewportWidth,u=e.viewportHeight,d=e.devicePixelRatio,c=e.pointingDevice,i=e.webpSupport,m=e.browser,f=e.date;return b.default.createElement(E.default,{className:"env-monitor"},b.default.createElement("header",null,b.default.createElement("i",{className:"fa fa-gear"})," Environment"),b.default.createElement("body",null,b.default.createElement(g.default,{label:"Connectivity"},b.default.createElement("div",null,"Online: ",t?"yes":"no"),b.default.createElement("div",null,"Type: ",n)),b.default.createElement(g.default,{label:"Display"},b.default.createElement("div",null,"Screen width: ",r),b.default.createElement("div",null,"Screen height: ",s),b.default.createElement("div",null,"Viewport width: ",o),b.default.createElement("div",null,"Viewport height: ",u),b.default.createElement("div",null,"Device pixel ratio: ",d),b.default.createElement("div",null,"Pointing device: ",c)),b.default.createElement(g.default,{label:"Browser"},b.default.createElement("div",null,"Type: ",m),b.default.createElement("div",null,"OS: ",a),b.default.createElement("div",null,"WebP support: ",i?"yes":"no")),b.default.createElement(g.default,{label:"Battery"},b.default.createElement("div",null,"Charging: ",l.charging?"yes":"no"),b.default.createElement("div",null,"Level: ",Math.floor(100*l.level),"%")),b.default.createElement(g.default,{label:"Date"},b.default.createElement("div",null,"Today: ",f))))}}]),t}(h.Component));y.displayName="EnvironmentMonitorPanel",t.default=y,t.EnvironmentMonitorPanel=y},"./diagnostics/environment-monitor-panel.scss":function(e,t){},"./diagnostics/indexed-db-cache-panel.jsx":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDBCachePanel=t.default=void 0;var l=a("../../common/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=n(l),s=a("../../common/node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(s),u=a("../../common/node_modules/babel-runtime/helpers/createClass.js"),d=n(u),c=a("../../common/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),i=n(c),m=a("../../common/node_modules/babel-runtime/helpers/inherits.js"),f=n(m),p=a("../../common/node_modules/lodash/lodash.js"),h=n(p),b=a("../../common/node_modules/react/index.js"),v=n(b),E=a("./widgets/settings-panel.jsx"),j=n(E),g=a("./widgets/diagnostics-section.jsx"),_=n(g);a("./diagnostics/indexed-db-cache-panel.scss");var y=a("../../common/src/data/indexed-db-cache.js"),C=(n(y),function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props.cache,t=e.options,a=e.recordCounts,n=e.writeCount,l=e.readCount,r=e.deleteCount,s=h.default.get(a,"local-data"),o=h.default.get(a,"remote-data");return v.default.createElement(j.default,{className:"indexed-db-cache"},v.default.createElement("header",null,v.default.createElement("i",{className:"fa fa-gear"})," IndexedDB Cache"),v.default.createElement("body",null,v.default.createElement(_.default,{label:"Database details"},v.default.createElement("div",null,"Name: ",t.databaseName)),v.default.createElement(_.default,{label:"Usage"},v.default.createElement("div",null,"Local objects: ",s),v.default.createElement("div",null,"Remote objects: ",o),v.default.createElement("div",null,"Objects read: ",l),v.default.createElement("div",null,"Objects written: ",n),v.default.createElement("div",null,"Objects deleted: ",r))))}}]),t}(b.Component));C.displayName="IndexedDBCachePanel",t.default=C,t.IndexedDBCachePanel=C},"./diagnostics/indexed-db-cache-panel.scss":function(e,t){},"./diagnostics/locale-manager-panel.jsx":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LocaleManagerPanel=t.default=void 0;var l=a("../../common/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=n(l),s=a("../../common/node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(s),u=a("../../common/node_modules/babel-runtime/helpers/createClass.js"),d=n(u),c=a("../../common/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),i=n(c),m=a("../../common/node_modules/babel-runtime/helpers/inherits.js"),f=n(m),p=a("../../common/node_modules/lodash/lodash.js"),h=n(p),b=a("../../common/node_modules/react/index.js"),v=n(b),E=a("./widgets/settings-panel.jsx"),j=n(E),g=a("./widgets/diagnostics-section.jsx"),_=n(g);a("./diagnostics/locale-manager-panel.scss");var y=a("../../common/src/locale/locale-manager.js"),C=(n(y),function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props.localeManager,t=e.browserLocaleCode,a=e.localeCode,n=e.missingPhrases;return v.default.createElement(j.default,{className:"locale-manager"},v.default.createElement("header",null,v.default.createElement("i",{className:"fa fa-gear"})," Locale Manager"),v.default.createElement("body",null,v.default.createElement(_.default,{label:"Locale code"},v.default.createElement("div",null,"Current: ",a),v.default.createElement("div",null,"Browser: ",t)),v.default.createElement(_.default,{label:"Missing phrases",hidden:h.default.isEmpty(n)},h.default.map(n,function(e,t){return v.default.createElement("div",{key:t},e)}))))}}]),t}(b.Component));C.displayName="LocaleManagerPanel",t.default=C,t.LocaleManagerPanel=C},"./diagnostics/locale-manager-panel.scss":function(e,t){},"./diagnostics/payload-manager-panel.jsx":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return k.default.createElement("div",{key:t},k.default.createElement("div",null,"Payload ID: ",e.id),k.default.createElement("div",null,"Resource type: ",e.type),r(e),s(e),k.default.createElement("ol",null,g.default.map(e.parts,o)))}function r(e){if(!e.started)return null;if(e.sent){var t=.001*((0,y.default)(e.uploadEndTime)-(0,y.default)(e.uploadStartTime)),a=void 0,n=e.getSize();n>0&&(a="("+u(n/t)+" per sec)");var l=g.default.round(t,t<1?2:0)+"s";return k.default.createElement("div",null,"Upload duration: ",l," ",a)}var r=e.getSize(),s=e.getUploaded(),o=Math.round(s/r*100||0)+"%";return k.default.createElement("div",null,"Upload progress: ",o)}function s(e){if(!e.sent)return null;if(e.completed){var t=.001*((0,y.default)(e.processEndTime)-(0,y.default)(e.uploadEndTime)),a=g.default.round(t,t<1?2:0)+"s";return k.default.createElement("div",null,"Backend duration: ",a)}var n=e.processed+"%";return k.default.createElement("div",null,"Backend progress: ",n)}function o(e,t){var a=void 0,n=e.name;a=e.blob||e.cordovaFile?"File":e.stream?"Stream":e.url?"URL":"Unknown";var l=void 0;return e.size>0&&(l=k.default.createElement("span",{className:"file-size"},u(e.size))),k.default.createElement("li",{key:t},a," - ",n," ",l)}function u(e){return e>=1073741824?g.default.round(e/1073741824)+" GB":e>=1048576?g.default.round(e/1048576)+" MB":e>=1024?g.default.round(e/1024)+" KB":e>0?e+" bytes":"0"}Object.defineProperty(t,"__esModule",{value:!0}),t.PayloadManagerPanel=t.default=void 0;var d=a("../../common/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),c=n(d),i=a("../../common/node_modules/babel-runtime/helpers/classCallCheck.js"),m=n(i),f=a("../../common/node_modules/babel-runtime/helpers/createClass.js"),p=n(f),h=a("../../common/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),b=n(h),v=a("../../common/node_modules/babel-runtime/helpers/inherits.js"),E=n(v),j=a("../../common/node_modules/lodash/lodash.js"),g=n(j),_=a("../../common/node_modules/moment/moment.js"),y=n(_),C=a("../../common/node_modules/react/index.js"),k=n(C),x=a("./widgets/settings-panel.jsx"),N=n(x),P=a("./widgets/diagnostics-section.jsx"),w=n(P);a("./diagnostics/payload-manager-panel.scss");var R=a("../../common/src/transport/payload-manager.js"),T=(n(R),function(e){function t(){return(0,m.default)(this,t),(0,b.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,E.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props.payloadManager,t=e.payloads;if(g.default.isEmpty(t))return null;var a=g.default.filter(t,{started:!1}),n=g.default.filter(t,{started:!0,sent:!1,failed:!1}),r=g.default.filter(t,{sent:!0,completed:!1}),s=g.default.filter(t,{failed:!0}),o=g.default.filter(t,{completed:!0});return k.default.createElement(N.default,{className:"payload-manager"},k.default.createElement("header",null,k.default.createElement("i",{className:"fa fa-gear"})," Payloads"),k.default.createElement("body",null,k.default.createElement(w.default,{label:"Pending payloads",hidden:g.default.isEmpty(a)},g.default.map(a,l)),k.default.createElement(w.default,{label:"Payloads in transit",hidden:g.default.isEmpty(n)},g.default.map(n,l)),k.default.createElement(w.default,{label:"Payloads in backend process",hidden:g.default.isEmpty(r)},g.default.map(r,l)),k.default.createElement(w.default,{label:"Failed payloads",hidden:g.default.isEmpty(s)},g.default.map(s,l)),k.default.createElement(w.default,{label:"Completed payloads",hidden:g.default.isEmpty(o)},g.default.map(o,l))))}}]),t}(C.Component));T.displayName="PayloadManagerPanel",t.default=T,t.PayloadManagerPanel=T},"./diagnostics/payload-manager-panel.scss":function(e,t){},"./diagnostics/push-notifier-panel.jsx":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(){var e=window.device;return e?{manufacturer:e.manufacturer,name:e.model}:{}}function r(e,t){return _.default.createElement("pre",{key:t},(0,o.default)(e,void 0,4))}Object.defineProperty(t,"__esModule",{value:!0}),t.PushNotifierPanel=t.default=void 0;var s=a("../../common/node_modules/babel-runtime/core-js/json/stringify.js"),o=n(s),u=a("../../common/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=n(u),c=a("../../common/node_modules/babel-runtime/helpers/classCallCheck.js"),i=n(c),m=a("../../common/node_modules/babel-runtime/helpers/createClass.js"),f=n(m),p=a("../../common/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=n(p),b=a("../../common/node_modules/babel-runtime/helpers/inherits.js"),v=n(b),E=a("../../common/node_modules/lodash/lodash.js"),j=n(E),g=a("../../common/node_modules/react/index.js"),_=n(g),y=a("./widgets/settings-panel.jsx"),C=n(y),k=a("./widgets/diagnostics-section.jsx"),x=n(k);a("./diagnostics/push-notifier-panel.scss");var N=a("../../common/src/transport/push-notifier.js"),P=(n(N),function(e){function t(){return(0,i.default)(this,t),(0,h.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props.notifier,t=e.registrationID,a=e.registrationType,n=e.relayAddress,s=e.relayToken,o=e.recentMessages,u=l();return _.default.createElement(C.default,{className:"push-notifier"},_.default.createElement("header",null,_.default.createElement("i",{className:"fa fa-gear"})," Push Notification"),_.default.createElement("body",null,_.default.createElement(x.default,{label:"Registration"},_.default.createElement("div",null,"ID: ",t),_.default.createElement("div",null,"Network: ",a)),_.default.createElement(x.default,{label:"Push relay"},_.default.createElement("div",null,"Address: ",n),_.default.createElement("div",null,"Token: ",s)),_.default.createElement(x.default,{label:"Recent messages"},j.default.map(o,r)),_.default.createElement(x.default,{label:"Device"},_.default.createElement("div",null,"Manufacturer: ",u.manufacturer),_.default.createElement("div",null,"Model: ",u.name))))}}]),t}(g.Component));P.displayName="PushNotifierPanel",t.default=P,t.PushNotifierPanel=P},"./diagnostics/push-notifier-panel.scss":function(e,t){},"./diagnostics/remote-data-source-panel.jsx":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=g.default.filter(e.searches,function(e){return"local"!==e.schema}),a=function(e,t){var a=void 0;e.updating?a="updating":e.dirty&&(a="dirty");var n=e.duration?e.duration+"ms":"",l=(0,u.default)(e.criteria,void 0,4),r=(0,u.default)(e.criteria);return y.default.createElement("tr",{key:t,className:a},y.default.createElement("td",{className:"time"},n),y.default.createElement("td",{className:"schema"},e.schema),y.default.createElement("td",{className:"table"},e.table),y.default.createElement("td",{className:"criteria",title:s(l)},r),y.default.createElement("td",{className:"objects"},g.default.size(e.results)," (",e.lastRetrieved,")"),y.default.createElement("td",{className:"by"},g.default.join(e.by,", ")))};return y.default.createElement("table",{className:"recent-search-table"},y.default.createElement("thead",null,y.default.createElement("tr",null,y.default.createElement("th",{className:"time"},"Time"),y.default.createElement("th",{className:"schema"},"Schema"),y.default.createElement("th",{className:"table"},"Table"),y.default.createElement("th",{className:"criteria"},"Criteria"),y.default.createElement("th",{className:"objects"},"Objects (fresh)"),y.default.createElement("th",{className:"by"},"By"))),y.default.createElement("tbody",null,g.default.map(t,a)))}function r(e){var t=g.default.filter(e.stores,function(e){return"local"!==e.schema}),a=function(e,t){var a=e.duration?e.duration+"ms":"",n=(0,u.default)(e.results,void 0,4),l=(0,u.default)(e.results);return y.default.createElement("tr",{key:t},y.default.createElement("td",{className:"time"},a),y.default.createElement("td",{className:"schema"},e.schema),y.default.createElement("td",{className:"table"},e.table),y.default.createElement("td",{className:"objects",title:n},l),y.default.createElement("td",{className:"by"},e.by))};return y.default.createElement("table",{className:"recent-storage-table"},y.default.createElement("thead",null,y.default.createElement("tr",null,y.default.createElement("th",{className:"time"},"Time"),y.default.createElement("th",{className:"schema"},"Schema"),y.default.createElement("th",{className:"table"},"Table"),y.default.createElement("th",{className:"objects"},"Objects"),y.default.createElement("th",{className:"by"},"By"))),y.default.createElement("tbody",null,g.default.map(t,a)))}function s(e){return e.replace(/\[([^\]]{1,50},\s*)[^\]]{50,}?(\s*)\]/g,"[$1...$2]")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RemoteDataSourcePanel=void 0;var o=a("../../common/node_modules/babel-runtime/core-js/json/stringify.js"),u=n(o),d=a("../../common/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),c=n(d),i=a("../../common/node_modules/babel-runtime/helpers/classCallCheck.js"),m=n(i),f=a("../../common/node_modules/babel-runtime/helpers/createClass.js"),p=n(f),h=a("../../common/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),b=n(h),v=a("../../common/node_modules/babel-runtime/helpers/inherits.js"),E=n(v),j=a("../../common/node_modules/lodash/lodash.js"),g=n(j),_=a("../../common/node_modules/react/index.js"),y=n(_),C=a("../../common/src/transport/code-push.js"),k=(n(C),a("./widgets/settings-panel.jsx")),x=n(k),N=a("./widgets/diagnostics-section.jsx"),P=n(N);a("./diagnostics/remote-data-source-panel.scss");var w=a("../../common/src/data/remote-data-source.js"),R=(n(w),function(e){function t(){return(0,m.default)(this,t),(0,b.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,E.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props.dataSource,t=e.recentSearchResults,a=e.recentStorageResults,n=e.recentRemovalResults;return y.default.createElement(x.default,{className:"remote-data-source"},y.default.createElement("header",null,y.default.createElement("i",{className:"fa fa-gear"})," Remote Data Source"),y.default.createElement("body",null,y.default.createElement(P.default,{label:"Recent searches"},y.default.createElement(l,{searches:t})),y.default.createElement(P.default,{label:"Recent storage",hidden:g.default.isEmpty(a)},y.default.createElement(r,{stores:a})),y.default.createElement(P.default,{label:"Recent removal",hidden:g.default.isEmpty(n)},y.default.createElement(T,{stores:n}))))}}]),t}(_.Component));R.displayName="RemoteDataSourcePanel";var T=r;t.RemoteDataSourcePanel=R,t.default=R},"./diagnostics/remote-data-source-panel.scss":function(e,t){},"./diagnostics/sqlite-cache-panel.jsx":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SQLiteCachePanel=t.default=void 0;var l=a("../../common/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=n(l),s=a("../../common/node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(s),u=a("../../common/node_modules/babel-runtime/helpers/createClass.js"),d=n(u),c=a("../../common/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),i=n(c),m=a("../../common/node_modules/babel-runtime/helpers/inherits.js"),f=n(m),p=a("../../common/node_modules/lodash/lodash.js"),h=n(p),b=a("../../common/node_modules/react/index.js"),v=n(b),E=a("./widgets/settings-panel.jsx"),j=n(E),g=a("./widgets/diagnostics-section.jsx"),_=n(g);a("./diagnostics/sqlite-cache-panel.scss");var y=a("../../common/src/data/sqlite-cache.js"),C=(n(y),function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props.cache,t=e.options,a=e.recordCounts,n=e.writeCount,l=e.readCount,r=e.deleteCount,s=h.default.get(a,"local-data"),o=h.default.get(a,"remote-data");return v.default.createElement(j.default,{className:"sqlite-cache"},v.default.createElement("header",null,v.default.createElement("i",{className:"fa fa-gear"})," SQLite Cache"),v.default.createElement("body",null,v.default.createElement(_.default,{label:"Database details"},v.default.createElement("div",null,"Name: ",t.databaseName)),v.default.createElement(_.default,{label:"Usage"},v.default.createElement("div",null,"Local objects: ",s),v.default.createElement("div",null,"Remote objects: ",o),v.default.createElement("div",null,"Objects read: ",l),v.default.createElement("div",null,"Objects written: ",n),v.default.createElement("div",null,"Objects deleted: ",r))))}}]),t}(b.Component));C.displayName="SQLiteCachePanel",t.default=C,t.SQLiteCachePanel=C},"./diagnostics/sqlite-cache-panel.scss":function(e,t){},"./diagnostics/websocket-notifier-panel.jsx":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return g.default.createElement("pre",{key:t},(0,s.default)(e,void 0,4))}Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketNotifierPanel=t.default=void 0;var r=a("../../common/node_modules/babel-runtime/core-js/json/stringify.js"),s=n(r),o=a("../../common/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=n(o),d=a("../../common/node_modules/babel-runtime/helpers/classCallCheck.js"),c=n(d),i=a("../../common/node_modules/babel-runtime/helpers/createClass.js"),m=n(i),f=a("../../common/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=n(f),h=a("../../common/node_modules/babel-runtime/helpers/inherits.js"),b=n(h),v=a("../../common/node_modules/lodash/lodash.js"),E=n(v),j=a("../../common/node_modules/react/index.js"),g=n(j),_=a("./widgets/settings-panel.jsx"),y=n(_),C=a("./widgets/diagnostics-section.jsx"),k=n(C);a("./diagnostics/websocket-notifier-panel.scss");var x=a("../../common/src/transport/websocket-notifier.js"),N=(n(x),function(e){function t(){return(0,c.default)(this,t),(0,p.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,b.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this.props.notifier,t=e.socket,a=e.reconnectionCount,n=e.notificationPermitted,r=e.recentMessages;return g.default.createElement(y.default,{className:"websocket-notifier"},g.default.createElement("header",null,g.default.createElement("i",{className:"fa fa-gear"})," Web Socket"),g.default.createElement("body",null,g.default.createElement(k.default,{label:"Connection"},g.default.createElement("div",null,"ID: ",t?t.id:""),g.default.createElement("div",null,"Socket: ",t?"established":"none"),g.default.createElement("div",null,"Reconnection count: ",a),g.default.createElement("div",null,"Notification: ",n?"permitted":"denied")),g.default.createElement(k.default,{label:"Recent messages"},E.default.map(r,l))))}}]),t}(j.Component));N.displayName="WebsocketNotifierPanel",t.default=N,t.WebsocketNotifierPanel=N},"./diagnostics/websocket-notifier-panel.scss":function(e,t){},"./pages/diagnostics-page.jsx":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticsPage=t.default=void 0;var l=a("../../common/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=n(l),s=a("../../common/node_modules/babel-runtime/helpers/classCallCheck.js"),o=n(s),u=a("../../common/node_modules/babel-runtime/helpers/createClass.js"),d=n(u),c=a("../../common/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),i=n(c),m=a("../../common/node_modules/babel-runtime/helpers/inherits.js"),f=n(m),p=a("../../common/node_modules/lodash/lodash.js"),h=(n(p),a("../../common/node_modules/react/index.js")),b=n(h),v=a("../../common/src/data/indexed-db-cache.js"),E=n(v),j=a("../../common/src/data/sqlite-cache.js"),g=(n(j),a("../../common/src/transport/websocket-notifier.js")),_=n(g),y=a("../../common/src/transport/push-notifier.js"),C=n(y),k=a("./widgets/page-container.jsx"),x=n(k),N=a("./diagnostics/environment-monitor-panel.jsx"),P=n(N),w=a("./diagnostics/remote-data-source-panel.jsx"),R=n(w),T=a("./diagnostics/indexed-db-cache-panel.jsx"),M=n(T),S=a("./diagnostics/sqlite-cache-panel.jsx"),O=n(S),D=a("./diagnostics/locale-manager-panel.jsx"),L=n(D),I=a("./diagnostics/websocket-notifier-panel.jsx"),A=n(I),B=a("./diagnostics/push-notifier-panel.jsx"),F=n(B),q=a("./diagnostics/payload-manager-panel.jsx"),U=n(q),W=a("./diagnostics/code-push-panel.jsx"),X=n(W),H=a("../../common/src/widgets/error-boundary.jsx"),z=n(H);a("./pages/diagnostics-page.scss");var Q=a("../../common/src/data/database.js"),V=(n(Q),a("../../common/src/transport/payloads.js")),K=(n(V),a("../../common/src/routing/route.js")),Y=(n(K),a("../../common/src/env/environment.js")),G=(n(Y),a("../../common/src/env/environment-monitor.js")),J=(n(G),a("../../common/node_modules/relaks-route-manager/index.js")),$=(n(J),a("../../common/src/data/remote-data-source.js")),Z=(n($),a("../../common/src/transport/payload-manager.js")),ee=(n(Z),a("../../common/src/locale/locale-manager.js")),te=(n(ee),a("../../common/src/transport/notifier.js")),ae=(n(te),a("../../common/src/transport/code-push.js")),ne=(n(ae),function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props.env;return b.default.createElement(x.default,{className:"diagnostics-page"},b.default.createElement("div",{className:"panels"},b.default.createElement(z.default,{env:e},this.renderEnvironmentMonitorPanel(),this.renderRemoteDataSourcePanel(),this.renderCachePanel(),this.renderLocaleManagerPanel(),this.renderNotifierPanel(),this.renderPayloadManagerPanel(),this.renderCodePushPanel())),b.default.createElement("div",{className:"version"},"Version ","1.2.1"))}},{key:"renderEnvironmentMonitorPanel",value:function(){var e=this.props.envMonitor,t={envMonitor:e};return b.default.createElement(P.default,t)}},{key:"renderRemoteDataSourcePanel",value:function(){var e=this.props.dataSource,t={dataSource:e};return b.default.createElement(R.default,t)}},{key:"renderCachePanel",value:function(){var e=this.props.dataSource,t={cache:e.cache};return t.cache instanceof E.default?b.default.createElement(M.default,t):t.cache instanceof SQLiteCache?b.default.createElement(O.default,t):void 0}},{key:"renderLocaleManagerPanel",value:function(){var e=this.props.localeManager,t={localeManager:e};return b.default.createElement(L.default,t)}},{key:"renderNotifierPanel",value:function(){var e=this.props.notifier,t={notifier:e};return t.notifier instanceof _.default?b.default.createElement(A.default,t):t.notifier instanceof C.default?b.default.createElement(F.default,t):void 0}},{key:"renderPayloadManagerPanel",value:function(){var e=this.props.payloadManager,t={payloadManager:e};return b.default.createElement(U.default,t)}},{key:"renderCodePushPanel",value:function(){var e=this.props.codePush;if(!e)return null;var t={codePush:e};return b.default.createElement(X.default,t)}}]),t}(h.PureComponent));ne.displayName="DiagnosticsPage",ne.diagnostics=!0,t.default=ne,t.DiagnosticsPage=ne},"./pages/diagnostics-page.scss":function(e,t){}});