webpackJsonp(["app"],{"../../common/src/data/database.js":function(e,t,n){"use strict";function s(e,t,n){this.context=t||{},this.remoteDataSource=e,this.online=n}function o(e,t){return r.assign({},e,t)}var r=n("../node_modules/lodash/lodash.js");n("../node_modules/bluebird/js/browser/bluebird.js"),n("../../common/src/errors/http-error.js");e.exports=s,s.prototype.find=function(e){return e=o(this.context,e),this.remoteDataSource.find(e)},s.prototype.findOne=function(e){return e=r.extend({expected:1},e),this.find(e).then(function(e){return e[0]||null})},s.prototype.save=function(e,t,n){return e=o(this.context,e),this.remoteDataSource.save(e,t,n)},s.prototype.saveOne=function(e,t,n){return this.save(e,[t],n).then(function(e){return e.length>0?e[0]:null})},s.prototype.remove=function(e,t){return e=o(this.context,e),this.remoteDataSource.remove(e,t)},s.prototype.removeOne=function(e,t){return this.remove(e,[t]).then(function(e){return e.length>0?e[0]:null})},s.prototype.await=function(e,t,n){return e=o(this.context,e),this.remoteDataSource.await(e,t,n)},s.prototype.refresh=function(e,t){return e=o(this.context,e),this.remoteDataSource.refresh(e,t)},s.prototype.use=function(){var e={};r.assign(e,this.context);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.each(n,function(t){r.assign(e,t)}),new s(this.remoteDataSource,e)},s.prototype.start=function(e){return e=o(this.context,e),this.remoteDataSource.start(e)},s.prototype.beginSession=function(e){return this.remoteDataSource.beginSession(this.context,e)},s.prototype.checkSession=function(){return this.remoteDataSource.checkSession(this.context)},s.prototype.hasAuthorization=function(){return this.remoteDataSource.hasAuthorization(this.context)},s.prototype.restoreSession=function(e){this.remoteDataSource.restoreSession(e)},s.prototype.submitPassword=function(e,t){return this.remoteDataSource.submitPassword(this.context,e,t)},s.prototype.endSession=function(){return this.remoteDataSource.endSession(this.context)},s.prototype.beginMobileSession=function(e){return this.remoteDataSource.beginMobileSession(this.context,e)},s.prototype.acquireMobileSession=function(e){return this.remoteDataSource.acquireMobileSession(this.context,e)},s.prototype.releaseMobileSession=function(){return this.remoteDataSource.releaseMobileSession(this.context)},s.prototype.endMobileSession=function(e){return this.remoteDataSource.endMobileSession(this.context,e)},s.prototype.getOAuthURL=function(e,t){return this.remoteDataSource.getOAuthURL(this.context,e,t)},s.prototype.findTemporaryID=function(e,t){return e=o(this.context,e),this.remoteDataSource.findTemporaryID(e,t)}},"../../common/src/data/empty.js":function(e,t,n){"use strict";e.exports={array:[],object:{},string:"",func:function(){}}},"../../common/src/data/indexed-db-cache.jsx":function(e,t,n){"use strict";var s=function(){function e(e,t){var n=[],s=!0,o=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(s=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);s=!0);}catch(e){o=!0,r=e}finally{try{!s&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/bluebird/js/browser/bluebird.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/src/data/local-search.js"),l=n("../../common/src/mixins/update-check.js"),d=n("../../common/src/widgets/diagnostics.jsx"),u=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=i.createClass({displayName:"IndexedDBCache",mixins:[l],propTypes:{databaseName:a.string.isRequired},statics:{isAvailable:function(){return!!window.indexedDB}},getInitialState:function(){return this.tables={},{database:null,recordCounts:{},writeCount:0,readCount:0,deleteCount:0}},find:function(e){var t=this,n=e.address||"",s=e.schema,r=e.table,i=e.criteria;return this.fetchTable(n,s,r).then(function(e){var n=t.getObjectKeyName(s),a=[];if(o.isEqual(o.keys(i),[n])){var l=i[n];return l=l instanceof Array?o.sortBy(o.slice(l)):[l],o.each(l,function(t){var s={};s[n]=t;var r=o.sortedIndexBy(e,s,n),i=e[r];i&&i[n]===t&&a.push(i)}),a}return o.each(e,function(e){c.match(r,e,i)&&a.push(e)}),a}).then(function(n){c.limit(r,n,e.criteria);var s=t.state.readCount;return s+=n.length,t.setState({readCount:s}),n})},save:function(e,t){var n=this,s=e.address||"",i=e.schema,a=e.table;return this.open().then(function(e){return new r(function(r,c){var l=n.getTablePath(s,i,a),d=n.getPrimaryKeyGenerator(s,i,a),u=n.getObjectStoreName(i),p=e.transaction(u,"readwrite"),m=p.objectStore(u);p.oncomplete=function(e){r(t)},p.onerror=function(e){c(new Error(e.message))},o.each(t,function(e){var t=d(e),n={address:s,location:l,data:e};m.put(n,t)})})}).then(function(e){var t=n.state.writeCount;return t+=e.length,n.setState({writeCount:t}),n.updateTableEntry(s,i,a,e,!1),n.updateRecordCount(i,500),e})},remove:function(e,t){var n=this,s=e.address||"",i=e.schema,a=e.table;return this.open().then(function(e){return new r(function(r,c){var l=n.getPrimaryKeyGenerator(s,i,a),d=(n.getTablePath(s,i,a),n.getObjectStoreName(i)),u=e.transaction(d,"readwrite"),p=u.objectStore(d);u.oncomplete=function(e){r(t)},u.onerror=function(e){c(new Error(e.message))},o.each(t,function(e){var t=l(e);p.delete(t)})})}).then(function(e){var t=n.state.deleteCount;return t+=e.length,n.setState({deleteCount:t}),n.updateTableEntry(s,i,a,e,!0),n.updateRecordCount(i,500),e})},clean:function(e){var t=this;return this.open().then(function(n){return new r(function(s,r){var i=t.getObjectStoreName("remote"),a=n.transaction(i,"readwrite"),c=a.objectStore(i);if(void 0!=e.address){var l=null;e.schema&&"*"!==e.schema&&(l=e.address+"/"+e.schema+"/");var d=c.index("address"),u=d.openCursor(e.address),p=[],m=[];u.onsuccess=function(e){var t=!0,n=e.target.result;if(n){var r=n.value,i=n.primaryKey;l&&!o.startsWith(r.location,l)||(p.push(r),m.push(i)),n.continue(),t=!1}t&&(o.each(m,function(e){c.delete(e)}),s(p))}}else if(void 0!=e.count){var d=c.index("rtime"),u=d.openCursor(),p=[],m=[];u.onsuccess=function(t){var n=!0,r=t.target.result;if(r){var i=r.value,a=r.primaryKey;p.push(i),m.push(a),p.length<e.count&&(r.continue(),n=!1)}n&&(o.each(m,function(e){c.delete(e)}),s(p))}}else{if(void 0==e.before)return[];var d=c.index("rtime"),u=d.openCursor(),p=[],m=[];u.onsuccess=function(t){var n=!0,r=t.target.result;if(r){var i=r.value,a=r.primaryKey;i.data.rtime<e.before&&(p.push(i),m.push(a),r.continue(),n=!1)}n&&(o.each(m,function(e){c.delete(e)}),s(p))}}})}).then(function(e){var n=e.length;if(n>0){var r=t.state.deleteCount;r+=e.length,t.setState({deleteCount:r}),t.updateRecordCount("remote",500);var i=[];o.each(e,function(e){var t=e.address||"",n=e.location.substr(t.length+1).split("/"),r=s(n,2),a=r[0],c=r[1],l=o.find(i,{address:t,schema:a,table:c});l||(l={address:t,schema:a,table:c,objects:[]},i.push(l)),l.objects.push(e.data)}),o.each(i,function(e){t.updateTableEntry(e.address,e.schema,e.table,e.objects,!0)})}return n}).catch(function(e){return t.destroy()})},open:function(){var e=this;return this.databasePromise||(this.databasePromise=new r(function(t,n){var s=window.indexedDB.open(e.props.databaseName,1);s.onsuccess=function(n){var s=n.target.result;t(s),e.setState({database:s})},s.onerror=function(e){n(new Error(e.message))},s.onupgradeneeded=function(e){var t=e.target.result;t.onerror=function(e){n(new Error(e.message))},t.createObjectStore("local-data").createIndex("location","location",{unique:!1});var s=t.createObjectStore("remote-data");s.createIndex("location","location",{unique:!1}),s.createIndex("address","address",{unique:!1}),s.createIndex("rtime","data.rtime",{unique:!1})}})),this.databasePromise},destroy:function(){var e=this;return new r(function(t,n){var s=window.indexedDB.deleteDatabase(e.props.databaseName);s.onsuccess=function(e){t(!0)},s.onerror=function(e){t(!1)}})},reset:function(e,t){var n="local"===t?["local"]:o.filter(["remote",e,t]);o.unset(this.tables,n)},getObjectStoreName:function(e){return"local"===e?"local-data":"remote-data"},getObjectKeyName:function(e){return"local"===e?"key":"id"},getTablePath:function(e,t,n){return"local"===t?n:e+"/"+t+"/"+n},getPrimaryKeyGenerator:function(e,t,n){var s=this.getTablePath(e,t,n);return"local"===t?function(e){return s+"/"+e.key}:function(e){var t=("0000000000"+e.id).slice(-10);return s+"/"+t}},getTableEntry:function(e,t,n){var s="local"===t?["local",n]:["remote",e,t,n],r=o.get(this.tables,s);return r||(r={promise:null,objects:null},o.set(this.tables,s,r)),r},updateTableEntry:function(e,t,n,s,r){var i=this.getTableEntry(e,t,n);if(i.objects){var a=this.getObjectKeyName(t);o.each(s,function(e){var t=o.sortedIndexBy(i.objects,e,a),n=i.objects[t];n&&n[a]===e[a]?r?i.objects.splice(t,1):i.objects[t]=e:r||i.objects.splice(t,0,e)})}},fetchTable:function(e,t,n){var s=this.getTableEntry(e,t,n);return s.promise||(s.promise=this.loadTable(e,t,n).then(function(e){return s.objects=e,s.objects})),s.promise},loadTable:function(e,t,n){var s=this;return this.open().then(function(i){return new r(function(r,a){var c=s.getObjectStoreName(t),l=s.getObjectKeyName(t),d=i.transaction(c,"readonly"),u=d.objectStore(c),p=u.index("location"),m=s.getTablePath(e,t,n),h=p.openCursor(m),f=[];h.onsuccess=function(e){var t=e.target.result;if(t){var n=t.value,s=n.data,i=o.sortedIndexBy(f,s,l);f.splice(i,0,s),t.continue()}else r(f)}})})},updateRecordCount:function(e,t){var n=this,s=this.getObjectStoreName(e),r="updateRecordCountTimeouts."+s,i=o.get(this,r);i&&clearTimeout(i),i=setTimeout(function(){n.open().then(function(e){e.transaction(s,"readonly").objectStore(s).count().onsuccess=function(e){var t=o.clone(n.state.recordCounts);t[s]=e.target.result,n.setState({recordCounts:t})}}).catch(function(e){}),o.set(n,r,0)},t||0),o.set(this,r,i)},componentDidMount:function(){this.updateRecordCount("remote"),this.updateRecordCount("local")},render:function(){var e=this.state.database,t=o.get(this.state.recordCounts,"local-data"),n=o.get(this.state.recordCounts,"remote-data");return i.createElement(d,{type:"indexed-db-cache"},i.createElement(u,{label:"Database details"},i.createElement("div",null,"Name: ",e?e.name:""),i.createElement("div",null,"Version: ",e?e.version:"")),i.createElement(u,{label:"Usage"},i.createElement("div",null,"Local objects: ",t),i.createElement("div",null,"Remote objects: ",n),i.createElement("div",null,"Objects read: ",this.state.readCount),i.createElement("div",null,"Objects written: ",this.state.writeCount),i.createElement("div",null,"Objects deleted: ",this.state.deleteCount)))}})},"../../common/src/data/local-search.js":function(e,t,n){"use strict";function s(e,t,n){var s=!0;for(var o in n){var a=n[o];if(void 0!==a){if(t.hasOwnProperty(o)){var c=t[o];if(a instanceof Array)if(c instanceof Array)0===i.intersection(a,c).length&&(s=!1);else{var l;l=c instanceof Object?i.some(a,function(e){return i.isEqual(e,c)}):i.includes(a,c),l||(s=!1)}else if(c!==a){"object"===(void 0===c?"undefined":r(c))&&"object"===(void 0===a?"undefined":r(a))?i.isEqual(c,a)||(s=!1):s=!1;break}}else switch(o){case"time_range":if(a){var d=a.substr(1,a.length-2).split(","),u=d[0],p=d[1];u<=t.ptime&&t.ptime<p||(s=!1)}break;case"exclude":a instanceof Array?i.includes(a,t.id)&&(s=!1):a===t.id&&(s=!1);break;case"newer_than":!t.ptime||t.ptime>a||(s=!1);break;case"older_than":!t.ptime||t.ptime<a||(s=!1);break;case"search":s=!1}if(!s)break}}return s}function o(e,t,n){if(n&&(n.limit&&t.length>n.limit&&t.splice(0,t.length-n.limit),n.per_user_limit)){var s=n.per_user_limit,o={},r=[];i.eachRight(t,function(e){var t=!1;if(e.hasOwnProperty("user_id")){var n=e.user_id,a=o[n]||0;a<s&&(o[n]=a+1,t=!0)}else e.hasOwnProperty("user_ids")&&i.each(e.user_ids,function(e){var n=o[e]||0;n<s&&(o[e]=n+1,t=!0)});t||r.push(e)}),i.pullAll(t,r)}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n("../node_modules/lodash/lodash.js");e.exports={match:s,limit:o}},"../../common/src/data/local-storage-cache.jsx":function(e,t,n){"use strict";function s(e){try{return JSON.parse(e)}catch(e){return null}}function o(e,t){var n=a.sortedIndexBy(e,{id:t},"id"),s=e[n];if(s&&s.id===t)return s}function r(e,t){var n=a.sortedIndexBy(e,t,"id"),s=e[n];s&&s.id===t.id?e[n]=t:e.splice(n,0,t)}function i(e,t){var n=a.sortedIndexBy(e,t,"id"),s=e[n];s&&s.id===t.id&&e.splice(n,1)}var a=n("../node_modules/lodash/lodash.js"),c=n("../node_modules/bluebird/js/browser/bluebird.js"),l=n("../node_modules/react/react.js"),d=l.PropTypes,u=n("../../common/src/data/local-search.js");e.exports=l.createClass({displayName:"LocalStorageCache",propTypes:{databaseName:d.string.isRequired},statics:{isAvailable:function(){return!!window.localStorage}},getInitialState:function(){var e=localStorage.getItem(this.props.databaseName);return this.localData=s(e)||{},this.remoteData={},{}},getRows:function(e,t,n){var s="local"===t?this.localData:this.remoteData,o=[e,t,n],r=a.get(s,o);return r||(r=[],a.set(s,o,r)),r},saveRows:function(e,t,n){if("local"===t){var s=JSON.stringify(this.localData);localStorage.setItem(this.props.databaseName,s)}},find:function(e){var t,n=e.server||"",s=e.schema,r=e.table,i=e.criteria,l=this.getRows(n,s,r);if(i&&void 0!==i.id&&1===a.size(i)){var d=i.id;d instanceof Array||(d=[d]),t=a.filter(a.map(d,function(e){return o(l,e)}))}else t=a.filter(l,function(e){return u.match(r,e,i)});return u.limit(r,t,i),c.resolve(t)},save:function(e,t){var n=e.server||"",s=e.schema,o=e.table,i=this.getRows(n,s,o);return a.each(t,function(e){r(i,a.cloneDeep(e))}),this.saveRows(n,s,o),c.resolve(t)},remove:function(e,t){var n=e.server||"",s=e.schema,o=e.table,r=this.getRows(n,s,o);return a.each(t,function(e){i(r,e)}),this.saveRows(n,s,o),c.resolve(t)},clean:function(e){var t=this.remoteData,n=0;if(void 0!==e.server){var s=e.server,o=a.get(t,s);a.each(o,function(e){a.each(e,function(e){n+=e.length})}),a.set(t,s,void 0)}else if(void 0!==e.count){var r=[];a.each(t,function(e){a.each(e,function(e){a.each(e,function(e){for(var t=0;t<e.length;t++)r.push(e[t])})})}),r.sort(function(e,t){return e.rtime<t.rtime?-1:e.rtime>t.rtime?1:0}),r.splice(e.count),a.each(t,function(e){a.each(e,function(e){a.each(e,function(e){for(var t=e.length-1;t>=0;t--){var s=e[t];-1!==r.indexOf(s)&&(e.splice(t,1),n++)}})})})}else void 0!==e.before&&a.each(t,function(t){a.each(t,function(t){a.each(t,function(t){for(var s=t.length-1;s>=0;s--){t[s].rtime<e.before&&(t.splice(s,1),n++)}})})});return c.resolve(n)},render:function(){return l.createElement("div",null)}})},"../../common/src/data/merger.js":function(e,t,n){"use strict";function s(e,t,n,r){var i={},c=l.union(l.keys(e),l.keys(t));return l.each(c,function(c){var d,u=e?e[c]:void 0,p=t?t[c]:void 0,m=n?n[c]:void 0;if(l.isEqual(u,p))d=l.cloneDeep(u);else if(l.isEqual(u,m))d=l.cloneDeep(p);else if(l.isEqual(p,m))d=l.cloneDeep(u);else{var h=r?r[c]:void 0;d=a(u)&&a(p)?s(u,p,m,h):"string"==typeof u||"string"==typeof p?o(u,p,m):"function"==typeof h?h(u,p,m):p}void 0!==d&&(i[c]=d)}),i}function o(e,t,n){"string"!=typeof e&&(e=""),"string"!=typeof t&&(t=""),"string"!=typeof n&&(n="");for(var s=d.diffSentences(e,t),o=r(n,t),a=[],c=0;c<s.length;c++){var l=s[c];if(l.removed){var e=l.value,t="";s[c+1]&&s[c+1].added&&(t=s[c+1].value,c++),a.push({a:e,b:t})}else if(l.added){var e="",t=l.value;a.push({a:e,b:t})}else a.push(l.value)}for(var u=0,p=0,m=[],c=0;c<a.length;c++){var h=a[c];"string"==typeof h?(m.push(h),u+=h.length,p+=h.length):(i(p,h.b.length,o)?m.push(h.a):m.push(h.b),u+=h.a.length,p+=h.b.length)}return m.join("")}function r(e,t){for(var n=[],s=d.diffSentences(e,t),o=0,r=0,i=0;i<s.length;i++){var a=s[i],c=a.value.length;a.removed?r+=c:a.added?o+=c:(n.push({index:o,length:c}),r+=c,o+=c)}return n}function i(e,t,n){for(var s=0;s<n.length;s++){var o=n[s];if(o.index<=e&&e+t<=o.index+o.length)return!0}return!1}function a(e){return"object"===(void 0===e?"undefined":c(e))&&e.constructor===Object}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n("../node_modules/lodash/lodash.js"),d=n("../node_modules/diff/dist/diff.js");e.exports={mergeObjects:s,mergeStrings:o}},"../../common/src/data/remote-data-source/change.js":function(e,t,n){"use strict";function s(e,t,n){var s=this;this.location=e,this.objects=o.map(t,function(e){return e.uncommitted||(e=o.clone(e),e.id||(e.id=c.allocate()),e.uncommitted=!0),e}),this.removed=o.map(t,function(e){return!1}),this.dispatched=!1,this.delayed=!1,this.dispatching=!1,this.committed=!1,this.canceled=!1,this.timeout=0,this.promise=new r(function(e,t){s.resolvePromise=e,s.rejectPromise=t}),this.dependentPromises=[],this.delivered=null,this.received=null,this.error=null,this.time=null,n&&(n.delay&&(this.delayed=!0,this.timeout=setTimeout(function(){s.delayed=!1,s.dispatching&&(s.dispatching=!1,s.dispatch())},n.delay)),this.onConflict=n.onConflict),this.onDispatch=null,this.onCancel=null}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/bluebird/js/browser/bluebird.js"),i=n("../node_modules/async-do-while/index.js"),a=n("../../common/src/data/local-search.js"),c=n("../../common/src/data/remote-data-source/temporary-id.js");e.exports=s,s.prototype.dispatch=function(){var e=this;if(!this.dispatched&&!this.canceled)return this.delayed?void(this.dispatching=!0):void r.all(this.dependentPromises).then(function(){var t=1,n=1e3;return i.while(function(){return!e.committed&&!e.canceled&&!e.dispatched}),i.do(function(){return e.dispatched=!0,e.onDispatch(e).then(function(t){e.committed=!0,e.received=t,e.time=new Date,e.canceled?e.resolvePromise([]):e.resolvePromise(t)}).catch(function(s){return s.statusCode>=400&&s.statusCode<=499&&(e.error=s,e.rejectPromise(s)),e.dispatched=!1,n=Math.min(2*n,1e4),r.delay(n).then(function(){e.canceled?e.resolvePromise([]):t++})})}),i.end()})},s.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.dispatched||this.timeout&&clearTimeout(this.timeout))},s.prototype.merge=function(e){var t=this;if(o.isEqual(e.location,this.location)){var n=!1;if(o.each(this.objects,function(t,s){var r=o.findIndex(e.objects,{id:t.id});if(-1!==r&&!e.removed[r])if(!e.dispatched||t.id>=1){var i=e.objects[r];o.forIn(i,function(e,n){void 0===t[n]&&(t[n]=e)}),e.removed[r]=!0}else n=!0}),n){var s=e.promise.then(function(){o.each(t.objects,function(t){if(t.id<1){var n=e.findPermanentID(t.id);n&&(t.id=n)}})}).catch(function(e){});this.dependentPromises.push(s)}else o.every(e.removed)&&e.cancel()}},s.prototype.findPermanentID=function(e){var t=o.findIndex(this.delivered,{id:e});if(-1!==t&&this.received){var n=this.received[t];if(n)return n.id}},s.prototype.apply=function(e,t){var n=this;this.canceled||o.isMatch(e,this.location)&&o.each(this.objects,function(s,r){if(!n.removed[r]){var i=o.findIndex(e.results,{id:s.id});if(-1!==i)if(s.deleted&&!t)e.results.splice(i,1);else{var c=a.match(e.table,s,e.criteria);if(c){var l,d=e.results[i],u=o.some(d,function(e,t){if(!s.hasOwnProperty(t))return!0});l=u?o.extend({},d,s):s,e.results[i]=l}else e.results.splice(i,1)}else if(!s.deleted||t){var c=a.match(e.table,s,e.criteria);c&&e.results.push(s)}}})},s.prototype.deliverables=function(){var e=this;return this.delivered=o.filter(this.objects,function(t,n){return!e.removed[n]}),o.map(this.delivered,function(e){return e.id<1?o.omit(e,"id","uncommitted"):o.omit(e,"uncommitted")})},s.prototype.noop=function(){return this.objects=o.filter(this.objects,function(e){return!(e.deleted&&e.id<1)}),o.isEmpty(this.objects)},s.prototype.matchLocation=function(e){return this.location.address===e.address&&(this.location.schema===e.schema&&this.location.table===e.table)}},"../../common/src/data/remote-data-source/index.jsx":function(e,t,n){"use strict";function s(e,t){var n=[];return u.each(e,function(e,s){var o=u.sortedIndexBy(t,{id:e},"id"),r=t?t[o]:null;r&&r.id===e||n.push(e)}),n}function o(e,t,n){var s=[];return u.each(e,function(e,o){var r=t[o],i=u.sortedIndexBy(n,{id:e},"id"),a=n?n[i]:null;a&&a.id===e&&a.gn===r||s.push(e)}),s}function r(e,t,n){var s=[];return u.each(n,function(t){u.includes(e,t.id)||s.push(t.id)}),s}function i(e,t){return u.isEmpty(t)?e:(e=u.slice(e),u.each(t,function(t){var n=u.sortedIndexBy(e,{id:t},"id"),s=e?e[n]:null;s&&s.id===t&&e.splice(n,1)}),e)}function a(e,t){return e=u.slice(e),u.each(t,function(t){var n=u.sortedIndexBy(e,t,"id"),s=e[n];s&&s.id===t.id?e[n]=t:e.splice(n,0,t)}),e}function c(e,t){t||(t="primary");var n=u.find(R,{address:e,type:t});return n||(n={address:e,type:t},R.push(n)),n}function l(e){return u.filter(R,e)}function d(e){u.pull(R,e)}var u=n("../node_modules/lodash/lodash.js"),p=n("../node_modules/bluebird/js/browser/bluebird.js"),m=n("../node_modules/react/react.js"),h=m.PropTypes,f=n("../node_modules/moment/moment.js"),g=n("../../common/src/transport/http-request.js"),v=n("../../common/src/errors/http-error.js"),b=n("../../common/src/data/local-search.js"),y=n("../../common/src/data/remote-data-source/search.js"),j=n("../../common/src/data/remote-data-source/change.js"),x=n("../../common/src/data/remote-data-source/storage.js"),w=n("../../common/src/data/remote-data-source/removal.js"),k=n("../../common/src/mixins/update-check.js"),_=n("../../common/src/widgets/diagnostics.jsx"),E=n("../../common/src/widgets/diagnostics-section.jsx"),C=n("../../common/src/data/remote-data-source/recent-search-table.jsx"),S=n("../../common/src/data/remote-data-source/recent-storage-table.jsx");e.exports=m.createClass({displayName:"RemoteDataSource",mixins:[k],propTypes:{basePath:h.string,discoveryFlags:h.object,retrievalFlags:h.object,online:h.bool,connected:h.bool,inForeground:h.bool,prefetching:h.bool,cache:h.object,cacheValidation:h.bool,refreshInterval:h.number,sessionRetryInterval:h.number,onChange:h.func,onSearch:h.func,onAuthorization:h.func,onExpiration:h.func,onViolation:h.func,onStupefaction:h.func},getDefaultProps:function(){return{basePath:"/srv/data",discoveryFlags:{},retrievalFlags:{},online:!0,connected:!1,inForeground:!0,prefetching:!0,cacheValidation:!0,refreshInterval:900,sessionRetryInterval:5e3}},getInitialState:function(){this.searching=!1,this.disconnected=!1,this.idMappings={},this.cacheValidation={},this.cacheClearing={},this.changeMonitors=[];var e={recentSearchResults:[],recentStorageResults:[],recentRemovalResults:[],changeQueue:[]};return u.assign(this,e),e},updateList:function(e,t){var n=this[e],s=t(n);this[e]=s;var o={};o[e]=s,this.setState(o)},isOnline:function(){return this.props.online},isReceivingNotification:function(){return this.props.connected},beginSession:function(e,t){var n=this,s=e.address,o=c(s);if(!o.promise){var r=s+"/srv/session/",i={responseType:"json",contentType:"json"};o.promise=g.fetch("POST",r,{area:t},i).then(function(e){if(u.assign(o,e.session),o.handle)return{system:e.system,servers:e.servers};throw new v(o.error)}).catch(function(e){throw o.promise=null,setTimeout(n.triggerChangeEvent,n.props.sessionRetryInterval),e})}return o.promise},checkSession:function(e){var t=this,n=e.address,s=c(n),o=s.handle;if(!o)return p.resolve(!1);var r=n+"/srv/session/",i={responseType:"json"};return g.fetch("GET",r,{handle:o},i).then(function(e){if(e&&e.session&&u.assign(s,e.session),s.token)return t.triggerAuthorizationEvent(s),!0;if(s.error)throw new v(s.error);return!1}).catch(function(e){throw s.promise=null,t.triggerChangeEvent(),e})},submitPassword:function(e,t,n){var s=this,o=e.address,r=c(o),i=r.handle;if(!i)return p.resolve(!1);var a=o+"/srv/session/htpasswd/",l={handle:i,username:t,password:n},d={responseType:"json",contentType:"json"};return g.fetch("POST",a,l,d).then(function(e){return u.assign(r,e.session),s.triggerAuthorizationEvent(r),null}).catch(function(e){throw 401!==e.statusCode&&(r.promise=null,s.triggerChangeEvent()),e})},endSession:function(e){var t=this,n=e.address,s=c(n),o=s.handle;return o?p.resolve(s.promise).then(function(){var e=n+"/srv/session/",r={responseType:"json",contentType:"json"};return g.fetch("DELETE",e,{handle:o},r).catch(function(e){console.error(e)}).then(function(){return d(s),t.clearRecentOperations(n),t.clearCachedSchemas(n),t.triggerExpirationEvent(s),null})}):p.resolve(null)},beginMobileSession:function(e,t){var n=e.address,s=c(n,"mobile");if(!s.promise){var o=c(n),r=o.handle,i=n+"/srv/session/",a={responseType:"json",contentType:"json"};s.promise=g.fetch("POST",i,{area:t,handle:r},a).then(function(e){if(u.assign(s,e.session),s.handle)return s.handle;throw v(s.error)}).catch(function(e){throw s.promise=null,e})}return s.promise},acquireMobileSession:function(e,t){var n=this,s=e.address,o=c(s);if(o.handle!==t&&(o.promise=null,o.handle=t),!o.promise){var r=s+"/srv/session/",i={responseType:"json",contentType:"json"};o.promise=g.fetch("GET",r,{handle:t},i).then(function(e){if(u.assign(o,e.session),o.token)return n.triggerAuthorizationEvent(o),o.user_id;throw new v(o.error)}).catch(function(e){throw setTimeout(function(){o.promise=null,o.handle=null},5e3),e})}return o.promise},releaseMobileSession:function(e){var t=e.address,n=c(t,"mobile");return n.promise?n.promise.then(function(){d(n)}):p.resolve()},endMobileSession:function(e,t){var n=e.address,s=n+"/srv/session/",o={responseType:"json",contentType:"json"};return g.fetch("DELETE",s,{handle:t},o).then(function(){return null})},getOAuthURL:function(e,t,n){var s=e.address,o=c(s),r=o.handle;if(!r)return"";var i="sid="+t.id+"&handle="+r;return"activation"===n?i+="&activation=1":"test"===n&&(i+="&test=1"),s+"/srv/session/"+t.type+"/?"+i},hasAuthorization:function(e){return!!c(e.address).token},restoreSession:function(e){if(f(e.etime)>f()&&e.handle&&e.token){var t=c(e.address);u.assign(t,e)}},start:function(e){return p.resolve().then(function(){if("local"===e.schema)return 0;var t=e.address,n=c(t);if(n.token)return n.user_id;throw new v(401)})},find:function(e){var t=this,n=new y(e);if(n.isLocal())return this.searchLocalCache(n).then(function(){return n.results});var s,o=u.get(e,"by.constructor.displayName"),r=e.required,i=e.committed;s=!0===e.blocking?"insufficient":!1===e.blocking?"never":void 0==e.blocking?"insufficient":e.blocking,r&&"never"===s&&(s="incomplete");var a,c=this.findExistingSearch(n);if(c&&c.promise.isRejected()&&(c=null),c){o&&(u.includes(c.by,o)||c.by.push(o));if("expired"===(c.promise.isFulfilled()?c.isFresh(this.props.refreshInterval)?"complete":c.updating?"updating":"expired":"running")){var l=this.searchRemoteDatabase(c).then(function(e){return e&&t.triggerChangeEvent(),c.results}),d=!0;"expired"!==s&&(d=!1),d&&(c.promise=l)}a=c}else n=this.addSearch(n),n.promise=this.searchLocalCache(n).then(function(){var e;if("complete"===(e=n.isMeetingExpectation()?n.isSufficientlyRecent(t.props.refreshInterval)?"complete":"stale":n.isSufficientlyCached()?"incomplete":"insufficient"))return n.results;var o=t.searchRemoteDatabase(n).then(function(e){return e&&t.triggerChangeEvent(),a.results}),r=!0;return"stale"===e?"incomplete"!==s&&"insufficient"!==s||(r=!1):"incomplete"===e&&"insufficient"===s&&(r=!1),r?o:n.results}),a=n;return a.promise.then(function(s){if(u.get(t.props.discoveryFlags,"include_uncommitted")&&!0!==i&&(a=t.applyUncommittedChanges(a)),r&&!a.isMeetingExpectation())throw t.triggerStupefactionEvent(e,n.results),new v(404);return a.results})},save:function(e,t,n){var s=this,o=this.addStorage(new x(e,t,n));return o.isLocal()?this.updateLocalDatabase(o).then(function(){return s.triggerChangeEvent(),o.results}):this.updateRemoteDatabase(o).then(function(){return o.cancelled?[]:(s.updateLocalCache(o),s.updateRecentSearchResults(o),s.triggerChangeEvent(),o.results)})},remove:function(e,t){var n=this,s=this.addRemoval(new w(e,t));return s.isLocal()?this.updateLocalDatabase(s).then(function(){return n.triggerChangeEvent(),s.results}):this.updateRemoteDatabase(s).then(function(){return n.updateLocalCache(s),n.updateRecentSearchResults(s),n.triggerChangeEvent(),s.results})},await:function(e,t,n){var s=this,o={location:u.pick(e,"address","schema","table"),id:t.id,promise:null,resolve:null},r=new p(function(e){o.resolve=e});return o.promise=r.timeout(n).then(function(){return!0}).catch(function(e){return!1}).finally(function(){u.pull(s.changeMonitors,o)}),this.changeMonitors.push(o),o.promise},refresh:function(e,t){var n=this.getRelevantRecentSearches(e);u.each(n,function(e){var n=e.results,s=!1,o=u.sortedIndexBy(n,t,"id"),r=n[o];r&&r.id===t.id&&(s=!0),s&&(e.dirty=!0)})},abandon:function(e,t){this.updateList("recentSearchResults",function(n){var s=u.slice(n);return u.each(s,function(n){n.isLocal()||n.address===e&&(t&&n.schema!==t||(n.dirty=!0))}),s}),this.props.cache&&this.props.cache.reset(e,t)},invalidate:function(e){var t=this;if(!e||(e=this.omitOwnChanges(e),!u.isEmpty(e)))return this.reconcileChanges(e).then(function(){var n=[];return t.updateList("recentSearchResults",function(t){var s=u.slice(t);return u.each(s,function(t){if(!t.dirty){var s;s=!e||u.some(e,function(e){if(t.matchLocation(e)){if(!t.isMeetingExpectation())return!0;var n=u.sortedIndexBy(t.results,{id:e.id},"id"),s=t.results[n];if(s&&s.id===e.id)return!0}}),s&&(t.dirty=!0,n.push(t))}}),s}),e||(t.cacheValidation={}),!u.isEmpty(n)&&(t.props.online&&t.props.connected&&(t.triggerChangeEvent(),t.props.prefetching&&t.schedulePrefetch(n)),!0)})},triggerChangeMonitors:function(e,t){u.each(this.changeMonitors,function(n){u.isEqual(e,n.location)&&u.includes(t,n.id)&&n.resolve()})},omitOwnChanges:function(e){var t=this;return e?u.filter(e,function(e){var n=u.filter(t.changeQueue,function(t){if(t.dispatched&&!t.failed&&t.matchLocation(e))return!0});return!u.some(n,function(t){return t.committed?u.some(t.received,function(t){if(t.id===e.id&&t.gn>=e.gn)return!0}):u.some(t.delivered,function(t){if(t.id===e.id)return!0})})}):null},reconcileChanges:function(e){var t=this;return p.each(this.state.changeQueue,function(n){if(!1!==n.onConflict&&!n.dispatched){var s=u.filter(e,function(e){return n.matchLocation(e)}),o=u.filter(n.objects,function(t,o){if(!n.removed[o])return!e&&t.id>=1||u.some(s,function(e){if(e.id===t.id)return!0})});if(u.isEmpty(o))return null;var r=u.map(o,"id");return t.retrieveRemoteObjects(n.location,r,!0).then(function(e){return u.each(o,function(s){var o=u.find(e,{id:s.id});if(o&&o.gn>s.gn){var r=!1;if(n.onConflict&&n.onConflict({type:"conflict",target:t,local:s,remote:o,preventDefault:function(){r=!0}}),!r){var i=u.indexOf(n.objects,s);n.removed[i]=!0}}}),u.every(n.removed)&&n.cancel(),null})}})},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},triggerAuthorizationEvent:function(e){this.props.onAuthorization&&this.props.onAuthorization({type:"authorization",target:this,session:e})},triggerExpirationEvent:function(e){this.props.onExpiration&&this.props.onExpiration({type:"expiration",target:this,session:e})},triggerViolationEvent:function(e,t){this.props.onViolation&&this.props.onViolation({type:"violation",target:this,address:e,schema:t})},triggerStupefactionEvent:function(e,t){this.props.onStupefaction&&this.props.onStupefaction({type:"stupefaction",target:this,query:e,results:t})},triggerSearchEvent:function(e){this.props.onSearch&&this.props.onSearch({type:"search",target:this,searching:e})},findExistingSearch:function(e){var t=u.findIndex(this.recentSearchResults,function(t){return e.match(t)});if(-1!==t){var n=this.recentSearchResults[t];return n.prefetching=!0,this.updateList("recentSearchResults",function(e){var s=u.slice(e);return s.splice(t,1),s.unshift(n),s}),n}return null},addSearch:function(e){return this.updateList("recentSearchResults",function(t){var n=u.slice(t);for(n.unshift(e);n.length>1024;)n.pop();return n}),e},addStorage:function(e){return this.updateList("recentStorageResults",function(t){var n=u.slice(t);for(n.unshift(e),u.remove(n,{canceled:!0});n.length>32;)n.pop();return n}),e},addRemoval:function(e){return this.updateList("recentRemovalResults",function(t){var n=u.clone(t);for(n.unshift(e);n.length>32;)n.pop();return n}),e},searchRemoteDatabase:function(e){var t=this;if(e.isLocal())return p.resolve(!1);if(!this.props.online)return p.resolve(!1);if(e.updating)return p.resolve(!1);e.updating=!0,e.scheduled=!1,this.searching||(this.searching=!0,this.triggerSearchEvent(!0));var n=e.getLocation(),s=e.criteria;return e.start(),this.discoverRemoteObjects(n,s).then(function(n){return t.searchLocalCache(e,n).return(n)}).then(function(s){var c=s.ids,l=s.gns,d=o(c,l,e.results),m=r(c,l,e.results);if(u.isEmpty(d)){if(u.isEmpty(m))return null;return i(e.results,m)}return t.retrieveRemoteObjects(n,d).then(function(s){var o=s,r=a(e.results,o);if(r=i(r,m),u.get(t.props.discoveryFlags,"include_uncommitted")){var c=u.filter(t.changeQueue,function(e){if(e.dispatched&&!e.committed&&e.matchLocation(n))return!0});if(!u.isEmpty(c)){var l=u.map(c,"promise");return p.all(l).reflect().then(function(){return r})}}return r})}).then(function(n){return e.finish(n),t.updateList("recentSearchResults",function(e){return u.slice(e)}),t.updateLocalCache(e),!!n}).finally(function(){e.updating=!1,t.searchingEndTimeout&&clearTimeout(t.searchingEndTimeout),t.searchingEndTimeout=setTimeout(function(){var e=u.find(t.recentSearchResults,{scheduled:!0});e?t.searchRemoteDatabase(e):t.searching&&(t.searching=!1,t.triggerSearchEvent(!1)),t.searchingEndTimeout=0},250)})},discoverRemoteObjects:function(e,t){return this.performRemoteAction(e,"discovery",t)},retrieveRemoteObjects:function(e,t){return this.performRemoteAction(e,"retrieval",{ids:t})},updateRemoteDatabase:function(e){var t=this,n=new j(e.getLocation(),e.objects,e.options);return u.each(this.changeQueue,function(e){e.committed||e.canceled||n.merge(e)}),n.noop()?(e.finish(e.objects),p.resolve()):(n.onDispatch=function(n){var s=n.deliverables(),o=n.location;return e.start(),t.performRemoteAction(o,"storage",{objects:s}).then(function(e){return t.saveIDMapping(o,n.objects,e),e})},this.queueChange(n),this.props.online&&n.dispatch(),this.triggerChangeEvent(),n.promise.then(function(t){n.canceled?e.cancel():e.finish(t)}).catch(function(e){throw t.triggerChangeEvent(),e}))},queueChange:function(e){this.updateList("changeQueue",function(t){var n=f().subtract(1,"minute").toISOString(),s=u.reject(t,function(e){if(e.committed){if(e.time<n)return!0}else if(e.dispatched){if(e.error)return!0}else if(e.canceled)return!0});return s.push(e),s})},saveIDMapping:function(e,t,n){if(t.length===n.length){var s=[e.address,e.schema,e.table],o=u.get(this.idMappings,s);o||(o=[],u.set(this.idMappings,s,o)),u.each(t,function(e,t){if(e.id<1){var s=n[t];u.remove(o,{permanent:s.id}),o.push({temporary:e.id,permanent:s.id})}})}},findTemporaryID:function(e,t){var n=[e.address,e.schema,e.table],s=u.get(this.idMappings,n),o=u.find(s,{permanent:t});if(o)return o.temporary},applyUncommittedChanges:function(e){var t=u.filter(this.changeQueue,{committed:!1,canceled:!1,error:null});if(!u.isEmpty(t)){var n=u.get(this.props.discoveryFlags,"include_deleted");e=u.clone(e),e.results=u.slice(e.results),u.each(t,function(t){t.apply(e,n)})}return e},performRemoteAction:function(e,t,n){var s=this,o=e.address,r=this.props.basePath,i=e.schema,a=e.table;if(!i)return p.reject(new Error("No schema specified"));if(!a)return p.reject(new Error("No table specified"));var l;"retrieval"===t||"storage"===t?l=this.props.retrievalFlags:"discovery"===t&&(l=u.omit(this.props.discoveryFlags,"include_uncommitted"));var m=""+o+r+"/"+t+"/"+i+"/"+a+"/",h=c(o),f=u.assign({},n,l,{auth_token:h.token}),v={contentType:"json",responseType:"json"};return g.fetch("POST",m,f,v).then(function(e){return e}).catch(function(e){throw 401!==e.statusCode&&403!=e.statusCode||(s.clearRecentOperations(o),s.clearCachedSchemas(o),401===e.statusCode?(d(h),s.triggerExpirationEvent(h)):403==e.statusCode&&s.triggerViolationEvent(o,i),s.triggerChangeEvent()),e})},updateLocalDatabase:function(e){var t=this;return p.try(function(){var n=t.props.cache,s=e.getLocation();return e.start(),e.promise=e instanceof w?n.remove(s,e.objects):n.save(s,e.objects),e.promise.then(function(t){e.finish(t)})})},searchLocalCache:function(e,t){var n=this;return p.try(function(){var o=n.props.cache;if(t){if(!e.remote)return!1;var r=s(t.ids,e.results);if(u.isEmpty(r))return!1;var i=u.assign({criteria:{id:r}},e.getLocation());return n.validateCache(i.address,i.schema).then(function(){return o.find(i).then(function(t){return e.results=a(e.results,t),!0})})}if(e.remote)return!1;var i=e.getQuery();return n.validateCache(i.address,i.schema).then(function(){return o.find(i).then(function(t){return e.results=t,!0})})}).catch(function(e){return console.error(e),!1})},validateCache:function(e,t){var n=this;if("local"===t||!this.props.online||!this.props.cacheValidation)return p.resolve();var s=(this.props.cache,[e,t]),o=u.get(this.cacheValidation,s);return o||(o=this.getRemoteSignature(e,t).then(function(s){return n.getCacheSignature(e,t).then(function(o){return o?o!==s?n.clearCachedObjects(e,t).then(function(){return n.setCacheSignature(e,t,s),null}):void 0:n.waitForCacheClearing(e,t).then(function(){return n.setCacheSignature(e,t,s),null})})}).catch(function(e){console.error(e),u.unset(n.cacheValidation,s)}),u.set(this.cacheValidation,s,o)),o},clearCachedSchemas:function(e){var t=this;return u.unset(this.cacheValidation,[e]),this.clearCachedObjects(e,"*").then(function(){var n=t.props.cache,s={schema:"local",table:"remote_schema"},o=e+"/";return n.find(s).filter(function(e){return u.startsWith(e.key,o)}).then(function(e){return n.remove(s,e)})})},getRemoteSignature:function(e,t){var n=""+e+this.props.basePath+"/signature/"+t,s={responseType:"json"};return g.fetch("GET",n,null,s).then(function(e){return u.get(e,"signature")})},getCacheSignature:function(e,t){var n=this.props.cache,s={schema:"local",table:"remote_schema",criteria:{key:e+"/"+t}};return n.find(s).get(0).then(function(e){return u.get(e,"signature")})},setCacheSignature:function(e,t,n){var s=this.props.cache,o={schema:"local",table:"remote_schema"},r={key:e+"/"+t,signature:n};return s.save(o,[r])},updateLocalCache:function(e){var t=this;return p.try(function(){var n=t.props.cache,s=e.getLocation();return e instanceof y?n.save(s,e.results).then(function(){return n.remove(s,e.missingResults)}):e instanceof w?n.remove(s,e.results):e instanceof x?n.save(s,e.results):void 0}).then(function(){return!0}).catch(function(e){return console.error(e),!1})},clearCachedObjects:function(e,t){var n=this;return p.try(function(){var s=n.props.cache,o=u.get(n.cacheClearing,[e,"*"]);if(o)return o;var r=[e,t],i=u.get(n.cacheClearing,r);return i||(i=s.clean({address:e,schema:t}).then(function(e){return u.unset(n.cacheClearing,r),console.log("Cache entries removed: "+e),e}),u.set(n.cacheClearing,r,i)),i})},waitForCacheClearing:function(e,t){var n=u.get(this.cacheClearing,[e,"*"]);if(n)return n;var s=u.get(this.cacheClearing,[e,t]);return s||p.resolve(0)},updateRecentSearchResults:function(e){var t=this.getRelevantRecentSearches(e.getLocation());u.each(t,function(t){var n=t.results,s=n;u.each(e.results,function(o){var r=u.sortedIndexBy(s,o,"id"),i=s[r],a=i&&i.id===o.id;if(e instanceof w)a&&(s===n&&(s=u.slice(s)),s.splice(r,1));else if(e instanceof x){var c=b.match(t.table,o,t.criteria);(c||a)&&(s===n&&(s=u.slice(s)),c&&a?s[r]=o:c&&!a?(s.splice(r,0,o),b.limit(t.table,s,t.criteria)):!c&&a&&s.splice(r,1))}}),s!==n&&(t.results=s,t.promise=p.resolve(s))})},getRelevantRecentSearches:function(e){return u.filter(this.recentSearchResults,function(t){if(t.matchLocation(e))return!0})},clearRecentOperations:function(e){var t=this,n=["recentSearchResults","recentStorageResults","recentRemovalResults"];u.each(n,function(n){t.updateList(n,function(t){return u.filter(t,function(t){return t.address!==e})})})},componentWillMount:function(){var e=this;this.sessionCheckTimeout=setInterval(function(){var t=f().add(5,"minute").toISOString(),n=l(function(e){if(e.etime<t)return!0});u.isEmpty(n)||(u.each(n,function(e){e.token||d(e)}),e.triggerChangeEvent())},6e4)},componentDidMount:function(){this.triggerChangeEvent()},componentWillReceiveProps:function(e){var t=this,n=!this.props.online&&e.online,s=!this.props.connected&&e.connected;if(n||s)this.disconnected&&(this.invalidate().then(function(){u.each(t.changeQueue,function(e){e.dispatch()})}),this.disconnected=!1);else{var o=this.props.online&&!e.online,r=this.props.connected&&!e.connected;(o||r)&&(this.disconnected=!0)}},componentWillUnmount:function(){clearInterval(this.sessionExpirationCheckInterval)},schedulePrefetch:function(e){var t=this,n=[];u.each(e,function(e){if(!e.prefetching){var t=e.getCriteriaShape();return!(!u.some(n,function(n){if(u.includes(e.by,n.component)&&u.isEqual(t,n.shape))return!0})&&(n.push(e),e.updating||(e.scheduled=!0),n.length>16))&&void 0}}),setTimeout(function(){if(!t.searching){var e=u.find(t.recentSearchResults,{scheduled:!0,updating:!1});e&&t.searchRemoteDatabase(e)}},50)},render:function(){var e=this.state.recentSearchResults,t=this.state.recentStorageResults,n=this.state.recentRemovalResults;return m.createElement(_,{type:"remote-data-source"},m.createElement(E,{label:"Recent searches"},m.createElement(C,{searches:e})),m.createElement(E,{label:"Recent storage",hidden:u.isEmpty(t)},m.createElement(S,{stores:t})),m.createElement(E,{label:"Recent removal",hidden:u.isEmpty(n)},m.createElement(S,{stores:n})))}});var R=[]},"../../common/src/data/remote-data-source/operation.js":function(e,t,n){"use strict";function s(e){var t=o.get(e,"by.constructor.displayName");"local"!==e.schema&&(this.address=e.address),this.schema=e.schema,this.table=e.table,this.startTime=null,this.finishTime=null,this.results=[],this.promise=null,this.by=t?[t]:[]}var o=n("../node_modules/lodash/lodash.js");e.exports=s,s.prototype.getLocation=function(){return this.isLocal()?o.pick(this,"schema","table"):o.pick(this,"address","schema","table")},s.prototype.matchLocation=function(e){return this.address===e.address&&(this.schema===e.schema&&this.table===e.table)},s.prototype.isLocal=function(){return"local"===this.schema},s.prototype.start=function(){var e=new Date;this.startTime=e.toISOString()},s.prototype.finish=function(e){var t=new Date(this.startTime),n=new Date;e&&(this.results=e),this.finishTime=n.toISOString(),this.duration=n-t},s.prototype.cancel=function(){this.canceled=!0},s.prototype.getTimeElapsed=function(){var e=new Date(this.finishTime);return.001*(new Date-e)}},"../../common/src/data/remote-data-source/recent-search-table.jsx":function(e,t,n){"use strict";function s(e){var t=r.filter(e.searches,function(e){return"local"!==e.schema}),n=function(e,t){var n;e.updating?n="updating":e.dirty&&(n="dirty");var s=e.duration?e.duration+"ms":"",a=JSON.stringify(e.criteria,void 0,4),c=JSON.stringify(e.criteria);return i.createElement("tr",{key:t,className:n},i.createElement("td",{className:"time"},s),i.createElement("td",{className:"schema"},e.schema),i.createElement("td",{className:"table"},e.table),i.createElement("td",{className:"criteria",title:o(a)},c),i.createElement("td",{className:"objects"},r.size(e.results)," (",e.lastRetrieved,")"),i.createElement("td",{className:"by"},r.join(e.by,", ")))};return i.createElement("table",{className:"recent-search-table"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",{className:"time"},"Time"),i.createElement("th",{className:"schema"},"Schema"),i.createElement("th",{className:"table"},"Table"),i.createElement("th",{className:"criteria"},"Criteria"),i.createElement("th",{className:"objects"},"Objects (fresh)"),i.createElement("th",{className:"by"},"By"))),i.createElement("tbody",null,r.map(t,n)))}function o(e){return e.replace(/\[([^\]]{1,50},\s*)[^\]]{50,}?(\s*)\]/g,"[$1...$2]")}var r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/react/react.js");i.PropTypes;e.exports=s},"../../common/src/data/remote-data-source/recent-storage-table.jsx":function(e,t,n){"use strict";function s(e){var t=o.filter(e.stores,function(e){return"local"!==e.schema}),n=function(e,t){var n=e.duration?e.duration+"ms":"",s=JSON.stringify(e.results,void 0,4),o=JSON.stringify(e.results);return r.createElement("tr",{key:t},r.createElement("td",{className:"time"},n),r.createElement("td",{className:"schema"},e.schema),r.createElement("td",{className:"table"},e.table),r.createElement("td",{className:"objects",title:s},o),r.createElement("td",{className:"by"},e.by))};return r.createElement("table",{className:"recent-storage-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"time"},"Time"),r.createElement("th",{className:"schema"},"Schema"),r.createElement("th",{className:"table"},"Table"),r.createElement("th",{className:"objects"},"Objects"),r.createElement("th",{className:"by"},"By"))),r.createElement("tbody",null,o.map(t,n)))}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js");r.PropTypes;e.exports=s},"../../common/src/data/remote-data-source/removal.js":function(e,t,n){"use strict";function s(e,t){o.call(this,e,t,{onConflict:!1}),this.isLocal()||(this.objects=_.map(t,function(e){return{id:e.id,deleted:!0}}))}var o=n("../../common/src/data/remote-data-source/storage.js");e.exports=s,s.prototype=Object.create(o.prototype)},"../../common/src/data/remote-data-source/search.js":function(e,t,n){"use strict";function s(e){l.call(this,e),this.criteria=e.criteria||{},this.remote=e.remote||!1,this.dirty=!1,this.updating=!1,this.scheduled=!1,this.lastRetrieved=0,this.missingResults=[],this.minimum=e.minimum,this.expected=e.expected,this.prefetch=e.prefetch,"number"!=typeof this.expected&&(this.expected=o(this.criteria,"id")||o(this.criteria,"name")||o(this.criteria,"filters")||void 0),this.criteria=r(this.criteria),this.criteria=i(this.criteria)}function o(e,t){if(e){var n=e[t];if(void 0!=n)return n instanceof Array?n.length:n?1:0}}function r(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;n++){var s=e[n];void 0!==s&&(s instanceof Object&&(s=r(s)),t.push(s))}return t}if(e instanceof Object){var t={};for(var o in e){var s=e[o];void 0!==s&&(s instanceof Object&&(s=r(s)),t[o]=s)}return t}return e}function i(e){return a.mapValues(e,function(e,t){return e instanceof Array&&/(^|_)ids?$/.test(t)&&(e=a.filter(e,function(e){return!("number"==typeof e&&e<1)})),e})}var a=n("../node_modules/lodash/lodash.js"),c=n("../node_modules/bluebird/js/browser/bluebird.js"),l=n("../../common/src/data/remote-data-source/operation.js"),d=n("../../common/src/data/session-start-time.js");e.exports=s,s.prototype=Object.create(l.prototype),s.prototype.getQuery=function(){return a.pick(this,"address","schema","table","criteria")},s.prototype.getCriteriaShape=function(){return a.mapValues(this.criteria,function(e){return null!=e?e.constructor:null})},s.prototype.match=function(e){return!!this.matchLocation(e)&&(!!this.matchCriteria(e)&&!!this.matchOptions(e))},s.prototype.matchCriteria=function(e){return a.isEqual(this.criteria,e.criteria)},s.prototype.matchOptions=function(e){return this.remote===e.remote},s.prototype.isSufficientlyRecent=function(e){if(this.isLocal())return!0;var t=a.map(this.results,"rtime"),n=a.min(t);if(n<d)return!1;var s=new Date(n);return!(.001*(new Date-s)>e)&&(this.finishTime=n,!0)},s.prototype.isFresh=function(e){return"local"===this.schema||!this.dirty&&!(this.getTimeElapsed()>e)},s.prototype.isSufficientlyCached=function(){var e=this.results.length;return void 0!=this.minimum&&!(e<this.minimum)},s.prototype.isMeetingExpectation=function(){return this.results.length===this.expected},s.prototype.finish=function(e){var t=this,n=this.results,s=[],o=0;l.prototype.finish.call(this,e),this.dirty=!1,e&&(this.promise=c.resolve(this.results),a.each(this.results,function(e){e.rtime||o++,e.rtime=t.finishTime}),a.each(n,function(t){var n=a.sortedIndexBy(e,t,"id"),o=e[n];o&&o.id===t.id||s.push(t)})),this.missingResults=s,this.lastRetrieved=o}},"../../common/src/data/remote-data-source/storage.js":function(e,t,n){"use strict";function s(e,t,n){r.call(this,e),this.objects=t,this.options=n||{},this.canceled=!1}var o=n("../node_modules/lodash/lodash.js"),r=n("../../common/src/data/remote-data-source/operation.js");e.exports=s,s.prototype=Object.create(r.prototype),s.prototype.finish=function(e){var t=this;r.prototype.finish.call(this,e),this.isLocal()||o.each(this.results,function(e){e.rtime=t.finishTime})}},"../../common/src/data/remote-data-source/temporary-id.js":function(e,t,n){"use strict";function s(){var e=o+1e-9;return o=e,e}t.allocate=s;var o=0},"../../common/src/data/session-manager.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/bluebird/js/browser/bluebird.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../../common/src/data/database.js"),c=n("../../common/src/mixins/update-check.js"),l=n("../../common/src/widgets/diagnostics.jsx"),d=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=r.createClass({displayName:"SessionManager",mixins:[c],propTypes:{database:i.instanceOf(a)},getInitialState:function(){return this.removalQueue=[],{loaded:[],removed:[],saved:[]}},loadFromCache:function(e){var t=this;if(s.some(this.removalQueue,{address:e}))return o.resolve(null);var n=this.props.database.use({schema:"local",by:this}),r={key:e};return n.findOne({table:"session",criteria:r}).then(function(n){return n?(t.setState({loaded:s.union(t.state.loaded,[e])}),{address:n.key,handle:n.handle,token:n.token,user_id:n.user_id,etime:n.etime}):null})},saveToCache:function(e){var t=this,n=this.props.database.use({schema:"local",by:this}),o={key:e.address,handle:e.handle,token:e.token,user_id:e.user_id,etime:e.etime};return n.saveOne({table:"session"},o).then(function(n){return t.setState({saved:s.union(t.state.loaded,[e.address])}),n})},removeFromCache:function(e){var t=this;this.removalQueue.push(e);var n=this.props.database.use({schema:"local",by:this}),o={key:e.address};return n.removeOne({table:"session"},o).then(function(n){s.pull(t.removalQueue,e),t.setState({removed:s.union(t.state.loaded,[e.address])})})},render:function(){return r.createElement(l,{type:"session-manager"},r.createElement(d,{label:"Session Handling"},r.createElement("div",null,"Loaded from cache: ",s.join(this.state.loaded," ")),r.createElement("div",null,"Saved to cache: ",s.join(this.state.saved," ")),r.createElement("div",null,"Removed from cache: ",s.join(this.state.removed," "))))}})},"../../common/src/data/session-start-time.js":function(e,t,n){"use strict";e.exports=(new Date).toISOString()},"../../common/src/data/subscription-manager.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),r=o.PropTypes,i=n("../../common/src/data/database.js"),a=n("../../common/src/locale/locale.js"),c=n("../../common/src/mixins/update-check.js"),l=n("../../common/src/widgets/diagnostics.jsx"),d=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=o.createClass({displayName:"SubscriptionManager",mixins:[c],propTypes:{area:r.oneOf(["client","admin"]).isRequired,connection:r.object,schema:r.string,database:r.instanceOf(i),locale:r.instanceOf(a)},getInitialState:function(){return{subscription:null,serverAddress:null}},componentWillReceiveProps:function(e){this.props.connection&&e.connection&&this.props.connection.address!==e.connection.address&&this.setState({subscription:null})},componentDidUpdate:function(e,t){var n=this;if(this.props.connection&&this.props.database&&this.props.locale){var o=this.props.database.use({schema:"global",by:this});o.start().then(function(e){var t=n.state.subscription,r=o.context.address,i={user_id:e,schema:n.props.schema,area:n.props.area,locale:n.props.locale.localeCode,method:n.props.connection.method,token:n.props.connection.token,relay:n.props.connection.relay,details:n.props.connection.details};if(t&&n.state.serverAddress===r){if(s.isMatch(t,i))return;s.assign(t,i),i=t}else n.setState({subscription:i,serverAddress:r});return o.saveOne({table:"subscription"},i).then(function(e){return n.setState({subscription:e}),null}).catch(function(e){if(404===e.statusCode&&i.id)return i.id=void 0,o.saveOne({table:"subscription"},i).then(function(e){return n.setState({subscription:e}),null})})}).catch(function(e){if(401!==e.statusCode)throw e})}},render:function(){var e=this.state.subscription||{};return o.createElement(l,{type:"subscription-manager"},o.createElement(d,{label:"Current subscription"},o.createElement("div",null,"ID: ",e.id),o.createElement("div",null,"Token: ",e.token),o.createElement("div",null,"Method: ",e.method),o.createElement("div",null,"Schema: ",e.schema),o.createElement("div",null,"Locale: ",e.locale),o.createElement("div",null,"Relay: ",e.relay)))}})},"../../common/src/errors/file-error.js":function(e,t,n){"use strict";function s(e){e instanceof Object&&(e=e.code),this.code=e,this.message=o[e]}e.exports=s;var o={1:"A required file or directory could not be found at the time an operation was processed",2:"Access to the file was denied",3:"Operation was aborted",4:"The file or directory cannot be read",5:"The URL is malformed",6:"The state of the underlying file system prevents any writing to a file or a directory",7:"The operation cannot be performed on the current state of the interface object",8:"Synax error",9:"The modification requested is not allowed",10:"Not enough remaining storage space or the storage quota was reached",11:"The app looked up an entry, but the entry found is of the wrong type",12:"The file or directory with the same path already exists"};s.prototype=Object.create(Error.prototype)},"../../common/src/errors/http-error.js":function(e,t,n){"use strict";function s(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if("number"==typeof t)this.statusCode=t;else if("string"==typeof t)this.message=t;else if("object"===(void 0===t?"undefined":o(t)))for(var n in t)this[n]=t[n]}this.statusCode||(this.statusCode=500),this.hasOwnProperty("name")||(this.name=r[this.statusCode]),this.hasOwnProperty("message")||(this.message=this.name)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=s;var r={400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"};s.prototype=Object.create(Error.prototype)},"../../common/src/languages.js":function(e,t,n){"use strict";e.exports=[{name:"Čeština",code:"cz",script:"latin",countries:{cz:"Česko",pl:"Polsko",sk:"Slovensko"},defaultCountry:"cz"},{name:"Dansk",code:"da",script:"latin",countries:{dk:"Danmark",fo:"Færøerne",gl:"Grønland",de:"Tyskland"},defaultCountry:"dk"},{name:"Deutsch",code:"de",script:"latin",countries:{at:"Österreich",be:"Belgien",de:"Deutschland",lu:"Luxemburg",ch:"Schweiz"},defaultCountry:"de"},{name:"Ελληνικά",code:"el",script:"greek",countries:{gr:"Ελλάδα",cy:"Κύπρος"},defaultCountry:"gr"},{name:"English",code:"en",script:"latin",countries:{au:"Australia",ca:"Canada",hk:"Hong Kong",ie:"Ireland",sg:"Singapore",gb:"United Kingdom",us:"United States"},defaultCountry:"us",module:function(){return n.e("locale-en").then(n.bind(null,"./locales/en.js"))}},{name:"Español",code:"es",script:"latin",countries:{ar:"Argentina",bo:"Bolivia",cl:"Chile",co:"Colombia",cr:"Costa Rica",cu:"Cuba",es:"España",ec:"Ecuador",sv:"El Salvador",gq:"Guinea Ecuatorial",gt:"Guatemala",hn:"Honduras",mx:"México",ni:"Nicaragua",pa:"Panamá",py:"Paraguay",pe:"Perú",pr:"Puerto Rico",do:"República Dominicana",uy:"Uruguay",ve:"Venezuela"},defaultCountry:"es"},{name:"Français",code:"fr",script:"latin",countries:{be:"Belgique",bj:"Bénin",bf:"Burkina Faso",bi:"Burundi",cm:"Cameroun",ca:"Canada",cg:"Congo",ci:"Côte d'Ivoire",dj:"Djibouti",gq:"Guinée équatoriale",fr:"France",ga:"Gabon",gn:"Guinée",ht:"Haïti",lu:"Luxembourg",mg:"Madagascar",ml:"Mali",ne:"Niger",rw:"Rwanda",cf:"République centrafricaine",cd:"République démocratique du Congo",sn:"Sénégal",sc:"Seychelles",ch:"Suisse",td:"Tchad",tg:"Togo"},defaultCountry:"fr"},{name:"한국어",code:"ko",script:"hangul",countries:{kr:"한국",cn:"중국"},defaultCountry:"kr"},{name:"Hrvatski",code:"hr",script:"latin",countries:{ba:"Bosna i Hercegovina",hr:"Hrvatska",rs:"Srbija"},defaultCountry:"hr"},{name:"Italiano",code:"it",script:"latin",countries:{it:"Italia",ch:"Svizzera",hr:"Croazia",si:"Slovenia"},defaultCountry:"it",module:function(){return n.e("locale-it").then(n.bind(null,"./locales/it.js"))}},{name:"Magyar",code:"hu",script:"latin",countries:{hr:"Magyarország",ro:"Románia"},defaultCountry:"hu"},{name:"Nederlands",code:"nl",script:"latin",countries:{be:"België",nl:"Nederland",sr:"Suriname"},defaultCountry:"nl"},{name:"日本語",code:"jp",script:"hiragana",countries:{jp:"日本"},defaultCountry:"jp"},{name:"Norsk",code:"nb",script:"latin",countries:{no:"Norge"},defaultCountry:"no",module:function(){return n.e("locale-nb").then(n.bind(null,"./locales/nb.js"))}},{name:"Polski",code:"pl",script:"latin",countries:{by:"Białoruś",lt:"Litwa",pl:"Polska",ua:"Ukraina"},defaultCountry:"pl",module:function(){return n.e("locale-pl").then(n.bind(null,"./locales/pl.js"))}},{name:"Português",code:"pt",script:"latin",countries:{ao:"Angola",br:"Brasil",tl:"Timor Leste",gq:"Guiné Equatorial",gw:"Guiné-Bissau",mz:"Moçambique",mo:"Macao",pt:"Portugal"},defaultCountry:"pt"},{name:"Русский",code:"ru",script:"cyrillic",countries:{am:"Армения",by:"Беларусь",ge:"Грузия",lv:"Латвия",kz:"Казахстан",kg:"Киргизия",lt:"Литва",ru:"Россия",tj:"Таджикистан",ua:"Украина",uz:"Узбекистан",es:"Эстония"},defaultCountry:"ru",module:function(){return n.e("locale-ru").then(n.bind(null,"./locales/ru.js"))}},{name:"Srpski",code:"sr",script:"latin",countries:{rs:"Srbija",hr:"Hrvatska",ba:"Bosna i Hercegovina"},defaultCountry:"sr"},{name:"Suomi",code:"fi",script:"latin",countries:{fi:"Suomi",se:"Ruotsi"},defaultCountry:"fi",module:function(){return n.e("locale-fi").then(n.bind(null,"./locales/fi.js"))}},{name:"Slovenčina",code:"sk",script:"latin",countries:{cz:"Česko",sk:"Slovensko"},defaultCountry:"sk"},{name:"Svenska",code:"sv",script:"latin",countries:{fi:"Finland",se:"Sverige"},defaultCountry:"se"},{name:"Tiếng Việt",code:"vi",script:"latin",countries:{vn:"Việt Nam"},defaultCountry:"vn"},{name:"Türkçe",code:"tr",script:"latin",countries:{cy:"Kıbrıs",tr:"Türkiye"},defaultCountry:"tr"},{name:"中文",code:"zh",script:"hanzi",countries:{cn:"中国",hk:"香港",mo:"澳門",sg:"新加坡",tw:"台灣"},defaultCountry:"cn",module:function(){return n.e("locale-zh").then(n.bind(null,"./locales/zh.js"))}}]},"../../common/src/locale/locale-manager.jsx":function(e,t,n){"use strict";function s(){function e(e){void 0===n&&e&&e.length>=2&&(n=o.toLower(e))}o.each(navigator.languages,e);var t=["language","browserLanguage","systemLanguage","userLanguage"];o.each(t,function(t){e(navigator[t])});var n;return n}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../../common/src/data/database.js"),c=n("../../common/src/widgets/diagnostics.jsx"),l=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=r.createClass({displayName:"LocaleManager",propTypes:{defaultLanguageCode:i.string,database:i.instanceOf(a),directory:i.arrayOf(i.object).isRequired,onChange:i.func},getDefaultProps:function(){return{defaultLanguageCode:"en"}},getInitialState:function(){return{localeCode:"",localeCodeSaved:"",phraseTable:{},missingPhrases:[]}},getLocaleCode:function(){return this.state.localeCode},getDirectory:function(){return this.props.directory},translate:function(e){var t=this,n=this.state.phraseTable[e];if(null==n)return setTimeout(function(){var n=o.union(t.state.missingPhrases,[e]);t.setState({missingPhrases:n})},10),e;if("function"!=typeof n)return n;try{for(var s=arguments.length,r=Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return n.apply(this,r)}catch(t){return console.error(t),"["+e+": "+t.message+"]"}},pick:function(e,t){if("string"==typeof e)return e;var n=this.state.localeCode.substr(0,2);t&&(n=t.substr(0,2));var s="",r="",i=this.props.defaultLanguageCode.substr(0,2),a="";for(var c in e){var l=e[c],d=o.toLower(c);d===n&&(s=l),r||(r=l),d===i&&(a=l)}return s||(a||r)},change:function(e){var t=this;return e=o.toLower(e),e===this.state.localeCode?Promise.resolve(!0):this.load(e).then(function(n){var s;s="function"==typeof n?n(e):n;var o={localeCode:e,phraseTable:s};return t.setState(o,function(){t.triggerChangeEvent()}),!0})},load:function(e){var t=e.substr(0,2),n=o.find(this.props.directory,{code:t});return n&&n.module?Promise.resolve(n.module()):Promise.reject(new Error("No module for language: "+t))},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},componentDidMount:function(){var e=this,t=s()||this.props.defaultLanguageCode;this.change(t).catch(function(t){e.change(e.props.defaultLanguageCode)})},componentDidUpdate:function(e,t){var n=this;if(!e.database&&this.props.database){var r=this.props.database.use({by:this,schema:"local"});r.start().then(function(){var e={key:"language"};return r.findOne({table:"settings",criteria:e})}).then(function(e){var t=o.get(e,"selectedLanguageCode");t&&(n.change(t),n.setState({localeCodeSaved:t}))})}if(t.localeCode!==this.state.localeCode&&this.props.database){var r=this.props.database.use({by:this,schema:"local"});r.start().then(function(){var e={key:"language",selectedLanguageCode:n.state.localeCode};return e.selectedLanguageCode!==s()?r.saveOne({table:"settings"},e):t.localeCode?r.removeOne({table:"settings"},e):void 0})}},render:function(){var e=s(),t=this.state.missingPhrases;return r.createElement(c,{type:"locale-manager"},r.createElement(l,{label:"Locale code"},r.createElement("div",null,"Current: ",this.state.localeCode),r.createElement("div",null,"Browser: ",e),r.createElement("div",null,"Previously saved: ",this.state.localeCodeSaved)),r.createElement(l,{label:"Missing phrases",hidden:o.isEmpty(t)},o.map(t,function(e,t){return r.createElement("div",{key:t},e)})))}})},"../../common/src/locale/locale.js":function(e,t,n){"use strict";function s(e){this.localeManager=e,this.directory=this.localeManager.getDirectory(),this.localeCode=this.localeManager.getLocaleCode();var t=_.split(this.localeCode,"-");this.languageCode=t[0],this.countryCode=t[1],this.translate=this.translate.bind(this),this.pick=this.pick.bind(this),this.name=this.name.bind(this),this.change=this.change.bind(this)}e.exports=s,s.prototype.translate=function(e){return e instanceof Object?this.localeManager.pick(e):this.localeManager.translate.apply(this.localeManager,arguments)},s.prototype.pick=function(e,t){return this.localeManager.pick(e,t)},s.prototype.name=function(e,t,n){var s=this.localeManager.pick(e,n),o=new String(s||"");return o.gender=t,o},s.prototype.change=function(e){return this.localeManager.change(e)}},"../../common/src/media/bitmap-view.jsx":function(e,t,n){"use strict";function s(e){var t=i(e,6),n=t[0],s=t[1],o=t[2],r=t[3],a=t[4],c=t[5],l=n*r-s*o;return[r/l,-s/l,-o/l,n/l,(o*c-r*a)/l,-(n*c-s*a)/l]}function o(e,t){var n=i(e,6),s=n[0],o=n[1],r=n[2],a=n[3],c=n[4],l=n[5],d=i(t,2),u=d[0],p=d[1];return[s*u+r*p+c,o*u+a*p+l]}function r(e,t){var n=[t.left,t.top],s=[t.left+t.width,t.top+t.height];return n=o(e,n),s=o(e,s),{width:Math.abs(s[0]-n[0]),height:Math.abs(s[1]-n[1]),left:Math.min(s[0],n[0]),top:Math.min(s[1],n[1])}}var i=function(){function e(e,t){var n=[],s=!0,o=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(s=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);s=!0);}catch(e){o=!0,r=e}finally{try{!s&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},c=n("../node_modules/lodash/lodash.js"),l=n("../node_modules/bluebird/js/browser/bluebird.js"),d=n("../node_modules/react/react.js"),u=d.PropTypes,p=n("../../common/src/transport/blob-manager.js"),m=n("../../common/src/transport/blob-reader.js"),h=n("../../common/src/media/media-loader.js"),f=n("../../common/src/media/jpeg-analyser.js"),g=n("../../common/src/utils/component-refs.js");e.exports=d.createClass({displayName:"BitmapView",propTypes:{url:u.string,clippingRect:u.object,onLoad:u.func,onError:u.func},getInitialState:function(){return this.components=g({canvas:HTMLCanvasElement}),{}},componentWillMount:function(){this.load(this.props.url)},componentWillReceiveProps:function(e){this.props.url!==e.url&&this.load(e.url),this.clippingRect!==e.clippingRect&&this.image&&this.drawImage(e.clippingRect)},render:function(){var e=this.components.setters,t=c.omit(this.props,"onLoad","url","clippingRect");return t.width=4,t.height=4,d.createElement("canvas",a({ref:e.canvas},t))},componentDidMount:function(){this.image&&this.redrawNeeded&&this.drawImage(this.props.clippingRect)},triggerLoadEvent:function(){this.props.onLoad&&this.props.onLoad({type:"load",target:this})},triggerErrorEvent:function(e){this.props.onError&&this.props.onError({type:"error",target:this,error:e})},load:function(e){var t=this;return e?p.fetch(e).then(function(e){var n=h.loadImage(e),s=m.loadUint8Array(e);return l.join(n,s,function(e,n){var s=f.getOrientation(n)||1;t.image=e,t.orientation=s,s<5?(t.naturalWidth=e.naturalWidth,t.naturalHeight=e.naturalHeight):(t.naturalWidth=e.naturalHeight,t.naturalHeight=e.naturalWidth),t.drawImage(t.props.clippingRect),t.triggerLoadEvent()})}).catch(function(e){console.error(e),t.triggerErrorEvent(e)}):(this.clearCanvas(),l.resolve())},drawImage:function(e){var t=this.image;if(t){var n=this.components.canvas;if(!n)return void(this.redrawNeeded=!0);var o,i=this.orientation,a=t.naturalWidth,c=t.naturalHeight;switch(i){case 1:o=[1,0,0,1,0,0];break;case 2:o=[-1,0,0,1,a,0];break;case 3:o=[-1,0,0,-1,a,c];break;case 4:o=[1,0,0,-1,0,c];break;case 5:o=[0,1,1,0,0,0];break;case 6:o=[0,1,-1,0,c,0];break;case 7:o=[0,-1,-1,0,c,a];break;case 8:o=[0,-1,1,0,0,a]}e||(e={left:0,top:0,width:this.naturalWidth,height:this.naturalHeight}),this.width=e.width,this.height=e.height;var l=s(o),d=r(l,e),u=r(l,{left:0,top:0,width:e.width,height:e.height});n.width=u.width,n.height=u.height;var p=n.getContext("2d");p.transform.apply(p,o),p.drawImage(t,d.left,d.top,d.width,d.height,u.left,u.top,u.width,u.height)}},clearCanvas:function(){var e=this.components.canvas;e&&(e.width=0,e.height=0),this.width=0,this.height=0,this.orientation=void 0}})},"../../common/src/media/device-manager.js":function(e,t,n){"use strict";(function(e){function t(e){return e?a.filter(l,{kind:e}):l}function s(e){return!navigator.mediaDevices||t(e).length>0}function o(e,t){"change"===e&&d.push(t)}function r(e,t){"change"===e&&(d=a.pull(d,t))}function i(){return c.try(function(){return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices():[]}).then(function(t){l=t,a.each(d,function(t){t.call(e,{type:"change",target:e})})}).catch(function(e){})}var a=n("../node_modules/lodash/lodash.js"),c=n("../node_modules/bluebird/js/browser/bluebird.js");e.exports={getDevices:t,hasDevice:s,addEventListener:o,removeEventListener:r};var l=[],d=[];i().then(function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",i)})}).call(t,n("../node_modules/webpack/buildin/module.js")(e))},"../../common/src/media/frame-grabber.js":function(e,t,n){"use strict";function s(e,t){return new i(function(n,s){function i(t){if(g)c(t);else if(t){var n=u*p*3,s=t.size,o=s/n;o>.02?c(t):((!f||f.size<t.size)&&(f=t),h>10?c(f):(e.currentTime+=1e3,h++))}else l(new Error("Unable to obtain a frame"))}function a(t){try{m.getContext("2d").drawImage(e,0,0,u,p),o(m,"image/jpeg",.75,i)}catch(e){l(e)}}function c(e){d(),n(e)}function l(e){d(),f?n(f):s(e)}function d(){g&&(e.removeEventListener("seeked",a),clearTimeout(y))}var u=e.videoWidth,p=e.videoHeight,m=document.createElement("CANVAS");m.width=u,m.height=p;var h=1,f=null,g=e.duration===1/0,v=r.get(t,"start",0),b=r.get(t,"timeout",1e3);if(g)a();else{e.addEventListener("seeked",a),e.addEventListener("ended",function(){l(new Error("Unable to obtain an image before video ended"))}),e.currentTime=v;var y=setTimeout(function(){l(new Error("Unable to obtain an image within time limit"))},b)}})}function o(e,t,s,o){if("function"==typeof e.toBlob)e.toBlob(o,t,90);else{o(n("../node_modules/b64-to-blob/b64toBlob.js")(e.toDataURL(t,s).replace("data:image/jpeg;base64,",""),"image/jpeg"))}}var r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/bluebird/js/browser/bluebird.js");e.exports={capture:s}},"../../common/src/media/image-cropping.js":function(e,t,n){"use strict";function s(e,t){var n=0,s=0,o=Math.min(e,t);return e>o?n=Math.floor((e-o)/2):t>o&&(s=Math.floor((t-o)/2)),{left:n,top:s,width:o,height:o}}e.exports={centerSquare:s,default:s}},"../../common/src/media/jpeg-analyser.js":function(e,t,n){"use strict";function s(e){var t=d(e,function(e,t,n){if(65472===e||65474===e)return t});if(t>0){var n=(e[t++],r(e[t++],e[t++]));return{width:r(e[t++],e[t++]),height:n}}}function o(e){var t=r,n=a,s=d(e,function(s,o,r){if(65505===s){var a=o,l=o+r;if(69==e[a++]&&120==e[a++]&&105==e[a++]&&102==e[a++]&&0==e[a++]&&0==e[a++]){var d=a;"II"===String.fromCharCode(e[a++])+String.fromCharCode(e[a++])&&(t=i,n=c);if(42!==t(e[a++],e[a++]))return;do{var u=n(e[a++],e[a++],e[a++],e[a++]);if(0===u)break;a=d+u;for(var p=t(e[a++],e[a++]),m=0;m<p;m++){var h=t(e[a++],e[a++]),f=t(e[a++],e[a++]),g=n(e[a++],e[a++],e[a++],e[a++]);if(274===h&&3===f&&1===g)return a;a+=4}}while(a<l)}}});if(s>0){return t(e[s++],e[s++])}}function r(e,t){return e<<8|t}function i(e,t){return t<<8|e}function a(e,t,n,s){return e<<24|t<<16|n<<8|s}function c(e,t,n,s){return s<<24|n<<16|t<<8|e}function l(e){var t=u(e);return-1!==t?p(e,t):null}function d(e,t){var n=e.length,s=0;if(65496==r(e[s++],e[s++]))for(;s<n;){var o=r(e[s++],e[s++]),i=r(e[s++],e[s++]);if(65498==o)break;var a=t(o,s,i);if(void 0!==a&&!1!==a)return a;s+=i-2}return-1}function u(e){return d(e,function(t,n){if(65517==t&&80==e[n++]&&104==e[n++]&&111==e[n++]&&116==e[n++]&&111==e[n++]&&115==e[n++]&&104==e[n++]&&111==e[n++]&&112==e[n++]&&32==e[n++]&&51==e[n++]&&46==e[n++]&&48==e[n++])return n})}function p(e,t){for(var n=e.length,s=null,o=t;o+4<n;)if(56==e[o+0]&&66==e[o+1]&&73==e[o+2]&&77==e[o+3]){o+=4;for(var i=r(e[o++],e[o++]),a=e[o++],c="",l=0;l<a;l++)c+=String.fromCharCode(e[o++]);o++;var d=(r(e[o++],e[o++]),r(e[o++],e[o++]));i>=1999&&i<=2998&&(s||(s={}),s[c]=m(e,o,d)),o+=d}else o++;return s}function m(e,t,n){for(var s=n/26,o=0,i=[],c=[],l=t,d=0;d<s;d++){switch(r(e[l++],e[l++])){case 0:case 3:o=r(e[l++],e[l++]),l+=22;break;case 1:case 2:case 4:case 5:for(var u=0;u<3;u++){var p=a(e[l++],e[l++],e[l++],e[l++]),m=a(e[l++],e[l++],e[l++],e[l++]);p>=2147483648?p=(2147483647-p)/16777216:p/=16777216,m>=2147483648?m=(2147483647-m)/16777216:m/=16777216,c.push({x:m,y:p})}o--,0==o&&(c.push(c.shift()),c.push(c[0]),i.push(c),c=[]);break;default:l+=24}}return i}e.exports={getDimensions:s,getOrientation:o,extractPaths:l}},"../../common/src/media/media-loader.js":function(e,t,n){"use strict";function s(e){var t;return t="string"==typeof e?e:h.manage(e),new m(function(e,n){var s=document.createElement("IMG");s.src=t,s.onload=function(t){e(s)},s.onerror=function(e){console.log("load image error",e.message),n(new Error("Unable to load "+t))}})}function o(e){if(/iPhone/i.test(navigator.userAgent))return m.reject("Cannot load video on iPhone");var t;return t="string"==typeof e?e:h.manage(e),new m(function(e,n){var s=document.createElement("VIDEO");s.src=t,s.preload=!0,s.onloadeddata=function(t){e(s)},s.onerror=function(e){n(new Error("Unable to load "+t))}})}function r(e){var t;return t="string"==typeof e?e:h.manage(e),new m(function(e,n){var s=document.createElement("AUDIO");s.src=t,s.preload=!0,s.onloadeddata=function(t){e(s)},s.onerror=function(e){n(new Error("Unable to load "+t))}})}function i(e){return f.loadText(e).then(function(e){var t=new DOMParser,n=t.parseFromString(e,"text/xml"),s=n.getElementsByTagName("svg")[0];if(!s)throw new Error("Invalid SVG document");return s})}function a(e){if("string"==typeof e){var t=e;return h.fetch(t).then(function(e){return a(e)}).catch(function(e){return s(t).then(function(e){return{width:e.naturalWidth,height:e.naturalHeight,format:d(t,"image")}})})}var n=p(e.type);return"svg"===n?i(e).then(function(e){var t=e.width.baseVal.value,s=e.height.baseVal.value,o=e.viewBox.baseVal;return t||(t=o.width),s||(s=o.height),t||(t=1e3),s||(s=1e3),{width:t,height:s,format:n}}):"jpeg"===n?f.loadUint8Array(e).then(function(e){var t=g.getDimensions(e),s=g.getOrientation(e);if(!t)throw new Error("Invalid JPEG file");var o,r;return s>=5?(o=t.height,r=t.width):(o=t.width,r=t.height),{width:o,height:r,format:n}}):s(e).then(function(e){return{width:e.naturalWidth,height:e.naturalHeight,format:n}})}function c(e){if("string"==typeof e){var t=e;return h.fetch(t).then(function(e){return c(e)}).catch(function(e){return o(t).then(function(e){return v.capture(e).then(function(n){return{width:e.videoWidth,height:e.videoHeight,duration:Math.round(1e3*e.duration),format:d(t,"video"),poster:n}})})})}return o(e).then(function(t){return v.capture(t).then(function(n){return{width:t.videoWidth,height:t.videoHeight,duration:Math.round(1e3*t.duration),format:p(e.type),poster:n}})})}function l(e){if("string"==typeof e){var t=e;return h.fetch(t).then(function(e){return l(e)}).catch(function(e){return r(t).then(function(e){return{duration:Math.round(1e3*e.duration),format:d(t,"image")}})})}return r(e).then(function(t){return{duration:Math.round(1e3*t.duration),format:p(e.type)}})}function d(e,t){var n,s=/\.(\w+)$/.execute(e.replace(/#.*/,"").replace(/\?.*/,""));if(s)switch(n=_.toLower(s[1])){case"jpg":return"jpeg";default:return n}else switch(t){case"image":return"jpeg";case"video":return"mp4";case"audio":return"mp3";default:return""}}function u(e){var t=_.split(e,"/");return _.toLower(t[0])}function p(e){var t=_.split(e,"/"),n=_.toLower(t[1]);switch(n){case"svg+xml":return"svg";default:return n}}var m=n("../node_modules/bluebird/js/browser/bluebird.js"),h=n("../../common/src/transport/blob-manager.js"),f=n("../../common/src/transport/blob-reader.js"),g=n("../../common/src/media/jpeg-analyser.js"),v=n("../../common/src/media/frame-grabber.js");e.exports={loadImage:s,loadVideo:o,loadAudio:r,loadSVG:i,getImageMetadata:a,getVideoMetadata:c,getAudioMetadata:l,extractFileCategory:u,extractFileFormat:p}},"../../common/src/media/media-stream-utils.js":function(e,t,n){"use strict";function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}function o(){return d.try(function(){var e={audio:!0};return navigator.mediaDevices.getUserMedia(e)})}function r(e){return d.try(function(){var t={video:!e||{deviceId:e},audio:!0};return navigator.mediaDevices.getUserMedia(t)})}function i(e){return d.try(function(){var t={video:!e||{deviceId:e}};return navigator.mediaDevices.getUserMedia(t)})}function a(e){var t=e.getVideoTracks()[0],n=t.getSettings(),s=n.width,o=n.height;return s>o&&screen.width<screen.height&&(s=n.height,o=n.width),{width:s,height:o}}function c(e,t){var n=function n(s){var o=e.videoWidth,r=e.videoHeight;t({width:o,height:r}),e.removeEventListener("loadedmetadata",n)};e.addEventListener("loadedmetadata",n)}function l(e){var t=e.getTracks();_.each(t,function(e){e.stop()})}var d=n("../node_modules/bluebird/js/browser/bluebird.js");e.exports={hasSupport:s,getAudioStream:o,getVideoStream:r,getSilentVideoStream:i,getVideoDimensions:a,getActualVideoDimensions:c,stopAllTracks:l}},"../../common/src/media/media-tag-reader.js":function(e,t,n){"use strict";function s(e){return new r(function(t,n){var s=new i.Reader(e);s.setTagsToRead(["picture"]),s.read({onSuccess:function(e){var n=o.get(e,"tags.picture");if(n&&n.data){var s=n.data,r=new Uint8Array(s),i=new Blob([r],{type:n.format});t(i)}else t(null)},onError:function(e){t(null)}})})}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/bluebird/js/browser/bluebird.js"),i=n("../node_modules/jsmediatags/dist/jsmediatags.js");e.exports={extractAlbumArt:s}},"../../common/src/media/quick-start.js":function(e,t,n){"use strict";function s(e){return r(e).then(function(t){var n=u.findIndex(t,{name:"ftyp"}),s=u.findIndex(t,{name:"moov"});if(!(0===n&&s>1))return null;var r=t[n],i=t[s];return a(e,r).then(function(t){return a(e,i).then(function(n){var s=new Uint8Array(n);o(s,8,s.length,r.offset+r.size,i.offset,i.size);var a=e.slice(r.offset+r.size,i.offset),c=e.slice(i.offset+i.size),l=[t,n,a,c];return new Blob(l,{type:e.type})})})}).catch(function(e){return null})}function o(e,t,n,s,r,i){for(;t<n;){var a=c(e,t),u=d(e,t+4);if(a<8)break;switch(u){case"stco":for(var p=c(e,t+12),m=0;m<p;m++){var h=t+16+4*m,f=c(e,h);s<=f&&f<=r&&(f+=i,e[h+0]=f>>24&255,e[h+1]=f>>16&255,e[h+2]=f>>8&255,e[h+3]=f>>0&255)}break;case"co64":for(var p=c(e,t+12),m=0;m<p;m++){var h=t+16+8*m,f=l(e,h);s<=f&&f<=r&&(f+=i,e[h+0]=f>>56&255,e[h+1]=f>>48&255,e[h+2]=f>>40&255,e[h+3]=f>>32&255,e[h+4]=f>>24&255,e[h+5]=f>>16&255,e[h+6]=f>>8&255,e[h+7]=f>>0&255)}break;case"trak":case"mdia":case"minf":case"stbl":o(e,t+8,t+a,s,r,i)}t+=a}}function r(e){var t=[],n=0,s=e.size,o=!1,r=!1;return m.do(function(){return i(e,n).then(function(e){var i=!1;if(o?"moov"===e.name&&(r=!0):"ftyp"===e.name?o=!0:i=!0,n+=e.size,n>s&&(i=!0),i)throw new Error("File does not appear to a QuickTime container");t.push(e)})}),m.while(function(){return!(o&&r)}),m.return(function(){return t}),m.end()}function i(e,t){return new p(function(n,s){var o=e.slice(t,t+16),r=new FileReader;r.readAsArrayBuffer(o),r.onload=function(e){var o=new Uint8Array(e.target.result),r=c(o,0),i=8;1===r&&(r=l(o,8),i=16),r>=i||s(new Error("Invalid atom size"));var a=d(o,4);n({offset:t,size:r,name:a})},r.onerror=function(e){s(new Error("Unable to load data"))}})}function a(e,t){return new p(function(n,s){var o=e.slice(t.offset,t.offset+t.size),r=new FileReader;r.readAsArrayBuffer(o),r.onload=function(e){n(e.target.result)},r.onerror=function(e){s(new Error("Unable to load data"))}})}function c(e,t){return e[t+0]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function l(e,t){return e[t+0]<<56|e[t+1]<<48|e[t+2]<<40|e[t+3]<<32|e[t+4]<<24|e[t+5]<<16|e[t+6]<<8|e[t+7]}function d(e,t){return String.fromCharCode(e[t+0])+String.fromCharCode(e[t+1])+String.fromCharCode(e[t+2])+String.fromCharCode(e[t+3])}var u=n("../node_modules/lodash/lodash.js"),p=n("../node_modules/bluebird/js/browser/bluebird.js"),m=n("../node_modules/async-do-while/index.js");e.exports={process:s}},"../../common/src/media/vector-view.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/bluebird/js/browser/bluebird.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/src/media/media-loader.js"),l=n("../../common/src/utils/component-refs.js");e.exports=i.createClass({displayName:"VectorView",propTypes:{url:a.string,clippingRect:a.object,title:a.string,onLoad:a.func,onError:a.func},getInitialState:function(){return this.components=l({svg:SVGGraphicsElement}),{}},componentWillMount:function(){this.load(this.props.url)},componentWillReceiveProps:function(e){this.props.url!==e.url&&this.load(e.url),this.props.clippingRect!==e.clippingRect&&this.setViewBox(e.clippingRect),this.props.title!==e.title&&this.setTitle(e.title)},render:function(){var e=this.components.setters,t=o.omit(this.props,"onLoad","url","clippingRect","title");return i.createElement("svg",s({ref:e.svg,viewBox:"0 0 4 4",width:4,height:4},t))},triggerLoadEvent:function(){this.props.onLoad&&this.props.onLoad({type:"load",target:this})},triggerErrorEvent:function(e){this.props.onError&&this.props.onError({type:"error",target:this,error:e})},load:function(e){var t=this;return e?c.loadSVG(e).then(function(e){var n=t.components.svg;if(!n)throw new Error("Invalid missing container");t.clear(),t.addTitle(t.props.title);for(var s;s=e.firstChild;)e.removeChild(s),n.appendChild(s);var o=e.width.baseVal.value,r=e.height.baseVal.value,i=e.viewBox.baseVal;o||(o=i.width),r||(r=i.height),o||(o=1e3),r||(r=1e3),t.originX=i.x,t.originY=i.y,t.zoomX=i.width?i.width/o:1,t.zoomY=i.height?i.height/r:1,t.naturalWidth=o,t.naturalHeight=r,t.setViewBox(t.props.clippingRect),t.triggerLoadEvent()}).catch(function(e){t.triggerErrorEvent(e)}):(this.clear(),this.originX=0,this.originY=0,this.zoomX=1,this.zoomY=1,this.naturalWidth=4,this.naturalHeight=4,this.setViewBox(),r.resolve())},clear:function(){for(var e=this.components.svg;e.firstChild;)e.removeChild(e.firstChild)},addTitle:function(e){var t=this.components.svg;if(e&&t){var n=document.createElementNS("http://www.w3.org/2000/svg","title");n.textContent=e,t.appendChild(n)}},setTitle:function(e){var t=svg.getElementByTagName("title");t?e?t.textContent=e:svg.removeChild(t):this.addTitle(e)},setViewBox:function(e){e||(e={left:0,top:0,width:this.naturalWidth,height:this.naturalHeight});var t=this.components.svg,n=t.viewBox.baseVal,s=t.width.baseVal,o=t.height.baseVal;n.x=e.left*this.zoomX+this.originX,n.y=e.top*this.zoomX+this.originY,n.width=e.width*this.zoomX,n.height=e.height*this.zoomY,s.value=e.width,o.value=e.height}})},"../../common/src/mixins/update-check.js":function(e,t,n){"use strict";function s(e,t){if(e===t)return!0;if(!e||!t)return!1;for(var n in t){var s=e[n];if(t[n]!==s)return!1}return!0}e.exports={shouldComponentUpdate:function(e,t){return!s(this.props,e)||!s(this.state,t)}}},"../../common/src/objects/finders/bookmark-finder.js":function(e,t,n){"use strict";function s(e,t,n,s){var o=r.map(n,"id");return o=r.sortBy(r.uniq(o)),r.isEmpty(o)||!t?i.resolve(a.array):e.find({table:"bookmark",criteria:{user_ids:[t.id],story_ids:o},prefetch:!1,minimum:s})}function o(e,t,n){return e.find({table:"bookmark",criteria:{target_user_id:t.id},minimum:n})}var r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/bluebird/js/browser/bluebird.js"),a=n("../../common/src/data/empty.js");e.exports={findBookmarksByUser:s,findBookmarksForUser:o}},"../../common/src/objects/finders/device-finder.js":function(e,t,n){"use strict";function s(e,t,n){return t?e.find({schema:"global",table:"device",criteria:{user_id:t.id},minimum:n}):o.resolve(r.array)}var o=(n("../node_modules/lodash/lodash.js"),n("../node_modules/bluebird/js/browser/bluebird.js")),r=n("../../common/src/data/empty.js");e.exports={findUserDevices:s}},"../../common/src/objects/finders/notification-finder.js":function(e,t,n){"use strict";function s(e,t,n){return t?e.find({table:"notification",criteria:{target_user_id:t.id,limit:500},minimum:n}):i.resolve(a.array)}function o(e,t,n,s){return t?e.find({table:"notification",criteria:{target_user_id:t.id,time_range:l.getDayRange(n)},prefetch:n>=c.today,minimum:s}):i.resolve(a.array)}function r(e,t,n){return t?e.find({table:"notification",criteria:{target_user_id:t.id,seen:!1,limit:100},minimum:n}):i.resolve(a.array)}var i=(n("../node_modules/lodash/lodash.js"),n("../node_modules/bluebird/js/browser/bluebird.js")),a=n("../../common/src/data/empty.js"),c=n("../../common/src/utils/date-tracker.js"),l=n("../../common/src/utils/date-utils.js");e.exports={findNotificationsForUser:s,findNotificationsForUserOnDate:o,findNotificationsUnseenByUser:r}},"../../common/src/objects/finders/project-finder.js":function(e,t,n){"use strict";function s(e,t){return e.findOne({schema:"global",table:"project",criteria:{id:t},required:!0})}function o(e,t){return e.find({table:"project",criteria:{},minimum:t})}function r(e){return e.findOne({schema:"global",table:"project",criteria:{name:e.context.schema+""},required:!0})}function i(e,t){return e.find({schema:"global",table:"project",criteria:{achived:!1,deleted:!1},minimum:t})}function a(e,t,n){var s=l.map(t,"id");return l.isEmpty(s)?d.resolve(u.array):(s=l.sortBy(l.uniq(s)),e.find({schema:"global",table:"project",criteria:{user_ids:s},minimum:n}))}function c(e){return e.find({schema:"local",table:"project_link",criteria:{}}).filter(function(t){return e.findOne({schema:"local",table:"session",criteria:{key:t.address}}).then(function(e){if(e){if((new Date).toISOString()<e.etime)return!0}})})}var l=n("../node_modules/lodash/lodash.js"),d=n("../node_modules/bluebird/js/browser/bluebird.js"),u=n("../../common/src/data/empty.js");e.exports={findProject:s,findAllProjects:o,findCurrentProject:r,findActiveProjects:i,findProjectsWithMembers:a,findProjectLinks:c}},"../../common/src/objects/finders/reaction-finder.js":function(e,t,n){"use strict";function s(e,t,n,s){var a=o.filter(o.uniq(o.map(t,"id")),function(e){return e>=1});return o.isEmpty(a)||!n?r.resolve(i.array):e.find({table:"reaction",criteria:{story_id:a,public:"guest"===n.type||void 0},minimum:s})}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/bluebird/js/browser/bluebird.js"),i=n("../../common/src/data/empty.js");e.exports={findReactionsToStories:s}},"../../common/src/objects/finders/repo-finder.js":function(e,t,n){"use strict";function s(e,t){return e.findOne({schema:"global",table:"repo",criteria:{id:t},required:!0})}function o(e,t){return e.find({schema:"global",table:"repo",criteria:{},minimum:t})}function r(e,t){return e.find({schema:"global",table:"repo",criteria:{deleted:!1},minimum:t})}function i(e,t){if(t instanceof Array){var n=a.flatten(a.map(t,"repo_ids"));return a.isEmpty(n)?c.resolve(l.array):(n=a.sortBy(a.uniq(n)),e.find({schema:"global",table:"repo",criteria:{id:n,deleted:!1}}))}var s=t;return s?e.find({schema:"global",table:"repo",criteria:{id:s.repo_ids,deleted:!1}}):c.resolve(l.array)}var a=n("../node_modules/lodash/lodash.js"),c=n("../node_modules/bluebird/js/browser/bluebird.js"),l=n("../../common/src/data/empty.js");e.exports={findRepo:s,findAllRepos:o,findExistingRepos:r,findProjectRepos:i}},"../../common/src/objects/finders/role-finder.js":function(e,t,n){"use strict";function s(e,t){return e.findOne({schema:"global",table:"role",criteria:{id:t},required:!0})}function o(e,t){return e.find({schema:"global",table:"role",criteria:{},minimum:t})}function r(e,t){return e.find({schema:"global",table:"role",criteria:{deleted:!1,disabled:!1},minimum:t})}function i(e,t){var n=a.flatten(a.map(t,"role_ids"));return a.isEmpty(n)?c.resolve(l.array):(n=a.sortBy(a.uniq(n)),e.find({schema:"global",table:"role",criteria:{id:n}}))}var a=n("../node_modules/lodash/lodash.js"),c=n("../node_modules/bluebird/js/browser/bluebird.js"),l=n("../../common/src/data/empty.js");e.exports={findRole:s,findAllRoles:o,findActiveRoles:r,findRolesOfUsers:i}},"../../common/src/objects/finders/statistics-finder.js":function(e,t,n){"use strict";function s(e,t){var n,s,r,a=!1;if(t&&(n=t.type,t.user?s=t.user:t.user_id&&(s={id:t.user_id}),t.project?r=t.project:t.schema?r={name:t.schema}:t.project_name&&(r={name:t.project_name}),a=t.public),"daily-activities"===n){if(s&&r)return i(e,r,s,a);if(r)return o(e,r,s,a)}else if("daily-notifications"===n&&s&&r)return c(e,r,s);return g.resolve(null)}function o(e,t,n){if(!t||t.deleted)return null;var s=t.name,o={type:"story-date-range",filters:{public:n||void 0}};return e.findOne({schema:s,table:"statistics",criteria:o,minimum:0}).then(function(t){if(p(t)){var o=y.getMonthRanges(t.details.start_time,t.details.end_time),r=y.getTimeZoneOffset(),i=f.map(o,function(e){return{time_range:e,tz_offset:r,public:n||void 0}}),a={type:"daily-activities",filters:i};return e.find({schema:s,table:"statistics",criteria:a,minimum:0}).then(function(e){return j(e,t)})}})}function r(e,t){return g.mapSeries(t,function(t){return o(e,t)}).then(function(e){var n=f.map(t,"id");return f.zipObject(n,e)})}function i(e,t,n,s){return n?a(e,t,[n],s).then(function(e){return f.get(e,n.id,null)}):null}function a(e,t,n,s){if(!t)return g.resolve(null);var o=t.name,r=f.filter(n,function(e){return!e.deleted}),i={type:"story-date-range",filters:f.map(r,function(e){return{user_ids:[e.id],public:s||void 0}})};return e.find({schema:o,table:"statistics",criteria:i}).then(function(t){t=f.filter(t,p);var n=f.map(t,function(e){var t=y.getMonthRanges(e.details.start_time,e.details.end_time),n=y.getTimeZoneOffset();return f.map(t,function(t){return{user_ids:e.filters.user_ids,time_range:t,tz_offset:n,public:s||void 0}})}),r=f.flatten(n);if(f.isEmpty(r))return{};var i={type:"daily-activities",filters:r};return e.find({schema:o,table:"statistics",criteria:i}).then(function(e){return f.transform(t,function(t,n){var s=n.filters.user_ids[0],o=f.filter(e,function(e){return e.filters.user_ids[0]===s});t[s]=j(o,n)},{})})})}function c(e,t,n){return n?l(e,t,[n]).then(function(e){return f.get(e,n.id,null)}):null}function l(e,t,n){if(!t)return g.resolve(null);var s=t.name,o=f.filter(n,function(e){return!e.deleted}),r={type:"notification-date-range",filters:f.map(o,function(e){return{target_user_id:e.id}})};return e.find({schema:s,table:"statistics",criteria:r}).then(function(t){t=f.filter(t,p);var n=f.map(t,function(e){var t=y.getMonthRanges(e.details.start_time,e.details.end_time),n=y.getTimeZoneOffset();return f.map(t,function(t){return{target_user_id:e.filters.target_user_id,time_range:t,tz_offset:n}})}),o=f.flatten(n);if(f.isEmpty(o))return{};var r={type:"daily-notifications",filters:o};return e.find({schema:s,table:"statistics",criteria:r}).then(function(e){return f.transform(t,function(t,n){var s=n.filters.target_user_id,o=f.filter(e,function(e){return e.filters.target_user_id===s});t[s]=j(o,n)},{})})})}function d(e,t,n){return n?u(e,t,[n]).then(function(e){return f.get(e,n.id,null)}):null}function u(e,t,n){if(!t)return g.resolve(null);var s=t.name,o=f.filter(n,function(e){return!e.deleted}),r={type:"story-date-range",filters:f.map(o,function(e){return{external_object:f.find(e.external,{type:e.type})}})};return e.find({schema:s,table:"statistics",criteria:r}).then(function(t){t=f.filter(t,p);var o=f.map(t,function(e){var t=y.getMonthRanges(e.details.start_time,e.details.end_time),n=y.getTimeZoneOffset();return f.map(t,function(t){return{external_object:e.filters.external_object,time_range:t,tz_offset:n}})}),r=f.flatten(o);if(f.isEmpty(r))return{};var i={type:"daily-activities",filters:r};return e.find({schema:s,table:"statistics",criteria:i}).then(function(e){return f.transform(t,function(t,s){var o=s.filters.external_object,r=f.filter(e,function(e){return f.isEqual(e.filters.external_object,o)});t[f.find(n,function(e){return f.some(e.external,o)}).id]=j(r,s)},{})})})}function p(e){return e&&!!e.details.start_time&&!!e.details.end_time}function m(e,t){var n={total:0};return f.each(e,function(e){f.each(e.details,function(e,s){t&&s.substr(0,7)!==t||f.each(e,function(e,t){"#"!==t.charAt(0)&&(n.total+=e),n[t]?n[t]+=e:n[t]=e})})}),n}function h(e){var t={};return f.each(e,function(e){f.assign(t,e.details)}),t}var f=n("../node_modules/lodash/lodash.js"),g=n("../node_modules/bluebird/js/browser/bluebird.js"),v=n("../node_modules/moment/moment.js"),b=n("../../common/src/utils/memoize.js"),y=n("../../common/src/utils/date-utils.js");e.exports={find:s,findDailyActivitiesOfProject:o,findDailyActivitiesOfProjects:r,findDailyActivitiesOfUser:i,findDailyActivitiesOfUsers:a,findDailyNotificationsOfUser:c,findDailyNotificationsOfUsers:l,findDailyActivitiesOfRepo:d,findDailyActivitiesOfRepos:u};var j=b(function(e,t,n){var s=v().subtract(1,"month").format("YYYY-MM"),o=v().format("YYYY-MM"),r=h(e),i=m(e,s),a=m(e,o),c=m(e),l=t.details.start_time,d=t.details.end_time;if(0===i.total){l.substr(0,7)<=s||(i.total=void 0)}return{range:{start:l,end:d},last_month:i,this_month:a,to_date:c,daily:r}})},"../../common/src/objects/finders/story-finder.js":function(e,t,n){"use strict";function s(e,t){return e.findOne({table:"story",criteria:{id:t},required:!0})}function o(e,t){return x.isEmpty(t)?w.resolve(k.array):(t=x.sortBy(x.uniq(t)),e.find({table:"story",criteria:{id:t}}))}function r(e,t,n){return x.isEmpty(t)||!n?w.resolve(k.array):(t=x.sortBy(x.uniq(t)),e.find({table:"story",criteria:{id:t,published:!0,ready:!0,public:j(n)}}))}function i(e,t){return t?e.find({table:"story",criteria:{published:!1,user_ids:[t.id]},prefetch:!1}):w.resolve(k.array)}function a(e,t,n){if(!t)return w.resolve(k.array);if(!n)return w.resolve(k.array);var s=x.filter(n,function(e){if(x.includes(e.user_ids,t.id)&&e.ptime>_.yesterdayISO)return!0}),o=x.map(s,"id");return e.find({table:"story",criteria:{exclude:o,user_ids:[t.id],newer_than:_.yesterdayISO,published:!0},prefetch:!1})}function c(e,t,n,s,o){return e.find({table:"story",criteria:{search:{lang:n.languageCode,text:t},published:!0,ready:!0,public:j(s),limit:o?void 0:100,per_user_limit:o},remote:!0,prefetch:!1})}function l(e,t,n,s,o){return e.find({table:"story",criteria:{tags:t,published:!0,ready:!0,public:j(n),limit:s?void 0:500,per_user_limit:s},minimum:o})}function d(e,t,n,s,o){return e.find({table:"story",criteria:{time_range:E.getDayRange(t),published:!0,ready:!0,public:j(n),limit:s?void 0:500,per_user_limit:s},prefetch:t>=_.today,minimum:o})}function u(e,t,n,s){if(!n)return w.resolve(k.array);var o={table:"listing",criteria:{type:t,target_user_id:n.id,filters:{public:j(n)}}};return s&&(o.blocking="stale"),e.findOne(o).then(function(s){return s?x.isEmpty(s.story_ids)&&s.dirty?e.await({table:"listing"},s,5e3).then(function(o){return o||e.refresh({table:"listing"},s),u(e,t,n)}):r(e,s.story_ids,n):null})}function p(e,t,n,s,o){return e.find({table:"story",criteria:{user_ids:[t.id],search:{lang:s.languageCode,text:n},published:!0,ready:!0,public:j(o),limit:100},remote:!0,prefetch:!1})}function m(e,t,n,s,o){return e.find({table:"story",criteria:{user_ids:[t.id],tags:n,published:!0,ready:!0,public:j(s),limit:500},minimum:o})}function h(e,t,n,s,o){return e.find({table:"story",criteria:{user_ids:[t.id],time_range:E.getDayRange(n),published:!0,ready:!0,public:j(s),limit:500},prefetch:n>=_.today,minimum:o})}function f(e,t,n,s,o){if(!s)return w.resolve(k.array);var i={table:"listing",criteria:{type:t,target_user_id:s.id,filters:{user_ids:[n.id],public:j(s)}}};return o&&(i.blocking="stale"),e.findOne(i).then(function(o){return o?x.isEmpty(o.story_ids)&&o.dirty?e.await({table:"listing"},o,5e3).then(function(r){return r||e.refresh({table:"listing"},o),f(e,t,n,s)}):r(e,o.story_ids,s):null})}function g(e,t,n,s,o,i){var a={table:"listing",criteria:{type:t,target_user_id:s.id,filters:x.map(n,function(e){return{user_ids:[e.id],public:j(s)}})}};return i&&(a.blocking="stale"),e.find(a).then(function(t){var n=x.flatten(x.map(t,function(e){return x.slice(e.story_ids,-o)}));return x.isEmpty(n)&&x.some(t,{dirty:!0})?null:r(e,n,s)})}function v(e,t,n,s,o){if(!s)return w.resolve(k.array);var i={table:"listing",criteria:{type:t,target_user_id:s.id,filters:{role_ids:n,public:j(s)}}};return o&&(i.blocking="stale"),e.findOne(i).then(function(t){return t?x.isEmpty(t.story_ids)&&t.dirty?null:r(e,t.story_ids,s):null})}function b(e,t,n){return r(e,x.filter(x.map(t,"story_id")),n)}function y(e,t,n){return r(e,x.map(t,"story_id"),n)}function j(e){if(!e||"guest"===e.type)return!0}var x=n("../node_modules/lodash/lodash.js"),w=n("../node_modules/bluebird/js/browser/bluebird.js"),k=n("../../common/src/data/empty.js"),_=n("../../common/src/utils/date-tracker.js"),E=n("../../common/src/utils/date-utils.js");e.exports={findStory:s,findStories:o,findDraftStories:i,findUnlistedStories:a,findStoriesMatchingText:c,findStoriesWithTags:l,findStoriesOnDate:d,findStoriesInListing:u,findStoriesByUserMatchingText:p,findStoriesByUserWithTags:m,findStoriesByUserOnDate:h,findStoriesByUserInListing:f,findStoriesByUsersInListings:g,findStoriesWithRolesInListing:v,findStoriesOfNotifications:b,findStoriesOfBookmarks:y}},"../../common/src/objects/finders/system-finder.js":function(e,t,n){"use strict";function s(e){return e.findOne({schema:"global",table:"system",criteria:{}}).then(function(e){return e||{}})}n("../node_modules/lodash/lodash.js"),n("../node_modules/bluebird/js/browser/bluebird.js"),n("../../common/src/data/empty.js");e.exports={findSystem:s}},"../../common/src/objects/finders/user-finder.js":function(e,t,n){"use strict";function s(e,t){return e.findOne({schema:"global",table:"user",criteria:{id:t},required:!0})}function o(e,t){return f.isEmpty(t)?g.resolve(v.array):(t=f.sortBy(f.uniq(t)),e.find({schema:"global",table:"user",criteria:{id:t}}))}function r(e,t){return e.find({schema:"global",table:"user",criteria:{},minimum:t})}function i(e,t){var n;if(t instanceof Array)n=f.flatten(f.map(t,"user_ids"));else{var s=t;n=f.get(s,"user_ids")}return o(e,n)}function a(e,t){return e.find({schema:"global",table:"user",criteria:{deleted:!1},minimum:t})}function c(e,t){return e.find({schema:"global",table:"user",criteria:{deleted:!1,disabled:!1},minimum:t})}function l(e,t,n){var s=f.map(t,"id");return s=f.sortBy(f.uniq(s)),e.find({schema:"global",table:"user",criteria:{role_ids:s},minimum:n})}function d(e,t){return o(e,f.flatten(f.map(t,"user_ids")))}function u(e,t){return o(e,f.map(t,"user_id"))}function p(e,t){return o(e,f.map(t,"target_user_id"))}function m(e,t){return o(e,f.flatten(f.map(t,"user_ids")))}function h(e,t){return o(e,f.map(t,"user_id"))}var f=n("../node_modules/lodash/lodash.js"),g=n("../node_modules/bluebird/js/browser/bluebird.js"),v=n("../../common/src/data/empty.js");e.exports={findUser:s,findUsers:o,findAllUsers:r,findUsersWithRoles:l,findProjectMembers:i,findExistingUsers:a,findActiveUsers:c,findStoryAuthors:d,findReactionAuthors:u,findBookmarkRecipients:p,findBookmarkSenders:m,findNotificationTriggerers:h}},"../../common/src/objects/settings/project-settings.js":function(e,t,n){"use strict";function s(e,t){if(e&&t&&!t.disabled){if("admin"===t.type||r.includes(e.user_ids,t.id))return e.archived?"read-only":"read-write";if(r.get(e,"settings.access_control.grant_view_access"))return e.archived?"read-only":r.get(e,"settings.access_control.grant_comment_access")?"read-comment":"read-only"}return null}function o(e,t){if(s(e,t))return!0;if("guest"===t.type){if(r.get(e,"settings.membership.allow_guest_request"))return!0}else if(r.get(e,"settings.membership.allow_user_request"))return!0;return!1}var r=n("../node_modules/lodash/lodash.js");e.exports={default:{},isVisibleToUser:o,getUserAccessLevel:s}},"../../common/src/objects/types/notification-types.js":function(e,t,n){"use strict";e.exports=t=["like","comment","task-completion","vote","survey","coauthor","bookmark","mention","note","assignment","issue","push","merge","join-request"],t.admin=["join-request"],t.git=["push","merge","note","assignment","issue"],t.git.membership=["assignment"]},"../../common/src/objects/types/reaction-types.js":function(e,t,n){"use strict";e.exports=t=["like","comment","vote","task-completion","note","assignment","tracking"],t.editable=["comment"],t.git=["note","assignment"]},"../../common/src/objects/types/resource-types.js":function(e,t,n){"use strict";e.exports=["image","video","audio","website"]},"../../common/src/objects/types/story-types.js":function(e,t,n){"use strict";(function(s){e.exports=t=["push","merge","branch","issue","milestone","merge-request","wiki","member","repo","post","survey","task-list"],t.editable=["post","task-list","survey"],t.trackable=["post"],t.git=["push","merge","branch","issue","milestone","merge-request","wiki","member","repo"],"[object process]"===Object.prototype.toString.call(void 0!==s?s:0)||(t.icons={push:n("../node_modules/octicons/build/svg/repo-push.svg"),merge:n("../node_modules/octicons/build/svg/git-merge.svg"),branch:n("../node_modules/octicons/build/svg/git-branch.svg"),issue:n("../node_modules/octicons/build/svg/issue-opened.svg"),"issue.opened":n("../node_modules/octicons/build/svg/issue-opened.svg"),"issue.closed":n("../node_modules/octicons/build/svg/issue-closed.svg"),"issue.reopened":n("../node_modules/octicons/build/svg/issue-reopened.svg"),milestone:n("../node_modules/octicons/build/svg/milestone.svg"),"merge-request":n("../node_modules/octicons/build/svg/git-pull-request.svg"),wiki:n("../node_modules/octicons/build/svg/file-text.svg"),member:n("../node_modules/octicons/build/svg/person.svg"),repo:n("../node_modules/octicons/build/svg/repo.svg"),post:n("../node_modules/octicons/build/svg/note.svg"),survey:n("../node_modules/octicons/build/svg/list-unordered.svg"),"task-list":n("../node_modules/octicons/build/svg/list-ordered.svg")})}).call(t,n("../node_modules/process/browser.js"))},"../../common/src/objects/utils/external-data-utils.js":function(e,t,n){"use strict";function s(e,t){return y.assign({type:e.type,server_id:e.id},t)}function o(e,t,n){var s=c(t,e);if(!s)throw new Error("Parent object is not linked to server");return s=y.pickBy(s,function(e,t){return"_"!==t.charAt(0)}),y.assign(s,n)}function r(e,t,n){return a(e,s(t,n))}function i(e,t,n,s){return a(e,o(t,n,s))}function a(e,t){return e.external?y.remove(e.external,{server_id:t.server_id}):e.external=[],e.external.push(t),t}function c(e,t,n){var s=y.find(e.external,{server_id:t.id});return!s||n&&!y.isMatch(s,n)?null:s}function l(e,t,n){var s=y.find(e.external,{type:t});return!s||n&&!y.isMatch(s,n)?null:s}function d(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return y.find(e.external,function(e){if(y.every(y.pick(e,n)))return!0})||null}function u(e,t){for(var n=arguments.length,s=Array(n>2?n-2:0),o=2;o<n;o++)s[o-2]=arguments[o];return y.find(e.external,function(e){return y.find(t.external,function(t){if(e.type===t.type&&e.server_id===t.server_id){if(y.isEmpty(s))return!0;if(y.isEqual(y.pick(e,s),y.pick(t,s)))return!0}})})||null}function p(e,t,n){y.remove(e.external,function(e){if(e.server_id===t.id&&(!n||y.isMatch(e,n)))return!0})}function m(e){return y.size(e.external)}function h(e,t,n,s){if(!s.ignore){var o,r=y.get(e,n),i=s.overwrite,a=y.indexOf(i,":");if(-1!==a&&(o=i.substr(a+1),i=i.substr(0,a)),"always"===i)void 0!==s.value?y.set(e,n,s.value):y.unset(e,n);else if("never"===i)void 0===r&&void 0!==s.value&&y.set(e,n,s.value);else{if("match-previous"!==i)throw new Error("Unknown option: "+i);var c=v(e,t),l=y.get(c,o);y.isEqual(r,l)&&(void 0!==s.value?(y.set(e,n,s.value),y.set(c,o,s.value)):(y.unset(e,n),y.unset(c,o)))}}}function f(e,t,n){if(!n.ignore){var s="details.resources",o=y.get(e,s,[]),r=y.findIndex(o,{type:n.type}),i=o[r],a=n.replace;if("always"===a)void 0===i?n.value&&o.push(n.value):n.value?o[r]=n.value:o.splice(r,1);else if("never"===a)void 0===i&&n.value&&o.push(n.value);else{if("match-previous"!==a)throw new Error("Unknown option: "+a);var c=v(e,t),l=y.get(c,"resources",[]),d=y.findIndex(l,{type:n.type}),u=l[d];y.isEqual(i,u)&&(void 0===i?n.value&&(o.push(n.value),l.push(n.value)):n.value?(o[r]=n.value,l[d]=n.value):(o.splice(r,1),l.splice(d,1))),y.isEmpty(l)?y.unset(c,"resources"):y.set(c,"resources",l)}y.isEmpty(o)?y.unset(e,s):y.set(e,s,o)}}function g(e,t,n,s,o){if(!o.ignore){var r,i=y.get(s,n),a=o.overwrite,c=y.indexOf(a,":");if(-1!==c&&(r=a.substr(c+1),a=a.substr(0,c)),"always"===a)y.set(s,n,o.value);else if("never"===a)void 0===i&&y.set(s,n,o.value);else{if("match-previous"!==a)throw new Error("Unknown option: "+a);var l=v(e,t),d=y.get(l,r);y.isEqual(i,d)&&(y.set(s,n,o.value),y.set(l,r,o.value))}}}function v(e,t){var n=y.find(e.exchange,{server_id:t.id});return n||(n={type:t.type,server_id:t.id,previous:{}},e.exchange||(e.exchange=[]),e.exchange.push(n)),n.previous}function b(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=y.first(t),o=y.slice(t,1),r=y.find(s.external,function(e){var t=y.pick(e,"server_id","type");return y.every(o,function(e){return y.some(e.external,t)})});return r?{id:r.server_id,type:r.type}:null}var y=n("../node_modules/lodash/lodash.js");e.exports={createLink:s,extendLink:o,addLink:r,inheritLink:i,attachLink:a,findLink:c,findLinkByServerType:l,findLinkByRelations:d,findLinkByRelative:u,removeLink:p,countLinks:m,importProperty:h,importResource:f,exportProperty:g,findCommonServer:b}},"../../common/src/objects/utils/issue-utils.js":function(e,t,n){"use strict";function s(e,t){if(!e)return null;var n,s;return o.each(t,function(t){var o=r.findLinkByRelative(e,t,"project");o&&o.issue&&(n=t,s=o)}),n?{id:s.issue.id,number:s.issue.number,title:e.details.title||"",labels:e.details.labels||[],repo_id:n.id}:null}var o=n("../node_modules/lodash/lodash.js"),r=n("../../common/src/objects/utils/external-data-utils.js");n("../../common/src/utils/tag-scanner.js");e.exports={extractIssueDetails:s}},"../../common/src/objects/utils/reaction-utils.js":function(e,t,n){"use strict";function s(e){return!!e&&!(e.id<1)}function o(e){return!!e&&(!!e.ptime&&!1!==e.ready)}function r(e){return!!e&&c.includes(d.editable,e.type)}function i(e,t,n){if(!e||!e.published)return!1;var s=e.ptime;return!s||l()<l(s).add(t,n)}function a(e){return e.uncommitted}var c=n("../node_modules/lodash/lodash.js"),l=n("../node_modules/moment/moment.js"),d=(n("../../common/src/data/merger.js"),n("../../common/src/objects/types/reaction-types.js")),u=n("../../common/src/objects/utils/story-utils.js");e.exports={isSaved:s,isActuallyPublished:o,isEditable:r,wasPublishedWithin:i,hasUncomittedChanges:a,mergeRemoteChanges:u.mergeRemoteChanges}},"../../common/src/objects/utils/resource-utils.js":function(e,t,n){"use strict";function s(e,t,n){var s=o(n,e),a=o(n,t),c=o(e,t),l=[];return r.each(n,function(n,o){var r=s[o],c=a[o],d=e[r],u=t[c];if(d&&u){var p={resource:d,index:r},m={resource:u,index:c},h={resource:n,index:o},f=i.mergeObjects(p,m,h);l.push(f)}}),r.each(t,function(e,t){r.includes(a,t)||l.push({resource:e,index:t})}),r.each(e,function(e,n){var o=c[n],i=t[o];r.includes(s,n)||i||l.push({resource:e,index:n})}),l=r.sortBy(l,"index"),r.map(l,"resource")}function o(e,t){var n=[],s=[];return r.each(e,function(e,o){var i=e.url||e.payload_token,a=r.findIndex(t,function(e,t){var n=e.url||e.payload_token;if(i===n&&!s[t])return!0});-1!==a&&(n[o]=a,s[a]=!0)}),n}var r=n("../node_modules/lodash/lodash.js"),i=n("../../common/src/data/merger.js");e.exports={mergeLists:s}},"../../common/src/objects/utils/story-utils.js":function(e,t,n){"use strict";function s(e){return!!e&&!(e.id<1)}function o(e){return!!e&&!!e.ptime}function r(e){return!!e&&(!!u.includes(h.editable,e.type)||!("issue"!==e.type||!e.details.exported))}function i(e){return!!e&&(!("issue"!==e.type||!e.details.exported)||u.includes(h.trackable,e.type||"post"))}function a(e,t,n){if(!e||!e.published)return!1;var s=e.ptime;return!s||p()<p(s).add(t,n)}function c(e,t,n){if(!e||!e.published)return!1;var s=e.btime||e.ptime;return!s||p()<p(s).add(t,n)}function l(e){return e.uncommitted}function d(e,t,n){if(!t)return!1;var s={details:{resources:f.mergeLists}},o=m.mergeObjects(e,t,n,s);return u.assign(e,o),!0}var u=n("../node_modules/lodash/lodash.js"),p=n("../node_modules/moment/moment.js"),m=n("../../common/src/data/merger.js"),h=n("../../common/src/objects/types/story-types.js"),f=n("../../common/src/objects/utils/resource-utils.js");e.exports={isSaved:s,isEditable:r,isTrackable:i,isActuallyPublished:o,wasPublishedWithin:a,wasBumpedWithin:c,hasUncomittedChanges:l,mergeRemoteChanges:d}},"../../common/src/objects/utils/user-utils.js":function(e,t,n){"use strict";function s(e,t){return!(!e||!t)&&w.includes(t.user_ids,e.id)}function o(e,t){return!(!e||!t)&&w.includes(e.requested_project_ids,t.id)}function r(e,t){return!!s(e,t)||!(!e||!t)&&("admin"===e.type||w.get(t,"settings.access_control.grant_view_access",!1))}function i(e,t){return!(!e||!t)&&("guest"===e.type?w.get(t,"settings.membership.allow_guest_request",!1):w.get(t,"settings.membership.allow_user_request",!1))}function a(e,t){return!(!e||!t)&&!!w.includes(t.user_ids,e.id)}function c(e){return!!e&&("admin"===e.type||"moderator"===e.type)}function l(e,t,n){if("read-write"!==n)return!1;if(k.isEditable(t)){if(c(t)&&k.wasPublishedWithin(t,14,"day"))return!0;if(a(e,t)&&k.wasPublishedWithin(t,3,"day"))return!0}return!1}function d(e,t,n){return"read-write"===n&&(!!c(e)||!(!a(e,t)||"guest"===e.type))}function u(e,t,n){if("read-write"!==n)return!1;if(c(e)){if(k.wasPublishedWithin(t,14,"day"))return!0}else if(a(e,t)&&k.wasPublishedWithin(t,3,"day"))return!0;return!1}function p(e,t,n){return"read-write"===n&&!(!c(e)&&!a(e,t)||k.wasBumpedWithin(t,1,"day"))}function m(e,t,n,s){return!!e&&("read-write"===s&&(!(!k.isTrackable(t)||!c(e)&&!a(e,t))&&w.some(n,function(t){if(w.includes(t.user_ids,e.id)&&t.details.issues_enabled)return!0})))}function h(e,t){return!(!e||!t)&&!(!w.includes(t.user_ids,e.id)||!t.details.web_url)}function f(e,t,n){return!!e}function g(e,t,n){return"guest"!==e.type&&("read-write"===n&&f(e,t,n))}function v(e,t){return!(!e||!t)&&t.user_id===e.id}function b(e,t,n,s){return!!e&&!(!_.isEditable(n)||!v(e,n)||"read-write"!==s&&"read-comment"!==s||!_.wasPublishedWithin(n,3,"day"))}function y(e,t,n,s){return!(!c(e)||"read-write"!==s)||(!(!v(e,n)||"read-write"!==s&&"read-comment"!==s||!_.wasPublishedWithin(n,3,"day"))||!(!a(e,t)||"read-write"!==s||!_.wasPublishedWithin(n,7,"day")))}function j(e,t,n,s){return"vote"!==n.type&&(!(!c(e)||"read-write"!==s)||!(!a(e,t)||"guest"===e.type||"read-write"!==s))}function x(e,t,n){if(w.includes(E.git,n)){if(t){if(w.isEmpty(t))return!1;if(w.includes(E.git.membership,n)&&e){var s=w.some(t,function(t){return h(e,t)});if(!s)return!1}}}else if(w.includes(E.admin,n)&&e&&"admin"!==e.type)return!1;return!0}var w=n("../node_modules/lodash/lodash.js"),k=(n("../node_modules/moment/moment.js"),n("../../common/src/objects/utils/story-utils.js")),_=n("../../common/src/objects/utils/reaction-utils.js"),E=n("../../common/src/objects/types/notification-types.js");e.exports={isMember:s,isPendingMember:o,isAuthor:a,isRespondent:v,canJoinProject:i,canViewProject:r,canModerate:c,canEditStory:l,canHideStory:d,canRemoveStory:u,canBumpStory:p,canAddIssue:m,canAccessRepo:h,canCreateBookmark:f,canSendBookmarks:g,canEditReaction:b,canHideReaction:j,canRemoveReaction:y,canReceiveNotification:x,mergeRemoteChanges:k.mergeRemoteChanges}},"../../common/src/routing/cors-rewriter.js":function(e,t,n){"use strict";function s(e,t){var n,s,o=new RegExp("^/(https?)/([^/]*)"),r=o.exec(e.path);r?(s=r[1]+":",n=r[2],e.path=e.path.substr(r[0].length),t.cors=!0):(n=window.location.host,s=window.location.protocol,t.cors=!1),s&&n&&(t.address=s+"//"+n)}function o(e,t){if(t.cors){var n=t.address;if(n){var s=n.indexOf("://"),o=n.substr(0,s),r=n.substr(s+3);e.path="/"+o+"/"+r+e.path}}}e.exports={extract:s,insert:o}},"../../common/src/routing/link-manager.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),r=o.PropTypes,i=n("../../common/src/data/database.js"),a=n("../../common/src/routing/route.js"),c=n("../../common/src/mixins/update-check.js"),l=n("../../common/src/widgets/diagnostics.jsx"),d=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=o.createClass({displayName:"LinkManager",mixins:[c],propTypes:{hasAccess:r.bool,database:r.instanceOf(i),route:r.instanceOf(a)},getInitialState:function(){return{found:[],added:[]}},findRecentLocation:function(){var e=this,t=this.props.database.use({by:this}),n={};return t.find({schema:"local",table:"project_link",criteria:n}).then(function(t){var n=s.sortBy(t,"atime"),o=s.last(n);return e.setState({found:s.map(n,"key")}),o})},saveLocation:function(e,t){var n=e+"/"+t;this.setState({added:s.union(s.without(this.state.added,n),[n])});var o=this.props.database.use({by:this}),r={name:t};o.findOne({schema:"global",table:"project",criteria:r}).then(function(s){if(!s)return null;var r=s.details.title,i=(new Date).toISOString(),a={key:n,address:e,schema:t,name:r,atime:i};return o.saveOne({schema:"local",table:"project_link"},a)})},removeLocations:function(e){var t=this.props.database.use({by:this}),n={};return t.find({schema:"local",table:"project_link",criteria:n}).then(function(e){return t.remove({schema:"local",table:"project_link"},e)})},removeDefunctLocations:function(e){var t=this.props.database.use({by:this}),n={};return t.find({schema:"global",table:"project",criteria:n}).then(function(o){return t.find({schema:"local",table:"project_link",criteria:n}).then(function(n){var r=s.filter(n,function(t){if(t.address===e&&!s.some(o,{name:t.schema}))return!0});return t.remove({schema:"local",table:"project_link"},r)})}).catch(function(e){})},componentDidUpdate:function(e,t){if(this.props.hasAccess&&(e.route!==this.props.route||!e.hasAccess)){var n=s.get(e.route,"parameters.address"),o=s.get(e.route,"parameters.schema"),r=s.get(this.props.route,"parameters.address"),i=s.get(this.props.route,"parameters.schema");n===r&&o===i&&e.hasAccess||r&&i&&this.saveLocation(r,i),n!==r&&this.removeDefunctLocations(r)}},render:function(){return o.createElement(l,{type:"link-manager"},o.createElement(d,{label:"Links"},o.createElement("div",null,"Found in cache: ",s.join(this.state.found," ")),o.createElement("div",null,"Added to cache: ",s.join(this.state.added," "))))}})},"../../common/src/routing/route-manager.jsx":function(e,t,n){"use strict";function s(e){var t=e,n="",s=t.indexOf("#");-1!==s&&(n=t.substr(s+1),t=t.substr(0,s));var r={},i=t.indexOf("?");return-1!==i&&(r=o(t.substr(i+1)),t=t.substr(0,i)),{path:t,query:r,hash:n}}function o(e){var t={},n=i.split(e,"&");return i.each(n,function(e){var n=i.split(e,"="),s=decodeURIComponent(n[0]),o=decodeURIComponent(n[1]||"");o=i.replace(o,/\+/g," "),t[s]=o}),t}function r(e){return e.pathname+e.search+e.hash}var i=n("../node_modules/lodash/lodash.js"),a=n("../node_modules/bluebird/js/browser/bluebird.js"),c=n("../node_modules/react/react.js"),l=c.PropTypes,d=n("../../common/src/data/database.js");e.exports=c.createClass({displayName:"RouteManager",propTypes:{pages:l.array.isRequired,database:l.instanceOf(d),rewrite:l.func,onChange:l.func,onRedirectionRequest:l.func},getInitialState:function(){return{basePath:this.getBasePath(),url:null,component:null,parameters:null,query:null,hash:""}},getBasePath:function(){var e=document.getElementsByTagName("BASE")[0];if(e){var t=e.getAttribute("href");return i.replace(t,/\/+$/,"")}return""},getURL:function(){return this.state.url},getComponent:function(){return this.state.component},getParameters:function(){return this.state.parameters},getQuery:function(){return this.state.query},getHash:function(){return this.state.hash},goTo:function(e,t){var n=r(e);return this.change(n,t)},find:function(e,t){var n,s;e instanceof Array?(n=e[0],s=i.slice(e,1)):n=e,t=i.clone(t)||{};var o=n.getURL(t),r=this.state.basePath;r&&(o.path=r+o.path),this.props.rewrite&&this.props.rewrite(o,t,"find");var a=o.path;if(!i.isEmpty(o.query)){var c="";i.forIn(o.query,function(e,t){c+=c?"&":"?",c+=t+"="+encodeURIComponent(e).replace(/%20/g,"+")}),a+=c}var l=i.map(s,function(e){return e.getHash(t)}),d=i.join(l,"");return d&&(a+="#"+d),a},parse:function(e){var t=this,n=s(e),o={};this.props.rewrite&&this.props.rewrite(n,o,"parse");var r=this.state.basePath;if(r){if(!i.startsWith(n.path,r))return null;n.path=n.path.substr(r.length)}var a,c=0;try{i.each(this.props.pages,function(e){if("function"!=typeof e.parseURL){var s=i.get(e,"displayName","Page");throw new Error(s+" does not implement the static function parseURL()")}var r=e.parseURL(n.path,n.query);if(r&&r.match.length>c){var l=i.assign(i.omit(r,"match"),o),d=t.find(e,l);n.hash&&(d+="#"+n.hash),a={url:d,component:e,parameters:l,query:n.query,hash:n.hash},c=r.match.length}})}catch(e){return console.error(e),null}return a},change:function(e,t,n){var s=this;if(this.state.url===e)return a.resolve(!1);var o=this.parse(e);return o?(this.setState(o,function(){n||(n=o.url);var e=window.location.protocol,r=window.location.host,i=e+"//"+r+n;window.location.href!==i&&(t?window.history.replaceState({},"",i):window.history.pushState({},"",i)),s.triggerChangeEvent()}),a.resolve(!0)):this.triggerRedirectionRequest(e,t)},reanchor:function(e){var t=window.location.href,n=t.indexOf("#"),s=-1!==n?t.substr(0,n):t;e&&(s+="#"+e),t!==s&&window.history.replaceState({},"",s),this.state.hash!==e&&this.setState({hash:e})},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},triggerRedirectionRequest:function(e,t){var n=this;if(this.props.onRedirectionRequest&&!this.redirecting){var s=this.state.basePath;return s&&i.startsWith(e,s)&&(e=e.substr(s.length),i.startsWith(e,"/")||(e="/"+e)),this.redirecting=!0,a.try(function(){return n.props.onRedirectionRequest({type:"redirection",target:n,url:e,replacing:t})}).finally(function(){n.redirecting=!1})}return a.reject(new Error("Unable to route URL to a page: "+e))},render:function(){return null},componentDidMount:function(){this.componentDidUpdate({},{}),window.addEventListener("popstate",this.handlePopState)},componentDidUpdate:function(e,t){!e.database&&this.props.database&&this.goTo(window.location,!0).catch(function(e){console.error(e)})},componentWillUnmount:function(){window.removeEventListener("popstate",this.handlePopState)},handlePopState:function(e){var t=this;e.preventDefault();var n=r(window.location),s=this.parse(n);s&&this.setState(s,function(){t.triggerChangeEvent()})}})},"../../common/src/routing/route.js":function(e,t,n){"use strict";function s(e){this.routeManager=e,this.url=this.routeManager.getURL(),this.path=r.replace(this.url,/[?#].*/,""),this.component=this.routeManager.getComponent(),this.parameters=this.routeManager.getParameters(),this.query=this.routeManager.getQuery(),this.hash=this.routeManager.getHash(),this.callbacks=[]}function o(e){var t=c[e];if(!t){var n=[],s=e.replace(/(:\w+)/g,function(e){return n.push(e),"([^\\/]+)"});t=c[e]=new RegExp("^"+s),t.names=n}return t}var r=("function"==typeof Symbol&&Symbol.iterator,n("../node_modules/lodash/lodash.js")),i=n("../node_modules/bluebird/js/browser/bluebird.js");e.exports=s,s.prototype.change=function(e,t,n){var s=this;if("string"!=typeof e)throw new Error("Invalid argument");return this.ask(e,!0).then(function(o){return!!o&&s.routeManager.change(e,t,n)})},s.prototype.find=function(e,t){return this.routeManager.find(e,t)},s.prototype.push=function(e,t){var n=this.routeManager.find(e,t);return this.change(n,!1)},s.prototype.replace=function(e,t){var n=this.routeManager.find(e,t);return this.change(n,!0)},s.prototype.reanchor=function(e){this.routeManager.reanchor(e),this.hash=e||""},s.prototype.ask=function(e,t){return t?i.reduce(this.callbacks,function(t,n){try{if(!t)return!1;var s=n(e,!0);return i.resolve(s)}catch(e){return console.error(e),!0}},!0).then(function(e){return e}):r.reduce(this.callbacks,function(e,t){try{if(!e)return!1;var n=t(!1);if("boolean"!=typeof n)throw new Error("Callback passed to keep() should return a boolean when interactive (2nd argument) is true");return n}catch(e){return console.error(e),!0}},!0)},s.prototype.keep=function(e){this.callbacks.push(e)},s.prototype.free=function(e){r.pull(this.callbacks,e)},s.prototype.toString=function(){return this.url},s.compare=function(e,t){if(e&&t){if(e.component!==t.component)return!1;var n=e.parameters,s=t.parameters,o=r.union(r.keys(n),r.keys(s));return r.every(o,function(e){var t=n[e],o=s[e];return!(!r.isEqual(t,o)&&(t instanceof Array&&0===t.length&&(t=null),o instanceof Array&&0===o.length&&(o=null),t||o))})}return!1},s.match=function(e,t,n){for(var s=0;s<t.length;s++){var i=o(t[s]),a=i.exec(e);if(a){var c={};return r.each(i.names,function(e,t){c[e.substr(1)]=a[t+1]}),n&&(c=n(c)),c&&(c.match=a[0]),c}}},s.parseIdList=function(e){if(void 0!=e){if(e){var t=r.split(e,"+");return r.map(t,r.strictParseInt)}return a}};var a=[];s.parseId=function(e,t){if(void 0!=e){if(t instanceof RegExp){var n=t.exec(e);if(!n)return;e=n[1]}return r.strictParseInt(e)}},s.parseDate=function(e){if(void 0!=e)return/\d{4}-\d{2}-\d{2}/.test(e)?e:""};var c={}},"../../common/src/routing/universal-link.js":function(e,t,n){"use strict";function s(e,t,n,s){var o="/"+r.replace(e,"://","/"),a=i+o+t;if(!r.isEmpty(n)){a+="?"+r.filter(r.map(n,function(e,t){if(void 0!=e)return t+"="+encodeURIComponent(e)})).join("&")}return s&&(a+="#"+s),a}function o(e){var t=a.exec(e);if(!t)return null;var n,e=t[1],s=t[2],o=r.replace(s.substr(1),"/","://"),i=t[3],c=t[4];if(c){n={};var l=r.split(c.substr(1),"&");r.each(l,function(e){var t=r.split(e,"="),s=t[0],o=decodeURIComponent(t[1]);n[s]=o})}var d=t[6];return{address:o,path:i,query:n,hash:d,url:e}}var r=n("../node_modules/lodash/lodash.js");e.exports={parse:o,form:s};var i="https://trambar.io",a=new RegExp("^"+i+"((/https?/[^/]*)([^?]*)([^#]*)?(#(.*))?)")},"../../common/src/theme/theme-manager.jsx":function(e,t,n){"use strict";function s(e){var t;if("number"==typeof e)return e;if(t=/^(\d+)\s*vw/.exec(e)){var n=parseInt(t[1]);return Math.round(n*document.body.offsetWidth/100)}if(t=/^(\d+)\s*vh/.exec(e)){var n=parseInt(t[1]);return Math.round(n*document.body.offsetHeight/100)}}function o(e){switch(e){case"cellular":case"2g":return"50kbps";case"3g":return"400kbps";case"4g":return"5000kbps";case"ethernet":case"wifi":default:return"10000kpbs"}}function r(e,t){if(t.original)return null;var n=e.clip;return t.hasOwnProperty("clip")?n=t.clip:n||(n=m.default(e.width,e.height)),n}function i(){var e=document.createElement("CANVAS");if(e.width=e.height=1,e.toDataURL){if(5===e.toDataURL("image/webp").indexOf("image/webp"))return!0}return!1}function a(){var e=navigator.userAgent;return!(!/Android/.test(e)||/Edge/.test(e))}function c(){if(!a())return!1;var e=window.innerHeight;return screen.height-e>200}function l(){var e=navigator.userAgent;return!!/iPhone|iPad|iPod/.test(e)||(!!/Android/.test(e)||!!/Windows Phone/.test(e))}var d=n("../node_modules/lodash/lodash.js"),u=n("../node_modules/react/react.js"),p=u.PropTypes,m=n("../../common/src/media/image-cropping.js"),h=n("../../common/src/transport/blob-manager.js"),f=n("../../common/src/data/database.js");e.exports=u.createClass({displayName:"ThemeManager",propTypes:{modes:p.object,serverAddress:p.string,networkType:p.string,database:p.instanceOf(f),useWebP:p.bool,onChange:p.func},getInitialState:function(){return{mode:this.selectMode(),onscreenKeyboard:c(),touchInterface:l(),devicePixelRatio:window.devicePixelRatio,webpSupport:i(),details:null}},getMode:function(){return this.state.mode},getModes:function(){var e=d.sortBy(d.toPairs(this.props.modes),1);d.map(e,0);return d.keys(this.props.modes)},getBandwidth:function(){return 1e3*parseInt(o(this.props.networkType))},getDetails:function(){return this.state.details},hasKeyboard:function(){return this.state.onscreenKeyboard},hasTouchInterface:function(){return this.state.touchInterface},getImageURL:function(e,t){if(!e)return null;t||(t={});var n=this.getRemoteImageURL(e,t);return n||t.remote||(n=this.getLocalImageURL(e,t)),n},getLocalImageURL:function(e,t){if(e.payload_token){var n;switch(e.type){case"video":case"audio":case"website":n="poster";break;default:n="main"}var s="payload:"+e.payload_token+"/"+n,o=h.find(s);if(!o)return null;var i={url:h.url(o),clip:r(e,t),format:e.format};return"json:"+JSON.stringify(i)}},getRemoteImageURL:function(e,t){var n;switch(e.type){case"video":case"audio":case"website":n=e.poster_url;break;default:n=e.url}if(n){var o="";if(!t.original){var i=[],a=r(e,t);if(a){var c=d.map([a.left,a.top,a.width,a.height],Math.round);i.push("cr"+c.join("-"))}var l=s(t.width),u=s(t.height);1!==this.state.devicePixelRatio&&(l*=this.state.devicePixelRatio,u*=this.state.devicePixelRatio),l=Math.round(l),u=Math.round(u);var p=l||u;p&&(l&&u?i.push("re"+l+"-"+u):!l&&u?i.push("h"+u):!u&&l&&i.push("w"+l),"png"!==e.format&&"gif"!==e.format||i.push("sh")),void 0!==t.quality&&i.push("q"+t.quality);var m;"svg"===e.format?m="svg":this.state.webpSupport&&!1!==this.props.useWebP||!0===this.props.useWebP?(m="webp","png"!==e.format&&"gif"!==e.format||p||i.push("l")):m="png"===e.format||"gif"===e.format?"png":"jpg",o="/"+i.join("+")+"."+m}return""+this.props.serverAddress+n+o}},getVideoURL:function(e,t){if(!e.url)return null;t||(t={});var n=""+this.props.serverAddress+e.url;if(!t||!t.original){var s=this.pickVideoVersion(e,t);s&&(n+="."+s.name+"."+s.format)}return n},getAudioURL:function(e,t){if(!e.url)return null;t||(t={});var n=""+this.props.serverAddress+e.url;if(!t||!t.original){var s=this.pickAudioVersion(e,t);s&&(n+="."+s.name+"."+s.format)}return n},getImageDimensions:function(e,t){t||(t={});var n=r(e,t);return n&&!t.original?{width:n.width,height:n.height}:{width:e.width,height:e.height}},getDimensions:function(e,t){if("video"===e.type){if(!t.original){var n=this.pickVideoVersion(e,t);if(n&&n.width&&n.height)return{width:n.width,height:n.height}}return{width:e.width,height:e.height}}return this.getImageDimensions(e,t)},pickVideoVersion:function(e,t){if(t.hasOwnProperty("bitrate"))return d.find(e.resources,{bitrates:{video:t.bitrate}})||null;var n=this.getBandwidth(),s=function(e){return parseInt(d.get(e,"bitrates.video"))},o=function(e){var t=s(e);return t<=n?n-t:1/0},r=function(e){var t=s(e);return t>n?t-n:0},i=d.sortBy(e.versions,[o,r]);return d.first(i)||null},pickAudioVersion:function(e,t){if(t.hasOwnProperty("bitrate"))return d.find(e.resources,{bitrates:{audio:t.bitrate}})||null;var n=this.getBandwidth(),s=function(e){return parseInt(d.get(e,"bitrates.audio"))},o=function(e){var t=s(e);return t<=n?n-t:1/0},r=function(e){var t=s(e);return t>n?t-n:0},i=d.sortBy(e.versions,[o,r]);return d.first(i)||null},getURL:function(e,t){switch(e.type){case"image":return this.getImageURL(e,t);case"video":return this.getVideoURL(e,t);case"website":return e.url;case"audio":return this.getAudioURL(e,t)}},selectMode:function(){var e=document.body.parentNode.offsetWidth,t="";for(var n in this.props.modes){e>=this.props.modes[n]&&(t=n)}return t},change:function(e){var t=this;return d.isEqual(this.state.details,e)?Promise.resolve(!0):(this.setState({details:e},function(){t.triggerChangeEvent()}),Promise.resolve(!0))},componentWillMount:function(){window.addEventListener("resize",this.handleWindowResize)},render:function(){return null},componentDidMount:function(){this.change(g)},componentDidUpdate:function(e,t){var n=this;if(!e.database&&this.props.database){var s=this.props.database.use({schema:"local",by:this});s.start().then(function(){return s.findOne({table:"settings",key:"theme"})}).then(function(e){e&&e.theme&&n.change(e.theme)})}},componentWillUnmount:function(){window.removeEventListener("resize",this.handleWindowResize)},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},handleWindowResize:function(e){var t=this,n={},s=this.selectMode();this.state.mode!==s&&(n.mode=s);var o=c();if(this.state.onscreenKeyboard!==o&&(n.onscreenKeyboard=o,o&&a())){var r=document.activeElement;r&&setTimeout(function(){r.scrollIntoViewIfNeeded({behavior:"smooth",block:"center"})},100)}this.state.devicePixelRatio!==window.devicePixelRatio&&(n.devicePixelRatio=window.devicePixelRatio),d.isEmpty(n)||this.setState(n,function(){t.triggerChangeEvent()})}});var g={}},"../../common/src/theme/theme.js":function(e,t,n){"use strict";function s(e){this.themeManager=e,this.mode=this.themeManager.getMode(),this.modes=this.themeManager.getModes(),this.keyboard=this.themeManager.hasKeyboard(),this.touch=this.themeManager.hasTouchInterface(),this.details=this.themeManager.getDetails()}var o=n("../node_modules/lodash/lodash.js");e.exports=s,s.prototype.change=function(e){return this.themeManager.change(e)},s.prototype.isAboveMode=function(e){var t=o.indexOf(this.modes,e);return o.indexOf(this.modes,this.mode)>=t},s.prototype.isBelowMode=function(e){return!this.isAboveMode(e)},s.prototype.getImageURL=function(e,t){return this.themeManager.getImageURL(e,t)},s.prototype.getVideoURL=function(e,t){return this.themeManager.getVideoURL(e,t)},s.prototype.getAudioURL=function(e,t){return this.themeManager.getAudioURL(e,t)},s.prototype.getURL=function(e,t){return this.themeManager.getURL(e,t)},s.prototype.getImageDimensions=function(e,t){return this.themeManager.getImageDimensions(e,t)},s.prototype.getDimensions=function(e,t){return this.themeManager.getDimensions(e,t)}},"../../common/src/transport/background-file-transfer.js":function(e,t,n){"use strict";function s(){try{a=i.init(),a.on("success",function(e){var t=r.find(c,{id:e.id});t&&t.onSuccess&&t.onSuccess(e),r.pull(c,t)}),a.on("progress",function(e){var t=r.find(c,{id:e.id});t&&t.onProgress&&t.onProgress(e)}),a.on("error",function(e){var t=r.find(c,{id:e.id});t&&t.onError&&t.onError(new Error(e.error))})}catch(e){a=null}}function o(e,t,n,s){var o={id:e,filePath:t,serverUrl:n,fileKey:"file",headers:r.get(s,"headers",{}),parameters:r.get(s,"parameters",{})};a.startUpload(o);var i={id:e,onSuccess:r.get(s,"onSuccess"),onError:r.get(s,"onError"),onProgress:r.get(s,"onProgress")};c.push(i)}var r=n("../node_modules/lodash/lodash.js"),i=window.FileTransferManager;e.exports={initialize:s,send:o};var a,c=[]},"../../common/src/transport/blob-manager.js":function(e,t,n){"use strict";function s(e){var t=new Date,n=d.find(m,{blob:e});if(n)return n.atime=t,n.localURL;var s;e instanceof Blob&&(s=URL.createObjectURL(e));var o=[s];return m.push({blob:e,localURL:s,urls:o,atime:t}),s}function o(e){if(!e)return null;var t=d.find(m,function(t){return d.includes(t.urls,e)});return t?(t.atime=new Date,t.blob):null}function r(e,t){if(e&&t){var n=d.find(m,{blob:e});n||(s(e),n=d.find(m,{blob:e})),n.urls.push(t)}}function i(e){if(!e)throw u.reject(new Error("Invalid argument"));var t=o(e);if(t)return u.resolve(t);var n={responseType:"blob"};return p.fetch("GET",e,null,n).then(function(t){s(t);return r(t,e),t})}function a(e){var t=d.findIndex(m,{blob:e});if(-1!==t){var n=m[t];m.splice(t,1),c(n)}}function c(e){e.blob instanceof Blob&&URL.revokeObjectURL(e.localURL)}function l(){var e=new Date,t=d.remove(m,function(t){if(d.some(t.urls,function(e){return/https?:/.test(e)})&&e-t.atime>18e4)return!0});d.each(t,function(e){c(e)})}var d=n("../node_modules/lodash/lodash.js"),u=n("../node_modules/bluebird/js/browser/bluebird.js"),p=(n("../node_modules/moment/moment.js"),n("../../common/src/transport/http-request.js"));e.exports={manage:s,find:o,associate:r,fetch:i,release:a,url:s};var m=[];setInterval(l,6e4)},"../../common/src/transport/blob-reader.js":function(e,t,n){"use strict";function s(e){return o(e).then(function(e){return new Uint8Array(e)})}function o(e){if("string"==typeof e){var t=e;return a.fetch(t).then(function(e){return o(e)})}return new i(function(t,n){var s=new FileReader;s.onload=function(e){t(s.result)},s.onerror=function(e){n(new Error("Unable to load blob"))},s.readAsArrayBuffer(e)})}function r(e){if("string"==typeof e){var t=e;return a.fetch(t).then(function(e){return r(e)})}return new i(function(t,n){var s=new FileReader;s.onload=function(e){t(s.result)},s.onerror=function(e){n(new Error("Unable to load text"))},s.readAsText(e)})}var i=n("../node_modules/bluebird/js/browser/bluebird.js"),a=n("../../common/src/transport/blob-manager.js");e.exports={loadUint8Array:s,loadArrayBuffer:o,loadText:r}},"../../common/src/transport/blob-stream.js":function(e,t,n){"use strict";function s(e,t){this.id=c.generate(),this.address=e,this.options=t,this.parts=[],this.closed=!1,this.error=null,this.pullResult=null,this.waitResult=null,this.size=0,this.started=!1,this.online=!0,this.transferred=0,this.promise=null,this.onProgress=null,this.onComplete=null}function o(){var e={};return e.promise=new i(function(t,n){e.resolve=t,e.reject=n}),e}var r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/bluebird/js/browser/bluebird.js"),a=n("../../common/src/transport/http-request.js"),c=n("../../common/src/utils/random-token.js"),l=n("../node_modules/async-do-while/index.js");e.exports=s,s.prototype.toBlob=function(){var e=r.map(this.parts,"blob");if(e.length>1){var t=e[0].type;return new Blob(e,{type:t})}return 1===e.length?e[0]:new Blob},s.prototype.setOptions=function(e){if(this.started)throw new Error("Cannot set options once a stream has started");this.options=r.assign({},this.options,e)},s.prototype.push=function(e){this.parts.push({blob:e,sent:!1}),this.size+=e.size,this.pullResult&&(this.pullResult.resolve(e),this.pullResult=null)},s.prototype.close=function(){this.closed=!0,r.find(this.parts,{sent:!1})||(this.pullResult&&(this.pullResult.resolve(null),this.pullResult=null),this.waitResult&&(this.waitResult.resolve(),this.waitResult=null))},s.prototype.pull=function(){var e=r.find(this.parts,{sent:!1});return e?i.resolve(e.blob):this.closed?i.resolve(null):(this.pullResult||(this.pullResult=o()),this.pullResult.promise)},s.prototype.finalize=function(e){var t=r.find(this.parts,{blob:e});if(t&&(t.sent=!0),this.waitResult){!r.find(this.parts,{sent:!1})&&this.closed&&this.waitResult.resolve()}},s.prototype.abandon=function(e){this.error=e,this.waitResult&&this.waitResult.reject(e)},s.prototype.wait=function(){if(this.closed){if(this.error)return i.reject(this.error);if(!r.find(this.parts,{sent:!1}))return i.resolve()}return this.waitResult||(this.waitResult=o()),this.waitResult.promise},s.prototype.pipe=function(e,t){t||(t=1048576);for(var n=e.size,s=e.type,o=0;o<n;o+=t){var r=Math.min(t,n-o),i=e.slice(o,o+r,s);this.push(i)}return this.close(),this},s.prototype.suspend=function(e){this.online&&(this.online=!1)},s.prototype.resume=function(){if(!this.online&&(this.online=!0,this.onConnectivity)){var e=this.onConnectivity;this.onConnectivity=null,this.connectivityPromise=null,e()}},s.prototype.waitForConnectivity=function(){var e=this;return this.online?i.resolve():(this.connectivityPromise||(this.connectivityPromise=new i(function(t,n){e.onConnectivity=t})),this.connectivityPromise)},s.prototype.start=function(){var e=this;return this.promise||(this.promise=this.waitForConnectivity().then(function(){return e.started=!0,new i(function(t,n){var s=0,o=!1,c=0,d=0,u=1e3;l.do(function(){return e.waitForConnectivity().then(function(){return e.pull().then(function(n){var s=e.address+"/srv/media/stream/?id="+e.id,i=new FormData;n?(i.append("file",n),i.append("chunk",d),0===d&&r.each(e.options,function(e,t){i.append(t,e)})):o=!0;var l={responseType:"json",onUploadProgress:function(t){if(n){var s=Math.round(n.size*(t.loaded/t.total));s&&e.updateProgress(c+s)}}};return a.fetch("POST",s,i,l).then(function(s){n&&(e.finalize(n),c+=n.size),0===d&&t(),d++})}).catch(function(e){if(!(e.statusCode>=400&&e.statusCode<=499&&429!==e.statusCode)&&++s<10)return u=Math.min(2*u,3e4),i.delay(u);throw e})})}),l.while(function(){return!o}),l.end().then(function(){e.onComplete&&e.onComplete({type:"complete",target:e})}).catch(function(t){e.abandon(t),0===d&&n(t)})})})),this.promise},s.prototype.updateProgress=function(e){this.transferred=e,this.onProgress&&this.onProgress({type:"progress",target:this,loaded:e,total:this.size,lengthComputable:this.closed})}},"../../common/src/transport/connectivity-monitor.jsx":function(e,t,n){"use strict";function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return navigator.connection||navigator.mozConnection||navigator.webkitConnection}function r(){var e=navigator.userAgent;return!(!/Android/.test(e)||/Edge/.test(e))}var i=n("../node_modules/lodash/lodash.js"),a=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),c=a.PropTypes,l=n("../../common/src/mixins/update-check.js"),d=n("../../common/src/widgets/diagnostics.jsx"),u=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=a.createClass({displayName:"ConnectivityMonitor",mixins:[l],propTypes:{inForeground:c.bool,onChange:c.func},getInitialState:function(){return{online:this.isOnline(),type:this.getConnectionType()}},isOnline:function(){return navigator.onLine},getConnectionType:function(){var e=o();return e?e.effectiveType:"unknown"},componentWillMount:function(){var e=this;window.addEventListener("online",this.handleBrowserOnline),window.addEventListener("offline",this.handleBrowserOffline);var t=o();t&&t.addEventListener("typechange",this.handleConnectionTypeChange),navigator.getBattery&&navigator.getBattery().then(function(t){t.addEventListener("levelchange",e.handleBatteryChange),t.addEventListener("chargingchange",e.handleBatteryChange),e.setState({battery:i.pick(t,"charging","level")})})},componentWillReceiveProps:function(e){var t=this;if(this.props.inForeground!==e.inForeground){if(r())if(e.inForeground){clearTimeout(this.offlineTimeout);var n=this.isOnline();!this.state.online&&n&&this.setState({online:!0},function(){t.triggerChangeEvent(t.state.online,t.state.type)})}else this.offlineTimeout=setTimeout(function(){t.state.online&&t.state.battery&&t.state.battery.level<.2&&t.setState({online:!1},function(){t.triggerChangeEvent(t.state.online,t.state.type)})},3e4);if(e.inForeground){var n=this.isOnline();this.state.online!==n&&this.setState({online:n},function(){t.triggerChangeEvent(!0,type)})}}},componentDidMount:function(){this.triggerChangeEvent(this.state.online,this.state.type)},componentWillUnmount:function(){var e=this;window.removeEventListener("online",this.handleBrowserOnline),window.removeEventListener("offline",this.handleBrowserOffline);var t=o();t&&t.removeEventListener("typechange",this.handleConnectionTypeChange),navigator.getBattery&&navigator.getBattery().then(function(t){t.removeEventListener("levelchange",e.handleBatteryChange),t.removeEventListener("chargingchange",e.handleBatteryChange)})},triggerChangeEvent:function(e,t){this.props.onChange&&this.props.onChange(s({type:"alertclick",target:this,online:e},"type",t))},handleBrowserOffline:function(e){var t=this;this.setState({online:!1},function(){t.triggerChangeEvent(!1,t.state.type)})},handleBrowserOnline:function(e){var t=this,n=this.getConnectionType();this.setState({online:!0,type:n},function(){t.triggerChangeEvent(!0,n)})},handleConnectionTypeChange:function(e){var t=this.getConnectionType();this.setState({type:t}),this.triggerChangeEvent(this.state.online,t)},handleBatteryChange:function(e){this.setState({battery:i.pick(e.target,"charging","level")})},render:function(){return a.createElement(d,{type:"connectivity-monitor"},a.createElement(u,{label:"Connection"},a.createElement("div",null,"Online: ",this.state.online?"yes":"no"),a.createElement("div",null,"Type: ",this.state.type)))}})},"../../common/src/transport/http-request.js":function(e,t,n){"use strict";function s(e,t,n,s){var c=new XMLHttpRequest,l=new i(function(i,l){var d=r.get(s,"username",null),u=r.get(s,"password",null),p=r.get(s,"contentType",null);if("GET"===(e=r.toUpper(e))&&!r.isEmpty(n)){var m=[];r.forIn(n,function(e,t){t=encodeURIComponent(t),void 0!==(e=encodeURIComponent(e))&&m.push(t+"="+e)}),-1===r.indexOf(t,"?")?t+="?":t+="&",t+=r.join(m,"&"),n=null}"json"===p&&(p="application/json"),"application/json"===p&&r.isObject(n)&&(n=JSON.stringify(n,o)),c.timeout=r.get(s,"timeout"),c.withCredentials=r.get(s,"crossSite",!1),c.responseType=r.get(s,"responseType",""),c.attributes=r.get(s,"attributes"),c.attributes&&c.upload&&(c.upload.attributes=c.attributes),c.open(e,t,!0,d,u),p&&c.setRequestHeader("Content-Type",p),c.onload=function(e){if(c.status>=400){var t=new a(c.status,c.response);l(t)}else{var n=c.response;i(n)}},c.ontimeout=function(e){l(new Error("Request timed out"))},c.onerror=function(e){l(new Error(e.message))},c.onabort=function(e){l(new Error("Transfer aborted: "+t))};var h=r.get(s,"onDownloadProgress"),f=r.get(s,"onUploadProgress");c.onprogress=function(e){h&&h(e)},c.upload.onprogress=function(e){f&&f(e)},c.send(n)});return l.cancel=function(){c.abort()},l}function o(e,t){if(!(t instanceof Blob))return t}var r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/bluebird/js/browser/bluebird.js"),a=n("../../common/src/errors/http-error.js");e.exports={fetch:s}},"../../common/src/transport/notification-unpacker.js":function(e,t,n){"use strict";function s(e){return e.changes?{type:"change",changes:o(e)}:e.alert?{type:"alert",alert:r(e)}:e.socket?{type:"connection",connection:i(e)}:e.address&&e.schema&&e.notification_id?{type:"alert",alert:a(e)}:null}function o(e){var t=[],n=e.address;return c.each(e.changes,function(e,s){var o=c.split(s,"."),r=o[0],i=o[1];c.each(e.ids,function(s,o){var a=e.gns[o];t.push({address:n,schema:r,table:i,id:s,gn:a})})}),t}function r(e){var t=e.address;return alert=c.clone(e.alert),alert.address=t,alert.profile_image&&(alert.profile_image=t+alert.profile_image),alert.attached_image&&(alert.attached_image=t+alert.attached_image),alert}function i(e){return{method:"websocket",relay:null,token:e.socket,address:e.address,details:{user_agent:navigator.userAgent}}}function a(e){return{title:"",message:"",type:e.type,address:e.address,schema:e.schema,notification_id:parseInt(e.notification_id),reaction_id:parseInt(e.reaction_id),story_id:parseInt(e.story_id),user_id:parseInt(e.user_id),foreground:!!e.foreground}}var c=n("../node_modules/lodash/lodash.js");e.exports={unpack:s}},"../../common/src/transport/payload-manager.jsx":function(e,t,n){"use strict";(function(t){function s(e){return e>=1073741824?o.round(e/1073741824)+" GB":e>=1048576?o.round(e/1048576)+" MB":e>=1024?o.round(e/1024)+" KB":e>0?e+" bytes":"0"}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/bluebird/js/browser/bluebird.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../node_modules/moment/moment.js"),l=n("../../common/src/transport/blob-stream.js"),d=n("../../common/src/transport/payload.js"),u=n("../../common/src/data/database.js"),p=n("../../common/src/routing/route.js"),m=n("../../common/src/widgets/diagnostics.jsx"),h=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=i.createClass({displayName:"PayloadManager",propTypes:{online:a.bool,database:a.instanceOf(u),route:a.instanceOf(p),onChange:a.func},getDefaultProps:function(){return{online:!0}},getInitialState:function(){var e={payloads:[],streams:[]};return o.assign(this,e),e},updateList:function(e,t){var n=this[e],s=t(n);this[e]=s;var o={};o[e]=s,this.setState(o)},add:function(e,t){t||(t={});var n=this.props.route.parameters,s=t.address||n.address,r=t.schema||n.schema||"global",i=new d(s,r,e);return i.onUploadProgress=this.handleUploadProgress,i.onUploadComplete=this.handleUploadComplete,this.updateList("payloads",function(e){return o.concat(e,i)}),i},stream:function(){var e=this.props.route.parameters,t=new l(e.address);return this.props.online||t.suspend(),this.updateList("streams",function(e){return o.concat(e,t)}),t},dispatch:function(e){var t=this,n=o.filter(this.payloads,function(t){return o.includes(e,t.token)});o.isEmpty(n)||this.acquirePermission(n).then(function(){return o.each(n,function(e){e.send()}),null}).then(function(){t.triggerChangeEvent()})},inquire:function(e){var n=this;if(o.isEmpty(e))return null;var s=o.filter(this.payloads,function(t){return o.includes(e,t.token)});if(s.length<e)return t(function(){var t=n.props.route.parameters,s=[];o.each(e,function(e){o.find(n.payloads,{token:e})||s.push(new d(t.address,t.schema,"unknown",e))}),n.updateList("payloads",function(e){return o.concat(e,s)})}),{action:"unknown",progress:void 0};var r=0,i=0;if(o.each(s,function(e){r+=e.getSize(),i+=e.getUploaded()}),(i=r>0?Math.round(i/r*100):100)<100)return{action:"uploading",progress:i};if(o.some(s,{failed:!0}))return{action:"failed"};var a=o.filter(s,function(e){return"web-site"===e.type});if(o.some(a,{completed:!1})){var c=0;return o.each(l,function(e){c+=e.processed}),c=Math.round(c/o.size(a)),{action:"rendering",progress:c}}var l=o.filter(s,function(e){return"video"===e.type||"audio"===e.type});if(o.some(l,{completed:!1})){var u=0;return o.each(l,function(e){u+=e.processed}),u=Math.round(u/o.size(l)),{action:"transcoding",progress:u}}return null},getUploadProgress:function(){var e=0,t=0;return o.each(this.payloads,function(n){n.started&&(n.failed||n.sent||(t+=n.getRemainingFiles(),e+=n.getRemainingBytes()))}),t>0?{files:t,bytes:e}:null},acquirePermission:function(e){var t=o.filter(e,{approved:!1});if(o.isEmpty(t))return r.resolve();var n=this.props.database.use({by:this});return n.start().then(function(s){var r,i=o.map(t,function(e){r=e.schema;var t={};return o.each(e.parts,function(e){t[e.name]=!1}),{token:e.token,action:e.action,options:t,user_id:s}});return n.save({schema:r,table:"task"},i).then(function(t){o.each(e,function(e){e.approved=!0})}).catch(function(t){o.each(e,function(e){e.failed=!0})})})},componentDidMount:function(){},componentDidUpdate:function(e,t){var n=this;!e.database&&this.props.database&&this.triggerChangeEvent(),e.database===this.props.database&&t.payloads===this.state.payloads||this.props.route&&this.updateBackendProgress(),e.online!==this.props.online&&o.each(this.streams,function(e){n.props.online?e.resume():e.suspend()})},updateBackendProgress:function(){var e=this,t=this.props.route.parameters,n=t.schema||"global",s=o.filter(this.payloads,{sent:!0,completed:!1,address:t.address,schema:n});if(!o.isEmpty(s)){var r=this.props.database.use({schema:n,by:this});r.start().then(function(t){var n={token:o.map(s,"token"),user_id:t};return r.find({table:"task",criteria:n}).then(function(t){var n=!1;o.each(t,function(e){var t=o.find(s,{token:e.token});t&&t.updateBackendStatus(e)&&(n=!0)}),n&&e.triggerChangeEvent()})})}},triggerChangeEvent:function(){this.props.onChange&&this.props.onChange({type:"change",target:this})},handleUploadProgress:function(e){this.triggerChangeEvent()},handleUploadComplete:function(e){this.triggerChangeEvent()},render:function(){var e=this.state.payloads;if(o.isEmpty(e))return null;var t=o.filter(e,{started:!1}),n=o.filter(e,{started:!0,sent:!1,failed:!1}),s=o.filter(e,{sent:!0,completed:!1}),r=o.filter(e,{failed:!0}),a=o.filter(e,{completed:!0});return i.createElement(m,{type:"payload-manager"},i.createElement(h,{label:"Pending payloads",hidden:o.isEmpty(t)},o.map(t,this.renderPayload)),i.createElement(h,{label:"Payloads in transit",hidden:o.isEmpty(n)},o.map(n,this.renderPayload)),i.createElement(h,{label:"Payloads in backend process",hidden:o.isEmpty(s)},o.map(s,this.renderPayload)),i.createElement(h,{label:"Failed payloads",hidden:o.isEmpty(r)},o.map(r,this.renderPayload)),i.createElement(h,{label:"Completed payloads",hidden:o.isEmpty(a)},o.map(a,this.renderPayload)))},renderPayload:function(e,t){return i.createElement("div",{key:t},i.createElement("div",null,"Payload token: ",e.token),i.createElement("div",null,"Resource type: ",e.type),this.renderTransferStatus(e),this.renderBackendStatus(e),i.createElement("ol",null,o.map(e.parts,this.renderPayloadPart)))},renderTransferStatus:function(e){if(!e.started)return null;if(e.sent){var t,n=.001*(c(e.uploadEndTime)-c(e.uploadStartTime)),r=e.getSize();r>0&&(t="("+s(r/n)+" per sec)");var a=o.round(n,n<1?2:0)+"s";return i.createElement("div",null,"Upload duration: ",a," ",t)}var r=e.getSize(),l=e.getUploaded(),d=Math.round(l/r*100||0)+"%";return i.createElement("div",null,"Upload progress: ",d)},renderBackendStatus:function(e){if(!e.sent)return null;if(e.completed){var t=.001*(c(e.processEndTime)-c(e.uploadEndTime)),n=o.round(t,t<1?2:0)+"s";return i.createElement("div",null,"Backend duration: ",n)}var s=e.processed+"%";return i.createElement("div",null,"Backend progress: ",s)},renderPayloadPart:function(e,t){var n,o=e.name;e.blob||e.cordovaFile?n="File":e.stream?n="Stream":e.url&&(n="URL");var r;return e.size>0&&(r=i.createElement("span",{className:"file-size"},s(e.size))),i.createElement("li",{key:t},n," - ",o," ",r)}})}).call(t,n("../node_modules/timers-browserify/main.js").setImmediate)},"../../common/src/transport/payload.js":function(e,t,n){"use strict";function s(e,t,n,s){this.address=e,this.schema=t,this.type=n,this.action="add-"+n,this.token=s||d.generate(),this.recreated=!!s,this.options={},this.url="payload:"+this.token,this.processed=0,this.promise=null,this.parts=[],this.approved=!1,this.started=!!s,this.sent=!1,this.failed=!1,this.canceled=!1,this.completed=!1,this.uploadStartTime=null,this.uploadEndTime=null,this.processEndTime=null,this.onUploadProgress=null,this.onUploadComplete=null}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/bluebird/js/browser/bluebird.js"),i=n("../node_modules/moment/moment.js"),a=(n("../../common/src/transport/blob-stream.js"),n("../../common/src/transport/blob-manager.js")),c=n("../../common/src/transport/http-request.js"),l=(n("../../common/src/transport/background-file-transfer.js"),n("../../common/src/errors/http-error.js")),d=(n("../../common/src/errors/file-error.js"),n("../../common/src/utils/random-token.js")),u=n("../node_modules/async-do-while/index.js");e.exports=s,s.getImageURL=function(e){if(e.payload_token){var t;switch(e.type){case"image":t="main";break;default:t="poster"}var n="payload:"+e.payload_token+"/"+t;return a.find(n)}},s.prototype.attachFile=function(e,t){t||(t="main");var n="payload:"+this.token+"/"+t;return a.associate(e,n),e instanceof Blob&&this.parts.push({blob:e,size:e.size,uploaded:0,name:t}),this},s.prototype.attachStream=function(e,t){return t||(t="main"),this.parts.push({stream:e,size:e.size,uploaded:e.transferred,name:t}),this},s.prototype.attachURL=function(e,t){return t||(t="main"),this.parts.push({url:e,name:t}),this},s.prototype.attachStep=function(e,t){var n;switch(t){case"poster":n={generate_poster:!0}}return this.setPartOptions(n,e),this.parts.push({name:t}),this},s.prototype.setPartOptions=function(e,t){t||(t="main");var n=o.find(this.parts,{name:t});if(!n)throw new Error("Unable to find part: "+t);n.stream?n.stream.setOptions(e):n.options=o.assign({},n.options,e)},s.prototype.send=function(){var e=this;if(!this.started){if(!this.approved)throw new l(403);this.started=!0,this.uploadStartTime=i().toISOString(),r.each(this.parts,function(t){var n=!1,s=1,o=1e3;return u.do(function(){return e.sendPart(t).then(function(){n=!0}).catch(function(t){if(t.statusCode>=400&&t.statusCode<=499)throw t;return o=Math.min(2*o,1e4),r.delay(o).then(function(){e.canceled||s++})})}),u.while(function(){return!n&&!e.canceled}),u.end()}).then(function(){e.sent=!0,e.uploadEndTime=i().toISOString(),e.onUploadComplete&&e.onUploadComplete({type:"uploadcomplete",target:e})})}},s.prototype.sendPart=function(e){return e.stream?this.sendStream(e):e.blob?this.sendBlob(e):(e.cordovaFile,e.url?this.sendURL(e):r.resolve())},s.prototype.sendBlob=function(e){var t=this,n=this.getDestinationURL(e.name),s=e.blob,r=new FormData;r.append("file",s),o.each(e.options,function(e,t){r.append(t,e)});var i={responseType:"json",onUploadProgress:function(n){t.updateProgress(e,n.loaded/n.total)}};return e.uploaded=0,c.fetch("POST",n,r,i).then(function(e){return t.associateRemoteURL(e.url,s),e})},s.prototype.sendCordovaFile=function(e){return},s.prototype.sendStream=function(e){var t=this,n=this.getDestinationURL(e.name),s=e.stream;return s.onProgress=function(n){t.updateProgress(e,n.loaded/n.total)},s.start().then(function(){var e={responseType:"json",contentType:"json"};return c.fetch("POST",n,{stream:s.id},e)})},s.prototype.sendURL=function(e){var t=this.getDestinationURL(e.name),n={responseType:"json",contentType:"json"},s=o.extend({url:e.url},e.options);return c.fetch("POST",t,s,n)},s.prototype.getSize=function(){var e=o.map(this.parts,function(e){return e.size||0});return o.sum(e)},s.prototype.getUploaded=function(){var e=o.map(this.parts,function(e){return e.uploaded||0});return o.sum(e)},s.prototype.getRemainingFiles=function(){return o.filter(this.parts,function(e){if(e.size>0&&e.uploaded<e.size)return!0}).length},s.prototype.getRemainingBytes=function(){var e=o.map(this.parts,function(e){return e.size>0?e.size-e.uploaded:0});return o.sum(e)},s.prototype.getDestinationURL=function(e){var t;switch(this.type){case"image":"main"===e&&(t="/srv/media/images/upload/"+this.schema+"/");break;case"video":"main"===e?t="/srv/media/videos/upload/"+this.schema+"/":"poster"===e&&(t="/srv/media/videos/poster/"+this.schema+"/");break;case"audio":"main"===e?t="/srv/media/audios/upload/"+this.schema+"/":"poster"===e&&(t="/srv/media/audios/poster/"+this.schema+"/");break;case"website":"poster"===e&&(t="/srv/media/html/poster/"+this.schema+"/")}return t?""+this.address+t+"?token="+this.token:null},s.prototype.updateProgress=function(e,t){t&&(e.uploaded=Math.round(e.size*t),this.onUploadProgress&&this.onUploadProgress({type:"uploadprogress",target:this}))},s.prototype.updateBackendStatus=function(e){var t=!1;return"unknown"===this.type&&(this.action=e.action,this.type=o.replace(this.action,/^add\-/,""),this.sent=e.completion>0,t=!0),this.processed!==e.completion&&(this.processed=e.completion,t=!0),this.processEndTime!==e.etime&&(this.processEndTime=e.etime,e.etime&&!e.failed&&(this.completed=!0),t=!0),e.failed&&!this.failed&&(this.failed=!0,t=!0),t},s.prototype.associateRemoteURL=function(e,t){e&&a.associate(t,this.address+e)}},"../../common/src/transport/payloads.js":function(e,t,n){"use strict";function s(e,t){this.payloadManager=e,this.destination=t,this.uploading=this.payloadManager.getUploadProgress()}function o(e){var t=[];if(e){var n=e.details;n&&(n.resources?r.each(n.resources,function(e){e.payload_token&&t.push(e.payload_token)}):n.payload_token&&t.push(n.payload_token))}return t}var r=n("../node_modules/lodash/lodash.js");n("../node_modules/bluebird/js/browser/bluebird.js");e.exports=s,s.prototype.add=function(e){return this.payloadManager.add(e,this.destination)},s.prototype.override=function(e){return new s(this.payloadManager,e)},s.prototype.stream=function(){return this.payloadManager.stream()},s.prototype.dispatch=function(e){var t=o(e);return this.payloadManager.dispatch(t)},s.prototype.inquire=function(e){var t=o(e);return this.payloadManager.inquire(t)}},"../../common/src/transport/websocket-notifier.jsx":function(e,t,n){"use strict";function s(){return new a(function(e,t){Notification.requestPermission(function(n){"granted"===n?e():t(new Error("Unable to gain permission"))})})}function o(e,t){return c.createElement("pre",{key:t},JSON.stringify(e,void 0,4))}function r(e){try{return JSON.parse(e)}catch(e){return{}}}var i=n("../node_modules/lodash/lodash.js"),a=n("../node_modules/bluebird/js/browser/bluebird.js"),c=n("../node_modules/react/react.js"),l=c.PropTypes,d=n("../node_modules/sockjs-client/lib/entry.js"),u=n("../node_modules/async-do-while/index.js"),p=n("../../common/src/transport/notification-unpacker.js"),m=n("../../common/src/locale/locale.js"),h=n("../../common/src/widgets/diagnostics.jsx"),f=n("../../common/src/widgets/diagnostics-section.jsx");e.exports=c.createClass({displayName:"WebsocketNotifier",propTypes:{serverAddress:l.string,basePath:l.string,initialReconnectionDelay:l.number,maximumReconnectionDelay:l.number,defaultProfileImage:l.string,online:l.bool,locale:l.instanceOf(m),onConnect:l.func,onDisconnect:l.func,onNotify:l.func,onAlertClick:l.func},statics:{isAvailable:function(){return!0}},getDefaultProps:function(){return{basePath:"/srv/socket",online:!0,initialReconnectionDelay:500,maximumReconnectionDelay:3e4}},getInitialState:function(){return{socket:null,notificationPermitted:!1,reconnectionCount:0,recentMessages:[]}},componentWillMount:function(){var e=this;s().then(function(){e.setState({notificationPermitted:!0})}).catch(function(e){}),this.updateConnection(this.props)},componentWillReceiveProps:function(e){this.props.serverAddress!==e.serverAddress&&this.updateConnection(e),!this.props.online&&e.online?this.onConnectivity&&this.onConnectivity():this.props.online&&!e.online&&this.state.socket&&this.state.socket.close()},updateConnection:function(e){this.disconnect(),e.serverAddress&&this.connect(e.serverAddress)},waitForConnectivity:function(){var e=this;return this.props.online?a.resolve():(this.connectivityPromise||(this.connectivityPromise=new a(function(t,n){e.onConnectivity=function(){e.connectivityPromise=null,e.onConnectivity=null,t()}})),this.connectivityPromise)},connect:function(e){var t=this,n=this.connectionAttempt;if(n&&n.serverAddress===e)return n.promise;n=this.connectionAttempt={serverAddress:e};var s=!1,o=this.props.initialReconnectionDelay,c=this.props.maximumReconnectionDelay;return u.do(function(){return t.createSocket(e).then(function(o){n===t.connectionAttempt&&(o.onmessage=function(n){if(t.state.socket===o){var s=r(n.data),a=i.assign({address:e},s),c=p.unpack(a);"change"===c.type?t.triggerNotifyEvent(c.changes):"alert"===c.type?t.showAlert(c.alert):"connection"===c.type&&(o.id=c.connection.token,t.triggerConnectEvent(c.connection));var l=i.slice(t.state.recentMessages);l.unshift(s),l.length>10&&l.splice(10),t.setState({recentMessages:l})}},o.onclose=function(){t.state.socket===o&&(t.setState({socket:null},function(){t.connect(e).then(function(e){if(e){var n=t.state.reconnectionCount+1;t.setState({reconnectionCount:n}),console.log("Connection reestablished")}})}),t.props.serverAddress===e&&(console.log("Disconnect"),t.triggerDisconnectEvent()))},t.setState({socket:o})),s=!0}).catch(function(t){return o*=2,o>c&&(o=c),console.log("Connection attempt in "+o+"ms: "+e),a.delay(o)})}),u.while(function(){return n===t.connectionAttempt&&!s}),u.return(function(){return t.connectionAttempt=null,s}),n.promise=u.end(),n.promise},disconnect:function(){var e=this.state.socket;e&&this.setState({socket:null,reconnectionCount:0},function(){e.close()})},createSocket:function(e){var t=this.props.basePath;return this.waitForConnectivity().then(function(){return new a(function(n,s){var o=""+e+t,r=new d(o),i=!1;r.onopen=function(e){i||(i=!0,n(r))},r.onclose=function(){i||s(new Error("Unable to establish a connection"))},r.onerror=function(e){i||(i=!0,s(new Error(e.message)))}})})},triggerNotifyEvent:function(e){this.props.onNotify&&this.props.onNotify({type:"notify",target:this,changes:e})},triggerConnectEvent:function(e){this.props.onConnect&&this.props.onConnect({type:"connect",target:this,connection:e})},triggerDisconnectEvent:function(){this.props.onDisconnect&&this.props.onDisconnect({type:"disconnect",target:this})},triggerAlertClickEvent:function(e){this.props.onAlertClick&&this.props.onAlertClick({type:"alertclick",target:this,alert:e})},showAlert:function(e){var t=this;if(this.state.notificationPermitted){var n={};e.profile_image?n.icon=e.profile_image:n.icon=this.props.defaultProfileImage,e.message?n.body=e.message:e.attached_image&&(n.image=e.attached_image),n.lang=i.get(this.props.locale,"languageCode");var s=new Notification(e.title,n);s.addEventListener("click",function(){t.triggerAlertClickEvent(e),s.close()})}},render:function(){var e=i.get(this.state.socket,"id");return c.createElement(h,{type:"websocket-notifier"},c.createElement(f,{label:"Connection"},c.createElement("div",null,"ID: ",e),c.createElement("div",null,"Socket: ",this.state.socket?"established":"none"),c.createElement("div",null,"Reconnection count: ",this.state.reconnectionCount),c.createElement("div",null,"Notification: ",this.state.notificationPermitted?"permitted":"denied")),c.createElement(f,{label:"Recent messages"},i.map(this.state.recentMessages,o)))}})},"../../common/src/utils/component-refs.js":function(e,t,n){"use strict";function s(e){if(!this)return new s(e);var t=this,n={};o.forIn(e,function(e,s){var o=function(e){if(!(arguments.length>0))return t[s];t[s]=e};n[s]=o}),this.setters=n,o.forIn(e,function(e,n){t[n]=null})}var o=n("../node_modules/lodash/lodash.js");e.exports=s},"../../common/src/utils/date-tracker.js":function(e,t,n){"use strict";function s(e,t){"change"===e&&t&&m.push(t)}function o(e,t){"change"===e&&t&&d.pull(m,t)}function r(e){h=e,a(u())&&l()}function i(e){return e.format("YYYY-MM-DD")}function a(e){var n=!1;return d.each(p,function(s,o){var r=s(e.clone()),a=t[o];if(r){var c=i(r);a!==c&&(t[o]=c,t[o+"ISO"]=r.toISOString(),n=!0)}}),n}function c(){var e=u();i(e)!==t.today&&(a(e),l())}function l(){var e={type:"change",target:t};d.each(m,function(t){t(e)})}var d=n("../node_modules/lodash/lodash.js"),u=n("../node_modules/moment/moment.js");e.exports=t={addEventListener:s,removeEventListener:o,setLocale:r,today:void 0};var p={today:function(e){return e.startOf("day")},yesterday:function(e){return e.subtract(1,"day").startOf("day")},oneWeekAgo:function(e){return e.subtract(7,"day").startOf("day")},twoWeeksAgo:function(e){return e.subtract(14,"day").startOf("day")},oneMonthAgo:function(e){return e.subtract(1,"month").startOf("day")},twoMonthsAgo:function(e){return e.subtract(2,"month").startOf("day")},startOfWeek:function(e){if(h)return e.locale(h).startOf("week")},endOfWeek:function(e){if(h)return e.locale(h).endOf("week")},startOfMonth:function(e){return e.startOf("month")},endOfMonth:function(e){return e.endOf("month")},startOfLastMonth:function(e){return e.subtract(1,"month").startOf("month")},endOfLastMonth:function(e){return e.subtract(1,"month").endOf("month")},startOfYear:function(e){return e.startOf("year")},endOfYear:function(e){return e.endOf("year")}},m=[],h="";setInterval(c,1e3),c()},"../../common/src/utils/date-utils.js":function(e,t,n){"use strict";function s(e){var t=e instanceof a?e:a(e),n=t.clone().endOf("day");return"["+t.toISOString()+","+n.toISOString()+"]"}function o(e,t){for(var n=e instanceof a?e:a(e),s=t instanceof a?t:a(t),o=n.startOf("month"),r=s.endOf("month"),i=[],c=o.clone();c<=r;c.add(1,"month")){var l=c.toISOString(),d=c.clone().endOf("month").toISOString(),u="["+l+","+d+"]";i.push(u)}return i}function r(e,t){for(var n=startTime instanceof a?startTime:a(startTime),s=t instanceof a?t:a(t),o=n.startOf("day"),r=s.endOf("day"),i=[],c=o.clone();c<=r;c.add(1,"day")){var l=c.format("YYYY-MM-DD");i.push(l)}return i}function i(){return a().utcOffset()}var a=n("../node_modules/moment/moment.js");n("../../common/src/utils/date-tracker.js");e.exports={getDayRange:s,getMonthRanges:o,getTimeZoneOffset:i,getDates:r}},"../../common/src/utils/focus-manager.js":function(e,t,n){"use strict";function s(e,t){a.unshift({component:e,props:t}),c=i.filter(c,function(n){return!i.isMatch(t,n)||(e.focus(),!1)})}function o(e){a=i.filter(a,function(t){return t.component!==e})}function r(e){var t=i.find(a,{props:e});t?t.component.focus():c.push(e)}var i=n("../node_modules/lodash/lodash.js");e.exports={register:s,unregister:o,focus:r};var a=[],c=[]},"../../common/src/utils/konami-code.js":function(e,t,n){"use strict";function s(e){a.push(e),1===a.length&&window.addEventListener("keydown",r)}function o(e){i.pull(a,e),0===a.length&&window.removeEventListener("keydown",r)}function r(t){l.push(t.keyCode),l.length>c.length&&l.splice(0,l.length-c.length),i.isEqual(l,c)&&i.each(a,function(t){t({type:"cheat",target:e.exports})})}var i=n("../node_modules/lodash/lodash.js");e.exports={addListener:s,removeListener:o};var a=[],c=[38,38,40,40,37,39,37,39,66,65],l=[]},"../../common/src/utils/link-parser.js":function(e,t,n){"use strict";function s(e){var t={},n=o.split(e,/[\r\n]+/);return o.each(n,function(e){var n=/^(\w+)\s*=\s*(.*)/.exec(e);if(n){var s=o.lowerCase(n[1]),r=o.trim(n[2]);t[s]=r}}),console.log(t),t.url?t:null}var o=n("../node_modules/lodash/lodash.js");e.exports={parse:s}},"../../common/src/utils/list-parser.js":function(e,t,n){"use strict";function s(e){e=e||"";for(var t,n=[],s=0,o=null,r=1,i=1;t=p.exec(e);){var a=e.substring(s,t.index);if(a)if(o)if(u.trim(a))o=null,i++,n.push(a);else{var c=u.last(o);c.after+=a}else n.push(a);var l=t[1],d=t[2],m=!!u.trim(d),h=t[3],f=t[4],g=t[5],v={label:f,checked:m,answer:d,before:l,between:h,after:g,list:i,key:r};o?o.push(v):(o=[v],n.push(o)),s=t.index+t[0].length,r++}var b=e.substring(s);return b&&n.push(b),n}function o(e){if("object"===(void 0===e?"undefined":d(e)))return u.some(e,o);var t=s(e);return u.some(t,function(e){return e instanceof Array})}function r(e,t,n,s,o){u.each(e,function(e){e instanceof Array&&u.each(e,function(e){e.list==t&&(e.key==n?(e.checked=s,l(e)):s&&o&&(e.checked=!1,l(e)))})})}function i(e,t,n){return u.reduce(e,function(e,s){return e||s instanceof Array&&(e=u.find(s,function(e){if(e.list==t&&e.key==n)return!0})),e},null)}function a(e,t){return u.reduce(e,function(e,n){return n instanceof Array&&u.each(n,function(n){void 0!==t&&n.checked!==t||e++}),e},0)}function c(e){return e=u.flattenDeep(e),u.reduce(e,function(e,t){return t instanceof Object?e+t.before+"* ["+t.answer+"]"+t.between+t.label+t.after:e+t},"")}function l(e){if(e.checked){var t;t=/[\u0x0400-\u0x04ff]/.test(e.label)?"х":/[\u0x0370-\u0x03ff]/.test(e.label)?"χ":"x",e.answer=t}else e.answer=" "}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n("../node_modules/lodash/lodash.js");e.exports={extract:s,detect:o,set:r,find:i,count:a,join:c};var p=/^([ \t]*)\*\s+\[([ xхχ])\]([ \t]*)(.*?)([ \t]*?)$/gim},"../../common/src/utils/lodash-extra.js":function(e,t,n){"use strict";function s(e){switch(void 0===e?"undefined":o(e)){case"number":return 0;case"string":return r.repeat("x",e.length);case"boolean":return!1;case"object":return e instanceof Array?r.map(e,s):r.mapValues(e,s)}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n("../node_modules/lodash/lodash.js"),i={};r.mixin({decouple:function(e,t,n){"string"==typeof t?t=r.split(t,"."):t instanceof Array||(t=[t]),n||(n=i);var s=r.clone(e);s instanceof Object||(s={});for(var o=s,a=e,c=0;c<t.length;c++){var l=t[c],d=a?a[l]:void 0,u=r.clone(d);c===t.length-1?u instanceof n.constructor||(u=n):u instanceof Object||(u={}),o[l]=u,o=u,a=d}return s},decoupleSet:function(e,t,n){if("string"==typeof t?t=r.split(t,"."):t instanceof Array||(t=[t]),t.length<0)throw new Error("Empty path");var s=r.slice(t,0,-1),o=r.decouple(e,s,{});return r.set(o,t,n),o},decoupleUnset:function(e,t){if("string"==typeof t?t=r.split(t,"."):t instanceof Array||(t=[t]),t.length<0)throw new Error("Empty path");var n=r.slice(t,0,-1),s=r.decouple(e,n,{});return r.unset(s,t),s},decouplePush:function(e,t){for(var n=r.decouple(e,t,[]),s=r.get(n,t),o=arguments.length,i=Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];return Array.prototype.push.apply(s,i),n},shallowDiff:function(e,t){return r.pickBy(e,function(e,n){return t[n]!==e})},obscure:function(e,t){var n=r.cloneDeep(e);return r.each(t,function(e){var t=r.get(n,e);r.set(n,e,s(t))}),n},strictParseInt:function(e){var t=r.parseInt(e);if(t.toString()!==e)throw new Error("Not an integer: "+e);return t},fileSize:function(e){if(e<1024)return e+"B";var t=e/1024;if(t<1024)return r.round(t)+"KB";var n=t/1024;if(n<1024)return r.round(n,1)+"MB";var s=n/1024;return r.round(s,2)+"GB"}})},"../../common/src/utils/markdown.js":function(e,t,n){"use strict";function s(e,t){if("object"===(void 0===e?"undefined":f(e)))return g.some(e,s);var n=l(t),o=n.extractBlocks(e);return g.some(o,function(e){switch(e.type){case"space":return!1;case"paragraph":case"text_block":var t,s=n.inlineLexer;for(s.start(e.markdown);t=s.captureToken();)switch(t.type){case"url":case"text":case"autolink":case"br":break;default:return!0}break;case"list":return g.every(e.children,function(e){var t=e.children[0];return"text_block"!==t.type||!/^\s*\[/.test(t.markdown)});default:return!0}})}function o(e,t){var n=l(t),s=d(),o=n.parse(e);return s.render(o)}function r(e,t,n,s){var o=y.extract(e),r=c(o,s);return g.map(o,function(e,s){if(e instanceof Array){var o=g.map(e,function(e,o){var i=e.checked,a=r[s][o];if(t){var c=t[e.list];void 0!==c&&(i=e.key==c)}return v.createElement("div",{className:"list-item",key:o},v.createElement("label",null,v.createElement("input",{type:"radio",name:e.list,value:e.key,checked:i,readOnly:!n,onChange:n})," ",a))});return v.createElement("div",{key:s},o)}return r[s]})}function i(e,t,n){var s=y.extract(e),o=c(s,n);return g.map(s,function(e,n){if(e instanceof Array){var s=g.map(e,function(e,s){var r=o[n][s],i=t[e.list],a=g.get(i,"total",0),c=g.get(i,["answers",e.key],0),l=Math.round(a>0?c/a*100:0)+"%",d="color-"+e.key%12,u="vote-count";return c===a&&(u+=" unanimous"),v.createElement("div",{className:u,key:s},v.createElement("div",{className:"label"},r),v.createElement("div",{className:"bar"},v.createElement("span",{className:"filled "+d,style:{width:l}}),v.createElement("span",{className:"percent"},l),v.createElement("span",{className:"count"},c+"/"+a)))});return v.createElement("div",{key:n},s)}return o[n]})}function a(e,t,n,s){var o=y.extract(e),r=c(o,s);return g.map(o,function(e,s){if(e instanceof Array){var o=g.map(e,function(e,o){var i=e.checked,a=r[s][o];if(t){var c=t[e.list];if(void 0!==c){var l=c[e.key];void 0!==l&&(i=l)}}return v.createElement("div",{className:"list-item",key:o},v.createElement("label",null,v.createElement("input",{type:"checkbox",name:e.list,value:e.key,checked:i,readOnly:!n,onChange:n})," ",a))});return v.createElement("div",{key:s},o)}return r[s]})}function c(e,t){var n=l(t),s=g.map(e,function(e,t){return e instanceof Array?g.map(e,function(e){return n.extractBlocks(e.label)}):n.extractBlocks(e)});g.each(e,function(e,t){var o=s[t];e instanceof Array?g.each(o,function(e){n.processInline(e)}):n.processInline(o)});var o=d();return g.map(e,function(e,t){var n=s[t];return e instanceof Array?g.map(e,function(e,t){var s=g.first(o.render(n[t]));return s&&s.props&&"p"===s.type&&(s=s.props.children),s}):o.render(n)})}function l(e){var t=new b.BlockLexer,n=new b.InlineLexer({links:t.links,findRefLink:m,onReference:e});return new b.Parser({blockLexer:t,inlineLexer:n})}function d(){return new b.Renderer({renderImage:u,renderText:p})}function u(e,t){var n=e.href,s=e.title,o=e.text;return v.createElement(x,{key:t,url:n,alt:o,title:s})}function p(e,t){return j.renderEmoji(e.text,{key:t})}function m(e,t){var n=this.links[e];return n||(this.onReference&&(n=this.onReference({type:"reference",target:this,name:e,forImage:t})),n)}function h(e,t){var n=/^(picture|image|photo|video|audio|website)(-(\d+))?$/.exec(t);if(n){var s=n[1];"picture"!==s&&"photo"!==s||(s="image");var o=g.filter(e,{type:s}),r=parseInt(n[3])||1,i=o[r-1];if(i)return i}return null}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=n("../node_modules/lodash/lodash.js"),v=n("../node_modules/react/react.js"),b=n("../node_modules/mark-gor/react.js"),y=n("../../common/src/utils/list-parser.js"),j=n("../../common/src/utils/plain-text.js"),x=(n("../../common/src/theme/theme.js"),n("../../common/src/widgets/resource-view.jsx"));e.exports={detect:s,render:o,renderSurvey:r,renderSurveyResults:i,renderTaskList:a,createParser:l,createRenderer:d,findReferencedResource:h}},"../../common/src/utils/memoize.js":function(e,t,n){"use strict";function s(e,t,n){void 0===t&&(t=null);var s=!1!==n?r(e):o(e);return function(){return null!=arguments[0]?s.apply(null,arguments):t}}var o=n("../node_modules/memoizee/index.js"),r=n("../node_modules/memoizee/weak.js");e.exports=s},"../../common/src/utils/plain-text.js":function(e,t,n){"use strict";function s(e,t,n){var s=p.extract(e);return l.map(s,function(e,s){return e instanceof Array?l.map(e,function(e,s){var o=e.checked;if(t){var r=t[e.list];void 0!==r&&(o=e.key==r)}return d.createElement("span",null,e.before,d.createElement("label",null,d.createElement("input",{type:"radio",name:e.list,value:e.key,checked:o,readOnly:!n,onChange:n}),e.between,i(e.label)),e.after)}):e})}function o(e,t){var n=p.extract(e);return l.map(n,function(e,n){return e instanceof Array?l.map(e,function(e,n){var s=t[e.list],o=l.get(s,"total",0),r=l.get(s,["answers",e.key],0),a=Math.round(o>0?r/o*100:0)+"%",c="color-"+e.key%12,u="vote-count";return r===o&&(u+=" unanimous"),d.createElement("span",null,e.before,d.createElement("span",{className:u},d.createElement("span",{className:"label"},i(e.label)),d.createElement("span",{className:"bar"},d.createElement("span",{className:"filled "+c,style:{width:a}}),d.createElement("span",{className:"percent"},a),d.createElement("span",{className:"count"},r+"/"+o))),e.after)}):e})}function r(e,t,n){var s=p.extract(e);return l.map(s,function(e,s){return e instanceof Array?l.map(e,function(e,s){var o=e.checked;if(t){var r=t[e.list];if(void 0!==r){var a=r[e.key];void 0!==a&&(o=a)}}return d.createElement("span",null,e.before,d.createElement("label",null,d.createElement("input",{type:"checkbox",name:e.list,value:e.key,checked:o,readOnly:!n,onChange:n}),e.between,i(e.label)),e.after)}):e})}function i(e,t){if(!m)return[e];var n=l.get(t,"key");return u(e,a.bind(null,n))}function a(e,t,n,s){var o=void 0!==e?e+"."+s:s,r="https://twemoji.maxcdn.com/2/72x72/"+t+".png";return d.createElement("img",{key:o,alt:n,draggable:!1,src:r,style:h})}function c(){var e=document.createElement("canvas");if(!e.getContext)return!1;var t=e.getContext("2d");if(!t.fillText)return!1;return t.textBaseline="top",t.font="32px Arial",t.fillText("😃",0,0),0!==t.getImageData(16,16,1,1).data[0]}var l=n("../node_modules/lodash/lodash.js"),d=n("../node_modules/react/react.js"),u=n("../node_modules/react-easy-emoji/index.js"),p=n("../../common/src/utils/list-parser.js");e.exports={renderSurvey:s,renderSurveyResults:o,renderTaskList:r,renderEmoji:i,hasEmojiSupport:c};var m=!c(),h={height:"1em",width:"1em",margin:"0 .05em 0 .1em",verticalAlign:"-0.1em"}},"../../common/src/utils/random-token.js":function(e,t,n){"use strict";function s(){var e=new Uint32Array(4);window.crypto.getRandomValues(e);var t=[];return e.forEach(function(e){for(var n=e.toString(16);n.length<8;)n="0"+n;t.push(n)}),t.join("")}e.exports={generate:s}},"../../common/src/utils/tag-scanner.js":function(e,t,n){"use strict";function s(e){var t;return"string"==typeof e?(e=i(e),e=a(e),t=e.match(d)):e instanceof Object&&(t=c.flatten(c.filter(c.map(e,function(e){return e=i(e),e=a(e),String(e).match(d)})))),c.sortBy(c.uniq(t))}function o(e){return u.test(e)}function r(e){return c.trim(String(e).replace(d,""))}function i(e){return e.replace(/https?:\/\/\S+/g,"")}function a(e){return e.replace(/\w+@\w+.\w+/g,"")}var c=n("../node_modules/lodash/lodash.js");e.exports={findTags:s,isTag:o,removeTags:r};var l="[@#][a-zA-Z][a-zA-Z0-9_\\-]*",d=new RegExp(""+l,"g"),u=new RegExp("^"+l+"$")},"../../common/src/widgets/autosize-text-area.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=(r.PropTypes,n("../../common/src/utils/component-refs.js")),a=n("../../common/src/mixins/update-check.js");n("../../common/src/widgets/autosize-text-area.scss"),e.exports=r.createClass({displayName:"AutosizeTextArea",mixins:[a],getInitialState:function(){return this.components=i({actual:HTMLTextAreaElement,shadow:HTMLTextAreaElement}),{requiredHeight:void 0}},getElement:function(){return this.components.actual},componentWillReceiveProps:function(e){if(this.props.value!==e.value){var t=this.components.actual;t&&t===document.activeElement&&t.value!==e.value&&(this.caretPosition={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd,text:t.value})}},render:function(){var e=this.components.setters,t=o.extend({height:this.state.requiredHeight},this.props.style),n=o.omit(this.props,"style");return r.createElement("div",{className:"autosize-text-area"},r.createElement("textarea",{ref:e.shadow,style:t,className:"shadow",value:n.value,readOnly:!0}),r.createElement("textarea",s({ref:e.actual,style:t},n)))},componentDidMount:function(){window.removeEventListener("resize",this.handleDocumentResize),this.updateSize()},componentDidUpdate:function(e,t){if(this.caretPosition){var n,s,r=this.components.actual,i=this.caretPosition.selectionStart,a=this.caretPosition.selectionEnd,c=this.caretPosition.text,l=this.props.value,d=c.substring(0,i),u=c.substring(a),p=c.substring(i,a);o.startsWith(l,d)&&(n=i),o.endsWith(l,u)&&(s=l.length-u.length),void 0!==n&&void 0===s?(s=n+p.length)>l.length&&(s=l.length):void 0===n&&void 0!==s&&(n=s-p.length)<0&&(n=0),void 0!==n&&void 0!==s&&(p||(n=s),r.selectionStart=n,r.selectionEnd=s),this.caretPosition=null}e.value!==this.props.value&&this.updateSize()},componentWillUnmount:function(){window.removeEventListener("resize",this.handleDocumentResize)},focus:function(){this.components.actual.focus()},updateSize:function(){var e=this.components.shadow,t=this.components.actual;if(e&&t){var n=e.offsetHeight,s=e.scrollHeight,o=e.clientHeight,r=t.offsetHeight,i=s+(n-o)+1;if(this.state.height!==i){if(r>i&&r>this.state.requiredHeight)return;this.setState({requiredHeight:i})}}},handleResize:function(e){},handleDocumentResize:function(e){this.updateSize()}})},"../../common/src/widgets/autosize-text-area.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!../../common/src/widgets/autosize-text-area.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"../../common/src/widgets/chartist.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=(n("../node_modules/react-dom/index.js"),n("../node_modules/chartist/dist/chartist.js")),a=n("../../common/src/utils/component-refs.js");n("./widgets/chartist.scss"),e.exports=o.createClass({displayName:"Chartist",propTypes:{type:r.oneOf(["line","bar","pie"]).isRequired,data:r.object.isRequired,className:r.string,options:r.object,responsiveOptions:r.array,style:r.object,onDraw:r.func,onClick:r.func},getInitialState:function(){return this.components=a({container:HTMLDivElement}),{}},componentWillReceiveProps:function(e){this.props.onDraw!==e.onDraw&&(this.chartist?this.chartist.off("draw",this.props.onDraw):this.chartist.on("draw",e.onDraw))},render:function(){var e=["ct-chart"];this.props.className&&e.push(this.props.className);var t={ref:this.components.setters.container,className:e.join(" "),style:this.props.style,onClick:this.props.onClick};return o.createElement("div",t)},componentDidUpdate:function(e,t){e.type!==this.props.type?(this.destroyChart(),this.createChart()):e.data===this.props.data&&e.options===this.props.options&&e.responsiveOptions===this.props.responsiveOptions||this.updateChart()},componentDidMount:function(){this.createChart()},createChart:function(){var e=i[s.upperFirst(this.props.type)],t=this.components.container;this.chartist=new e(t,this.props.data,this.props.options,this.props.responsiveOptions),this.props.onDraw&&this.chartist.on("draw",this.props.onDraw)},updateChart:function(){this.chartist.update(this.props.data,this.props.options,this.props.responsiveOptions)},destroyChart:function(){this.chartist&&this.chartist.detach();var e=this.components.container;if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}}),e.exports.Interpolation=i.Interpolation,e.exports.Svg=i.Svg},"../../common/src/widgets/collapsible-container.jsx":function(e,t,n){"use strict";function s(e){var t=e.offsetHeight,n=e.getElementsByClassName("collapsible-container");return _.each(n,function(e){if(t-=e.offsetHeight,parseInt(e.style.height)>0){var n=e.children[0];t+=n.offsetHeight}}),t}var o=n("../node_modules/react/react.js"),r=(o.PropTypes,n("../../common/src/utils/component-refs.js"));n("../../common/src/widgets/collapsible-container.scss"),e.exports=o.createClass({displayName:"CollapsibleContainer",propTypes:{open:o.PropTypes.bool},getInitialState:function(){return this.components=r({container:HTMLDivElement,contents:HTMLDivElement}),{contentHeight:void 0,collapsing:!1,expanding:!1}},componentWillReceiveProps:function(e){this.props.open!==e.open&&(e.open?this.setState({collapsing:!1,expanding:!0}):this.setState({collapsing:!0,expanding:!1}))},render:function(){var e=this.components.setters,t={};this.props.open?t.height=this.state.contentHeight:t.height=0;var n="collapsible-container";return this.state.expanding?n+=" expanding":this.state.collapsing&&(n+=" collapsing"),o.createElement("div",{ref:e.container,className:n,style:t},o.createElement("div",{ref:e.contents,className:"collapsible-contents"},this.props.children))},componentDidMount:function(){this.props.open&&(this.updateHeight(),this.updateTimeout=setTimeout(this.updateHeight,10))},componentDidUpdate:function(e,t){this.updateHeight(),this.updateTimeout=setTimeout(this.updateHeight,10)},componentWillUnmount:function(){this.updateTimeout&&clearTimeout(this.updateTimeout)},updateHeight:function(){if(this.components.contents){var e=s(this.components.contents);this.state.contentHeight!==e&&this.setState({contentHeight:e})}}})},"../../common/src/widgets/collapsible-container.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!../../common/src/widgets/collapsible-container.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"../../common/src/widgets/diagnostics-section.jsx":function(e,t,n){"use strict";var s=n("../node_modules/react/react.js"),o=s.PropTypes,r=n("../../common/src/widgets/collapsible-container.jsx");e.exports=s.createClass({displayName:"DiagnosticsSection",propTypes:{label:o.string,hidden:o.bool},getInitialState:function(){return{open:!1}},render:function(){if(this.props.hidden)return null;var e="diagnostics-section";return this.state.open&&(e+=" open"),s.createElement("div",{className:e},s.createElement("div",{className:"title",onClick:this.handleLabelClick},this.props.label),s.createElement(r,{open:this.state.open},this.props.children))},handleLabelClick:function(e){var t=!this.state.open;this.setState({open:t})}})},"../../common/src/widgets/diagnostics.jsx":function(e,t,n){"use strict";(function(t){function s(n){var s=n.type,o=n.children;return i[s]=o,c||(c=t(function(){c=0,_.each(a,function(t){t({type:"change",target:e.exports})})})),null}var o=n("../node_modules/react/react.js"),r=o.PropTypes,i={},a=[],c=0;e.exports=s,s.propTypes={type:r.string.isRequired},s.get=function(e){return i[e]},s.addListener=function(e){e&&a.push(e)},s.removeListener=function(e){_.pull(a,e)}}).call(t,n("../node_modules/timers-browserify/main.js").setImmediate)},"../../common/src/widgets/image-cropper.jsx":function(e,t,n){"use strict";function s(e,t,n){e.left<0?e.left=0:e.left+e.width>t&&(e.left=t-e.width),e.top<0?e.top=0:e.top+e.height>n&&(e.top=n-e.height)}var o=n("../node_modules/lodash/lodash.js"),r=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),i=r.PropTypes,a=(n("../node_modules/react-dom/index.js"),n("../node_modules/hammerjs/hammer.js")),c=n("../../common/src/utils/component-refs.js"),l=n("../../common/src/media/bitmap-view.jsx"),d=n("../../common/src/media/vector-view.jsx");n("../../common/src/widgets/image-cropper.scss"),e.exports=r.createClass({displayName:"ImageCropper",propTypes:{url:i.string.isRequired,clippingRect:i.object,vector:i.bool,disabled:i.bool,onChange:i.func,onLoad:i.func},getDefaultProps:function(){return{vector:!1}},getInitialState:function(){return this.components=c({container:HTMLElement,image:l}),{clippingRect:this.props.clippingRect,hasFocus:!1}},componentWillReceiveProps:function(e){this.props.clippingRect!==e.clippingRect&&(this.zoomChangeTimeout?console.log("Ignoring incoming clipping rect"):this.setState({clippingRect:e.clippingRect})),this.props.url!==e.url&&this.zoomChangeTimeout&&(clearTimeout(this.zoomChangeTimeout),this.triggerChangeEvent(this.state.clippingRect),this.zoomChangeTimeout=0)},render:function(){var e=this.components.setters,t={ref:e.container,className:"image-cropper"};this.props.disabled||(o.assign(t,{tabIndex:0,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onBlur:this.handleBlur}),this.state.hasFocus&&o.assign(t,{onWheel:this.handleMouseWheel,onKeyDown:this.handleKeyDown}));var n={ref:e.image,url:this.props.url,clippingRect:this.state.clippingRect,onLoad:this.props.onLoad},s=l;return this.props.vector&&(s=d),r.createElement("div",t,r.createElement(s,n))},focus:function(){this.components.container.focus()},activateTouchHandling:function(){var e=this.components.container;if(e&&!this.hammer){this.hammer=new a(e);var t=this.hammer.get("pan").set({direction:a.DIRECTION_ALL,threshold:5});this.hammer.get("pinch").set({enable:!0}).recognizeWith(t),this.hammer.on("panstart",this.handlePanStart),this.hammer.on("panmove",this.handlePanMove),this.hammer.on("panend",this.handlePanEnd),this.hammer.on("pinchstart",this.handlePinchStart),this.hammer.on("pinchmove",this.handlePinchMove),this.hammer.on("pinchend",this.handlePinchEnd)}},deactivateTouchHandling:function(){this.hammer&&(this.hammer.off("panstart",this.handlePanStart),this.hammer.off("panmove",this.handlePanMove),this.hammer.off("panend",this.handlePanEnd),this.hammer.off("pinchstart",this.handlePinchStart),this.hammer.off("pinchmove",this.handlePinchMove),this.hammer.off("pinchend",this.handlePinchEnd),this.hammer.stop(!0),this.hammer.element.style.touchAction="",this.hammer.destroy(),this.hammer=null)},componentDidUpdate:function(e,t){!t.hasFocus&&this.state.hasFocus?this.activateTouchHandling():t.hasFocus&&!this.state.hasFocus&&this.deactivateTouchHandling()},componentWillUnmount:function(){this.dragStart&&this.handleMouseUp(),this.zoomChangeTimeout&&(clearTimeout(this.zoomChangeTimeout),this.triggerChangeEvent(this.state.clippingRect)),this.deactivateTouchHandling()},triggerChangeEvent:function(e){o.isEqual(this.props.clippingRect,e)||this.props.onChange&&this.props.onChange({type:"change",target:this,rect:e})},handleFocus:function(e){this.setState({hasFocus:!0})},handleBlur:function(e){this.setState({hasFocus:!1})},handleMouseDown:function(e){if(0===e.button){var t=this.components.image,n=this.components.container;if(t&&n&&this.state.clippingRect){var s=n.getBoundingClientRect(),o=this.state.clippingRect;this.dragStart={clippingRect:o,boundingRect:s,pageX:e.pageX,pageY:e.pageY,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight},document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}}},handleMouseMove:function(e){if(e.preventDefault(),this.dragStart){var t={x:this.dragStart.pageX-e.pageX,y:this.dragStart.pageY-e.pageY},n=this.dragStart.boundingRect,r=o.clone(this.dragStart.clippingRect),i=t.x*r.width/n.width,a=t.y*r.height/n.height;r.left+=Math.round(i),r.top+=Math.round(a),s(r,this.dragStart.naturalWidth,this.dragStart.naturalHeight),this.setState({clippingRect:r})}},handleMouseUp:function(e){this.dragStart&&(document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.triggerChangeEvent(this.state.clippingRect),this.dragStart=null)},handleMouseWheel:function(e){var t=this;e.preventDefault();var n=this.components.image,r=this.components.container;if(n&&r&&this.state.clippingRect){var i=4;e.shiftKey&&(i=1);var a,c=r.getBoundingClientRect(),l=o.clone(this.state.clippingRect);switch(e.deltaMode){case 0:a=e.deltaY;break;case 1:a=18*e.deltaY;break;case 2:a=480*e.deltaY}var d=Math.round(a*l.height/c.height/i),u=l.width+d;u>n.naturalWidth&&(u=n.naturalWidth,d=u-l.width);var p=l.height+d;p>n.naturalHeight&&(p=n.naturalHeight,d=p-l.height,u=l.width+d);var m={x:e.pageX-c.left,y:e.pageY-c.top},h=-m.x*d/c.width,f=-m.y*d/c.height;l.left+=Math.round(h),l.top+=Math.round(f),l.width=u,l.height=p,s(l,n.naturalWidth,n.naturalHeight),this.setState({clippingRect:l},function(){t.zoomChangeTimeout&&clearTimeout(t.zoomChangeTimeout),t.zoomChangeTimeout=setTimeout(function(){t.triggerChangeEvent(l),t.zoomChangeTimeout=0},1e3)}),this.dragStart&&(this.dragStart={clippingRect:l,boundingRect:c,pageX:e.pageX,pageY:e.pageY,naturalWidth:n.naturalWidth,naturalHeight:n.naturalHeight})}},handlePanStart:function(e){if("mouse"!==e.pointerType){var t=this.components.image,n=this.components.container;if(t&&n&&this.state.clippingRect){var s=n.getBoundingClientRect(),o=this.state.clippingRect;this.panStart={clippingRect:o,boundingRect:s,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight},this.handlePanMove(e)}}},handlePanMove:function(e){if(this.panStart){var t=this.panStart.boundingRect,n=o.clone(this.panStart.clippingRect),r=-e.deltaX*n.width/t.width,i=-e.deltaY*n.height/t.height;n.left+=Math.round(r),n.top+=Math.round(i),s(n,this.panStart.naturalWidth,this.panStart.naturalHeight),this.setState({clippingRect:n})}},handlePanEnd:function(e){this.panStart&&(this.triggerChangeEvent(this.state.clippingRect),this.panStart=null)},handlePinchStart:function(e){if("mouse"!==e.pointerType){var t=this.components.image,n=this.components.container;if(t&&n&&this.state.clippingRect){var s=n.getBoundingClientRect(),r=this.state.clippingRect;this.pinchStart={clippingRect:r,boundingRect:s,pointers:o.map(e.pointers,function(e){return{pageX:e.pageX,pageY:e.pageY}})},this.handlePinchMove(e)}}},handlePinchMove:function(e){if(this.pinchStart){var t=this.components.image,n=o.clone(this.pinchStart.clippingRect),r=this.pinchStart.boundingRect,i=1/e.scale,a=Math.round(n.width*i);a>t.naturalWidth&&(a=t.naturalWidth,i=a/n.width);var c=Math.round(n.height*i);c>t.naturalHeight&&(c=t.naturalHeight,i=c/n.height,a=Math.round(n.width*i));var l={x:this.pinchStart.pointers[0].pageX-r.left,y:this.pinchStart.pointers[0].pageY-r.top},d={x:this.pinchStart.pointers[1].pageX-r.left,y:this.pinchStart.pointers[1].pageY-r.top},u={x:e.pointers[0].pageX-r.left,y:e.pointers[0].pageY-r.top},p={x:e.pointers[1].pageX-r.left,y:e.pointers[1].pageY-r.top},m=(l.x*n.width-u.x*a)/r.width,h=(d.x*n.width-p.x*a)/r.width,f=(l.y*n.height-u.y*c)/r.height,g=(d.y*n.height-p.y*c)/r.height;n.left+=Math.round((m+h)/2),n.top+=Math.round((f+g)/2),n.width=a,n.height=c,s(n,t.naturalWidth,t.naturalHeight),this.setState({clippingRect:n})}},handlePinchEnd:function(e){this.pinchStart&&(this.triggerChangeEvent(this.state.clippingRect),this.pinchStart=null)},handleKeyDown:function(e){if(27===e.keyCode){this.components.container.blur()}}})},"../../common/src/widgets/image-cropper.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!../../common/src/widgets/image-cropper.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"../../common/src/widgets/overlay.jsx":function(e,t,n){"use strict";function s(e){var t=_.omit(e,"className","children","show");return t.className="overlay",e.show?t.className+=" show":t.className+=" hide",e.className&&(t.className+=" "+e.className),o.createElement("div",t,o.createElement("div",{className:"background"}),o.createElement("div",{className:"foreground"},e.children))}var o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../node_modules/react-dom/index.js");n("../../common/src/theme/theme.js");n("../../common/src/widgets/overlay.scss"),e.exports=o.createClass({displayName:"OverlayProxy",propTypes:{className:r.string,show:r.bool,onBackgroundClick:r.func},statics:{active:!1},getDefaultProps:function(){return{show:!1}},render:function(){return null},componentDidMount:function(){this.props.show&&this.show()},componentDidUpdate:function(e){e.show!==this.props.show?this.props.show?this.show():this.hide():e.children!==this.props.children&&this.props.show&&this.redraw(this.shown)},componentWillUnmount:function(){this.hide()},show:function(){var e=this;if(this.containerNode)this.containerRemovalTimeout&&(clearTimeout(this.containerRemovalTimeout),this.containerRemovalTimeout=0);else{var t=document.getElementById("application");this.containerNode=document.createElement("DIV"),t.appendChild(this.containerNode),t.addEventListener("keydown",this.handleKeyDown);var n=document.activeElement;n&&n!==document.body?(this.originalFocusElement=n,n.blur()):this.originalFocusElement=null}this.redraw(!1),this.shown=!1,setTimeout(function(){e.shown=!0,e.redraw(e.shown)},10),this.constructor.active=!0},redraw:function(e){var t={show:e,onClick:this.handleClick,onTouchMove:this.handleTouchMove,children:this.props.children};i.render(o.createElement(s,t),this.containerNode)},hide:function(){var e=this;this.containerNode&&(this.containerRemovalTimeout||(this.containerRemovalTimeout=setTimeout(function(){var t=document.getElementById("application");i.unmountComponentAtNode(e.containerNode),t.removeChild(e.containerNode),t.removeEventListener("keydown",e.handleKeyDown),e.containerNode=null,e.containerRemovalTimeout=0},500),this.originalFocusElement&&(this.originalFocusElement.focus(),this.originalFocusElement=null)),this.shown=!1,this.redraw(this.shown),this.constructor.active=!1)},handleClick:function(e){if(0===e.button){var t=e.target.className;"foreground"!==t&&"background"!==t||this.props.onBackgroundClick&&this.props.onBackgroundClick(e)}},handleTouchMove:function(e){for(var t=e.target,n=null,s=t;s&&s!==this.containerNode;s=s.parentNode){var o=getComputedStyle(s);if("auto"===o.overflowY||"scroll"===o.overflowY){s.scrollHeight>s.clientHeight&&(n=s);break}}n||e.preventDefault()},handleKeyDown:function(e){27===e.keyCode&&this.props.onBackgroundClick&&this.props.onBackgroundClick(e)}})},"../../common/src/widgets/overlay.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!../../common/src/widgets/overlay.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"../../common/src/widgets/resource-view.jsx":function(e,t,n){"use strict";function s(e){return r.startsWith(e,"json:")}function o(e){var t=e.substr(5);return JSON.parse(t)}var r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/src/media/media-loader.js"),l=(n("../../common/src/media/image-cropping.js"),n("../../common/src/transport/payload.js"),n("../../common/src/theme/theme.js")),d=n("../../common/src/media/bitmap-view.jsx"),u=n("../../common/src/media/vector-view.jsx");e.exports=i.createClass({displayName:"ResourceView",propTypes:{clip:a.bool,animation:a.bool,resource:a.object,url:a.string,width:a.number,height:a.number,theme:a.instanceOf(l)},getDefaultProps:function(){return{clip:!0}},getInitialState:function(){return{isWaitingForImage:!1}},getURL:function(e){if(e=e||this.props,e.resource){var t={};return e.animation&&"gif"===e.resource.format?t.original=!0:(e.clip||(t.clip=null),e.width&&(t.width=e.width),e.height&&(t.height=e.height)),e.theme.getImageURL(e.resource,t)}return e.url},getDimensions:function(e){e=e||this.props;var t=e.width,n=e.height;if(e.resource){var s=e.theme.getImageDimensions(e.resource,{original:!this.props.clip});t?n=Math.round(t*s.height/s.width):n?t=Math.round(n*s.width/s.height):(t=s.width,n=s.height)}return{width:t,height:n}},componentWillReceiveProps:function(e){var t=this;if(this.props.resource!==e.resource){var n=this.getURL(),o=this.getURL(e);s(n)&&!s(o)&&(this.setState({isWaitingForImage:!0}),c.loadImage(o).catch(function(e){}).then(function(){t.setState({isWaitingForImage:!1})}))}},shouldComponentUpdate:function(e,t){return!t.isWaitingForImage},render:function(){var e=this.getURL();if(!e)return this.props.children||null;var t=r.omit(this.props,"clip","animation","resource","url","width","height","theme");if(s(e)){var n=o(e);return t.url=n.url,t.clippingRect=n.clip,"svg"===n.format?i.createElement(u,t):i.createElement(d,t)}var a=this.getDimensions();return t.src=e,t.width=a.width,t.height=a.height,i.createElement("img",t)}})},"../../common/src/widgets/smart-list.jsx":function(e,t,n){"use strict";function s(e){this.node=e}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../node_modules/react-dom/index.js");n("../../common/src/widgets/smart-list.scss"),e.exports=r.createClass({displayName:"SmartList",propTypes:{items:i.arrayOf(i.object),behind:i.number,ahead:i.number,anchor:i.string,offset:i.number,inverted:i.bool,transitioning:i.number,onIdentity:i.func.isRequired,onTransition:i.func,onRender:i.func.isRequired,onAnchorChange:i.func,onBeforeAnchor:i.func},getDefaultProps:function(){return{behind:5,ahead:10,offset:0,inverted:!1,transitioning:5}},getInitialState:function(){var e={};return this.updateAnchor(this.props,e),this.updateSlots(this.props,e),e},releaseAnchor:function(){this.setState({currentAnchor:null})},componentWillReceiveProps:function(e){var t=o.clone(this.state);this.props.anchor!==e.anchor&&this.updateAnchor(e,t),this.props.items!==e.items&&this.updateSlots(e,t);var n=o.shallowDiff(t,this.state);o.isEmpty(n)||this.setState(n)},updateAnchor:function(e,t){t.currentAnchor!==e.anchor&&(t.currentAnchor=e.anchor,this.anchorOffset=e.offset)},updateSlots:function(e,t){var n=this,s=e.items,r=function(t,s,o){return e.onIdentity({type:"identity",target:n,item:t,currentIndex:s,alternative:o||!1})},i=function(t,s){return!e.onTransition||e.onTransition({type:"transition",target:n,item:t,currentIndex:s})},a=o.slice(t.slots),c=o.transform(a,function(e,t){e[t.id]=t},{}),l=!o.isEmpty(a),d={};o.each(s,function(e,t){var s=r(e,t),o=c[s];if(!o){var u=r(e,t,!0);u&&(o=c[u])&&(o.id=s)}if(o)o.item=e,o.index=t,"disappearing"===o.state&&(o.state="present");else{var p="present";l&&i(e,t)&&(p="appearing"),o=n.createSlot(s,e,t,p),a.push(o)}d[s]=!0}),o.each(a,function(e){d[e.id]||(l&&n.isSlotVisible(e)?e.state="disappearing":e.state="gone")});var u=0,p=0,m=this.props.transitioning;o.each(a,function(e){"appearing"===e.state?u<m?u++:e.state="present":"disappearing"===e.state&&(p<m?p++:e.state="gone")});var h=o.remove(a,{state:"gone"});if(o.some(h,{unseen:!0})){var f=o.filter(a,{unseen:!0});this.triggerBeforeAnchorEvent(f)}t.slots=o.sortBy(a,"index")},createSlot:function(e,t,n,o){var r={id:e,key:e,index:n,state:o,item:t,transition:!1,rendering:void 0,contents:null,unseen:!1,height:void 0,node:null,setter:null};return r.setter=s.bind(r),r},render:function(){var e=this,t=this.state.slots,n=0;this.state.currentAnchor&&(n=o.findIndex(t,{id:this.state.currentAnchor}));var s=Math.max(0,n-this.props.behind),i=Math.min(o.size(t),n+this.props.ahead+1),a=this.props.onRender,c=o.map(t,function(t,n){var o,c=s<=n&&n<i;if("disappearing"!==t.state){var l={type:"render",target:e,item:t.item,needed:c,startIndex:s,currentIndex:n,endIndex:i,previousHeight:t.height,estimatedHeight:e.state.estimatedHeight};o=t.contents=a(l)}else o=t.contents;c&&(t.rendering=!0);var d,u="slot";return"appearing"===t.state?(u+=" transition in",t.transition?d={height:t.height}:u+=" hidden"):"disappearing"===t.state&&(u+=" transition out",t.transition?u+=" hidden":d={height:t.height}),r.createElement("div",{key:t.key,ref:t.setter,className:u,style:d},o)});return this.startIndex=s,this.endIndex=i,this.props.inverted&&o.reverse(c),r.createElement("div",{className:"smart-list",onTransitionEnd:this.handleTransitionEnd},c)},componentDidMount:function(){this.container=a.findDOMNode(this);for(var e=this.container.parentNode;e;e=e.parentNode){var t=getComputedStyle(e);if("auto"===t.overflowY||"scroll"===t.overflowY){this.scrollContainer=e;break}}this.scrollContainerWidth=this.scrollContainer.clientWidth,this.scrollContainer.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleWindowResize),this.maintainScrollPosition(),this.setSlotHeights()},componentDidUpdate:function(e,t){this.scrolling||this.maintainScrollPosition(),this.setSlotHeights(),this.markUnseenSlots(),this.setTransitionState()},maintainScrollPosition:function(){var e,t;if(this.state.currentAnchor?(e=o.find(this.state.slots,{id:this.state.currentAnchor}),t=this.anchorOffset):this.props.inverted&&(e=o.first(this.state.slots),t=1/0),e&&e.node&&void 0!==t){var n=this.scrollContainer.offsetTop,s=this.scrollContainer.scrollTop,r=e.node.offsetTop-n;if(this.props.inverted){var i=this.scrollContainer.scrollHeight,a=this.scrollContainer.offsetHeight,c=i-s-a,l=e.node.offsetHeight,d=i-r-l,u=d-c;if(u!==t){var p=Math.max(0,d-t),m=i-p-a;this.scrollContainer.scrollTop=m}}else{var u=r-s;if(u!==t){var m=Math.max(0,r-t);this.scrollContainer.scrollTop=m}}}},isSlotVisible:function(e){if(!e.rendering||!e.node)return!1;if(e.transition)return!0;if(this.scrollContainer){var t=this.scrollContainer.offsetHeight,n=this.scrollContainer.offsetTop,s=this.scrollContainer.scrollTop,o=s+t,r=e.node.offsetTop-n;if(s<r&&r<=o)return!0;var i=r+e.height;if(s<i&&i<=o)return!0}return!1},setSlotHeights:function(){var e=[];if(o.each(this.state.slots,function(t){if(t.rendering){var n=t.node.firstChild,s=n?n.offsetHeight:0;t.height=s,e.push(s)}}),void 0===this.state.estimatedHeight&&!o.isEmpty(e)){var t=o.sum(e)/e.length,n=Math.round(t);0!==n&&this.setState({estimatedHeight:n})}},markUnseenSlots:function(){var e=this,t=this.state.slots,n=o.findIndex(t,{id:this.state.currentAnchor}),s=!1;if(o.each(t,function(t,o){"appearing"===t.state?o<n&&(e.isSlotVisible(t)||(t.unseen=!0,s=!0)):t.unseen&&o>=n&&(t.unseen=!1,s=!0)}),s){var r=o.filter(t,{unseen:!0});this.triggerBeforeAnchorEvent(r)}},setTransitionState:function(){var e=this,t=o.clone(this.state.slots),n=!1;o.each(t,function(t){if(("appearing"===t.state||"disappearing"===t.state)&&!t.transition){var s=e.isSlotVisible(t);e.props.inverted&&("appearing"!==t.state||e.state.currentAnchor||(e.scrollPositionInterval||(e.scrollPositionInterval=setInterval(e.maintainScrollPosition,10)),e.scrollToAnchorNode=t.node,s=!0)),s?t.transition=!0:t.state="present",n=!0}}),n&&this.setState({slots:t})},componentWillUnmount:function(){this.scrollContainer.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleWindowResize)},triggerAnchorChangeEvent:function(e){this.props.onAnchorChange&&this.props.onAnchorChange({type:"anchorchange",target:this,anchor:e?e.id:null,item:e?e.item:null})},triggerBeforeAnchorEvent:function(e){this.props.onBeforeAnchor&&this.props.onBeforeAnchor({type:"beforeanchor",target:this,items:o.map(e,"item")})},findAnchorSlot:function(e){var t,n=this.scrollContainer.scrollTop,s=this.scrollContainer.offsetTop;if(this.props.inverted){var o,r=this.scrollContainer.scrollHeight,i=this.scrollContainer.offsetHeight,a=r-n-i;if(a>0)for(var c=0;c<e.length;c++){var l=e[c];t=l;var d=t.node.offsetTop-s,u=t.node.offsetHeight,o=r-d-u;if(o>a)break}this.anchorOffset=t?o-a:void 0}else{var d;if(n>0)for(var c=0;c<e.length;c++){var l=e[c];if(t=l,(d=t.node.offsetTop-s)>n)break}this.anchorOffset=t?d-n:void 0}return t},handleScroll:function(e){var t=this;if(!this.scrollPositionInterval){if(this.resizing)return void this.maintainScrollPosition();var n=this.findAnchorSlot(this.state.slots),s=n?n.id:void 0;this.state.currentAnchor!==s&&(this.setState({currentAnchor:s}),this.triggerAnchorChangeEvent(n)),this.scrolling=!0,this.scrollingEndTimeout&&clearTimeout(this.scrollingEndTimeout),this.scrollingEndTimeout=setTimeout(function(){t.scrolling=!1,t.scrollingEndTimeout=0},500)}},handleWindowResize:function(){var e=this;if(this.scrollContainerWidth!==this.scrollContainer.clientWidth){this.scrollContainerWidth=this.scrollContainer.clientWidth;var t=o.slice(this.state.slots);o.each(t,function(e){e.height=void 0}),this.setState({slots:t,estimatedHeight:void 0}),this.resizing=!0,this.resizingEndTimeout&&clearTimeout(this.resizingEndTimeout),this.resizingEndTimeout=setTimeout(function(){e.resizing=!1,e.resizingEndTimeout=0},50)}},handleTransitionEnd:function(e){var t=o.slice(this.state.slots);if("opacity"===e.propertyName){var n=o.find(t,{node:e.target});n&&"appearing"===n.state&&(n.state="present",n.transition=!1,this.setState({slots:t}),this.scrollToAnchorNode===e.target&&(this.maintainScrollPosition(),clearInterval(this.scrollPositionInterval),this.scrollPositionInterval=null,this.scrollToAnchorNode=null))}else if("height"===e.propertyName){var n=o.find(t,{node:e.target});if(n&&"disappearing"===n.state){var s=o.indexOf(t,n);t.splice(s,1);var r=this.findAnchorSlot(t),i=r?r.id:void 0;i!==this.state.currentAnchor&&this.triggerAnchorChangeEvent(r),this.setState({slots:t,currentAnchor:i})}}}})},"../../common/src/widgets/smart-list.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!../../common/src/widgets/smart-list.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"../../common/src/widgets/time.jsx":function(e,t,n){"use strict";function s(e){return e.format("YYYY-MM-DD")}function o(){var e=u.slice();r.each(e,function(e){e&&e.update()})}var r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../node_modules/moment/moment.js"),l=n("../../common/src/utils/date-tracker.js"),d=n("../../common/src/locale/locale.js");e.exports=i.createClass({displayName:"Time",propTypes:{locale:a.instanceOf(d).isRequired,time:a.string,compact:a.bool},getDefaultProps:function(){return{compact:!1}},getInitialState:function(){var e=c(this.props.time),t={time:e,date:s(e)};return this.updateClassName(t,this.props),this.updateText(t,this.props),t},updateClassName:function(e,t){var n;n=e.time.isValid()?e.date===l.today?"today":e.date===l.yesterday?"yesterday":"older":"invalid",e.className=n},updateText:function(e,t){var n,s=t.locale.translate,o=t.locale.localeCode,r=e.time.clone().locale(o);if("today"===e.className){var i=c(),a=.001*(i-r);if(a<60)n=s("time-just-now");else if(a<3600){var l=Math.floor(a*(1/60));n=t.compact?s("time-$min-ago",l):s("time-$minutes-ago",l)}else{var d=Math.floor(a*(1/3600));n=t.compact?s("time-$hr-ago",d):s("time-$hours-ago",d)}}else n="yesterday"===e.className?s("time-yesterday"):"older"===e.className?t.compact?r.format("ll"):r.format("LL"):"";e.text=n},update:function(){var e=r.clone(this.state);this.updateClassName(e,this.props),this.updateText(e,this.props);var t=r.shallowDiff(e,this.state);r.isEmpty(t)||this.setState(t)},componentWillReceiveProps:function(e){var t=r.clone(this.state),n=c(e.time);t.time=n,t.date=s(n),this.updateClassName(t,e),this.updateText(t,e);var o=r.shallowDiff(t,this.state);r.isEmpty(o)||this.setState(o)},render:function(){return i.createElement("span",{className:"time "+this.state.className},this.state.text)},componentDidMount:function(){this.componentDidUpdate()},componentDidUpdate:function(e,t){"today"===this.state.className||"yesterday"===this.state.className?r.includes(u,this)||u.push(this):r.pull(u,this)},componentWillUnmount:function(){r.pull(u,this)}});var u=[];setInterval(o,15e3)},"../../common/src/widgets/upload-progress.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/locale/locale.js"),a=n("../../common/src/transport/payloads.js");n("../../common/src/widgets/upload-progress.scss"),e.exports=o.createClass({displayName:"UploadProgress",propTypes:{payloads:r.instanceOf(a).isRequired,locale:r.instanceOf(i).isRequired},render:function(){var e=this.props.locale.translate,t=this.props.payloads.uploading;if(!t)return null;var n=s.fileSize(t.bytes),r=t.files;return o.createElement("div",{className:"upload-progress"},e("upload-progress-uploading-$count-files-$size-remaining",r,n))}})},"../../common/src/widgets/upload-progress.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!../../common/src/widgets/upload-progress.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"../assets/explosion.gif":function(e,t,n){e.exports=n.p+"37253a4919d17c8ab9ca739de7996eb5.gif"},"../assets/favicon recursive ^\\.\\/.*\\.png$":function(e,t,n){function s(e){return n(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./apple-touch-icon-114x114.png":"../assets/favicon/apple-touch-icon-114x114.png","./apple-touch-icon-120x120.png":"../assets/favicon/apple-touch-icon-120x120.png","./apple-touch-icon-144x144.png":"../assets/favicon/apple-touch-icon-144x144.png","./apple-touch-icon-152x152.png":"../assets/favicon/apple-touch-icon-152x152.png","./apple-touch-icon-57x57.png":"../assets/favicon/apple-touch-icon-57x57.png","./apple-touch-icon-60x60.png":"../assets/favicon/apple-touch-icon-60x60.png","./apple-touch-icon-72x72.png":"../assets/favicon/apple-touch-icon-72x72.png","./apple-touch-icon-76x76.png":"../assets/favicon/apple-touch-icon-76x76.png","./favicon-128.png":"../assets/favicon/favicon-128.png","./favicon-16x16.png":"../assets/favicon/favicon-16x16.png","./favicon-196x196.png":"../assets/favicon/favicon-196x196.png","./favicon-32x32.png":"../assets/favicon/favicon-32x32.png","./favicon-96x96.png":"../assets/favicon/favicon-96x96.png","./mstile-144x144.png":"../assets/favicon/mstile-144x144.png","./mstile-150x150.png":"../assets/favicon/mstile-150x150.png","./mstile-310x150.png":"../assets/favicon/mstile-310x150.png","./mstile-310x310.png":"../assets/favicon/mstile-310x310.png","./mstile-70x70.png":"../assets/favicon/mstile-70x70.png"};s.keys=function(){return Object.keys(r)},s.resolve=o,e.exports=s,s.id="../assets/favicon recursive ^\\.\\/.*\\.png$"},"../assets/favicon-notification recursive \\.png$":function(e,t,n){function s(e){return n(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./apple-touch-icon-114x114.png":"../assets/favicon-notification/apple-touch-icon-114x114.png","./apple-touch-icon-120x120.png":"../assets/favicon-notification/apple-touch-icon-120x120.png","./apple-touch-icon-144x144.png":"../assets/favicon-notification/apple-touch-icon-144x144.png","./apple-touch-icon-152x152.png":"../assets/favicon-notification/apple-touch-icon-152x152.png","./apple-touch-icon-57x57.png":"../assets/favicon-notification/apple-touch-icon-57x57.png","./apple-touch-icon-60x60.png":"../assets/favicon-notification/apple-touch-icon-60x60.png","./apple-touch-icon-72x72.png":"../assets/favicon-notification/apple-touch-icon-72x72.png","./apple-touch-icon-76x76.png":"../assets/favicon-notification/apple-touch-icon-76x76.png","./favicon-128.png":"../assets/favicon-notification/favicon-128.png","./favicon-16x16.png":"../assets/favicon-notification/favicon-16x16.png","./favicon-196x196.png":"../assets/favicon-notification/favicon-196x196.png","./favicon-32x32.png":"../assets/favicon-notification/favicon-32x32.png","./favicon-96x96.png":"../assets/favicon-notification/favicon-96x96.png"};s.keys=function(){return Object.keys(r)},s.resolve=o,e.exports=s,s.id="../assets/favicon-notification recursive \\.png$"},"../assets/favicon-notification recursive ^\\.\\/.*\\.png$":function(e,t,n){function s(e){return n(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./apple-touch-icon-114x114.png":"../assets/favicon-notification/apple-touch-icon-114x114.png","./apple-touch-icon-120x120.png":"../assets/favicon-notification/apple-touch-icon-120x120.png","./apple-touch-icon-144x144.png":"../assets/favicon-notification/apple-touch-icon-144x144.png","./apple-touch-icon-152x152.png":"../assets/favicon-notification/apple-touch-icon-152x152.png","./apple-touch-icon-57x57.png":"../assets/favicon-notification/apple-touch-icon-57x57.png","./apple-touch-icon-60x60.png":"../assets/favicon-notification/apple-touch-icon-60x60.png","./apple-touch-icon-72x72.png":"../assets/favicon-notification/apple-touch-icon-72x72.png","./apple-touch-icon-76x76.png":"../assets/favicon-notification/apple-touch-icon-76x76.png","./favicon-128.png":"../assets/favicon-notification/favicon-128.png","./favicon-16x16.png":"../assets/favicon-notification/favicon-16x16.png","./favicon-196x196.png":"../assets/favicon-notification/favicon-196x196.png","./favicon-32x32.png":"../assets/favicon-notification/favicon-32x32.png","./favicon-96x96.png":"../assets/favicon-notification/favicon-96x96.png"};s.keys=function(){return Object.keys(r)},s.resolve=o,e.exports=s,s.id="../assets/favicon-notification recursive ^\\.\\/.*\\.png$"},"../assets/favicon-notification/apple-touch-icon-114x114.png":function(e,t,n){e.exports=n.p+"b8cf38e314f988b7f61c7ab27df43fc2.png"},"../assets/favicon-notification/apple-touch-icon-120x120.png":function(e,t,n){e.exports=n.p+"e0e2ff0632486f60e9b6109f86eda583.png"},"../assets/favicon-notification/apple-touch-icon-144x144.png":function(e,t,n){e.exports=n.p+"e03f845f146f2247a0aecb2978e5d253.png"},"../assets/favicon-notification/apple-touch-icon-152x152.png":function(e,t,n){e.exports=n.p+"2b3a29cc6c30c32393c237e567ca6cf5.png"},"../assets/favicon-notification/apple-touch-icon-57x57.png":function(e,t,n){e.exports=n.p+"5c44ab6d22ae6c0a10765769f60d720e.png"},"../assets/favicon-notification/apple-touch-icon-60x60.png":function(e,t,n){e.exports=n.p+"e6aea96cc3f2a144a6cf53c838b55e4b.png"},"../assets/favicon-notification/apple-touch-icon-72x72.png":function(e,t,n){e.exports=n.p+"6c1a9a9c48487ce503a4dfbdb9b711a6.png"},"../assets/favicon-notification/apple-touch-icon-76x76.png":function(e,t,n){e.exports=n.p+"337aa694f21523c7e2dc0ada09f20ec2.png"},"../assets/favicon-notification/favicon-128.png":function(e,t,n){e.exports=n.p+"ee581f2d338f7b9d3e386c79be970831.png"},"../assets/favicon-notification/favicon-16x16.png":function(e,t,n){e.exports=n.p+"5a6cd044c3abe571bd76c150bee839ff.png"},"../assets/favicon-notification/favicon-196x196.png":function(e,t,n){e.exports=n.p+"d1bdaed46ab1125c0e77d9f92299d78e.png"},"../assets/favicon-notification/favicon-32x32.png":function(e,t,n){e.exports=n.p+"91d27ccd154fa929e7458b4afe06f9de.png"},"../assets/favicon-notification/favicon-96x96.png":function(e,t,n){e.exports=n.p+"a3fb4fe34192a7a90a8ed4f371bbabf1.png"},"../assets/favicon/apple-touch-icon-114x114.png":function(e,t,n){e.exports=n.p+"ee141d1b002541c24fa79391f52200db.png"},"../assets/favicon/apple-touch-icon-120x120.png":function(e,t,n){e.exports=n.p+"716d5f1dc6c95c82cfac16c394db733b.png"},"../assets/favicon/apple-touch-icon-144x144.png":function(e,t,n){e.exports=n.p+"72bb4a181bab6923b6bc3421016cb573.png"},"../assets/favicon/apple-touch-icon-152x152.png":function(e,t,n){e.exports=n.p+"7fbc441dc116c285bf2bb3be1d2f3616.png"},"../assets/favicon/apple-touch-icon-57x57.png":function(e,t,n){e.exports=n.p+"6abad3de23e8db566c4cafd3a8ee7f24.png"},"../assets/favicon/apple-touch-icon-60x60.png":function(e,t,n){e.exports=n.p+"11164feb11ebf5b10f4fb8a015d166e9.png"},"../assets/favicon/apple-touch-icon-72x72.png":function(e,t,n){e.exports=n.p+"1d631316668fba6a8f6c7d4f4411587f.png"},"../assets/favicon/apple-touch-icon-76x76.png":function(e,t,n){e.exports=n.p+"6939925abcb6fcfbcc49465dee1032c5.png"},"../assets/favicon/favicon-128.png":function(e,t,n){e.exports=n.p+"4ae70e06469cf691b724146e8c0728b3.png"},"../assets/favicon/favicon-16x16.png":function(e,t,n){e.exports=n.p+"1f68ea20b77e7d8717c22708ea6968c1.png"},"../assets/favicon/favicon-196x196.png":function(e,t,n){e.exports=n.p+"563cc3494172864075b55660bdffc75a.png"},"../assets/favicon/favicon-32x32.png":function(e,t,n){e.exports=n.p+"ce7a0e79e69f7f86d3a0c9a310372aa4.png"},"../assets/favicon/favicon-96x96.png":function(e,t,n){e.exports=n.p+"ee78976e8358ad86d606d2de1e220931.png"},"../assets/favicon/mstile-144x144.png":function(e,t,n){e.exports=n.p+"72bb4a181bab6923b6bc3421016cb573.png"},"../assets/favicon/mstile-150x150.png":function(e,t,n){e.exports=n.p+"7af9ee3a80ed151b77494dea1e8b9a89.png"},"../assets/favicon/mstile-310x150.png":function(e,t,n){e.exports=n.p+"dbe43e1b6a21cb4ee792d70b7d813114.png"},"../assets/favicon/mstile-310x310.png":function(e,t,n){e.exports=n.p+"e72f85d8622d3ab0c93af4e0dc3b3ae3.png"},"../assets/favicon/mstile-70x70.png":function(e,t,n){e.exports=n.p+"4ae70e06469cf691b724146e8c0728b3.png"},"../assets/profile-image-placeholder.png":function(e,t,n){e.exports=n.p+"be613ad3c1fb13a04edca971d584e375.png"},"../assets/trambar-logo.svg":function(e,t,n){function s(e){return o.createElement("svg",e,[o.createElement("defs",{className:"ClipPathGroup",key:0},o.createElement("clipPath",{clipPathUnits:"userSpaceOnUse"},o.createElement("rect",{x:"1000",y:"1000",width:"5080",height:"6299"}))),o.createElement("defs",{className:"TextShapeIndex",key:1}),o.createElement("defs",{className:"EmbeddedBulletChars",key:2},[o.createElement("path",{d:"M0.3-0.6L0.6-0.3 0.3 0 0-0.3 0.3-0.6Z",key:0}),o.createElement("path",{d:"M0-0.6L0.6-0.6 0.6 0 0 0 0-0.6Z",key:1}),o.createElement("path",{d:"M0.1 0L0.3-0.4 0.1-0.7 0.7-0.4 0.1 0ZM1358 739L309 1346 659 739 1358 739Z",key:2}),o.createElement("path",{d:"M1-0.4L0.6 0 0.4 0 0.6-0.3 0.1-0.3 0.1-0.5 0.6-0.5 0.4-0.7 0.6-0.7 1-0.4Z",key:3}),o.createElement("path",{d:"M0 0C0 0 0 0 0 0L0.2-0.3C0.1-0.4 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.1-0.5 0.2-0.5 0.2-0.5 0.2-0.5L0.2-0.5 0.2-0.4 0.4-0.5 0.4-0.5 0.4-0.5C0.4-0.5 0.4-0.5 0.5-0.5 0.4-0.5 0.4-0.4 0.4-0.4 0.4-0.4 0.3-0.3 0.3-0.3L0.4-0.1C0.4-0.1 0.4-0.1 0.3-0.1L0.4-0.1C0.4 0 0.3 0 0.3 0 0.3 0 0.3-0.1 0.2-0.2L0.1 0C0.1 0.1 0.1 0.1 0 0.1 0 0.1 0 0.1 0 0 0 0 0 0 0 0 0 0 0 0 0 0Z",key:4}),o.createElement("path",{d:"M0.1 0C0.1 0 0.1 0 0-0.1 0-0.1 0-0.2 0-0.2 0-0.3 0-0.3 0-0.3 0.1-0.4 0.1-0.4 0.1-0.4 0.1-0.4 0.2-0.4 0.2-0.3L0.2-0.2C0.2-0.2 0.2-0.2 0.2-0.2L0.6-0.5C0.6-0.6 0.6-0.6 0.6-0.6 0.6-0.6 0.6-0.5 0.6-0.5L0.6-0.5C0.6-0.5 0.6-0.4 0.6-0.4L0.2 0C0.2 0 0.2 0 0.1 0Z",key:5}),o.createElement("path",{d:"M0.4 0C0.3 0 0.2 0 0.2-0.1 0.1-0.1 0.1-0.2 0.1-0.3 0.1-0.4 0.1-0.4 0.2-0.5 0.2-0.6 0.3-0.6 0.4-0.6 0.5-0.6 0.6-0.6 0.6-0.5 0.7-0.4 0.7-0.4 0.7-0.3 0.7-0.2 0.7-0.1 0.6-0.1 0.6 0 0.5 0 0.4 0Z",key:6}),o.createElement("path",{d:"M0.2-0.2C0.1-0.2 0.1-0.2 0.1-0.3 0-0.3 0-0.3 0-0.4 0-0.4 0-0.4 0.1-0.4 0.1-0.5 0.1-0.5 0.2-0.5 0.2-0.5 0.2-0.5 0.3-0.4 0.3-0.4 0.3-0.4 0.3-0.4 0.3-0.3 0.3-0.3 0.3-0.3 0.2-0.2 0.2-0.2 0.2-0.2Z",key:7}),o.createElement("path",{d:"M0-0.2L0.6-0.2 0.6-0.3 0-0.3 0-0.2Z",key:8})]),o.createElement("defs",{className:"TextEmbeddedBitmaps",key:3}),o.createElement("g",{className:"SlideGroup",key:4},o.createElement("g",{className:"Slide",clipPath:"url(#presentation_clip_path)"},o.createElement("g",{className:"Page"},o.createElement("g",{className:"com.sun.star.drawing.ClosedBezierShape"},[o.createElement("rect",{className:"BoundingBox",x:"1000",y:"1000",width:"5082",height:"6301",fill:"none",key:0}),o.createElement("path",{d:"M1655 2259L5444 2259 6080 2890 6080 3520 5233 3520 5233 3099 1847 3099 1847 3918 1847 4758 1847 5619 1847 6459 5233 6459 5233 5619 4809 5619 4809 4989 6080 4989 6080 6669 5444 7299 1635 7299 1000 6669 1000 2890 1655 2259ZM3116 6459L3116 4569 3963 4569 3963 6459 3116 6459ZM3540 3520C3780 3520 3963 3701 3963 3939 3963 4178 3780 4360 3540 4360 3300 4360 3116 4178 3116 3939 3116 3701 3300 3520 3540 3520ZM3116 3520L3116 3520ZM3964 4361L3964 4361ZM3328 2259L3328 1419 2693 1419 2693 1000 4387 1000 4387 1419 3752 1419 3752 2259 3328 2259Z",fill:"rgb(0,0,0)",key:1})]))))])}var o=n("../node_modules/react/react.js");s.displayName="TrambarLogo",s.defaultProps={viewBox:"1000 1000 5080 6299",preserveAspectRatio:"xMidYMid",style:{strokeLinejoin:"round",strokeWidth:"30"}},e.exports=s,s.default=s},"../assets/unicorn.svg":function(e,t,n){function s(e){return o.createElement("svg",e,[o.createElement("polygon",{points:"280,653 373,679 255,840",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:0}),o.createElement("polygon",{points:"102,634 298,439 373,430 297,540 447,585 387,674 281,646 285,575",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:1}),o.createElement("polygon",{points:"312,528 386,425 431,428",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:2}),o.createElement("polygon",{points:"332,520 485,397 513,414 496,435",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:3}),o.createElement("polygon",{points:"316,534 492,443 467,467 521,509 515,543 565,587 560,592 498,549",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:4}),o.createElement("polygon",{points:"318,542 496,557 555,595 548,605",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:5}),o.createElement("polygon",{points:"550,611 574,592 599,618",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:6}),o.createElement("polygon",{points:"476,466 543,399 521,500",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:7}),o.createElement("polygon",{points:"525,524 555,392 600,427",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:8}),o.createElement("polygon",{points:"522,542 605,435 597,604",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:9}),o.createElement("polygon",{points:"613,444 743,521 685,543 775,833 554,617 605,625",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:10}),o.createElement("polygon",{points:"565,318 620,318 655,457 613,434",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:11}),o.createElement("polygon",{points:"629,310 695,204 751,184 733,267 740,508 661,462",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:12}),o.createElement("polygon",{points:"757,183 869,81 776,196",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:13}),o.createElement("polygon",{points:"743,273 755,194 848,270 853,338",fill:"black",stroke:"black",strokeLinejoin:"round",strokeWidth:"3",key:14})])}var o=n("../node_modules/react/react.js");s.displayName="Unicorn",s.defaultProps={version:"1.1",viewBox:"0 0 1000 1000"},e.exports=s,s.default=s},"../node_modules/async-do-while/index.js":function(e,t,n){function s(){var e=this;return r.resolve().then(function(){return e.begin()}).then(function(){return e.loop()}).catch(function(e){if(e!==u)throw e}).then(function(){return e.return()})}function o(){}var r=n("../node_modules/bluebird/js/browser/bluebird.js"),i=null,a=null,c=null,l=null,d="";t.begin=function(e){if(a||c)throw new Error("Cannot call begin() after while() or do()");if(!(e instanceof Function))throw new Error("Argument must be a function");i=e},t.while=function(e){if(c)throw new Error("Cannot call while() consecutively");if(!(e instanceof Function))throw new Error("Argument must be a function");a&&(d="do-while"),c=e},t.do=function(e){if(a)throw new Error("Cannot call do() consecutively");if(!(e instanceof Function))throw new Error("Argument must be a function");c&&(d="while-do"),a=e},t.return=function(e){if(!a||!c)throw new Error("Cannot call return() without calling while() and do() beforehand");if(!(e instanceof Function))throw new Error("Argument must be a function");l=e},t.end=function(){if(!a||!c)throw new Error("Cannot call end() without calling while() and do() beforehand");var e;"while-do"===d?e=function(){var e=this;return r.resolve(e.while()).then(function(t){if(t)return r.resolve(e.do()).then(function(){return e.loop()})})}:"do-while"===d&&(e=function(){var e=this;return r.resolve(e.do()).then(function(){return r.resolve(e.while()).then(function(t){if(t)return e.loop()})})});var t={begin:i||o,do:a,while:c,return:l||o,loop:e};return i=null,a=null,c=null,l=null,d="",s.call(t)};var u=new Error;t.break=function(){throw u}},"../node_modules/b64-to-blob/b64toBlob.js":function(e,t,n){var s,o,r;!function(n,i,a){o=[],s=a,void 0!==(r="function"==typeof s?s.apply(t,o):s)&&(e.exports=r)}(0,0,function(){"use strict";return function(e,t,n){t=t||"",n=n||512;for(var s=atob(e),o=[],r=0;r<s.length;r+=n){for(var i=s.slice(r,r+n),a=new Array(i.length),c=0;c<i.length;c++)a[c]=i.charCodeAt(c);var l=new Uint8Array(a);o.push(l)}return new Blob(o,{type:t})}})},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!../../common/src/widgets/autosize-text-area.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".autosize-text-area {\n  position: relative; }\n  .autosize-text-area TEXTAREA {\n    width: 100%;\n    resize: vertical; }\n  .autosize-text-area .shadow {\n    position: absolute;\n    top: 0;\n    left: 0;\n    min-height: 1em !important;\n    max-height: 1em !important;\n    visibility: hidden; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!../../common/src/widgets/collapsible-container.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".collapsible-container {\n  transition: height .25s;\n  overflow: hidden; }\n  .collapsible-container .collapsible-contents {\n    overflow: hidden; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!../../common/src/widgets/image-cropper.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".image-cropper {\n  overflow: hidden; }\n  .image-cropper CANVAS, .image-cropper svg {\n    width: 100%;\n    height: auto;\n    display: block; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!../../common/src/widgets/overlay.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".overlay {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  overflow: hidden;\n  z-index: 5000;\n  overscroll-behavior: contain;\n  -ms-scroll-chaining: none; }\n  .overlay .background {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background-color: #000;\n    transition: opacity 0.5s; }\n  .overlay .foreground {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 90%;\n    transition: opacity 0.25s, top 0.25s; }\n  .overlay.show .background {\n    opacity: 0.75; }\n  .overlay.show .foreground {\n    opacity: 1; }\n  .overlay.hide .background {\n    opacity: 0; }\n  .overlay.hide .foreground {\n    top: -30px;\n    opacity: 0; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!../../common/src/widgets/smart-list.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".smart-list .slot.transition {\n  overflow: hidden;\n  opacity: 1; }\n  .smart-list .slot.transition.in {\n    transition: height 0.5s ease-out 0.0s, margin-top 0.5s ease-out 0.0s, margin-bottom 0.5s ease-out 0.0s, opacity 0.5s linear 0.2s; }\n  .smart-list .slot.transition.out {\n    transition: height 0.5s ease-in 0.2s, margin-top 0.5s ease-in 0.2s, margin-bottom 0.5s ease-in 0.2s, opacity 0.5s linear 0.0s; }\n  .smart-list .slot.transition.hidden {\n    pointer-events: none;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    opacity: 0;\n    height: 0;\n    margin-top: 0;\n    margin-bottom: 0; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!../../common/src/widgets/upload-progress.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".upload-progress {\n  position: fixed;\n  right: 1em;\n  bottom: 3em;\n  font-size: 1.2em;\n  font-weight: bold;\n  color: #eeeeee;\n  background-color: #aa0000;\n  padding: 0.5em 0.5em 0.5em 0.5em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./application.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"* {\n  box-sizing: border-box;\n  font-family: sans-serif; }\n  *:focus {\n    outline-color: #fca326; }\n\nhtml, body {\n  position: fixed;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  margin: 0; }\n\nbody {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  touch-action: pan-y; }\n\n.application {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  height: 100%;\n  width: 100%; }\n\n.page-view-port {\n  display: flex;\n  flex: 1 1 auto;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  background-color: #4d3936; }\n\n.single-col .overlay .foreground {\n  height: 100%; }\n\nSELECT {\n  border-radius: 0;\n  background-color: #eeeeee;\n  border: 1px solid #444444;\n  -webkit-user-select: auto;\n     -moz-user-select: auto;\n      -ms-user-select: auto;\n          user-select: auto;\n  -webkit-appearance: none; }\n  SELECT OPTION {\n    padding: 2px 2px 2px 4px; }\n\nTEXTAREA,\nINPUT[type=text],\nINPUT[type=url],\nINPUT[type=email],\nINPUT[type=password],\nINPUT[type=number] {\n  border-radius: 0;\n  background-color: #eeeeee;\n  border: 1px solid #444444;\n  padding: 2px 2px 2px 4px;\n  font-size: 1em;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n      -ms-user-select: text;\n          user-select: text; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/app-component-dialog-box.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".app-component-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  width: 80%;\n  max-width: 40em;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #999999;\n  margin: auto;\n  padding: 0.5em 0.5em 0.5em 0.5em; }\n  .app-component-dialog-box .contents {\n    flex: 1 1 auto;\n    overflow: auto;\n    padding: 0.5em 0.5em 0.25em 0.5em;\n    margin-bottom: 0.25em;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n    .app-component-dialog-box .contents .picture {\n      float: left;\n      margin-right: 1em;\n      margin-bottom: 0.5em; }\n      .app-component-dialog-box .contents .picture .icon {\n        display: inline-block;\n        color: #000000;\n        background-color: #fca326;\n        height: 8em;\n        width: 8em;\n        padding-top: 2em;\n        text-align: center; }\n        .app-component-dialog-box .contents .picture .icon .fa {\n          font-size: 4em; }\n      .app-component-dialog-box .contents .picture IMG {\n        width: auto;\n        height: 8em; }\n    .app-component-dialog-box .contents .text H1:first-child,\n    .app-component-dialog-box .contents .text H2:first-child,\n    .app-component-dialog-box .contents .text H3:first-child,\n    .app-component-dialog-box .contents .text H4:first-child,\n    .app-component-dialog-box .contents .text H5:first-child,\n    .app-component-dialog-box .contents .text H6:first-child,\n    .app-component-dialog-box .contents .text P:first-child {\n      margin-top: 0.1em; }\n    @media only screen and (min-device-width: 800px) {\n      .app-component-dialog-box .contents::-webkit-scrollbar-track {\n        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n        background-color: transparent; }\n      .app-component-dialog-box .contents::-webkit-scrollbar {\n        width: 10px;\n        background-color: transparent; }\n      .app-component-dialog-box .contents::-webkit-scrollbar-thumb {\n        border-radius: 2px;\n        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n        background-color: rgba(0, 0, 0, 0.1); } }\n  .app-component-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n  .single-col .app-component-dialog-box {\n    width: 100%;\n    max-width: none; }\n    .single-col .app-component-dialog-box .picture .icon {\n      width: 4em;\n      height: 4em;\n      padding-top: 1em; }\n      .single-col .app-component-dialog-box .picture .icon .fa {\n        font-size: 2em; }\n    .single-col .app-component-dialog-box .picture IMG {\n      height: 4em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/audio-capture-dialog-box-browser.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".audio-capture-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n  max-width: 24em;\n  width: 80%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .audio-capture-dialog-box .container {\n    flex: 1 1 auto;\n    overflow: hidden;\n    padding-bottom: 0.2em;\n    width: 100%; }\n    .audio-capture-dialog-box .container .volume-meter {\n      display: flex;\n      flex-direction: row;\n      align-items: center; }\n      .audio-capture-dialog-box .container .volume-meter .icon {\n        flex: 0 1 auto;\n        font-size: 2em;\n        width: 0.75em;\n        line-height: 100%;\n        margin: 0em 0.2em 0em 0.2em; }\n      .audio-capture-dialog-box .container .volume-meter .bar-container {\n        flex: 1 1 auto;\n        margin: 0.2em 0 0.2em 0.2em; }\n        .audio-capture-dialog-box .container .volume-meter .bar-container .bar {\n          padding: 2px 2px 2px 2px;\n          border: 1px solid #666666; }\n          .audio-capture-dialog-box .container .volume-meter .bar-container .bar .fill {\n            height: 1em;\n            background-color: #666666; }\n    .audio-capture-dialog-box .container .device-placeholder {\n      padding-left: 0;\n      padding-right: 0; }\n    .audio-capture-dialog-box .container AUDIO {\n      width: 100%; }\n  .audio-capture-dialog-box .controls {\n    flex: 1 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    border-top: 1px solid #666666; }\n    .audio-capture-dialog-box .controls .buttons {\n      float: right; }\n    .audio-capture-dialog-box .controls .duration-indiactor {\n      margin-top: 0.65em;\n      float: left; }\n  .single-col .audio-capture-dialog-box {\n    width: 100%;\n    max-width: none; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/confirmation-dialog-box.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".confirmation-dialog-box {\n  display: flex;\n  flex-direction: column;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  max-width: 40em;\n  width: 80%;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em; }\n  .confirmation-dialog-box .message {\n    font-size: 1.5em;\n    font-weight: bold;\n    padding: 0.5em 0.5em 0.3em 0.5em;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n  .confirmation-dialog-box .buttons {\n    flex-grow: 0;\n    flex-shrink: 0;\n    flex-basis: auto;\n    padding: 0.5em 0 0.2em 0.2em;\n    text-align: right; }\n  .single-col .confirmation-dialog-box {\n    width: 100%;\n    max-width: none; }\n    .single-col .confirmation-dialog-box .message {\n      font-size: 1.25em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/issue-dialog-box.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".issue-dialog-box {\n  display: flex;\n  flex-direction: column;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em;\n  width: 100%;\n  max-width: 40em; }\n  .issue-dialog-box .container {\n    flex: 1 1 auto;\n    padding: 0.35em 0 0.2em 0.2em; }\n    .issue-dialog-box .container .top {\n      display: flex;\n      flex-direction: row;\n      width: 100%; }\n      .issue-dialog-box .container .top .text-field {\n        flex: 1 1 auto; }\n      .issue-dialog-box .container .top .select-field {\n        flex: 0 0 auto;\n        margin-top: 0.35em;\n        margin-bottom: 0.35em;\n        margin-left: 0.5em; }\n        .issue-dialog-box .container .top .select-field label {\n          display: block;\n          font-size: 0.9em; }\n        .issue-dialog-box .container .top .select-field select {\n          background-color: #ffffff;\n          display: block;\n          width: 100%;\n          margin-top: 3px;\n          font-size: 1em;\n          padding: 2px 2px 1px 2px; }\n    .issue-dialog-box .container .tags {\n      line-height: 1.75em;\n      margin-bottom: 0.1em; }\n      .issue-dialog-box .container .tags .tag {\n        font-size: 0.9em;\n        color: #ffffff;\n        background-color: #444444;\n        padding: 0.2em 0.4em 0.2em 0.4em;\n        margin-top: 0.25em;\n        margin-bottom: 0.25em;\n        border-radius: 0.25em;\n        opacity: 0.25;\n        cursor: pointer; }\n        .issue-dialog-box .container .tags .tag.selected {\n          opacity: 1; }\n  .issue-dialog-box .buttons {\n    flex: 0 0 auto;\n    border-top: 1px solid #666666;\n    padding: 0.5em 0 0.2em 0.2em; }\n    .issue-dialog-box .buttons .left {\n      float: left; }\n    .issue-dialog-box .buttons .right {\n      float: right; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/media-dialog-box.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'.media-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n  max-width: 100%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .media-dialog-box .container {\n    flex: 1 1 auto;\n    display: flex;\n    overflow: hidden;\n    padding-bottom: 0.2em;\n    align-items: center;\n    justify-content: center; }\n    .media-dialog-box .container IMG, .media-dialog-box .container CANVAS, .media-dialog-box .container svg {\n      -o-object-fit: contain;\n         object-fit: contain;\n      display: block; }\n    .media-dialog-box .container VIDEO {\n      max-width: 100%;\n      max-height: 100%;\n      display: block; }\n  .media-dialog-box .controls {\n    display: block;\n    flex: 1 0 auto;\n    padding: 0.4em 0 0.2em 0;\n    border-top: 1px solid #666666; }\n    .media-dialog-box .controls .links {\n      float: left; }\n    .media-dialog-box .controls .buttons {\n      float: right; }\n    .media-dialog-box .controls:after {\n      content: "";\n      display: table;\n      clear: both; }\n  .media-dialog-box .thumbnail {\n    float: left;\n    margin-right: 0.2em;\n    width: 2em;\n    height: 2em;\n    cursor: pointer;\n    border: 2px solid #333333; }\n    .media-dialog-box .thumbnail:hover, .media-dialog-box .thumbnail.selected {\n      border: 2px solid #e24329; }\n    .media-dialog-box .thumbnail IMG, .media-dialog-box .thumbnail CANVAS, .media-dialog-box .thumbnail svg {\n      display: block;\n      width: 100%;\n      height: auto; }\n',""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/membership-request-dialog-box.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".membership-request-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  max-width: 40em;\n  width: 80%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em; }\n  .membership-request-dialog-box .scrollable {\n    flex: 1 1 auto;\n    flex-basis: auto; }\n  .membership-request-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.5em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n  .membership-request-dialog-box .title {\n    font-size: 1.4em;\n    font-weight: bold;\n    margin-bottom: 0.3em;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n  .membership-request-dialog-box .description {\n    margin-top: 0.5em;\n    white-space: pre-line;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n    .membership-request-dialog-box .description .image {\n      float: right;\n      margin-left: 0.5em; }\n      .membership-request-dialog-box .description .image IMG, .membership-request-dialog-box .description .image CANVAS, .membership-request-dialog-box .description .image svg {\n        display: block;\n        width: 10em;\n        height: auto; }\n  .membership-request-dialog-box .collapsible-container {\n    transition-duration: 1s;\n    margin-bottom: 0.25em;\n    margin-top: 0.25em;\n    clear: both; }\n  .membership-request-dialog-box .message {\n    font-size: 0.9em;\n    padding: 0.35em 0.35em 0.35em 0.35em;\n    color: #000000;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n    .membership-request-dialog-box .message.accepted {\n      background-color: #66cc66; }\n    .membership-request-dialog-box .message.requested, .membership-request-dialog-box .message.read-only {\n      background-color: #dddd66; }\n  .single-col .membership-request-dialog-box {\n    width: 100%;\n    max-width: none; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/mobile-setup-dialog-box.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".mobile-setup-dialog-box {\n  display: flex;\n  flex-direction: column;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em; }\n  .mobile-setup-dialog-box .contents {\n    flex: 1 1 auto;\n    padding-bottom: 0.5em; }\n    .mobile-setup-dialog-box .contents .qr-code {\n      float: left;\n      width: 198px;\n      height: 198px;\n      cursor: none;\n      margin-right: 1em; }\n    .mobile-setup-dialog-box .contents .info {\n      float: left;\n      overflow: hidden;\n      padding: 0.5em 0.5em 0 0; }\n      .mobile-setup-dialog-box .contents .info .label {\n        white-space: nowrap;\n        font-size: 0.9em;\n        color: #cccccc; }\n      .mobile-setup-dialog-box .contents .info .value {\n        white-space: nowrap;\n        font-size: 1.5em;\n        color: #eeeeee;\n        margin-top: 0.25em;\n        margin-bottom: 0.5em;\n        -webkit-user-select: text;\n           -moz-user-select: text;\n            -ms-user-select: text;\n                user-select: text; }\n  .mobile-setup-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.5em 0 0.2em 0.2em;\n    border-top: 1px solid #666666;\n    text-align: right; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/photo-capture-dialog-box-browser.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'.photo-capture-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n  max-width: 80%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .photo-capture-dialog-box .container {\n    flex: 1 1 auto;\n    overflow: hidden;\n    margin-bottom: 0.2em;\n    position: relative; }\n    .photo-capture-dialog-box .container .live-video, .photo-capture-dialog-box .container .preview {\n      position: absolute;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      display: block; }\n    .photo-capture-dialog-box .container .spacer {\n      display: block;\n      visibility: hidden; }\n      .single-col .photo-capture-dialog-box .container .spacer {\n        width: 100%; }\n  .photo-capture-dialog-box .controls {\n    display: block;\n    flex: 1 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    border-top: 1px solid #666666; }\n    .photo-capture-dialog-box .controls .device-selector {\n      float: left; }\n    .photo-capture-dialog-box .controls .buttons {\n      float: right; }\n    .photo-capture-dialog-box .controls:after {\n      content: "";\n      display: table;\n      clear: both; }\n  .single-col .photo-capture-dialog-box {\n    width: 100%;\n    max-width: none; }\n',""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/project-description-dialog-box.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".project-description-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  max-width: 40em;\n  width: 80%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em; }\n  .project-description-dialog-box .scrollable {\n    flex: 1 1 auto;\n    flex-basis: auto;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n  .project-description-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.5em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n  .project-description-dialog-box .title {\n    font-size: 1.4em;\n    font-weight: bold;\n    margin-bottom: 0.3em; }\n  .project-description-dialog-box .description {\n    margin-top: 0.5em;\n    margin-bottom: 0.5em;\n    white-space: pre-line; }\n    .project-description-dialog-box .description .image {\n      float: right;\n      margin-left: 0.5em;\n      margin-bottom: 0.3em; }\n      .project-description-dialog-box .description .image IMG, .project-description-dialog-box .description .image CANVAS, .project-description-dialog-box .description .image svg {\n        width: 10em;\n        height: auto; }\n  .single-col .project-description-dialog-box {\n    width: 100%;\n    max-width: none; }\n    .single-col .project-description-dialog-box .description img {\n      width: 5em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/project-management-dialog-box.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".project-management-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  max-width: 100%;\n  min-width: 20em;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .project-management-dialog-box .scrollable {\n    flex: 1 1 auto;\n    font-size: 1.4em;\n    padding: 0.25em 0.25em 0.25em 0.25em; }\n  .project-management-dialog-box .option-button.selected, .project-management-dialog-box .option-button:hover {\n    color: #ee3333; }\n  .project-management-dialog-box .option-button.disabled {\n    color: #eeeeee;\n    opacity: 0.1; }\n  .project-management-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n  .single-col .project-management-dialog-box {\n    width: 100%;\n    max-width: none; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/system-description-dialog-box.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".system-description-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  max-width: 40em;\n  width: 80%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em; }\n  .system-description-dialog-box .scrollable {\n    flex: 1 1 auto;\n    flex-basis: auto;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n  .system-description-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.5em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n  .system-description-dialog-box .title {\n    font-size: 1.4em;\n    font-weight: bold;\n    margin-bottom: 0.3em; }\n  .system-description-dialog-box .description {\n    margin-top: 0.5em;\n    margin-bottom: 0.5em;\n    white-space: pre-line; }\n  .single-col .system-description-dialog-box {\n    width: 100%;\n    max-width: none; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/telephone-number-dialog-box.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".telephone-number-dialog-box {\n  display: flex;\n  flex-direction: column;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #cccccc;\n  margin: auto;\n  padding: 0.4em 0.5em 0.4em 0.5em; }\n  .telephone-number-dialog-box .contents {\n    padding-bottom: 0.5em; }\n    .telephone-number-dialog-box .contents .qr-code {\n      float: left;\n      width: 198px;\n      height: 198px; }\n    .telephone-number-dialog-box .contents .number {\n      overflow: hidden;\n      padding: 0.5em 0.25em 0.25em 0.5em;\n      font-size: 3em;\n      -webkit-user-select: text;\n         -moz-user-select: text;\n          -ms-user-select: text;\n              user-select: text; }\n  .telephone-number-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.5em 0 0.2em 0.2em;\n    border-top: 1px solid #666666;\n    text-align: right; }\n  .single-col .telephone-number-dialog-box {\n    width: 100%; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/user-selection-dialog-box.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".user-selection-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  max-width: 100%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .user-selection-dialog-box .scrollable {\n    flex: 1 1 auto; }\n  .user-selection-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n  .single-col .user-selection-dialog-box {\n    width: 100%; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/video-capture-dialog-box-browser.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'.video-capture-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n  max-width: 80%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .video-capture-dialog-box .container {\n    flex: 1 1 auto;\n    overflow: hidden;\n    margin-bottom: 0.2em;\n    position: relative; }\n    .video-capture-dialog-box .container .live-video, .video-capture-dialog-box .container .preview {\n      position: absolute;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      display: block; }\n    .video-capture-dialog-box .container .preview ::-webkit-media-controls-start-playback-button {\n      display: none; }\n    .single-col .video-capture-dialog-box .container .preview ::-webkit-media-controls-download-button {\n      display: none; }\n    .video-capture-dialog-box .container .spacer {\n      display: block;\n      visibility: hidden; }\n      .single-col .video-capture-dialog-box .container .spacer {\n        width: 100%; }\n  .video-capture-dialog-box .controls {\n    display: block;\n    flex: 1 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    border-top: 1px solid #666666; }\n    .video-capture-dialog-box .controls .device-selector {\n      float: left; }\n    .video-capture-dialog-box .controls .buttons {\n      float: right; }\n    .video-capture-dialog-box .controls .duration-indiactor {\n      float: left;\n      margin-top: 0.65em; }\n    .video-capture-dialog-box .controls:after {\n      content: "";\n      display: table;\n      clear: both; }\n  .single-col .video-capture-dialog-box {\n    width: 100%;\n    max-width: none; }\n',""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/audio-editor.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".audio-editor {\n  position: relative;\n  width: 100%;\n  padding-top: 50%;\n  padding-bottom: 50%; }\n  .audio-editor .graphic {\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center; }\n    .audio-editor .graphic .icon {\n      font-size: 8em; }\n    .audio-editor .graphic .duration {\n      font-size: 2em; }\n\n.image-editor .audio-duration {\n  position: absolute;\n  top: 0.5em;\n  right: 0.5em;\n  opacity: 0.5;\n  pointer-events: none;\n  color: #ffffff; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/image-editor.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".image-editor {\n  position: relative;\n  width: 100%;\n  padding-top: 50%;\n  padding-bottom: 50%; }\n  .image-editor .image-cropper, .image-editor .preview, .image-editor .placeholder {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%; }\n  .image-editor .preview {\n    cursor: wait; }\n    .image-editor .preview IMG {\n      border: 0;\n      display: block;\n      width: 100%;\n      height: auto; }\n    .image-editor .preview.disabled {\n      cursor: not-allowed; }\n  .image-editor .spinner {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n    pointer-events: none;\n    font-size: 8em;\n    width: 1.5em;\n    height: 1.2em;\n    text-align: center;\n    color: #000000;\n    opacity: 0.25; }\n  .image-editor .placeholder {\n    display: flex;\n    flex-direction: column;\n    bottom: 0;\n    align-items: center;\n    justify-content: center;\n    color: #666666; }\n    .image-editor .placeholder .icon {\n      font-size: 3em; }\n    .image-editor .placeholder .message {\n      margin-top: 0.5em;\n      font-size: 0.7em;\n      text-transform: uppercase; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/media-editor.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".media-editor {\n  position: relative;\n  width: 100%;\n  max-width: 600px; }\n  .media-editor .resource {\n    position: relative;\n    padding: 0.25em 0.25em 0.25em 0.25em; }\n  .media-editor .navigation {\n    position: absolute;\n    left: 0.25em;\n    right: 0.25em;\n    bottom: 0.25em;\n    background-color: rgba(0, 0, 0, 0.75);\n    opacity: 1;\n    transition: opacity .5s; }\n    .media-editor .navigation .left {\n      float: left; }\n    .media-editor .navigation .right {\n      float: right; }\n    .media-editor .navigation.hidden {\n      opacity: 0; }\n  .media-editor.empty {\n    position: static;\n    max-width: none; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/reaction-editor.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'.reaction-editor {\n  display: flex;\n  flex-direction: row;\n  padding: 0.1em 0.1em 0.1em 0.1em; }\n  .reaction-editor .profile-image-column {\n    flex: 0 0 auto; }\n    .reaction-editor .profile-image-column .profile-image {\n      margin: 0 0.4em 0 0.2em; }\n  .reaction-editor .editor-column {\n    flex: 1 1 auto; }\n    .reaction-editor .editor-column .media {\n      max-width: 300px;\n      padding: 0em 1em 0.25em 1em; }\n    .reaction-editor .editor-column .controls .buttons {\n      display: block; }\n      .reaction-editor .editor-column .controls .buttons .action-buttons {\n        float: right; }\n      .reaction-editor .editor-column .controls .buttons:after {\n        content: "";\n        display: table;\n        clear: both; }\n    .reaction-editor .editor-column .autosize-text-area TEXTAREA {\n      min-height: 2.7em;\n      max-height: 5em; }\n      .single-col .reaction-editor .editor-column .autosize-text-area TEXTAREA {\n        min-height: 1.2em; }\n',""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/story-editor-options.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".story-editor-options .border {\n  margin-top: 0.5em;\n  padding-top: 0.5em;\n  border-top: 1px dotted #404040; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/story-editor.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".story-editor {\n  background-color: #362a2a;\n  border: 2px solid #211a1a;\n  width: 100%; }\n  .story-editor .header {\n    background-color: #211a1a; }\n    .story-editor .header .column-1 > .profile-image {\n      position: relative;\n      height: 0.8em;\n      vertical-align: top;\n      margin-top: 0.1em;\n      margin-right: 0.5em;\n      overflow: visible; }\n      .story-editor .header .column-1 > .profile-image IMG, .story-editor .header .column-1 > .profile-image .placeholder {\n        position: absolute;\n        top: 0;\n        left: 0; }\n  .story-editor .body .autosize-text-area {\n    margin-top: 0.7em;\n    margin-bottom: 0.1em;\n    margin-left: -1px;\n    margin-right: -1px; }\n    .story-editor .body .autosize-text-area TEXTAREA {\n      font-size: 1em;\n      min-height: 5em;\n      max-height: 50vh; }\n      .single-col .story-editor .body .autosize-text-area TEXTAREA {\n        min-height: 1.2em; }\n  .story-editor .body .story-contents {\n    margin-top: 0.25em;\n    padding: 0.25em 0.25em 0.25em 0.5em; }\n  .story-editor .body .buttons {\n    text-align: right; }\n  .story-editor .padded {\n    padding: 0.25em 0.25em 0.25em 0.5em; }\n  .story-editor .selectable {\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n  .double-col .story-editor,\n  .triple-col .story-editor {\n    display: table; }\n    .double-col .story-editor .column-1,\n    .double-col .story-editor .column-2,\n    .double-col .story-editor .column-3,\n    .triple-col .story-editor .column-1,\n    .triple-col .story-editor .column-2,\n    .triple-col .story-editor .column-3 {\n      display: table-cell;\n      vertical-align: top; }\n    .double-col .story-editor .header,\n    .triple-col .story-editor .header {\n      display: table-row; }\n    .double-col .story-editor .body,\n    .triple-col .story-editor .body {\n      display: table-row; }\n      .double-col .story-editor .body .autosize-text-area,\n      .triple-col .story-editor .body .autosize-text-area {\n        min-height: 3em; }\n      .double-col .story-editor .body .column-2,\n      .triple-col .story-editor .body .column-2 {\n        position: relative; }\n  .double-col .story-editor .column-1,\n  .double-col .story-editor .column-2 {\n    width: 50%; }\n  .triple-col .story-editor .column-1,\n  .triple-col .story-editor .column-2 {\n    width: 40%; }\n  .triple-col .story-editor .column-3 {\n    width: 20%; }\n  .story-editor.highlighting {\n    -webkit-animation: flash normal 5s 1 ease-in-out;\n            animation: flash normal 5s 1 ease-in-out; }\n\n@-webkit-keyframes flash {\n  25% {\n    border-color: #fc6d26; } }\n\n@keyframes flash {\n  25% {\n    border-color: #fc6d26; } }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/video-editor.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".image-editor .video-duration {\n  position: absolute;\n  top: 0.5em;\n  right: 0.5em;\n  opacity: 0.5;\n  pointer-events: none;\n  color: #ffffff; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/bookmark-list.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".single-col .bookmark-list > .smart-list > .slot {\n  margin-bottom: 0.5em; }\n\n.double-col .bookmark-list > .smart-list > .slot,\n.triple-col .bookmark-list > .smart-list > .slot {\n  margin-bottom: 1em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/notification-list.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".notification-list > .smart-list > .slot {\n  margin-bottom: 0.5em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/reaction-list.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".reaction-list {\n  padding-top: 2px;\n  padding-right: 0.25em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/story-list.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".single-col .story-list > .smart-list > .slot {\n  margin-bottom: 0.5em; }\n\n.double-col .story-list > .smart-list > .slot,\n.triple-col .story-list > .smart-list > .slot {\n  margin-bottom: 1em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/user-activity-list.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".user-activity-list {\n  margin-top: 0.5em; }\n  .user-activity-list .activity {\n    margin-bottom: 0.15em;\n    overflow: hidden; }\n    .user-activity-list .activity .label {\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis; }\n      .user-activity-list .activity .label A:link, .user-activity-list .activity .label A:visited {\n        color: #999999;\n        text-decoration: none; }\n        .user-activity-list .activity .label A:link:hover, .user-activity-list .activity .label A:visited:hover {\n          color: #eeeeee; }\n      .user-activity-list .activity .label.recent A {\n        color: #cccccc; }\n    .user-activity-list .activity .time {\n      float: right;\n      color: #666666;\n      font-size: 0.9em;\n      -webkit-user-select: text;\n         -moz-user-select: text;\n          -ms-user-select: text;\n              user-select: text; }\n      .user-activity-list .activity .time.today, .user-activity-list .activity .time.yesterday {\n        color: #cccccc; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/user-list.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".single-col .user-list > .smart-list > .slot {\n  margin-bottom: 0.5em; }\n\n.double-col .user-list > .smart-list > .slot,\n.triple-col .user-list > .smart-list > .slot {\n  margin-bottom: 1em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/user-selection-list.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".user-selection-list {\n  min-width: 14em;\n  padding-bottom: 0.1em; }\n  .user-selection-list .user {\n    position: relative;\n    cursor: pointer;\n    padding: 0.2em 0.2em 0.2em 0.2em;\n    -webkit-filter: grayscale(50%);\n            filter: grayscale(50%); }\n    .user-selection-list .user .name {\n      margin-left: 0.2em;\n      margin-right: 2em;\n      vertical-align: middle; }\n    .user-selection-list .user .fa {\n      position: absolute;\n      right: 0.3em;\n      top: 0;\n      bottom: 0;\n      margin: auto;\n      height: 1em;\n      font-size: 1.2em;\n      color: #e24329;\n      opacity: 0;\n      transition: opacity 0.5s;\n      vertical-align: middle; }\n    .user-selection-list .user:hover {\n      color: #cccccc;\n      -webkit-filter: none;\n              filter: none; }\n    .user-selection-list .user.selected {\n      background-color: #211a1a;\n      color: #eeeeee;\n      -webkit-filter: none;\n              filter: none; }\n      .user-selection-list .user.selected .fa {\n        opacity: 1; }\n    .user-selection-list .user.disabled {\n      cursor: default; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/bookmarks-page.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/error-page.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".error-page .contents {\n  flex: 1 0 auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: #ffffff; }\n  .error-page .contents .text {\n    max-width: 20em;\n    line-height: 135%;\n    margin-left: 1em;\n    margin-right: 1em; }\n    .error-page .contents .text h1 {\n      text-align: center; }\n  .error-page .contents .graphic {\n    margin-left: 1em;\n    margin-right: 1em; }\n    .error-page .contents .graphic svg {\n      width: 100%;\n      max-width: 20em; }\n      .error-page .contents .graphic svg polygon {\n        fill: #ffffff; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/news-page.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/notifications-page.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/people-page.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/settings-page.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".double-col .settings-page .panels,\n.triple-col .settings-page .panels {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  margin: auto;\n  padding: 1em 1em 1em 1em;\n  -webkit-column-fill: balance;\n          column-fill: balance;\n  -webkit-column-width: 25em;\n          column-width: 25em;\n  -webkit-column-gap: 1em;\n          column-gap: 1em;\n  max-width: 110em; }\n\n.settings-page .panels.diagnostics {\n  height: 100%; }\n  .double-col .settings-page .panels.diagnostics,\n  .triple-col .settings-page .panels.diagnostics {\n    -webkit-column-fill: auto;\n            column-fill: auto; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/start-page.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".start-page {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0; }\n  .start-page .oauth-button {\n    display: table;\n    border: 1px solid #cccccc;\n    width: 100%;\n    max-width: 20em;\n    margin-top: 0.5em; }\n    .start-page .oauth-button .icon {\n      width: 2em;\n      display: table-cell;\n      font-size: 2em;\n      padding: 0.26em 0 0.24em 0.25em;\n      text-align: center;\n      vertical-align: middle; }\n    .start-page .oauth-button .label {\n      display: table-cell;\n      font-size: 1.25em;\n      padding-right: 2.5em;\n      text-align: center;\n      vertical-align: middle; }\n    .start-page .oauth-button .error {\n      display: table-cell;\n      padding-left: 1.25em;\n      padding-right: 1.5em;\n      vertical-align: middle; }\n    .start-page .oauth-button:link, .start-page .oauth-button:visited {\n      text-decoration: none;\n      color: #cccccc; }\n    .start-page .oauth-button.error {\n      border-color: #ee3333;\n      color: #ee3333; }\n    .no-touch .start-page .oauth-button:hover {\n      background-color: #fca326;\n      color: #000000; }\n    .start-page .oauth-button:active {\n      background-color: #fca326;\n      color: #000000; }\n    .single-col .start-page .oauth-button {\n      max-width: none; }\n  .start-page .project-button {\n    display: block;\n    border: 1px solid #cccccc;\n    max-width: 34em;\n    cursor: pointer;\n    margin-bottom: 0.5em;\n    vertical-align: middle;\n    height: calc(3.5em + 2px); }\n    .start-page .project-button .icon {\n      float: left; }\n      .start-page .project-button .icon IMG {\n        width: 3.5em;\n        height: 3.5em; }\n      .start-page .project-button .icon .default {\n        text-align: center;\n        width: 3.5em;\n        height: 3.5em; }\n        .start-page .project-button .icon .default.v1 {\n          background-color: #ff9900; }\n        .start-page .project-button .icon .default.v2 {\n          background-color: #00cc33; }\n        .start-page .project-button .icon .default.v3 {\n          background-color: #3399ff; }\n        .start-page .project-button .icon .default.v4 {\n          background-color: #ff6666; }\n        .start-page .project-button .icon .default.v5 {\n          background-color: #cc66ff; }\n        .start-page .project-button .icon .default svg {\n          margin-top: 0.5em;\n          height: 2.25em; }\n    .start-page .project-button .text {\n      overflow: hidden; }\n      .start-page .project-button .text .title {\n        font-size: 1em;\n        margin: 0.25em 0.25em 0 0.35em;\n        font-weight: bold;\n        font-variant: small-caps; }\n      .start-page .project-button .text .description {\n        font-size: 0.8em;\n        margin: 0.1em 0.25em 0 0.40em;\n        white-space: pre-line;\n        overflow: hidden;\n        height: calc(2em + 5px); }\n        .start-page .project-button .text .description .contents {\n          width: calc(100% - 1.2em);\n          position: relative;\n          display: block;\n          max-height: 3em; }\n          .start-page .project-button .text .description .contents .ellipsis {\n            position: absolute;\n            right: -1em;\n            top: calc(4.45em - 100%);\n            text-align: left;\n            vertical-align: bottom; }\n      .start-page .project-button .text .badge {\n        color: #606060;\n        margin-top: 0.2em;\n        margin-right: 0.2em;\n        float: right; }\n    .start-page .project-button:link, .start-page .project-button:visited {\n      text-decoration: none;\n      color: #cccccc; }\n    .no-touch .start-page .project-button:hover {\n      background-color: #fca326;\n      color: #000000; }\n    .single-col .start-page .project-button {\n      max-width: none; }\n  .start-page.browser {\n    display: flex;\n    background-color: #4d3936;\n    background-repeat: no-repeat;\n    background-position: center center;\n    background-attachment: fixed;\n    background-size: cover;\n    background-blend-mode: soft-light; }\n    .start-page.browser .bar {\n      display: flex;\n      align-self: center;\n      flex-direction: column;\n      flex: 1 0 auto;\n      background-color: rgba(77, 57, 54, 0.97);\n      width: 100%;\n      min-height: 25vh;\n      position: relative;\n      color: #cccccc;\n      overflow: hidden; }\n      .start-page.browser .bar .content-area {\n        align-self: center;\n        text-align: center;\n        flex: 1 1 auto;\n        width: 90%;\n        max-width: 80em;\n        padding-bottom: 1.4em;\n        z-index: 1; }\n        .start-page.browser .bar .content-area .section {\n          display: inline-block;\n          text-align: left;\n          width: 48%;\n          min-width: 30em;\n          vertical-align: top;\n          padding-left: 1em;\n          padding-right: 1em; }\n          .start-page.browser .bar .content-area .section .scrollable {\n            margin-top: 1em;\n            padding-right: 0.25em;\n            max-height: 60vh; }\n            .single-col .start-page.browser .bar .content-area .section .scrollable {\n              max-height: 30vh; }\n          .start-page.browser .bar .content-area .section.description {\n            -webkit-user-select: text;\n               -moz-user-select: text;\n                -ms-user-select: text;\n                    user-select: text; }\n            .start-page.browser .bar .content-area .section.description .scrollable {\n              white-space: pre-line; }\n          .single-col .start-page.browser .bar .content-area .section {\n            min-width: auto;\n            width: 100%; }\n        .single-col .start-page.browser .bar .content-area {\n          width: 100%;\n          max-width: none; }\n      .start-page.browser .bar .welcome {\n        position: absolute;\n        left: 0px;\n        right: 0px;\n        top: 0px;\n        bottom: 0px;\n        text-align: center;\n        margin: auto;\n        height: 1em;\n        z-index: 0;\n        opacity: 0; }\n    .start-page.browser.transition-out-fast {\n      transition: opacity 0.7s linear 0.55s;\n      opacity: 0; }\n      .start-page.browser.transition-out-fast .bar {\n        transition: min-height 0.7s;\n        min-height: 100vh; }\n        .start-page.browser.transition-out-fast .bar .content-area {\n          opacity: 0; }\n    .start-page.browser.transition-out-slow {\n      transition: opacity 0.7s linear 3s;\n      opacity: 0; }\n      .start-page.browser.transition-out-slow .bar {\n        transition: min-height 0.7s, background-color 0.5s;\n        min-height: 100vh;\n        background-color: #4d3936; }\n        .start-page.browser.transition-out-slow .bar .content-area {\n          opacity: 0; }\n        .start-page.browser.transition-out-slow .bar .welcome {\n          -webkit-animation-name: fade-in-out;\n                  animation-name: fade-in-out;\n          -webkit-animation-duration: 2.5s;\n                  animation-duration: 2.5s;\n          -webkit-animation-delay: 1s;\n                  animation-delay: 1s;\n          opacity: 0; }\n\n@-webkit-keyframes fade-in-out {\n  0% {\n    opacity: 0; }\n  35% {\n    opacity: 1; }\n  75% {\n    opacity: 1; }\n  100% {\n    opacity: 0; } }\n\n@keyframes fade-in-out {\n  0% {\n    opacity: 0; }\n  35% {\n    opacity: 1; }\n  75% {\n    opacity: 1; }\n  100% {\n    opacity: 0; } }\n  .start-page.cordova {\n    padding: 0em 0.5em 0em 0.5em;\n    background-color: #211a1a;\n    color: #cccccc; }\n    .start-page.cordova .welcome {\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center; }\n      .start-page.cordova .welcome .profile-image, .start-page.cordova .welcome .name {\n        opacity: 0;\n        transition: opacity 0.5s; }\n      .start-page.cordova .welcome.user .profile-image, .start-page.cordova .welcome.user .name {\n        opacity: 1; }\n    .start-page.cordova .activation-instructions {\n      margin-bottom: 1em;\n      line-height: 125%; }\n      .start-page.cordova .activation-instructions .ui {\n        display: inline-block;\n        color: #eeeeee;\n        font-weight: bold;\n        padding-left: 0.1em;\n        padding-right: 0.1em;\n        white-space: nowrap; }\n    .start-page.cordova .activation-buttons .left {\n      float: left; }\n    .start-page.cordova .activation-buttons .right {\n      float: right; }\n    .start-page.cordova .projects {\n      margin-bottom: 2em; }\n      .start-page.cordova .projects .project-button {\n        background-color: #362a2a; }\n        .no-touch .start-page.cordova .projects .project-button:hover {\n          background-color: #fca326;\n          color: #000000; }\n    .start-page.cordova.transition-out-fast {\n      transition: opacity 0.7s linear 0.55s, background-color 0.7s ease-in;\n      opacity: 0;\n      background-color: #4d3936; }\n    .start-page.cordova.transition-out-slow {\n      transition: opacity 0.7s linear 3s, background-color 1s ease-in;\n      opacity: 0;\n      background-color: #4d3936; }\n      .start-page.cordova.transition-out-slow .welcome {\n        -webkit-animation-name: fade-in-out;\n                animation-name: fade-in-out;\n        -webkit-animation-duration: 3s;\n                animation-duration: 3s;\n        -webkit-animation-delay: 0.5s;\n                animation-delay: 0.5s;\n        opacity: 0; }\n\n@keyframes fade-in-out {\n  0% {\n    opacity: 0; }\n  35% {\n    opacity: 1; }\n  75% {\n    opacity: 1; }\n  100% {\n    opacity: 0; } }\n  .start-page .loading-animation {\n    height: 3.5em; }\n  .start-page .empty-message {\n    height: 3.5em; }\n  .start-page .other-servers {\n    clear: both;\n    overflow: hidden;\n    margin-top: 2em; }\n    .start-page .other-servers UL {\n      list-style-type: none;\n      padding-left: 1em;\n      font-size: 1.2em; }\n      .start-page .other-servers UL A:link, .start-page .other-servers UL A:visited {\n        text-decoration: none;\n        color: #cccccc; }\n        .no-touch .start-page .other-servers UL A:link:hover, .no-touch .start-page .other-servers UL A:visited:hover {\n          color: #eeeeee; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/development-panel.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/device-panel.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".settings-panel.device .body {\n  padding-left: 0.5em; }\n\n.settings-panel.device .device-option-button {\n  display: table;\n  width: 100%;\n  color: #eeeeee;\n  margin-top: 0.35em;\n  margin-bottom: 0.35em; }\n  .settings-panel.device .device-option-button .icon {\n    display: table-cell;\n    text-align: left;\n    width: 1em;\n    padding-right: 0.4em; }\n  .settings-panel.device .device-option-button .text {\n    display: table-cell;\n    vertical-align: top; }\n    .settings-panel.device .device-option-button .text .name {\n      font-size: 1.3em; }\n    .settings-panel.device .device-option-button .text .revoke {\n      padding-top: 0.1em;\n      display: block;\n      float: right;\n      color: #666666;\n      cursor: pointer; }\n      .settings-panel.device .device-option-button .text .revoke:hover {\n        color: #eeeeee; }\n\n.settings-panel.device .device-icon {\n  position: relative;\n  font-size: 1.8em;\n  text-align: center; }\n  .settings-panel.device .device-icon .fa.background {\n    display: block;\n    color: #eeeeee; }\n  .settings-panel.device .device-icon .fa.icon-overlay {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0.5em;\n    font-size: 0.4em;\n    height: 1em;\n    width: 1em;\n    text-align: center;\n    margin: auto; }\n    .settings-panel.device .device-icon .fa.icon-overlay.fa-android {\n      color: #97c03d; }\n    .settings-panel.device .device-icon .fa.icon-overlay.fa-windows {\n      color: #0caee9;\n      font-size: 0.35em; }\n    .settings-panel.device .device-icon .fa.icon-overlay.fa-apple {\n      color: #ffffff;\n      bottom: 0.4em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/diagnostics-panel.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".settings-panel.diagnostics .diagnostics-section .title {\n  font-weight: bold;\n  padding: 0.25em 0.25em 0.25em 0;\n  cursor: pointer; }\n\n.settings-panel.diagnostics .diagnostics-section .collapsible-contents {\n  padding: 0.25em 0.25em 0.25em 0.25em;\n  max-height: 50vh;\n  overflow: auto; }\n\n.settings-panel.diagnostics .diagnostics-section .collapsible-container {\n  border: 1px solid transparent;\n  transition: height .25s, border-color 0.2s; }\n\n.settings-panel.diagnostics .diagnostics-section PRE {\n  border-bottom: 1px dotted #cccccc;\n  padding-bottom: 0.5em;\n  margin-top: 0.5em;\n  margin-bottom: 0.5em; }\n  .settings-panel.diagnostics .diagnostics-section PRE:last-child {\n    border-bottom: 0; }\n\n.settings-panel.diagnostics .diagnostics-section.open {\n  color: #eeeeee; }\n  .settings-panel.diagnostics .diagnostics-section.open .collapsible-container {\n    border-color: #eeeeee; }\n\n.settings-panel.diagnostics.remote-data-source .recent-search-table {\n  border-collapse: collapse;\n  border-style: hidden;\n  table-layout: fixed;\n  width: 50em;\n  margin: -0.25em -0.25em -0.25em -0.25em; }\n  .settings-panel.diagnostics.remote-data-source .recent-search-table TR .updating {\n    background-color: #119911; }\n  .settings-panel.diagnostics.remote-data-source .recent-search-table TR .dirty {\n    background-color: #991111; }\n  .settings-panel.diagnostics.remote-data-source .recent-search-table TH, .settings-panel.diagnostics.remote-data-source .recent-search-table TD {\n    border: 1px solid #666666;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    font-size: 0.8em;\n    padding: 0.2em 0.2em 0.2em 0.2em; }\n    .settings-panel.diagnostics.remote-data-source .recent-search-table TH.time, .settings-panel.diagnostics.remote-data-source .recent-search-table TD.time {\n      width: 8%; }\n    .settings-panel.diagnostics.remote-data-source .recent-search-table TH.schema, .settings-panel.diagnostics.remote-data-source .recent-search-table TD.schema {\n      width: 10%; }\n    .settings-panel.diagnostics.remote-data-source .recent-search-table TH.table, .settings-panel.diagnostics.remote-data-source .recent-search-table TD.table {\n      width: 15%; }\n    .settings-panel.diagnostics.remote-data-source .recent-search-table TH.criteria, .settings-panel.diagnostics.remote-data-source .recent-search-table TD.criteria {\n      width: 30%; }\n    .settings-panel.diagnostics.remote-data-source .recent-search-table TH.objects, .settings-panel.diagnostics.remote-data-source .recent-search-table TD.objects {\n      width: 15%; }\n    .settings-panel.diagnostics.remote-data-source .recent-search-table TH.by, .settings-panel.diagnostics.remote-data-source .recent-search-table TD.by {\n      width: 22%; }\n  .settings-panel.diagnostics.remote-data-source .recent-search-table TD.time, .settings-panel.diagnostics.remote-data-source .recent-search-table TD.objects {\n    text-align: right; }\n\n.settings-panel.diagnostics.remote-data-source .recent-storage-table {\n  border-collapse: collapse;\n  border-style: hidden;\n  table-layout: fixed;\n  width: 50em;\n  margin: -0.25em -0.25em -0.25em -0.25em; }\n  .settings-panel.diagnostics.remote-data-source .recent-storage-table TH, .settings-panel.diagnostics.remote-data-source .recent-storage-table TD {\n    border: 1px solid #666666;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    font-size: 0.8em;\n    padding: 0.2em 0.2em 0.2em 0.2em; }\n    .settings-panel.diagnostics.remote-data-source .recent-storage-table TH.time, .settings-panel.diagnostics.remote-data-source .recent-storage-table TD.time {\n      width: 8%; }\n    .settings-panel.diagnostics.remote-data-source .recent-storage-table TH.schema, .settings-panel.diagnostics.remote-data-source .recent-storage-table TD.schema {\n      width: 10%; }\n    .settings-panel.diagnostics.remote-data-source .recent-storage-table TH.table, .settings-panel.diagnostics.remote-data-source .recent-storage-table TD.table {\n      width: 15%; }\n    .settings-panel.diagnostics.remote-data-source .recent-storage-table TH.objects, .settings-panel.diagnostics.remote-data-source .recent-storage-table TD.objects {\n      width: 45%; }\n    .settings-panel.diagnostics.remote-data-source .recent-storage-table TH.by, .settings-panel.diagnostics.remote-data-source .recent-storage-table TD.by {\n      width: 22%; }\n  .settings-panel.diagnostics.remote-data-source .recent-storage-table TD.time {\n    text-align: right; }\n\n.settings-panel.diagnostics.payload-manager .file-size {\n  float: right; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/language-panel.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".settings-panel.language .option-button {\n  margin-top: 0.35em;\n  margin-bottom: 0.35em; }\n  .settings-panel.language .option-button SELECT {\n    font-size: 1em;\n    color: #666666;\n    background-color: #4d3936;\n    border: 0;\n    padding: 2px 10px 2px 6px;\n    margin-left: 0.5em;\n    margin-top: -4px;\n    margin-bottom: -4px; }\n    .settings-panel.language .option-button SELECT.sole {\n      visibility: hidden;\n      width: 1px; }\n    .settings-panel.language .option-button SELECT:hover, .settings-panel.language .option-button SELECT:focus {\n      color: #eeeeee;\n      background-color: #806666; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/mobile-alert-panel.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/notification-panel.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/project-panel.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".settings-panel.project .body {\n  padding-left: 0.5em;\n  min-height: 9.4em; }\n\n.settings-panel.project .project-option-button {\n  display: table;\n  color: #666666;\n  margin-top: 0.35em;\n  margin-bottom: 0.35em;\n  cursor: pointer; }\n  .settings-panel.project .project-option-button.selected, .settings-panel.project .project-option-button:hover {\n    color: #eeeeee; }\n  .settings-panel.project .project-option-button.selected {\n    cursor: default; }\n  .settings-panel.project .project-option-button .icon {\n    display: table-cell;\n    width: 1em;\n    padding-right: 0.25em;\n    font-size: 1.4em; }\n  .settings-panel.project .project-option-button .text {\n    display: table-cell; }\n    .settings-panel.project .project-option-button .text .name {\n      font-size: 1.4em; }\n    .settings-panel.project .project-option-button .text .supplemental {\n      margin-top: 0.5em;\n      margin-bottom: 0.15em; }\n      .settings-panel.project .project-option-button .text .supplemental .item {\n        margin-bottom: 0.35em; }\n        .settings-panel.project .project-option-button .text .supplemental .item .button {\n          color: #999999;\n          cursor: pointer; }\n          .settings-panel.project .project-option-button .text .supplemental .item .button:hover {\n            color: #eeeeee; }\n          .settings-panel.project .project-option-button .text .supplemental .item .button .fa {\n            margin-right: 0.15em; }\n          .settings-panel.project .project-option-button .text .supplemental .item .button .label {\n            font-size: 0.9em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/social-network-panel.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/user-image-panel.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".settings-panel.user-image .no-image {\n  position: relative;\n  background-color: #999999;\n  width: 100%;\n  padding-top: 50%;\n  padding-bottom: 50%; }\n  .settings-panel.user-image .no-image svg {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    height: 80%;\n    margin: auto; }\n\n.settings-panel.user-image .image-container {\n  max-width: 500px;\n  margin: auto; }\n\n.settings-panel.user-image .buttons {\n  overflow: hidden;\n  padding-bottom: 0.15em;\n  text-align: right; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/user-info-panel.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".settings-panel.user-info .gender-selector {\n  margin-bottom: 0.35em; }\n  .settings-panel.user-info .gender-selector LABEL {\n    display: block;\n    font-size: 0.9em; }\n  .settings-panel.user-info .gender-selector SELECT {\n    width: 100%;\n    overflow-y: auto;\n    margin-top: 3px;\n    font-size: 1em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/web-alert-panel.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/app-component.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".app-component {\n  display: flex;\n  flex-direction: row;\n  border: 1px solid #211a1a;\n  margin-top: 0.3em;\n  margin-right: 0.1em;\n  background-color: #cccccc;\n  cursor: pointer; }\n  .app-component:first-child {\n    margin-top: 0; }\n  .app-component .picture {\n    flex: 0 0 auto; }\n    .app-component .picture .icon {\n      display: inline-block;\n      color: #000000;\n      background-color: #fca326;\n      height: 4em;\n      width: 4em;\n      padding-top: 1em;\n      text-align: center; }\n      .app-component .picture .icon .fa {\n        font-size: 2em; }\n    .app-component .picture IMG, .app-component .picture CANVAS, .app-component .picture svg {\n      display: block;\n      width: auto;\n      height: 4em; }\n  .app-component .description {\n    flex: 1 1 auto;\n    color: #333333;\n    font-size: 1em;\n    margin: 0.25em 0.25em 0 0.40em;\n    overflow: hidden;\n    height: calc(3em + 9px); }\n    .app-component .description .description-contents {\n      width: calc(100% - 1em);\n      position: relative;\n      display: block;\n      max-height: 4em; }\n      .app-component .description .description-contents .ellipsis {\n        position: absolute;\n        right: -1em;\n        top: calc(6.9em - 100%);\n        text-align: left;\n        vertical-align: bottom; }\n      .app-component .description .description-contents H1, .app-component .description .description-contents H2, .app-component .description .description-contents H3, .app-component .description .description-contents H4, .app-component .description .description-contents H5 {\n        font-size: 1em;\n        margin-top: 0;\n        margin-bottom: 0.2em; }\n      .app-component .description .description-contents P {\n        margin-top: 0; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/bookmark-view.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".bookmark-view {\n  border: 2px solid #111;\n  background-color: #111; }\n  .bookmark-view .title {\n    color: #eeeeee;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n    .bookmark-view .title .name {\n      display: inline-block;\n      padding: 0.2em 0.1em 0.4em 0.4em;\n      font-size: 0.9em; }\n  .bookmark-view .story {\n    clear: both; }\n    .bookmark-view .story .story-view {\n      border: 0;\n      margin: 0; }\n  .bookmark-view.highlighting {\n    -webkit-animation: flash normal 5s 1 ease-in-out;\n            animation: flash normal 5s 1 ease-in-out; }\n\n@-webkit-keyframes flash {\n  25% {\n    border-color: #fc6d26; } }\n\n@keyframes flash {\n  25% {\n    border-color: #fc6d26; } }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/media-view.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".media-view {\n  position: relative;\n  margin-top: 1em; }\n  .media-view .spacer {\n    padding-top: 100%; }\n  .media-view .container {\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0; }\n    .media-view .container IMG, .media-view .container CANVAS {\n      display: block;\n      width: 100%;\n      height: auto;\n      top: 0;\n      left: 0; }\n    .media-view .container .image, .media-view .container .video, .media-view .container .audio, .media-view .container .website {\n      cursor: pointer; }\n    .media-view .container .overlay {\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      z-index: 0; }\n      .media-view .container .overlay .icon {\n        font-size: 10em; }\n      .media-view .container .overlay .duration {\n        padding: 0.25em 0.5em 0.25em 0.5em;\n        font-size: 2em;\n        border-radius: 0.5em; }\n    .media-view .container .website A {\n      display: block; }\n      .media-view .container .website A:link, .media-view .container .website A:visited {\n        color: #000000; }\n    .media-view .container .video .overlay, .media-view .container .audio .overlay {\n      color: #111111;\n      opacity: 0.5; }\n      .no-touch .media-view .container .video .overlay, .no-touch .media-view .container .audio .overlay {\n        opacity: 0; }\n        .no-touch .media-view .container .video .overlay:hover, .no-touch .media-view .container .audio .overlay:hover {\n          opacity: 0.6; }\n          .no-touch .media-view .container .video .overlay:hover .duration, .no-touch .media-view .container .audio .overlay:hover .duration {\n            color: #eeeeee;\n            background-color: #111111; }\n    .media-view .container .video.posterless, .media-view .container .audio.posterless {\n      padding-top: 50%;\n      padding-bottom: 50%;\n      background-color: #111111; }\n      .media-view .container .video.posterless .overlay, .media-view .container .audio.posterless .overlay {\n        color: #eeeeee;\n        opacity: 0.5; }\n        .no-touch .media-view .container .video.posterless .overlay:hover, .no-touch .media-view .container .audio.posterless .overlay:hover {\n          opacity: 1; }\n          .no-touch .media-view .container .video.posterless .overlay:hover .duration, .no-touch .media-view .container .audio.posterless .overlay:hover .duration {\n            color: #eeeeee;\n            background-color: transparent; }\n    .media-view .container .navigation {\n      position: absolute;\n      width: 100%;\n      bottom: 0;\n      background-color: rgba(0, 0, 0, 0.5); }\n      .media-view .container .navigation .left {\n        float: left; }\n      .media-view .container .navigation .right {\n        float: right; }\n    .media-view .container audio {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      margin-top: 0; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/notification-view.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'.notification-view {\n  display: block;\n  background-color: #362a2a;\n  border: 2px solid #211a1a;\n  padding: 0.4em 0.4em 0.3em 0.4em;\n  color: #666666;\n  cursor: pointer;\n  transition: color 1s; }\n  .notification-view .event {\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text;\n    display: inline; }\n    .notification-view .event .profile-image {\n      margin: 0 0.4em 0 0; }\n    .notification-view .event .text {\n      vertical-align: middle; }\n  .notification-view .date {\n    float: right;\n    margin: 0.1em 0 0 0.8em;\n    color: #666666;\n    transition: color 1s; }\n    .notification-view .date .time {\n      vertical-align: middle; }\n    .notification-view .date .fa {\n      margin-left: 0.2em;\n      vertical-align: middle; }\n  .notification-view:link, .notification-view:visited {\n    text-decoration: none; }\n  .notification-view.unread {\n    color: #eeeeee; }\n    .notification-view.unread .date {\n      color: #eeeeee; }\n  .notification-view:after {\n    content: "";\n    display: table;\n    clear: both; }\n',""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/reaction-view-options.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".reaction-view-options .button {\n  color: #666666;\n  opacity: 0.2;\n  padding: 0 8px 0 8px;\n  margin: 0 -8px 0 -4px; }\n  .single-col .reaction-view-options .button {\n    padding: 4px 12px 4px 12px;\n    margin: -4px -12px -4px -8px; }\n  .reaction-view-options .button.active {\n    opacity: 1; }\n    .no-touch .reaction-view-options .button.active:hover {\n      color: #eeeeee; }\n\n.reaction-view-options .container {\n  right: 0.5em;\n  top: 1.25em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/reaction-view.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".reaction-view {\n  display: flex;\n  flex-direction: row;\n  color: #cccccc;\n  padding: 1px 0 1px 0;\n  border: 1px solid transparent; }\n  .reaction-view A:link, .reaction-view A:visited {\n    color: #cccccc; }\n    .reaction-view A:link A:hover, .reaction-view A:visited A:hover {\n      color: #eeeeee; }\n  .reaction-view .profile-image-column {\n    flex: 0 0 auto;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n    .reaction-view .profile-image-column .profile-image {\n      margin: 0 0.4em 0 0.2em; }\n  .reaction-view .contents-column {\n    flex: 1 1 auto; }\n    .reaction-view .contents-column .text {\n      padding: 0.25em 0.25em 0 0;\n      -webkit-user-select: text;\n         -moz-user-select: text;\n          -ms-user-select: text;\n              user-select: text; }\n      .reaction-view .contents-column .text .comment {\n        white-space: pre-line; }\n        .reaction-view .contents-column .text .comment.markdown IMG, .reaction-view .contents-column .text .comment.markdown CANVAS {\n          height: 1.5em;\n          vertical-align: middle;\n          cursor: pointer; }\n      .reaction-view .contents-column .text .note:link, .reaction-view .contents-column .text .note:visited, .reaction-view .contents-column .text .issue-assignment:link, .reaction-view .contents-column .text .issue-assignment:visited, .reaction-view .contents-column .text .issue-tracking:link, .reaction-view .contents-column .text .issue-tracking:visited {\n        color: #cccccc;\n        text-decoration: none;\n        cursor: pointer; }\n        .reaction-view .contents-column .text .note:link:hover, .reaction-view .contents-column .text .note:visited:hover, .reaction-view .contents-column .text .issue-assignment:link:hover, .reaction-view .contents-column .text .issue-assignment:visited:hover, .reaction-view .contents-column .text .issue-tracking:link:hover, .reaction-view .contents-column .text .issue-tracking:visited:hover {\n          color: #ffffff; }\n      .reaction-view .contents-column .text .in-progress {\n        color: #666666; }\n    .reaction-view .contents-column .reaction-view-options {\n      float: right; }\n    .reaction-view .contents-column .media {\n      padding: 0.5em 1em 0.5em 1em;\n      max-width: 300px; }\n    .reaction-view .contents-column audio {\n      margin-top: 0.25em;\n      width: 100%; }\n  .reaction-view.highlighting {\n    -webkit-animation: flash normal 5s 1 ease-in-out;\n            animation: flash normal 5s 1 ease-in-out;\n    -webkit-animation-delay: 1.5s;\n            animation-delay: 1.5s; }\n\n@-webkit-keyframes flash {\n  25% {\n    border-color: #fc6d26; } }\n\n@keyframes flash {\n  25% {\n    border-color: #fc6d26; } }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/story-contents.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".story-contents {\n  margin-top: 1em;\n  margin-bottom: 0.25em; }\n  .story-contents .text {\n    color: #cccccc;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n    .story-contents .text A:link, .story-contents .text A:visited {\n      text-decoration: none;\n      color: #cccccc; }\n      .story-contents .text A:link:hover, .story-contents .text A:visited:hover {\n        color: #ffffff; }\n    .story-contents .text P:first-child {\n      margin-top: 0; }\n    .story-contents .text P:last-child {\n      margin-bottom: 0; }\n    .story-contents .text .status-opened, .story-contents .text .status-reopened {\n      color: #99ff66; }\n    .story-contents .text .status-closed {\n      color: #ff3333; }\n    .story-contents .text .tags {\n      line-height: 1.6em; }\n    .story-contents .text .tag {\n      font-size: 0.9em;\n      color: #ffffff;\n      background-color: #444444;\n      padding: 0.2em 0.4em 0.2em 0.4em;\n      border-radius: 0.25em; }\n    .story-contents .text.plain-text {\n      white-space: pre-wrap; }\n      .story-contents .text.plain-text .list-item.vote-count {\n        width: 100%; }\n    .story-contents .text.markdown IMG, .story-contents .text.markdown CANVAS, .story-contents .text.markdown svg {\n      vertical-align: top;\n      height: 1.5em;\n      width: auto;\n      cursor: pointer;\n      vertical-align: middle; }\n    .story-contents .text.markdown svg {\n      width: 1.5em; }\n    .story-contents .text.survey .list-item, .story-contents .text.survey .vote-count, .story-contents .text.task-list .list-item, .story-contents .text.task-list .vote-count {\n      margin-bottom: 0.2em; }\n      .story-contents .text.survey .list-item H1, .story-contents .text.survey .list-item H2, .story-contents .text.survey .list-item H3, .story-contents .text.survey .list-item H4, .story-contents .text.survey .list-item H5, .story-contents .text.survey .list-item H6, .story-contents .text.survey .vote-count H1, .story-contents .text.survey .vote-count H2, .story-contents .text.survey .vote-count H3, .story-contents .text.survey .vote-count H4, .story-contents .text.survey .vote-count H5, .story-contents .text.survey .vote-count H6, .story-contents .text.task-list .list-item H1, .story-contents .text.task-list .list-item H2, .story-contents .text.task-list .list-item H3, .story-contents .text.task-list .list-item H4, .story-contents .text.task-list .list-item H5, .story-contents .text.task-list .list-item H6, .story-contents .text.task-list .vote-count H1, .story-contents .text.task-list .vote-count H2, .story-contents .text.task-list .vote-count H3, .story-contents .text.task-list .vote-count H4, .story-contents .text.task-list .vote-count H5, .story-contents .text.task-list .vote-count H6 {\n        display: inline-block;\n        margin-top: 0;\n        margin-bottom: 0; }\n      .story-contents .text.survey .list-item:last-child, .story-contents .text.survey .vote-count:last-child, .story-contents .text.task-list .list-item:last-child, .story-contents .text.task-list .vote-count:last-child {\n        margin-bottom: 0; }\n    .story-contents .text.survey .vote-count .label {\n      display: block;\n      margin-bottom: 0.1em; }\n    .story-contents .text.survey .vote-count .bar {\n      display: block;\n      position: relative;\n      border: 1px solid #aaaaaa;\n      font-size: 0.8em;\n      height: 1.5em;\n      margin-bottom: 0.4em; }\n      .story-contents .text.survey .vote-count .bar .percent {\n        position: absolute;\n        display: block;\n        left: 0.2em;\n        top: 0.1em;\n        color: #333333; }\n      .story-contents .text.survey .vote-count .bar .count {\n        position: absolute;\n        display: block;\n        right: 0.2em;\n        top: 0.1em;\n        color: #cccccc; }\n      .story-contents .text.survey .vote-count .bar .filled {\n        display: block;\n        position: absolute;\n        left: 0;\n        top: 0;\n        bottom: 0; }\n        .story-contents .text.survey .vote-count .bar .filled.color-1 {\n          background-color: #ffa64d; }\n        .story-contents .text.survey .vote-count .bar .filled.color-2 {\n          background-color: #e8e830; }\n        .story-contents .text.survey .vote-count .bar .filled.color-3 {\n          background-color: #a6ff4d; }\n        .story-contents .text.survey .vote-count .bar .filled.color-4 {\n          background-color: #17cf17; }\n        .story-contents .text.survey .vote-count .bar .filled.color-5 {\n          background-color: #4dffa6; }\n        .story-contents .text.survey .vote-count .bar .filled.color-6 {\n          background-color: #30e8e8; }\n        .story-contents .text.survey .vote-count .bar .filled.color-7 {\n          background-color: #4da6ff; }\n        .story-contents .text.survey .vote-count .bar .filled.color-8 {\n          background-color: #1717cf; }\n        .story-contents .text.survey .vote-count .bar .filled.color-9 {\n          background-color: #a64dff; }\n        .story-contents .text.survey .vote-count .bar .filled.color-10 {\n          background-color: #e830e8; }\n        .story-contents .text.survey .vote-count .bar .filled.color-11 {\n          background-color: #ff4da6; }\n        .story-contents .text.survey .vote-count .bar .filled.color-12 {\n          background-color: #cf1717; }\n    .story-contents .text.survey .vote-count.unanimous .count {\n      color: #333333; }\n    .story-contents .text.milestone .start-date {\n      color: #99ff66; }\n    .story-contents .text.milestone .due-date {\n      color: #ff3333; }\n    .story-contents .text.push .files, .story-contents .text.push .lines {\n      display: inline-block;\n      list-style-type: none;\n      vertical-align: top;\n      margin: 0;\n      padding: 0; }\n      .story-contents .text.push .files .added, .story-contents .text.push .lines .added {\n        color: #99ee66; }\n      .story-contents .text.push .files .deleted, .story-contents .text.push .lines .deleted {\n        color: #ee3333; }\n      .story-contents .text.push .files .modified, .story-contents .text.push .lines .modified {\n        color: #66aaff; }\n      .story-contents .text.push .files .renamed, .story-contents .text.push .lines .renamed {\n        color: #eeee66; }\n    .story-contents .text.push .files {\n      margin-right: 2em; }\n  .story-contents .impact .message {\n    color: #cccccc;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n  .story-contents .impact .scrollable {\n    margin: -0.5em 0 0.3em 0;\n    max-height: 15em; }\n  .story-contents .buttons {\n    text-align: right; }\n  .story-contents audio {\n    margin-top: 0.25em;\n    width: 100%; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/story-view-options.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,"",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/story-view.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".story-view {\n  background-color: #362a2a;\n  border: 2px solid #211a1a;\n  width: 100%; }\n  .story-view .header {\n    background-color: #211a1a; }\n    .story-view .header .column-1 > .profile-image {\n      position: relative;\n      height: 0.8em;\n      vertical-align: top;\n      margin-top: 0.1em;\n      margin-right: 0.5em;\n      overflow: visible; }\n      .story-view .header .column-1 > .profile-image IMG, .story-view .header .column-1 > .profile-image svg {\n        position: absolute;\n        top: 0;\n        left: 0; }\n    .story-view .header .reaction-link {\n      float: right;\n      cursor: pointer;\n      color: #666666;\n      margin-top: 0.10em; }\n      .story-view .header .reaction-link:hover {\n        color: #eeeeee; }\n  .story-view .body .column-1 .media-view {\n    max-width: 512px; }\n  .story-view .body .column-2 {\n    position: relative; }\n    .story-view .body .column-2 .scrollable {\n      max-height: 24em; }\n      .single-col .story-view .body .column-2 .scrollable {\n        max-height: 12em; }\n      .story-view .body .column-2 .scrollable.abs {\n        position: absolute;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        max-height: none; }\n  .story-view .padded {\n    padding: 0.25em 0.25em 0.25em 0.5em; }\n  .story-view .selectable {\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n  .single-col .story-view {\n    margin-bottom: 0.5em; }\n  .double-col .story-view,\n  .triple-col .story-view {\n    display: table; }\n    .double-col .story-view .header,\n    .triple-col .story-view .header {\n      display: table-row; }\n    .double-col .story-view .body,\n    .triple-col .story-view .body {\n      display: table-row; }\n    .double-col .story-view .column-1,\n    .double-col .story-view .column-2,\n    .double-col .story-view .column-3,\n    .triple-col .story-view .column-1,\n    .triple-col .story-view .column-2,\n    .triple-col .story-view .column-3 {\n      display: table-cell;\n      vertical-align: top; }\n  .double-col .story-view .column-1,\n  .double-col .story-view .column-2 {\n    width: 50%; }\n  .triple-col .story-view .column-1,\n  .triple-col .story-view .column-2 {\n    width: 40%; }\n  .triple-col .story-view .column-3 {\n    width: 20%; }\n  .story-view.highlighting {\n    -webkit-animation: flash normal 5s 1 ease-in-out;\n            animation: flash normal 5s 1 ease-in-out; }\n\n@-webkit-keyframes flash {\n  25% {\n    border-color: #fc6d26; } }\n\n@keyframes flash {\n  25% {\n    border-color: #fc6d26; } }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/user-statistics.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".user-statistics .legend {\n  text-align: right;\n  font-size: 0.8em;\n  color: #999999;\n  padding: 0.5em 0.5em 0.25em 0; }\n  .user-statistics .legend .item {\n    display: inline-block;\n    white-space: nowrap;\n    margin-left: 0.6em; }\n    .user-statistics .legend .item .ct-chart-bar {\n      width: 0.8em;\n      height: 0.8em;\n      vertical-align: middle;\n      margin-right: 0.3em; }\n    .user-statistics .legend .item .label {\n      vertical-align: middle; }\n\n.user-statistics .ct-chart {\n  height: 11em; }\n  .user-statistics .ct-chart .ct-label {\n    color: #999999; }\n  .user-statistics .ct-chart .ct-grids line {\n    stroke: #444444; }\n  .user-statistics .ct-chart .ct-bar {\n    cursor: pointer; }\n  .user-statistics .ct-chart .date-label {\n    font-family: sans-serif;\n    font-size: 12px;\n    fill: #eeeeee; }\n  .user-statistics .ct-chart .date-arrow {\n    font-family: FontAwesome;\n    font-size: 12px;\n    fill: #eeeeee; }\n  .user-statistics .ct-chart .ct-grid.ct-horizontal.month-start {\n    stroke: #666666;\n    stroke-width: 1px;\n    stroke-dasharray: none; }\n\n.user-statistics .scroll-container-frame {\n  position: relative;\n  height: 11em; }\n  .user-statistics .scroll-container-frame .scroll-container {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    direction: rtl;\n    overflow-x: auto;\n    overflow-x: overlay;\n    overflow-y: hidden; }\n    .user-statistics .scroll-container-frame .scroll-container .scroll-container-contents {\n      direction: ltr; }\n    @media only screen and (min-device-width: 800px) {\n      .user-statistics .scroll-container-frame .scroll-container::-webkit-scrollbar-track {\n        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n        background-color: transparent; }\n      .user-statistics .scroll-container-frame .scroll-container::-webkit-scrollbar {\n        height: 10px;\n        background-color: transparent; }\n      .user-statistics .scroll-container-frame .scroll-container::-webkit-scrollbar-thumb {\n        border-radius: 2px;\n        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n        background-color: rgba(0, 0, 0, 0.1); } }\n  .user-statistics .scroll-container-frame .ct-label.ct-horizontal.ct-end {\n    width: 100px !important;\n    text-align: left;\n    justify-content: normal; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/user-view-options.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".user-view-options .border {\n  margin-top: 0.5em;\n  padding-top: 0.5em;\n  border-top: 1px dotted #404040; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/user-view.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".user-view {\n  background-color: #362a2a;\n  border: 2px solid #211a1a;\n  width: 100%; }\n  .user-view .header {\n    background-color: #211a1a; }\n    .user-view .header .profile-image {\n      position: relative;\n      height: 0.8em;\n      vertical-align: top;\n      margin-top: 0.1em;\n      margin-right: 0.5em;\n      overflow: visible; }\n      .user-view .header .profile-image IMG, .user-view .header .profile-image svg {\n        position: absolute;\n        top: 0;\n        left: 0; }\n    .user-view .header .roles {\n      color: #eeeeee; }\n  .user-view .body .name {\n    color: #eeeeee;\n    margin-left: 4.3em;\n    margin-top: 0.3em;\n    margin-bottom: 0.15em;\n    font-size: 1.5em;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n    .user-view .body .name A:link, .user-view .body .name A:visited {\n      color: #eeeeee;\n      text-decoration: none; }\n      .user-view .body .name A:link:hover, .user-view .body .name A:visited:hover {\n        color: #ffffff; }\n  .user-view .body .tag {\n    font-size: 1.1em;\n    margin-left: 5.9em;\n    margin-top: 0.2em;\n    margin-bottom: 0.4em;\n    display: inline-block;\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n    .user-view .body .tag A:link, .user-view .body .tag A:visited {\n      color: #666666;\n      text-decoration: none; }\n      .user-view .body .tag A:link:hover, .user-view .body .tag A:visited:hover {\n        color: #cccccc; }\n  .user-view .body .user-activity-list {\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n  .user-view .body .back-link {\n    float: right;\n    margin-top: 0.5em;\n    font-weight: bold; }\n    .user-view .body .back-link A:link, .user-view .body .back-link A:visited {\n      color: #eeeeee;\n      text-decoration: none; }\n    .user-view .body .back-link A:hover {\n      color: #ffffff; }\n  .user-view .padded {\n    padding: 0.25em 0.25em 0.25em 0.5em; }\n  .user-view .selectable {\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n  .single-col .user-view .column-2:empty {\n    display: none; }\n  .double-col .user-view,\n  .triple-col .user-view {\n    display: table; }\n    .double-col .user-view .header,\n    .triple-col .user-view .header {\n      display: table-row; }\n    .double-col .user-view .body,\n    .triple-col .user-view .body {\n      display: table-row; }\n    .double-col .user-view .column-1,\n    .double-col .user-view .column-2,\n    .double-col .user-view .column-3,\n    .triple-col .user-view .column-1,\n    .triple-col .user-view .column-2,\n    .triple-col .user-view .column-3 {\n      display: table-cell;\n      vertical-align: top; }\n  .double-col .user-view .column-1 {\n    width: 50%; }\n  .double-col .user-view .column-2 {\n    width: 50%; }\n  .triple-col .user-view .column-1 {\n    width: 40%; }\n  .triple-col .user-view .column-2 {\n    width: 40%; }\n  .triple-col .user-view .column-3 {\n    width: 20%; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/author-names.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".author-names {\n  color: #eeeeee; }\n  .author-names .author {\n    display: inline-block;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    vertical-align: bottom; }\n    .author-names .author.sole {\n      max-width: calc(100% - 5em); }\n    .author-names .author.lead {\n      max-width: calc(60% - 4em); }\n    .author-names .author.co {\n      max-width: calc(40% - 4em); }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/bottom-navigation.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".bottom-navigation {\n  flex: 0 0 auto;\n  display: flex;\n  align-items: flex-start;\n  transition: height 0.7s;\n  z-index: 2; }\n  .bottom-navigation .container {\n    display: flex;\n    flex-direction: row;\n    background-color: #262626;\n    border-top: 1px solid #323232;\n    padding-left: 4px;\n    padding-right: 4px;\n    padding-bottom: 1px;\n    width: 100%; }\n  .bottom-navigation .button {\n    display: block;\n    flex: 1 1 auto;\n    text-align: center;\n    padding: 8px 0 8px 0;\n    cursor: pointer;\n    color: #888888;\n    touch-action: manipulation; }\n    .bottom-navigation .button:link, .bottom-navigation .button:visited {\n      color: #888888;\n      text-decoration: none; }\n    .no-touch .bottom-navigation .button:hover, .no-touch .bottom-navigation .button:hover .label {\n      color: #eeeeee; }\n    .bottom-navigation .button.active, .bottom-navigation .button.active .label {\n      color: #ffffff; }\n    .bottom-navigation .button .fa {\n      font-size: 1.4em; }\n    .bottom-navigation .button .label {\n      font-size: 0.8em;\n      vertical-align: 0.2em;\n      color: #666666; }\n    .bottom-navigation .button .badge {\n      position: relative; }\n      .bottom-navigation .button .badge .number {\n        position: absolute;\n        color: #111111;\n        background-color: #fca326;\n        font-size: 9px;\n        border-radius: 10px;\n        padding: 3px 5px 2px 5px;\n        left: 0.25em;\n        top: -0.5em;\n        line-height: 100%; }\n    .bottom-navigation .button.stacking {\n      padding: 4px 0 0 0; }\n      .bottom-navigation .button.stacking .badge .number {\n        left: 0.5em;\n        top: -0.7em; }\n  .keyboard .bottom-navigation {\n    display: none; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/calendar-bar.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".calendar-bar {\n  padding: 4px 4px 4px 4px;\n  overflow-x: auto;\n  white-space: nowrap;\n  width: 100%;\n  direction: rtl;\n  /* the following only works on Chrome */\n  /*\n    display: flex;\n    flex-direction: row-reverse;\n\n    .calendar {\n        flex: 0 0 auto;\n    }\n*/ }\n  @media only screen and (min-device-width: 800px) {\n    .calendar-bar::-webkit-scrollbar-track {\n      -webkit-box-shadow: inset 0 0 3px rgba(0, 0, 0, 0.3);\n      background-color: transparent; }\n    .calendar-bar::-webkit-scrollbar {\n      height: 8px;\n      background-color: transparent; }\n    .calendar-bar::-webkit-scrollbar-thumb {\n      -webkit-box-shadow: inset 0 0 3px rgba(255, 255, 255, 0.2);\n      background-color: rgba(255, 255, 255, 0.1); } }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/calendar.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".calendar {\n  display: inline-block;\n  border-collapse: collapse;\n  border-spacing: 0;\n  direction: ltr;\n  margin-left: 0.2em;\n  margin-right: 0.2em; }\n  .calendar .title TH {\n    font-size: 0.8em;\n    font-weight: bold;\n    color: #999999;\n    border: 1px solid #444444;\n    padding: 0.25em 0.1em 0.2em 0.1em; }\n  .calendar .headings TH {\n    font-size: 0.6em;\n    font-weight: normal;\n    color: #999999;\n    border: 1px solid #444444;\n    padding: 0.2em 0 0.2em 0; }\n  .calendar .headings TH.weekend {\n    background-color: #333333; }\n  .calendar .dates TD {\n    width: 1.6em;\n    height: 1.4em;\n    font-size: 0.8em;\n    color: #666666;\n    text-align: center;\n    border: 1px solid #444444;\n    cursor: default; }\n    .calendar .dates TD A {\n      display: block;\n      touch-action: manipulation; }\n      .calendar .dates TD A:link, .calendar .dates TD A:visited {\n        text-decoration: none;\n        color: #cccccc; }\n  .calendar .dates TD.weekend {\n    background-color: #333333; }\n  .calendar .dates TD.today {\n    color: #ffffff;\n    background-color: #000000; }\n    .calendar .dates TD.today A:link, .calendar .dates TD.today A:visited {\n      color: #ffffff; }\n  .calendar .dates TD.selected {\n    color: #000000;\n    background-color: #eeeeee; }\n    .calendar .dates TD.selected A:link, .calendar .dates TD.selected A:visited {\n      color: #000000; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/chart-toolbar.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".chart-toolbar {\n  display: inline-block; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/chartist.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'.ct-label {\n  fill: rgba(0, 0, 0, 0.4);\n  color: rgba(0, 0, 0, 0.4);\n  font-size: 0.75rem;\n  line-height: 1; }\n\n.ct-chart-line .ct-label,\n.ct-chart-bar .ct-label {\n  display: block;\n  display: flex; }\n\n.ct-chart-pie .ct-label,\n.ct-chart-donut .ct-label {\n  dominant-baseline: central; }\n\n.ct-label.ct-horizontal.ct-start {\n  align-items: flex-end;\n  justify-content: flex-start;\n  text-align: left;\n  text-anchor: start; }\n\n.ct-label.ct-horizontal.ct-end {\n  align-items: flex-start;\n  justify-content: flex-start;\n  text-align: left;\n  text-anchor: start; }\n\n.ct-label.ct-vertical.ct-start {\n  align-items: flex-end;\n  justify-content: flex-end;\n  text-align: right;\n  text-anchor: end; }\n\n.ct-label.ct-vertical.ct-end {\n  align-items: flex-end;\n  justify-content: flex-start;\n  text-align: left;\n  text-anchor: start; }\n\n.ct-chart-bar .ct-label.ct-horizontal.ct-start {\n  align-items: flex-end;\n  justify-content: center;\n  text-align: center;\n  text-anchor: start; }\n\n.ct-chart-bar .ct-label.ct-horizontal.ct-end {\n  align-items: flex-start;\n  justify-content: center;\n  text-align: center;\n  text-anchor: start; }\n\n.ct-chart-bar.ct-horizontal-bars .ct-label.ct-horizontal.ct-start {\n  align-items: flex-end;\n  justify-content: flex-start;\n  text-align: left;\n  text-anchor: start; }\n\n.ct-chart-bar.ct-horizontal-bars .ct-label.ct-horizontal.ct-end {\n  align-items: flex-start;\n  justify-content: flex-start;\n  text-align: left;\n  text-anchor: start; }\n\n.ct-chart-bar.ct-horizontal-bars .ct-label.ct-vertical.ct-start {\n  align-items: center;\n  justify-content: flex-end;\n  text-align: right;\n  text-anchor: end; }\n\n.ct-chart-bar.ct-horizontal-bars .ct-label.ct-vertical.ct-end {\n  align-items: center;\n  justify-content: flex-start;\n  text-align: left;\n  text-anchor: end; }\n\n.ct-grid {\n  stroke: rgba(0, 0, 0, 0.2);\n  stroke-width: 1px;\n  stroke-dasharray: 2px; }\n\n.ct-grid-background {\n  fill: none; }\n\n.ct-point {\n  stroke-width: 10px;\n  stroke-linecap: round; }\n\n.ct-line {\n  fill: none;\n  stroke-width: 4px; }\n\n.ct-area {\n  stroke: none;\n  fill-opacity: 0.1; }\n\n.ct-bar {\n  fill: none;\n  stroke-width: 10px; }\n\n.ct-slice-donut {\n  fill: none;\n  stroke-width: 60px; }\n\n.ct-series-a .ct-point, .ct-series-a .ct-line, .ct-series-a .ct-bar, .ct-series-a .ct-slice-donut {\n  stroke: #ffa64d; }\n\n.ct-series-a .ct-slice-pie, .ct-series-a .ct-slice-donut-solid, .ct-series-a .ct-area {\n  fill: #ffa64d; }\n\n.ct-series-b .ct-point, .ct-series-b .ct-line, .ct-series-b .ct-bar, .ct-series-b .ct-slice-donut {\n  stroke: #e8e830; }\n\n.ct-series-b .ct-slice-pie, .ct-series-b .ct-slice-donut-solid, .ct-series-b .ct-area {\n  fill: #e8e830; }\n\n.ct-series-c .ct-point, .ct-series-c .ct-line, .ct-series-c .ct-bar, .ct-series-c .ct-slice-donut {\n  stroke: #a6ff4d; }\n\n.ct-series-c .ct-slice-pie, .ct-series-c .ct-slice-donut-solid, .ct-series-c .ct-area {\n  fill: #a6ff4d; }\n\n.ct-series-d .ct-point, .ct-series-d .ct-line, .ct-series-d .ct-bar, .ct-series-d .ct-slice-donut {\n  stroke: #17cf17; }\n\n.ct-series-d .ct-slice-pie, .ct-series-d .ct-slice-donut-solid, .ct-series-d .ct-area {\n  fill: #17cf17; }\n\n.ct-series-e .ct-point, .ct-series-e .ct-line, .ct-series-e .ct-bar, .ct-series-e .ct-slice-donut {\n  stroke: #4dffa6; }\n\n.ct-series-e .ct-slice-pie, .ct-series-e .ct-slice-donut-solid, .ct-series-e .ct-area {\n  fill: #4dffa6; }\n\n.ct-series-f .ct-point, .ct-series-f .ct-line, .ct-series-f .ct-bar, .ct-series-f .ct-slice-donut {\n  stroke: #30e8e8; }\n\n.ct-series-f .ct-slice-pie, .ct-series-f .ct-slice-donut-solid, .ct-series-f .ct-area {\n  fill: #30e8e8; }\n\n.ct-series-g .ct-point, .ct-series-g .ct-line, .ct-series-g .ct-bar, .ct-series-g .ct-slice-donut {\n  stroke: #4da6ff; }\n\n.ct-series-g .ct-slice-pie, .ct-series-g .ct-slice-donut-solid, .ct-series-g .ct-area {\n  fill: #4da6ff; }\n\n.ct-series-h .ct-point, .ct-series-h .ct-line, .ct-series-h .ct-bar, .ct-series-h .ct-slice-donut {\n  stroke: #1717cf; }\n\n.ct-series-h .ct-slice-pie, .ct-series-h .ct-slice-donut-solid, .ct-series-h .ct-area {\n  fill: #1717cf; }\n\n.ct-series-i .ct-point, .ct-series-i .ct-line, .ct-series-i .ct-bar, .ct-series-i .ct-slice-donut {\n  stroke: #a64dff; }\n\n.ct-series-i .ct-slice-pie, .ct-series-i .ct-slice-donut-solid, .ct-series-i .ct-area {\n  fill: #a64dff; }\n\n.ct-series-j .ct-point, .ct-series-j .ct-line, .ct-series-j .ct-bar, .ct-series-j .ct-slice-donut {\n  stroke: #e830e8; }\n\n.ct-series-j .ct-slice-pie, .ct-series-j .ct-slice-donut-solid, .ct-series-j .ct-area {\n  fill: #e830e8; }\n\n.ct-series-k .ct-point, .ct-series-k .ct-line, .ct-series-k .ct-bar, .ct-series-k .ct-slice-donut {\n  stroke: #ff4da6; }\n\n.ct-series-k .ct-slice-pie, .ct-series-k .ct-slice-donut-solid, .ct-series-k .ct-area {\n  fill: #ff4da6; }\n\n.ct-series-l .ct-point, .ct-series-l .ct-line, .ct-series-l .ct-bar, .ct-series-l .ct-slice-donut {\n  stroke: #cf1717; }\n\n.ct-series-l .ct-slice-pie, .ct-series-l .ct-slice-donut-solid, .ct-series-l .ct-area {\n  fill: #cf1717; }\n\n.ct-square {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-square:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 100%; }\n  .ct-square:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-square > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-minor-second {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-minor-second:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 93.75%; }\n  .ct-minor-second:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-minor-second > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-second {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-second:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 88.88889%; }\n  .ct-major-second:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-second > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-minor-third {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-minor-third:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 83.33333%; }\n  .ct-minor-third:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-minor-third > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-third {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-third:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 80%; }\n  .ct-major-third:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-third > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-perfect-fourth {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-perfect-fourth:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 75%; }\n  .ct-perfect-fourth:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-perfect-fourth > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-perfect-fifth {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-perfect-fifth:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 66.66667%; }\n  .ct-perfect-fifth:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-perfect-fifth > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-minor-sixth {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-minor-sixth:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 62.5%; }\n  .ct-minor-sixth:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-minor-sixth > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-golden-section {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-golden-section:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 61.8047%; }\n  .ct-golden-section:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-golden-section > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-sixth {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-sixth:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 60%; }\n  .ct-major-sixth:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-sixth > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-minor-seventh {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-minor-seventh:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 56.25%; }\n  .ct-minor-seventh:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-minor-seventh > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-seventh {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-seventh:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 53.33333%; }\n  .ct-major-seventh:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-seventh > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-octave {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-octave:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 50%; }\n  .ct-octave:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-octave > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-tenth {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-tenth:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 40%; }\n  .ct-major-tenth:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-tenth > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-eleventh {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-eleventh:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 37.5%; }\n  .ct-major-eleventh:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-eleventh > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-major-twelfth {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-major-twelfth:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 33.33333%; }\n  .ct-major-twelfth:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-major-twelfth > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n.ct-double-octave {\n  display: block;\n  position: relative;\n  width: 100%; }\n  .ct-double-octave:before {\n    display: block;\n    float: left;\n    content: "";\n    width: 0;\n    height: 0;\n    padding-bottom: 25%; }\n  .ct-double-octave:after {\n    content: "";\n    display: table;\n    clear: both; }\n  .ct-double-octave > svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0; }\n',""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/coauthoring-button.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".coauthoring-button {\n  font-size: 0.9em;\n  color: #666666;\n  cursor: pointer;\n  margin-left: 4em; }\n  .coauthoring-button .label {\n    margin-left: 0.2em; }\n  .coauthoring-button:hover {\n    color: #eeeeee; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/corner-pop-up.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".corner-pop-up {\n  float: right; }\n  .corner-pop-up .button {\n    color: #eeeeee;\n    touch-action: manipulation;\n    padding: 4px 4px 4px 4px;\n    margin: -4px -4px -4px -4px; }\n    .single-col .corner-pop-up .button {\n      padding: 8px 8px 8px 8px;\n      margin: -8px -8px -8px -8px; }\n    .no-touch .corner-pop-up .button:hover {\n      color: #666666; }\n  .corner-pop-up .container {\n    right: 0.3em;\n    top: 1.5em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/device-placeholder.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".device-placeholder {\n  font-size: 8em;\n  color: #111111;\n  width: 100%;\n  text-align: center; }\n  .device-placeholder .fa-ban {\n    color: #ee3333;\n    opacity: 0;\n    transition: opacity 1s; }\n  .device-placeholder.blocked .fa-ban {\n    opacity: 1; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/device-selector.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".device-selector {\n  float: left; }\n  .device-selector SELECT {\n    color: #666666;\n    background-color: #4d3936;\n    font-size: 0.9em;\n    padding: 0.4em 1em 0.4em 1em;\n    border: 2px solid #4d3936; }\n    .device-selector SELECT:hover, .device-selector SELECT:focus {\n      color: #eeeeee;\n      background-color: #806666;\n      border-color: #806666; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/drop-zone.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".drop-zone .overlay {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  border: 3px solid #fca326; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/duration-indicator.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".duration-indiactor .icon {\n  color: #eeeeee; }\n  .duration-indiactor .icon.blinking {\n    color: #cc2222;\n    opacity: 1;\n    -webkit-animation: blinking 0.5s linear infinite;\n            animation: blinking 0.5s linear infinite; }\n\n@-webkit-keyframes blinking {\n  50% {\n    opacity: 0; } }\n\n@keyframes blinking {\n  50% {\n    opacity: 0; } }\n\n.duration-indiactor .duration {\n  margin-left: 0.5em;\n  color: #eeeeee; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/empty-message.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".empty-message {\n  position: relative;\n  height: 25vh;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center; }\n  .empty-message .text {\n    font-weight: bold;\n    flex: 0 1 auto;\n    color: #ffffff;\n    opacity: 0.2;\n    -webkit-animation-name: fade-in;\n            animation-name: fade-in;\n    -webkit-animation-duration: 2s;\n            animation-duration: 2s;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1; }\n\n@-webkit-keyframes fade-in {\n  0% {\n    opacity: 0; }\n  100% {\n    opacity: 0.2; } }\n\n@keyframes fade-in {\n  0% {\n    opacity: 0; }\n  100% {\n    opacity: 0.2; } }\n    .double-col .empty-message .text,\n    .triple-col .empty-message .text {\n      font-size: 1.5em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/header-button.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'.header-button {\n  display: inline-block;\n  color: #666666;\n  margin-right: 0.5em;\n  touch-action: manipulation;\n  cursor: pointer; }\n  .no-touch .header-button:hover {\n    color: #eeeeee; }\n  .header-button.disabled {\n    cursor: default; }\n    .header-button.disabled:hover {\n      color: #666666; }\n  .header-button.highlighted {\n    color: #e24329; }\n  .header-button .label {\n    font-size: 0.9em;\n    margin-left: 0.3em; }\n  .header-button INPUT[type="file"] {\n    position: absolute;\n    visibility: hidden;\n    width: 1px;\n    height: 1px; }\n',""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/loading-animation.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".loading-animation {\n  position: relative;\n  height: 25vh; }\n  .loading-animation .dot {\n    position: absolute;\n    background-color: #ffffff;\n    top: 50%;\n    width: 5px;\n    height: 5px;\n    left: -5%;\n    opacity: 0;\n    -webkit-animation-name: in-and-out;\n            animation-name: in-and-out;\n    -webkit-animation-duration: 8s;\n            animation-duration: 8s;\n    -webkit-animation-iteration-count: infinite;\n            animation-iteration-count: infinite; }\n\n@-webkit-keyframes in-and-out {\n  0% {\n    left: -5%;\n    opacity: 0.1; }\n  5% {\n    left: 50%;\n    opacity: 0.2; }\n  48% {\n    left: 50%;\n    opacity: 0.2; }\n  53% {\n    left: 105%;\n    opacity: 0.1; }\n  54% {\n    left: 105%;\n    opacity: 0.0; }\n  100% {\n    left: -5%;\n    opacity: 0.0; } }\n\n@keyframes in-and-out {\n  0% {\n    left: -5%;\n    opacity: 0.1; }\n  5% {\n    left: 50%;\n    opacity: 0.2; }\n  48% {\n    left: 50%;\n    opacity: 0.2; }\n  53% {\n    left: 105%;\n    opacity: 0.1; }\n  54% {\n    left: 105%;\n    opacity: 0.0; }\n  100% {\n    left: -5%;\n    opacity: 0.0; } }\n    .loading-animation .dot.first {\n      margin-left: 24px;\n      -webkit-animation-delay: 1s;\n              animation-delay: 1s; }\n    .loading-animation .dot.second {\n      margin-left: 8px;\n      -webkit-animation-delay: 2s;\n              animation-delay: 2s; }\n    .loading-animation .dot.third {\n      margin-left: -8px;\n      -webkit-animation-delay: 3s;\n              animation-delay: 3s; }\n    .loading-animation .dot.fourth {\n      margin-left: -24px;\n      -webkit-animation-delay: 4s;\n              animation-delay: 4s; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/media-button.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".media-button {\n  display: inline-block;\n  color: #666666;\n  padding: 0.45em 0.1em 0.3em 0.5em;\n  margin-left: 0.2em;\n  margin-right: 0.1em;\n  cursor: pointer;\n  touch-action: manipulation; }\n  .no-touch .media-button:hover {\n    color: #eeeeee; }\n  .media-button.disabled {\n    cursor: default; }\n    .media-button.disabled:hover {\n      color: #666666; }\n  .media-button .label {\n    font-size: 0.9em;\n    margin-left: 0.3em; }\n\n.media-direction {\n  padding: 0.2em 0.3em 0.1em 0.3em; }\n  .media-direction .backward-button, .media-direction .forward-button {\n    display: inline-block;\n    font-size: 1.2em;\n    color: #666666;\n    padding: 0.1em 0.5em 0.1em 0.5em;\n    cursor: pointer;\n    vertical-align: middle;\n    touch-action: manipulation; }\n  .media-direction .position {\n    display: inline-block;\n    font-size: 0.9em;\n    vertical-align: middle;\n    color: #cccccc; }\n  .media-direction:hover .backward-button, .media-direction:hover .forward-button {\n    color: #eeeeee; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/media-placeholder.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".media-placeholder {\n  position: absolute;\n  left: 1em;\n  top: 1em;\n  right: 1em;\n  bottom: 1em;\n  border: 2px dashed rgba(127, 127, 127, 0.15); }\n  .media-placeholder .message {\n    position: absolute;\n    left: 1em;\n    top: 0;\n    right: 1em;\n    bottom: 0;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    color: #666666;\n    margin: auto;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    cursor: default;\n    opacity: 0;\n    -webkit-animation: fadeInAndOut 30s normal forwards;\n            animation: fadeInAndOut 30s normal forwards; }\n\n@-webkit-keyframes fadeInAndOut {\n  0% {\n    opacity: 0; }\n  15% {\n    opacity: 1; }\n  30% {\n    opacity: 0; }\n  100% {\n    opacity: 0; } }\n\n@keyframes fadeInAndOut {\n  0% {\n    opacity: 0; }\n  15% {\n    opacity: 1; }\n  30% {\n    opacity: 0; }\n  100% {\n    opacity: 0; } }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/media-toolbar.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".media-toolbar {\n  display: inline-block; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/multiple-user-names.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".multiple-user-names {\n  position: relative; }\n  .multiple-user-names .label {\n    cursor: pointer;\n    touch-action: manipulation; }\n  .multiple-user-names .popup-container {\n    position: absolute;\n    left: 0.5em;\n    top: 1.5em;\n    width: 100vw;\n    z-index: 500; }\n    .multiple-user-names .popup-container .popup {\n      display: inline-block;\n      border: 1px solid black;\n      padding: 0.3em 0.3em 0.1em 0.3em;\n      background-color: #fff;\n      box-shadow: 2px 2px 2px 0px rgba(0, 0, 0, 0.5); }\n      .multiple-user-names .popup-container .popup .user {\n        display: block;\n        margin-bottom: 0.2em; }\n        .multiple-user-names .popup-container .popup .user .name {\n          color: #333;\n          margin-left: 0.2em;\n          vertical-align: middle; }\n      .multiple-user-names .popup-container .popup .more {\n        color: #bbb;\n        font-size: 0.8em;\n        text-align: right;\n        border-top: 1px solid #eee; }\n\n.multiple-user-names-dialog-box {\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  max-width: 100%;\n  background-color: #362a2a;\n  box-shadow: 2px 2px 2px #000000;\n  color: #666666;\n  margin: auto;\n  padding: 0.4em 0.4em 0.4em 0.4em; }\n  .multiple-user-names-dialog-box .scrollable {\n    flex: 1 1 auto; }\n    .multiple-user-names-dialog-box .scrollable .list {\n      min-width: 14em;\n      padding-bottom: 0.1em; }\n      .multiple-user-names-dialog-box .scrollable .list .user {\n        margin-bottom: 0.2em; }\n        .multiple-user-names-dialog-box .scrollable .list .user .profile-image {\n          float: none;\n          margin: 0; }\n        .multiple-user-names-dialog-box .scrollable .list .user .name {\n          margin-left: 0.2em;\n          vertical-align: middle; }\n  .multiple-user-names-dialog-box .buttons {\n    flex: 0 0 auto;\n    padding: 0.4em 0 0.2em 0.2em;\n    text-align: right;\n    border-top: 1px solid #666666; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/new-items-alert.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".new-items-alert {\n  display: block;\n  position: absolute;\n  transition: opacity 0.5s;\n  opacity: 1;\n  right: 3em;\n  top: 2em;\n  padding: 0.75em 0.75em 0.75em 0.75em;\n  color: #111111;\n  background-color: #fca326; }\n  .new-items-alert:link, .new-items-alert:visited {\n    color: #111111;\n    text-decoration: none; }\n  .new-items-alert.hide {\n    opacity: 0; }\n  .new-items-alert .fa {\n    margin-right: 0.5em; }\n  .single-col .new-items-alert {\n    right: 1em;\n    top: 1em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/option-button.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".option-button {\n  display: table;\n  max-width: 100%;\n  color: #666666;\n  margin-bottom: 0.35em;\n  touch-action: manipulation; }\n  .option-button:link, .option-button:visited {\n    text-decoration: none; }\n  .option-button .icon {\n    display: table-cell;\n    width: 1em;\n    padding-right: 0.25em; }\n  .option-button .label {\n    display: table-cell; }\n  .option-button A {\n    cursor: pointer; }\n    .option-button A:link, .option-button A:visited {\n      text-decoration: none;\n      color: #666666; }\n  .option-button.selected {\n    color: #eeeeee; }\n    .pop-up-menu .option-button.selected {\n      color: #000000; }\n  .no-touch .option-button:hover {\n    color: #eeeeee; }\n  .no-touch .pop-up-menu .option-button:hover {\n    color: #000000; }\n  .option-button.disabled {\n    color: #666666;\n    opacity: 0.25; }\n    .option-button.disabled A {\n      cursor: default; }\n  .option-button:last-child {\n    margin-bottom: 0; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/page-container.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".page-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  z-index: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center; }\n  .page-container:focus {\n    outline: 0; }\n  .page-container .contents {\n    width: 100%;\n    max-width: 125em;\n    padding: 0.5em 0.5em 0.5em 0.5em; }\n    .double-col .page-container .contents,\n    .triple-col .page-container .contents {\n      padding: 1em 1em 1em 1em; }\n  @media only screen and (min-device-width: 800px) {\n    .page-container::-webkit-scrollbar-track {\n      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n      background-color: transparent; }\n    .page-container::-webkit-scrollbar {\n      width: 14px;\n      background-color: transparent; }\n    .page-container::-webkit-scrollbar-thumb {\n      border-radius: 2px;\n      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n      background-color: rgba(0, 0, 0, 0.2); } }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/pop-up-menu.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".pop-up-menu {\n  position: relative; }\n  .pop-up-menu .button.active {\n    cursor: pointer; }\n  .pop-up-menu .container {\n    position: absolute;\n    width: 80vw;\n    right: 0;\n    top: 1em;\n    z-index: 1000;\n    text-align: right; }\n    .pop-up-menu .container .menu {\n      display: inline-block;\n      border: 1px solid black;\n      padding: 0.5em 0.5em 0.5em 0.5em;\n      background-color: #eeeeee;\n      box-shadow: 3px 3px 3px 0px rgba(0, 0, 0, 0.75);\n      text-align: left;\n      max-width: 20em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/profile-image.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".profile-image {\n  display: inline-block;\n  vertical-align: middle;\n  overflow: hidden; }\n  .profile-image IMG, .profile-image CANVAS, .profile-image svg, .profile-image .placeholder {\n    width: 100%;\n    height: auto; }\n  .profile-image .placeholder {\n    position: relative;\n    padding-top: 50%;\n    padding-bottom: 50%;\n    background-color: #999999;\n    overflow: hidden; }\n    .profile-image .placeholder svg {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      width: auto;\n      height: 100%;\n      margin: auto; }\n  .profile-image.small {\n    width: 1.5em;\n    height: 1.5em; }\n  .profile-image.medium {\n    width: 3em;\n    height: 3em; }\n  .profile-image.large {\n    width: 6em;\n    height: 6em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/push-button.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'.push-button {\n  min-width: 5em;\n  margin-left: 0.4em;\n  margin-bottom: 0.1em;\n  padding: 0.4em 1em 0.4em 1em;\n  color: #666666;\n  font-size: 0.9em;\n  background-color: #4d3936;\n  border: 2px solid #4d3936;\n  touch-action: manipulation; }\n  .push-button:not(:disabled).emphasized, .push-button:not(:disabled):active {\n    color: #eeeeee;\n    background-color: #806666;\n    border: 2px solid #806666; }\n  .no-touch .push-button:not(:disabled):hover {\n    color: #eeeeee;\n    background-color: #806666;\n    border: 2px solid #806666; }\n  .push-button:not(:disabled):active {\n    border: 2px inset #333333; }\n  .push-button:first-child {\n    margin-left: 0; }\n\nLABEL.push-button {\n  display: inline-block;\n  position: relative; }\n  LABEL.push-button INPUT[type="file"] {\n    position: absolute;\n    visibility: hidden;\n    width: 1px;\n    height: 1px; }\n',""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/reaction-media-toolbar.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".reaction-media-toolbar {\n  display: inline-block;\n  padding-top: 0.30em;\n  float: left; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/reaction-progress.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".reaction-progress {\n  color: #666666;\n  font-size: 0.9em;\n  float: right;\n  margin-left: 0.5em; }\n  .reaction-progress .time {\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n    .reaction-progress .time.today {\n      color: #aaaaaa; }\n    .reaction-progress .time.yesterday {\n      color: #999999; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/reaction-toolbar.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".reaction-toolbar {\n  display: inline-block; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/role-filter-bar.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".role-filter-bar {\n  padding: 4px 4px 4px 4px;\n  overflow-x: auto;\n  white-space: nowrap; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/role-filter-button.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".role-filter-button {\n  display: inline-block;\n  margin-right: 0.5em;\n  vertical-align: top;\n  cursor: pointer;\n  touch-action: manipulation; }\n  .role-filter-button .contents {\n    position: relative;\n    border: 1px solid #444444;\n    margin: 1px;\n    overflow: hidden; }\n    .role-filter-button .contents .row {\n      width: 12em;\n      height: 3em; }\n      .role-filter-button .contents .row .profile-image {\n        display: inline-block; }\n    .role-filter-button .contents .band {\n      position: absolute;\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      left: 0;\n      right: 0;\n      top: 3em;\n      background-color: #1a1a1a;\n      color: #eeeeee;\n      padding: 0.25em 0.25em 0.25em 0.25em;\n      min-height: 3em; }\n      .role-filter-button .contents .band .title {\n        width: 100%;\n        text-align: center;\n        line-height: 1.25em; }\n        .role-filter-button .contents .band .title .user-count {\n          float: right;\n          line-height: 0.5em;\n          padding-top: 0.2em; }\n          .role-filter-button .contents .band .title .user-count .number {\n            font-size: 0.6em;\n            vertical-align: -2px;\n            margin-left: 2px; }\n  .role-filter-button.selected .contents {\n    border: 2px solid #eeeeee;\n    margin: 0; }\n  .role-filter-button.selected .band {\n    background-color: #eeeeee;\n    color: #000000; }\n  .role-filter-button.no-roles {\n    cursor: default; }\n    .role-filter-button.no-roles .message {\n      color: #444444;\n      position: absolute;\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      justify-content: center;\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/scrollable.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".scrollable {\n  overflow-y: auto;\n  overflow-x: hidden; }\n  @media only screen and (min-device-width: 800px) {\n    .scrollable::-webkit-scrollbar-track {\n      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n      background-color: transparent; }\n    .scrollable::-webkit-scrollbar {\n      width: 10px;\n      background-color: transparent; }\n    .scrollable::-webkit-scrollbar-thumb {\n      border-radius: 2px;\n      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n      background-color: rgba(0, 0, 0, 0.1); } }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/search-bar.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".search-bar .text-input {\n  padding: 0.1em 0.25em 0.25em 0.25em; }\n  .search-bar .text-input input[type=text] {\n    font-size: 1em;\n    width: 100%;\n    color: #eeeeee;\n    background-color: #333333;\n    border: 0;\n    padding: 3px 3px 3px 3px; }\n    .search-bar .text-input input[type=text]::-webkit-input-placeholder {\n      color: #666666;\n      text-align: center; }\n    .search-bar .text-input input[type=text]:-ms-input-placeholder {\n      color: #666666;\n      text-align: center; }\n    .search-bar .text-input input[type=text]::-ms-input-placeholder {\n      color: #666666;\n      text-align: center; }\n    .search-bar .text-input input[type=text]::placeholder {\n      color: #666666;\n      text-align: center; }\n  .single-col .search-bar .text-input {\n    padding-bottom: 0.1em; }\n  .double-col .search-bar .text-input,\n  .triple-col .search-bar .text-input {\n    float: right;\n    width: 40em; }\n\n.search-bar .tags {\n  overflow: hidden;\n  padding: 0.25em 0.25em 0.25em 0.25em;\n  text-align: right;\n  height: 2em; }\n  .search-bar .tags .tag {\n    display: inline-block;\n    margin: 0.25em 0.25em 0.25em 0.25em;\n    color: #666666; }\n    .search-bar .tags .tag:link, .search-bar .tags .tag:visited {\n      text-decoration: none; }\n    .search-bar .tags .tag:hover {\n      color: #999999; }\n    .search-bar .tags .tag.selected {\n      border-bottom: 1px solid #444444; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/settings-panel.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".settings-panel {\n  background-color: #362a2a;\n  border: 2px solid #211a1a;\n  width: 100%;\n  -webkit-column-break-inside: avoid;\n          break-inside: avoid-column;\n  page-break-inside: avoid; }\n  .settings-panel .header {\n    font-size: 1.2em;\n    color: #eeeeee;\n    background-color: #211a1a;\n    padding: 0.5em 0.5em 0.4em 0.5em; }\n    .settings-panel .header .fa {\n      margin-right: 0.2em; }\n    .settings-panel .header .icon {\n      display: inline-block;\n      position: relative;\n      margin-right: 0.2em; }\n      .settings-panel .header .icon .fa {\n        margin-right: 0; }\n        .settings-panel .header .icon .fa.icon-overlay {\n          position: absolute;\n          display: block;\n          font-size: 0.75em;\n          color: #bbbbbb;\n          height: 1em;\n          width: 1em;\n          bottom: -0.2em;\n          right: -0.65em; }\n  .settings-panel .body {\n    color: #cccccc;\n    padding: 0.35em 0.35em 0.35em 0.35em;\n    clear: both; }\n    .settings-panel .body .option-button {\n      margin: 0.35em 0 0.35em 0.25em; }\n  .settings-panel .footer {\n    padding: 0.15em 0.35em 0.25em 0.35em;\n    text-align: right;\n    clear: both; }\n  .single-col .settings-panel {\n    margin-bottom: 0.5em; }\n  .double-col .settings-panel,\n  .triple-col .settings-panel {\n    margin-bottom: 1em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/story-emblem.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".story-emblem {\n  float: right; }\n  .story-emblem svg {\n    fill: #211a1a;\n    margin-right: 0.25em;\n    margin-top: 0.2em;\n    height: 3em; }\n  .story-emblem.die-hard {\n    position: relative;\n    pointer-events: none; }\n    .story-emblem.die-hard IMG {\n      position: absolute;\n      top: 0;\n      right: 0;\n      width: 70px;\n      height: auto; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/story-progress.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".story-progress {\n  color: #666666;\n  font-size: 0.9em;\n  margin-left: 3.75em; }\n  .story-progress .time {\n    -webkit-user-select: text;\n       -moz-user-select: text;\n        -ms-user-select: text;\n            user-select: text; }\n    .story-progress .time.today {\n      color: #aaaaaa; }\n    .story-progress .time.yesterday {\n      color: #999999; }\n  .story-progress .fa-spinner {\n    opacity: 0.5;\n    margin-left: 0.1em; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/text-field.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".text-field {\n  margin-top: 0.35em;\n  margin-bottom: 0.35em; }\n  .text-field label {\n    display: block;\n    font-size: 0.9em; }\n  .text-field input[type=text],\n  .text-field input[type=password],\n  .text-field input[type=url],\n  .text-field input[type=email],\n  .text-field textarea {\n    display: block;\n    width: 100%;\n    margin-top: 3px;\n    font-size: 1em; }\n  .text-field textarea {\n    resize: none; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/text-toolbar.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".text-toolbar {\n  display: inline-block; }\n",""])},'../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/top-navigation.scss':function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,".top-navigation {\n  flex: 0 0 auto;\n  display: flex;\n  align-items: flex-end;\n  transition: height 0.7s;\n  z-index: 2; }\n  .top-navigation .container {\n    background-color: #262626;\n    border-bottom: 1px solid #171717;\n    padding-top: 1px;\n    padding-left: 4px;\n    padding-right: 4px;\n    width: 100%; }\n    .top-navigation .container .collapsible-container {\n      clear: both; }\n  .top-navigation .button {\n    display: block;\n    font-size: 1.4em;\n    width: 1.8em;\n    text-align: center;\n    padding: 0.25em 0.25em 0.25em 0.25em;\n    cursor: pointer;\n    color: #888888;\n    touch-action: manipulation; }\n    .no-touch .top-navigation .button:hover {\n      color: #cccccc; }\n    .top-navigation .button.active {\n      color: #eeeeee; }\n    .top-navigation .button.disabled {\n      color: #333333;\n      cursor: not-allowed; }\n      .top-navigation .button.disabled:hover {\n        color: #333333; }\n    .top-navigation .button.calendar-btn, .top-navigation .button.filter-btn {\n      float: left; }\n    .top-navigation .button.search-btn {\n      float: right; }\n  .top-navigation .connection {\n    display: block;\n    position: relative;\n    float: right;\n    font-size: 1.4em;\n    width: 1.8em;\n    text-align: center;\n    padding: 0.25em 0.25em 0.25em 0.25em;\n    color: #888888; }\n    .top-navigation .connection .fa-ban {\n      font-size: 0.55em;\n      position: absolute;\n      right: 0.5em;\n      bottom: 0.65em;\n      height: 1em;\n      color: #993333; }\n    .top-navigation .connection .fa-arrow-up, .top-navigation .connection .fa-caret-up {\n      font-size: 0.5em;\n      position: absolute;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0.165em;\n      margin: auto;\n      height: 1em; }\n    .top-navigation .connection .fa-refresh {\n      color: #333333;\n      -webkit-transform: translate(0, 0.1em);\n              transform: translate(0, 0.1em); }\n    .top-navigation .connection .fa-warning {\n      color: #333333;\n      -webkit-transform: translate(0, 0.2em);\n              transform: translate(0, 0.2em); }\n",""])},"../node_modules/d/auto-bind.js":function(e,t,n){"use strict";var s,o=n("../node_modules/es5-ext/object/copy.js"),r=n("../node_modules/es5-ext/object/normalize-options.js"),i=n("../node_modules/es5-ext/object/valid-callable.js"),a=n("../node_modules/es5-ext/object/map.js"),c=n("../node_modules/es5-ext/object/valid-callable.js"),l=n("../node_modules/es5-ext/object/valid-value.js"),d=Function.prototype.bind,u=Object.defineProperty,p=Object.prototype.hasOwnProperty;s=function(e,t,n){var s,r=l(t)&&c(t.value);return s=o(t),delete s.writable,delete s.value,s.get=function(){return!n.overwriteDefinition&&p.call(this,e)?r:(t.value=d.call(r,n.resolveContext?n.resolveContext(this):this),u(this,e,t),this[e])},s},e.exports=function(e){var t=r(arguments[1]);return null!=t.resolveContext&&i(t.resolveContext),a(e,function(e,n){return s(n,e,t)})}},"../node_modules/d/index.js":function(e,t,n){"use strict";var s,o=n("../node_modules/es5-ext/object/assign/index.js"),r=n("../node_modules/es5-ext/object/normalize-options.js"),i=n("../node_modules/es5-ext/object/is-callable.js"),a=n("../node_modules/es5-ext/string/#/contains/index.js");s=e.exports=function(e,t){var n,s,i,c,l;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],null==e?(n=i=!0,s=!1):(n=a.call(e,"c"),s=a.call(e,"e"),i=a.call(e,"w")),l={value:t,configurable:n,enumerable:s,writable:i},c?o(r(c),l):l},s.gs=function(e,t,n){var s,c,l,d;return"string"!=typeof e?(l=n,n=t,t=e,e=null):l=arguments[3],null==t?t=void 0:i(t)?null==n?n=void 0:i(n)||(l=n,n=void 0):(l=t,t=n=void 0),null==e?(s=!0,c=!1):(s=a.call(e,"c"),c=a.call(e,"e")),d={get:t,set:n,configurable:s,enumerable:c},l?o(r(l),d):d}},"../node_modules/es5-ext/array/#/clear.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/valid-value.js");e.exports=function(){return s(this).length=0,this}},"../node_modules/es5-ext/array/#/e-index-of.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/number/is-nan/index.js"),o=n("../node_modules/es5-ext/number/to-pos-integer.js"),r=n("../node_modules/es5-ext/object/valid-value.js"),i=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,c=Math.abs,l=Math.floor;e.exports=function(e){var t,n,d,u;if(!s(e))return i.apply(this,arguments);for(n=o(r(this).length),d=arguments[1],d=isNaN(d)?0:d>=0?l(d):o(this.length)-l(c(d)),t=d;t<n;++t)if(a.call(this,t)&&(u=this[t],s(u)))return t;return-1}},"../node_modules/es5-ext/array/from/index.js":function(e,t,n){"use strict";e.exports=n("../node_modules/es5-ext/array/from/is-implemented.js")()?Array.from:n("../node_modules/es5-ext/array/from/shim.js")},"../node_modules/es5-ext/array/from/is-implemented.js":function(e,t,n){"use strict";e.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(e=["raz","dwa"],t=n(e),Boolean(t&&t!==e&&"dwa"===t[1]))}},"../node_modules/es5-ext/array/from/shim.js":function(e,t,n){"use strict";var s=n("../node_modules/es6-symbol/index.js").iterator,o=n("../node_modules/es5-ext/function/is-arguments.js"),r=n("../node_modules/es5-ext/function/is-function.js"),i=n("../node_modules/es5-ext/number/to-pos-integer.js"),a=n("../node_modules/es5-ext/object/valid-callable.js"),c=n("../node_modules/es5-ext/object/valid-value.js"),l=n("../node_modules/es5-ext/object/is-value.js"),d=n("../node_modules/es5-ext/string/is-string.js"),u=Array.isArray,p=Function.prototype.call,m={configurable:!0,enumerable:!0,writable:!0,value:null},h=Object.defineProperty;e.exports=function(e){var t,n,f,g,v,b,y,j,x,w,k=arguments[1],_=arguments[2];if(e=Object(c(e)),l(k)&&a(k),this&&this!==Array&&r(this))t=this;else{if(!k){if(o(e))return 1!==(v=e.length)?Array.apply(null,e):(g=new Array(1),g[0]=e[0],g);if(u(e)){for(g=new Array(v=e.length),n=0;n<v;++n)g[n]=e[n];return g}}g=[]}if(!u(e))if(void 0!==(x=e[s])){for(y=a(x).call(e),t&&(g=new t),j=y.next(),n=0;!j.done;)w=k?p.call(k,_,j.value,n):j.value,t?(m.value=w,h(g,n,m)):g[n]=w,j=y.next(),++n;v=n}else if(d(e)){for(v=e.length,t&&(g=new t),n=0,f=0;n<v;++n)w=e[n],n+1<v&&(b=w.charCodeAt(0))>=55296&&b<=56319&&(w+=e[++n]),w=k?p.call(k,_,w,f):w,t?(m.value=w,h(g,f,m)):g[f]=w,++f;v=f}if(void 0===v)for(v=i(e.length),t&&(g=new t(v)),n=0;n<v;++n)w=k?p.call(k,_,e[n],n):e[n],t?(m.value=w,h(g,n,m)):g[n]=w;return t&&(m.value=null,g.length=v),g}},"../node_modules/es5-ext/array/to-array.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/array/from/index.js"),o=Array.isArray;e.exports=function(e){return o(e)?e:s(e)}},"../node_modules/es5-ext/error/custom.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/assign/index.js"),o=n("../node_modules/es5-ext/object/is-object.js"),r=n("../node_modules/es5-ext/object/is-value.js"),i=Error.captureStackTrace;t=e.exports=function(e){var n=new Error(e),a=arguments[1],c=arguments[2];return r(c)||o(a)&&(c=a,a=null),r(c)&&s(n,c),r(a)&&(n.code=a),i&&i(n,t),n}},"../node_modules/es5-ext/function/#/partial.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/valid-callable.js"),o=n("../node_modules/es5-ext/array/from/index.js"),r=n("../node_modules/es5-ext/function/_define-length.js"),i=Function.prototype.apply;e.exports=function(){var e=s(this),t=o(arguments);return r(function(){return i.call(e,this,t.concat(o(arguments)))},e.length-t.length)}},"../node_modules/es5-ext/function/_define-length.js":function(e,t,n){"use strict";var s,o,r,i,a=n("../node_modules/es5-ext/number/to-pos-integer.js"),c=function(e,t){return t};try{Object.defineProperty(c,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(e){}1===c.length?(s={configurable:!0,writable:!1,enumerable:!1},o=Object.defineProperty,e.exports=function(e,t){return t=a(t),e.length===t?e:(s.value=t,o(e,"length",s))}):(i=n("../node_modules/es5-ext/object/mixin.js"),r=function(){var e=[];return function(t){var n,s=0;if(e[t])return e[t];for(n=[];t--;)n.push("a"+(++s).toString(36));return new Function("fn","return function ("+n.join(", ")+") { return fn.apply(this, arguments); };")}}(),e.exports=function(e,t){var n;if(t=a(t),e.length===t)return e;n=r(t)(e);try{i(n,e)}catch(e){}return n})},"../node_modules/es5-ext/function/is-arguments.js":function(e,t,n){"use strict";var s=Object.prototype.toString,o=s.call(function(){return arguments}());e.exports=function(e){return s.call(e)===o}},"../node_modules/es5-ext/function/is-function.js":function(e,t,n){"use strict";var s=Object.prototype.toString,o=s.call(n("../node_modules/es5-ext/function/noop.js"));e.exports=function(e){return"function"==typeof e&&s.call(e)===o}},"../node_modules/es5-ext/function/noop.js":function(e,t,n){"use strict";e.exports=function(){}},"../node_modules/es5-ext/math/sign/index.js":function(e,t,n){"use strict";e.exports=n("../node_modules/es5-ext/math/sign/is-implemented.js")()?Math.sign:n("../node_modules/es5-ext/math/sign/shim.js")},"../node_modules/es5-ext/math/sign/is-implemented.js":function(e,t,n){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},"../node_modules/es5-ext/math/sign/shim.js":function(e,t,n){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},"../node_modules/es5-ext/number/is-nan/index.js":function(e,t,n){"use strict";e.exports=n("../node_modules/es5-ext/number/is-nan/is-implemented.js")()?Number.isNaN:n("../node_modules/es5-ext/number/is-nan/shim.js")},"../node_modules/es5-ext/number/is-nan/is-implemented.js":function(e,t,n){"use strict";e.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},"../node_modules/es5-ext/number/is-nan/shim.js":function(e,t,n){"use strict";e.exports=function(e){return e!==e}},"../node_modules/es5-ext/number/to-integer.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/math/sign/index.js"),o=Math.abs,r=Math.floor;e.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?s(e)*r(o(e)):e)}},"../node_modules/es5-ext/number/to-pos-integer.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/number/to-integer.js"),o=Math.max;e.exports=function(e){return o(0,s(e))}},"../node_modules/es5-ext/object/_iterate.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/valid-callable.js"),o=n("../node_modules/es5-ext/object/valid-value.js"),r=Function.prototype.bind,i=Function.prototype.call,a=Object.keys,c=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(n,l){var d,u=arguments[2],p=arguments[3];return n=Object(o(n)),s(l),d=a(n),p&&d.sort("function"==typeof p?r.call(p,n):void 0),"function"!=typeof e&&(e=d[e]),i.call(e,d,function(e,s){return c.call(n,e)?i.call(l,u,n[e],e,n,s):t})}}},"../node_modules/es5-ext/object/assign/index.js":function(e,t,n){"use strict";e.exports=n("../node_modules/es5-ext/object/assign/is-implemented.js")()?Object.assign:n("../node_modules/es5-ext/object/assign/shim.js")},"../node_modules/es5-ext/object/assign/is-implemented.js":function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},"../node_modules/es5-ext/object/assign/shim.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/keys/index.js"),o=n("../node_modules/es5-ext/object/valid-value.js"),r=Math.max;e.exports=function(e,t){var n,i,a,c=r(arguments.length,2);for(e=Object(o(e)),a=function(s){try{e[s]=t[s]}catch(e){n||(n=e)}},i=1;i<c;++i)t=arguments[i],s(t).forEach(a);if(void 0!==n)throw n;return e}},"../node_modules/es5-ext/object/copy.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/array/from/index.js"),o=n("../node_modules/es5-ext/object/assign/index.js"),r=n("../node_modules/es5-ext/object/valid-value.js");e.exports=function(e){var t=Object(r(e)),n=arguments[1],i=Object(arguments[2]);if(t!==e&&!n)return t;var a={};return n?s(n,function(t){(i.ensure||t in e)&&(a[t]=e[t])}):o(a,e),a}},"../node_modules/es5-ext/object/create.js":function(e,t,n){"use strict";var s,o=Object.create;n("../node_modules/es5-ext/object/set-prototype-of/is-implemented.js")()||(s=n("../node_modules/es5-ext/object/set-prototype-of/shim.js")),e.exports=function(){var e,t,n;return s?1!==s.level?o:(e={},t={},n={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){if("__proto__"===e)return void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0});t[e]=n}),Object.defineProperties(e,t),Object.defineProperty(s,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(t,n){return o(null===t?e:t,n)}):o}()},"../node_modules/es5-ext/object/for-each.js":function(e,t,n){"use strict";e.exports=n("../node_modules/es5-ext/object/_iterate.js")("forEach")},"../node_modules/es5-ext/object/is-callable.js":function(e,t,n){"use strict";e.exports=function(e){return"function"==typeof e}},"../node_modules/es5-ext/object/is-object.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/is-value.js"),o={function:!0,object:!0};e.exports=function(e){return s(e)&&o[typeof e]||!1}},"../node_modules/es5-ext/object/is-value.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/function/noop.js")();e.exports=function(e){return e!==s&&null!==e}},"../node_modules/es5-ext/object/keys/index.js":function(e,t,n){"use strict";e.exports=n("../node_modules/es5-ext/object/keys/is-implemented.js")()?Object.keys:n("../node_modules/es5-ext/object/keys/shim.js")},"../node_modules/es5-ext/object/keys/is-implemented.js":function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},"../node_modules/es5-ext/object/keys/shim.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/is-value.js"),o=Object.keys;e.exports=function(e){return o(s(e)?Object(e):e)}},"../node_modules/es5-ext/object/map.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/valid-callable.js"),o=n("../node_modules/es5-ext/object/for-each.js"),r=Function.prototype.call;e.exports=function(e,t){var n={},i=arguments[2];return s(t),o(e,function(e,s,o,a){n[s]=r.call(t,i,e,s,o,a)}),n}},"../node_modules/es5-ext/object/mixin.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/valid-value.js"),o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols;e.exports=function(e,t){var n,c=Object(s(t));if(e=Object(s(e)),i(c).forEach(function(s){try{o(e,s,r(t,s))}catch(e){n=e}}),"function"==typeof a&&a(c).forEach(function(s){try{o(e,s,r(t,s))}catch(e){n=e}}),void 0!==n)throw n;return e}},"../node_modules/es5-ext/object/normalize-options.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/is-value.js"),o=Array.prototype.forEach,r=Object.create,i=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=r(null);return o.call(arguments,function(e){s(e)&&i(Object(e),t)}),t}},"../node_modules/es5-ext/object/primitive-set.js":function(e,t,n){"use strict";var s=Array.prototype.forEach,o=Object.create;e.exports=function(e){var t=o(null);return s.call(arguments,function(e){t[e]=!0}),t}},"../node_modules/es5-ext/object/set-prototype-of/index.js":function(e,t,n){"use strict";e.exports=n("../node_modules/es5-ext/object/set-prototype-of/is-implemented.js")()?Object.setPrototypeOf:n("../node_modules/es5-ext/object/set-prototype-of/shim.js")},"../node_modules/es5-ext/object/set-prototype-of/is-implemented.js":function(e,t,n){"use strict";var s=Object.create,o=Object.getPrototypeOf,r={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||s;return"function"==typeof e&&o(e(t(null),r))===r}},"../node_modules/es5-ext/object/set-prototype-of/shim.js":function(e,t,n){"use strict";var s,o=n("../node_modules/es5-ext/object/is-object.js"),r=n("../node_modules/es5-ext/object/valid-value.js"),i=Object.prototype.isPrototypeOf,a=Object.defineProperty,c={configurable:!0,enumerable:!1,writable:!0,value:void 0};s=function(e,t){if(r(e),null===t||o(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=function(e){var t,n;return e?(2===e.level?e.set?(n=e.set,t=function(e,t){return n.call(s(e,t),t),e}):t=function(e,t){return s(e,t).__proto__=t,e}:t=function e(t,n){var o;return s(t,n),o=i.call(e.nullPolyfill,t),o&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,o&&a(e.nullPolyfill,"__proto__",c),t},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),n={},s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(s){try{e=s.set,e.call(t,n)}catch(e){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:(t={},t.__proto__=n,Object.getPrototypeOf(t)===n&&{level:1})}()),n("../node_modules/es5-ext/object/create.js")},"../node_modules/es5-ext/object/valid-callable.js":function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},"../node_modules/es5-ext/object/valid-object.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/is-object.js");e.exports=function(e){if(!s(e))throw new TypeError(e+" is not an Object");return e}},"../node_modules/es5-ext/object/valid-value.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/is-value.js");e.exports=function(e){if(!s(e))throw new TypeError("Cannot use null or undefined");return e}},"../node_modules/es5-ext/object/validate-stringifiable-value.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/valid-value.js"),o=n("../node_modules/es5-ext/object/validate-stringifiable.js");e.exports=function(e){return o(s(e))}},"../node_modules/es5-ext/object/validate-stringifiable.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/is-callable.js");e.exports=function(e){try{return e&&s(e.toString)?e.toString():String(e)}catch(e){throw new TypeError("Passed argument cannot be stringifed")}}},"../node_modules/es5-ext/safe-to-string.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/is-callable.js");e.exports=function(e){try{return e&&s(e.toString)?e.toString():String(e)}catch(e){return"[Non-coercible (to string) value]"}}},"../node_modules/es5-ext/string/#/contains/index.js":function(e,t,n){"use strict";e.exports=n("../node_modules/es5-ext/string/#/contains/is-implemented.js")()?String.prototype.contains:n("../node_modules/es5-ext/string/#/contains/shim.js")},"../node_modules/es5-ext/string/#/contains/is-implemented.js":function(e,t,n){"use strict";var s="razdwatrzy";e.exports=function(){return"function"==typeof s.contains&&(!0===s.contains("dwa")&&!1===s.contains("foo"))}},"../node_modules/es5-ext/string/#/contains/shim.js":function(e,t,n){"use strict";var s=String.prototype.indexOf;e.exports=function(e){return s.call(this,e,arguments[1])>-1}},"../node_modules/es5-ext/string/is-string.js":function(e,t,n){"use strict";var s=Object.prototype.toString,o=s.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||s.call(e)===o)||!1}},"../node_modules/es5-ext/string/random-uniq.js":function(e,t,n){"use strict";var s=Object.create(null),o=Math.random;e.exports=function(){var e;do{e=o().toString(36).slice(2)}while(s[e]);return e}},"../node_modules/es5-ext/to-short-string-representation.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/safe-to-string.js"),o=/[\n\r\u2028\u2029]/g;e.exports=function(e){var t=s(e);return t.length>100&&(t=t.slice(0,99)+"…"),t=t.replace(o,function(e){return JSON.stringify(e).slice(1,-1)})}},"../node_modules/es6-iterator/array.js":function(e,t,n){"use strict";var s,o=n("../node_modules/es5-ext/object/set-prototype-of/index.js"),r=n("../node_modules/es5-ext/string/#/contains/index.js"),i=n("../node_modules/d/index.js"),a=n("../node_modules/es6-symbol/index.js"),c=n("../node_modules/es6-iterator/index.js"),l=Object.defineProperty;s=e.exports=function(e,t){if(!(this instanceof s))throw new TypeError("Constructor requires 'new'");c.call(this,e),t=t?r.call(t,"key+value")?"key+value":r.call(t,"key")?"key":"value":"value",l(this,"__kind__",i("",t))},o&&o(s,c),delete s.prototype.constructor,s.prototype=Object.create(c.prototype,{_resolve:i(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),l(s.prototype,a.toStringTag,i("c","Array Iterator"))},"../node_modules/es6-iterator/for-of.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/function/is-arguments.js"),o=n("../node_modules/es5-ext/object/valid-callable.js"),r=n("../node_modules/es5-ext/string/is-string.js"),i=n("../node_modules/es6-iterator/get.js"),a=Array.isArray,c=Function.prototype.call,l=Array.prototype.some;e.exports=function(e,t){var n,d,u,p,m,h,f,g,v=arguments[2];if(a(e)||s(e)?n="array":r(e)?n="string":e=i(e),o(t),u=function(){p=!0},"array"===n)return void l.call(e,function(e){return c.call(t,v,e,u),p});if("string"!==n)for(d=e.next();!d.done;){if(c.call(t,v,d.value,u),p)return;d=e.next()}else for(h=e.length,m=0;m<h&&(f=e[m],m+1<h&&(g=f.charCodeAt(0))>=55296&&g<=56319&&(f+=e[++m]),c.call(t,v,f,u),!p);++m);}},"../node_modules/es6-iterator/get.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/function/is-arguments.js"),o=n("../node_modules/es5-ext/string/is-string.js"),r=n("../node_modules/es6-iterator/array.js"),i=n("../node_modules/es6-iterator/string.js"),a=n("../node_modules/es6-iterator/valid-iterable.js"),c=n("../node_modules/es6-symbol/index.js").iterator;e.exports=function(e){return"function"==typeof a(e)[c]?e[c]():s(e)?new r(e):o(e)?new i(e):new r(e)}},"../node_modules/es6-iterator/index.js":function(e,t,n){"use strict";var s,o=n("../node_modules/es5-ext/array/#/clear.js"),r=n("../node_modules/es5-ext/object/assign/index.js"),i=n("../node_modules/es5-ext/object/valid-callable.js"),a=n("../node_modules/es5-ext/object/valid-value.js"),c=n("../node_modules/d/index.js"),l=n("../node_modules/d/auto-bind.js"),d=n("../node_modules/es6-symbol/index.js"),u=Object.defineProperty,p=Object.defineProperties;e.exports=s=function(e,t){if(!(this instanceof s))throw new TypeError("Constructor requires 'new'");p(this,{__list__:c("w",a(e)),__context__:c("w",t),__nextIndex__:c("w",0)}),t&&(i(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete s.prototype.constructor,p(s.prototype,r({_next:c(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:c(function(){return this._createResult(this._next())}),_createResult:c(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:c(function(e){return this.__list__[e]}),_unBind:c(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:c(function(){return"[object "+(this[d.toStringTag]||"Object")+"]"})},l({_onAdd:c(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void u(this,"__redo__",c("c",[e]));this.__redo__.forEach(function(t,n){t>=e&&(this.__redo__[n]=++t)},this),this.__redo__.push(e)}}),_onDelete:c(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),-1!==t&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,n){t>e&&(this.__redo__[n]=--t)},this)))}),_onClear:c(function(){this.__redo__&&o.call(this.__redo__),this.__nextIndex__=0})}))),u(s.prototype,d.iterator,c(function(){return this}))},"../node_modules/es6-iterator/is-iterable.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/function/is-arguments.js"),o=n("../node_modules/es5-ext/object/is-value.js"),r=n("../node_modules/es5-ext/string/is-string.js"),i=n("../node_modules/es6-symbol/index.js").iterator,a=Array.isArray;e.exports=function(e){return!!o(e)&&(!!a(e)||(!!r(e)||(!!s(e)||"function"==typeof e[i])))}},"../node_modules/es6-iterator/string.js":function(e,t,n){"use strict";var s,o=n("../node_modules/es5-ext/object/set-prototype-of/index.js"),r=n("../node_modules/d/index.js"),i=n("../node_modules/es6-symbol/index.js"),a=n("../node_modules/es6-iterator/index.js"),c=Object.defineProperty;s=e.exports=function(e){if(!(this instanceof s))throw new TypeError("Constructor requires 'new'");e=String(e),a.call(this,e),c(this,"__length__",r("",e.length))},o&&o(s,a),delete s.prototype.constructor,s.prototype=Object.create(a.prototype,{_next:r(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:r(function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0),t>=55296&&t<=56319?n+this.__list__[this.__nextIndex__++]:n)})}),c(s.prototype,i.toStringTag,r("c","String Iterator"))},"../node_modules/es6-iterator/valid-iterable.js":function(e,t,n){"use strict";var s=n("../node_modules/es6-iterator/is-iterable.js");e.exports=function(e){if(!s(e))throw new TypeError(e+" is not iterable");return e}},"../node_modules/es6-symbol/index.js":function(e,t,n){"use strict";e.exports=n("../node_modules/es6-symbol/is-implemented.js")()?Symbol:n("../node_modules/es6-symbol/polyfill.js")},"../node_modules/es6-symbol/is-implemented.js":function(e,t,n){"use strict";var s={object:!0,symbol:!0};e.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!s[typeof Symbol.iterator]&&(!!s[typeof Symbol.toPrimitive]&&!!s[typeof Symbol.toStringTag])}},"../node_modules/es6-symbol/is-symbol.js":function(e,t,n){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},"../node_modules/es6-symbol/polyfill.js":function(e,t,n){"use strict";var s,o,r,i,a=n("../node_modules/d/index.js"),c=n("../node_modules/es6-symbol/validate-symbol.js"),l=Object.create,d=Object.defineProperties,u=Object.defineProperty,p=Object.prototype,m=l(null);if("function"==typeof Symbol){s=Symbol;try{String(s()),i=!0}catch(e){}}var h=function(){var e=l(null);return function(t){for(var n,s,o=0;e[t+(o||"")];)++o;return t+=o||"",e[t]=!0,n="@@"+t,u(p,n,a.gs(null,function(e){s||(s=!0,u(this,n,a(e)),s=!1)})),n}}();r=function(e){if(this instanceof r)throw new TypeError("Symbol is not a constructor");return o(e)},e.exports=o=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return i?s(t):(n=l(r.prototype),t=void 0===t?"":String(t),d(n,{__description__:a("",t),__name__:a("",h(t))}))},d(o,{for:a(function(e){return m[e]?m[e]:m[e]=o(String(e))}),keyFor:a(function(e){var t;c(e);for(t in m)if(m[t]===e)return t}),hasInstance:a("",s&&s.hasInstance||o("hasInstance")),isConcatSpreadable:a("",s&&s.isConcatSpreadable||o("isConcatSpreadable")),iterator:a("",s&&s.iterator||o("iterator")),match:a("",s&&s.match||o("match")),replace:a("",s&&s.replace||o("replace")),search:a("",s&&s.search||o("search")),species:a("",s&&s.species||o("species")),split:a("",s&&s.split||o("split")),toPrimitive:a("",s&&s.toPrimitive||o("toPrimitive")),toStringTag:a("",s&&s.toStringTag||o("toStringTag")),unscopables:a("",s&&s.unscopables||o("unscopables"))}),d(r.prototype,{constructor:a(o),toString:a("",function(){return this.__name__})}),d(o.prototype,{toString:a(function(){return"Symbol ("+c(this).__description__+")"}),valueOf:a(function(){return c(this)})}),u(o.prototype,o.toPrimitive,a("",function(){var e=c(this);return"symbol"==typeof e?e:e.toString()})),u(o.prototype,o.toStringTag,a("c","Symbol")),u(r.prototype,o.toStringTag,a("c",o.prototype[o.toStringTag])),u(r.prototype,o.toPrimitive,a("c",o.prototype[o.toPrimitive]))},"../node_modules/es6-symbol/validate-symbol.js":function(e,t,n){"use strict";var s=n("../node_modules/es6-symbol/is-symbol.js");e.exports=function(e){if(!s(e))throw new TypeError(e+" is not a symbol");return e}},"../node_modules/es6-weak-map/index.js":function(e,t,n){"use strict";e.exports=n("../node_modules/es6-weak-map/is-implemented.js")()?WeakMap:n("../node_modules/es6-weak-map/polyfill.js")},"../node_modules/es6-weak-map/is-implemented.js":function(e,t,n){"use strict";e.exports=function(){var e,t;if("function"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(e){return!1}return"[object WeakMap]"===String(e)&&("function"==typeof e.set&&(e.set({},1)===e&&("function"==typeof e.delete&&("function"==typeof e.has&&"one"===e.get(t)))))}},"../node_modules/es6-weak-map/is-native-implemented.js":function(e,t,n){"use strict";e.exports=function(){return"function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)}()},"../node_modules/es6-weak-map/polyfill.js":function(e,t,n){"use strict";var s,o=n("../node_modules/es5-ext/object/set-prototype-of/index.js"),r=n("../node_modules/es5-ext/object/valid-object.js"),i=n("../node_modules/es5-ext/object/valid-value.js"),a=n("../node_modules/es5-ext/string/random-uniq.js"),c=n("../node_modules/d/index.js"),l=n("../node_modules/es6-iterator/get.js"),d=n("../node_modules/es6-iterator/for-of.js"),u=n("../node_modules/es6-symbol/index.js").toStringTag,p=n("../node_modules/es6-weak-map/is-native-implemented.js"),m=Array.isArray,h=Object.defineProperty,f=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf;e.exports=s=function(){var e,t=arguments[0];if(!(this instanceof s))throw new TypeError("Constructor requires 'new'");return e=p&&o&&WeakMap!==s?o(new WeakMap,g(this)):this,null!=t&&(m(t)||(t=l(t))),h(e,"__weakMapData__",c("c","$weakMap$"+a())),t?(d(t,function(t){i(t),e.set(t[0],t[1])}),e):e},p&&(o&&o(s,WeakMap),s.prototype=Object.create(WeakMap.prototype,{constructor:c(s)})),Object.defineProperties(s.prototype,{delete:c(function(e){return!!f.call(r(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)}),get:c(function(e){if(f.call(r(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:c(function(e){return f.call(r(e),this.__weakMapData__)}),set:c(function(e,t){return h(r(e),this.__weakMapData__,c("c",t)),this}),toString:c(function(){return"[object WeakMap]"})}),h(s.prototype,u,c("c","WeakMap"))},"../node_modules/event-emitter/index.js":function(e,t,n){"use strict";var s,o,r,i,a,c,l,d=n("../node_modules/d/index.js"),u=n("../node_modules/es5-ext/object/valid-callable.js"),p=Function.prototype.apply,m=Function.prototype.call,h=Object.create,f=Object.defineProperty,g=Object.defineProperties,v=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};s=function(e,t){var n;return u(t),v.call(this,"__ee__")?n=this.__ee__:(n=b.value=h(null),f(this,"__ee__",b),b.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},o=function(e,t){var n,o;return u(t),o=this,s.call(this,e,n=function(){r.call(o,e,n),p.call(t,this,arguments)}),n.__eeOnceListener__=t,this},r=function(e,t){var n,s,o,r;if(u(t),!v.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if("object"==typeof(s=n[e]))for(r=0;o=s[r];++r)o!==t&&o.__eeOnceListener__!==t||(2===s.length?n[e]=s[r?0:1]:s.splice(r,1));else s!==t&&s.__eeOnceListener__!==t||delete n[e];return this},i=function(e){var t,n,s,o,r;if(v.call(this,"__ee__")&&(o=this.__ee__[e]))if("object"==typeof o){for(n=arguments.length,r=new Array(n-1),t=1;t<n;++t)r[t-1]=arguments[t];for(o=o.slice(),t=0;s=o[t];++t)p.call(s,this,r)}else switch(arguments.length){case 1:m.call(o,this);break;case 2:m.call(o,this,arguments[1]);break;case 3:m.call(o,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,r=new Array(n-1),t=1;t<n;++t)r[t-1]=arguments[t];p.call(o,this,r)}},a={on:s,once:o,off:r,emit:i},c={on:d(s),once:d(o),off:d(r),emit:d(i)},l=g({},c),e.exports=t=function(e){return null==e?h(l):g(Object(e),c)},t.methods=a},"../node_modules/file-loader/index.js!../assets/speaker.svg":function(e,t,n){e.exports=n.p+"a35c7db833cd86e54c0020a2d07dcd2f.svg"},"../node_modules/invariant/browser.js":function(e,t,n){"use strict";var s=function(e,t,n,s,o,r,i,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,s,o,r,i,a],d=0;c=new Error(t.replace(/%s/g,function(){return l[d++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};e.exports=s},"../node_modules/is-promise/index.js":function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=n},"../node_modules/lodash.assign/index.js":function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function s(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}function o(e,t){var n=D(e)||m(e)?s(e.length,String):[],o=n.length,r=!!o;for(var i in e)!t&&!S.call(e,i)||r&&("length"==i||l(i,o))||n.push(i);return n}function r(e,t,n){var s=e[t];S.call(e,t)&&p(s,n)&&(void 0!==n||t in e)||(e[t]=n)}function i(e){if(!u(e))return O(e);var t=[];for(var n in Object(e))S.call(e,n)&&"constructor"!=n&&t.push(n);return t}function a(e,t){return t=T(void 0===t?e.length-1:t,0),function(){for(var s=arguments,o=-1,r=T(s.length-t,0),i=Array(r);++o<r;)i[o]=s[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=s[o];return a[t]=i,n(e,this,a)}}function c(e,t,n,s){n||(n={});for(var o=-1,i=t.length;++o<i;){var a=t[o],c=s?s(n[a],e[a],a,n,e):void 0;r(n,a,void 0===c?e[a]:c)}return n}function l(e,t){return!!(t=null==t?x:t)&&("number"==typeof e||E.test(e))&&e>-1&&e%1==0&&e<t}function d(e,t,n){if(!b(n))return!1;var s=typeof t;return!!("number"==s?h(n)&&l(t,n.length):"string"==s&&t in n)&&p(n[t],e)}function u(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||C)}function p(e,t){return e===t||e!==e&&t!==t}function m(e){return f(e)&&S.call(e,"callee")&&(!N.call(e,"callee")||R.call(e)==w)}function h(e){return null!=e&&v(e.length)&&!g(e)}function f(e){return y(e)&&h(e)}function g(e){var t=b(e)?R.call(e):"";return t==k||t==_}function v(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=x}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){return!!e&&"object"==typeof e}function j(e){return h(e)?o(e):i(e)}var x=9007199254740991,w="[object Arguments]",k="[object Function]",_="[object GeneratorFunction]",E=/^(?:0|[1-9]\d*)$/,C=Object.prototype,S=C.hasOwnProperty,R=C.toString,N=C.propertyIsEnumerable,O=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),T=Math.max,P=!N.call({valueOf:1},"valueOf"),D=Array.isArray,U=function(e){return a(function(t,n){var s=-1,o=n.length,r=o>1?n[o-1]:void 0,i=o>2?n[2]:void 0;for(r=e.length>3&&"function"==typeof r?(o--,r):void 0,i&&d(n[0],n[1],i)&&(r=o<3?void 0:r,o=1),t=Object(t);++s<o;){var a=n[s];a&&e(t,a,s,r)}return t})}(function(e,t){if(P||u(t)||h(t))return void c(t,j(t),e);for(var n in t)S.call(t,n)&&r(e,n,t[n])});e.exports=U},"../node_modules/lodash.flatten/index.js":function(e,t,n){(function(t){function n(e,t){for(var n=-1,s=t.length,o=e.length;++n<s;)e[o+n]=t[n];return e}function s(e,t,r,i,a){var c=-1,l=e.length;for(r||(r=o),a||(a=[]);++c<l;){var d=e[c];t>0&&r(d)?t>1?s(d,t-1,r,i,a):n(a,d):i||(a[a.length]=d)}return a}function o(e){return C(e)||i(e)||!!(E&&e&&e[E])}function r(e){return(e?e.length:0)?s(e,1):[]}function i(e){return c(e)&&x.call(e,"callee")&&(!_.call(e,"callee")||w.call(e)==h)}function a(e){return null!=e&&d(e.length)&&!l(e)}function c(e){return p(e)&&a(e)}function l(e){var t=u(e)?w.call(e):"";return t==f||t==g}function d(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=m}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function p(e){return!!e&&"object"==typeof e}var m=9007199254740991,h="[object Arguments]",f="[object Function]",g="[object GeneratorFunction]",v="object"==typeof t&&t&&t.Object===Object&&t,b="object"==typeof self&&self&&self.Object===Object&&self,y=v||b||Function("return this")(),j=Object.prototype,x=j.hasOwnProperty,w=j.toString,k=y.Symbol,_=j.propertyIsEnumerable,E=k?k.isConcatSpreadable:void 0,C=Array.isArray;e.exports=r}).call(t,n("../node_modules/webpack/buildin/global.js"))},"../node_modules/lodash.isstring/index.js":function(e,t){function n(e){return!!e&&"object"==typeof e}function s(e){return"string"==typeof e||!a(e)&&n(e)&&i.call(e)==o}var o="[object String]",r=Object.prototype,i=r.toString,a=Array.isArray;e.exports=s},"../node_modules/lru-queue/index.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/number/to-pos-integer.js"),o=Object.create,r=Object.prototype.hasOwnProperty;e.exports=function(e){var t,n=0,i=1,a=o(null),c=o(null),l=0;return e=s(e),{hit:function(s){var o=c[s],d=++l;if(a[d]=s,c[s]=d,!o){if(++n<=e)return;return s=a[i],t(s),s}if(delete a[o],i===o)for(;!r.call(a,++i);)continue},delete:t=function(e){var t=c[e];if(t&&(delete a[t],delete c[e],--n,i===t)){if(!n)return l=0,void(i=1);for(;!r.call(a,++i);)continue}},clear:function(){n=0,i=1,a=o(null),c=o(null),l=0}}}},"../node_modules/mark-gor/lib/react-renderer.js":function(e,t,n){function s(){for(var e=0;e<arguments.length;e++)for(var t=arguments[e],n=Object.keys(t),o=0;o<n.length;o++){var r=n[o];this[r]=t[r]}this.options||(this.options=s.defaults)}var o=n("../node_modules/react/react.js");s.defaults={sanitize:!1,langPrefix:"lang-",headerPrefix:""},s.prototype.render=function(e){return this.renderTokens(e)},s.prototype.renderChildren=function(e){return e.children?this.renderTokens(e.children):null},s.prototype.renderTokens=function(e,t){for(var n=[],s=0;s<e.length;s++){var o=this.renderToken(e[s],s);if(o instanceof Array)for(var r=0,i=o;r<i.length;r++)n.push(i[r]);else o&&n.push(o)}return n},s.prototype.renderToken=function(e,t){switch(e.type){case"code":return this.renderCode(e,t);case"blockquote":return this.renderBlockquote(e,t);case"html":return this.renderHtml(e,t);case"heading":return this.renderHeading(e,t);case"hr":return this.renderHorizontalLine(e,t);case"list":return this.renderList(e,t);case"list_item":return this.renderListItem(e,t);case"loose_item":return this.renderLooseItem(e,t);case"paragraph":return this.renderParagraph(e,t);case"table":return this.renderTable(e,t);case"table_header":return this.renderTableHeader(e,t);case"table_row":return this.renderTableRow(e,t);case"table_header_cell":return this.renderTableHeaderCell(e,t);case"table_row_cell":return this.renderTableRowCell(e,t);case"strong":return this.renderStrong(e,t);case"em":return this.renderEmphasized(e,t);case"codespan":return this.renderCodeSpan(e,t);case"del":return this.renderDeleted(e,t);case"br":return this.renderLineBreak(e,t);case"link":return this.renderLink(e,t);case"autolink":return this.renderAutolink(e,t);case"url":return this.renderUrl(e,t);case"image":return this.renderImage(e,t);case"text":return this.renderText(e,t);case"text_block":return this.renderTextBlock(e,t);case"html_block":return this.renderHtmlBlock(e,t);case"space":return this.renderSpace(e,t);case"def":return this.renderRefDefinition(e,t);default:throw new Error("Unrecognized token: "+e.type)}},s.prototype.renderCode=function(e,t){var n,s=e.text,r=e.lang;return r&&(n=this.options.langPrefix+r),o.createElement("pre",{key:t},o.createElement("code",{className:n},s,"\n"))},s.prototype.renderBlockquote=function(e,t){return o.createElement("blockquote",{key:t},this.renderChildren(e))},s.prototype.renderHtml=function(e,t){return null},s.prototype.renderHeading=function(e,t){var n=this.options.headerPrefix+e.name;return o.createElement("h"+e.depth,{id:n,key:t},this.renderChildren(e))},s.prototype.renderHorizontalLine=function(e,t){return o.createElement("hr",{key:t})},s.prototype.renderList=function(e,t){return e.ordered?o.createElement("ol",{key:t},this.renderChildren(e)):o.createElement("ul",{key:t},this.renderChildren(e))},s.prototype.renderLooseItem=s.prototype.renderListItem=function(e,t){return o.createElement("li",{key:t},this.renderChildren(e))},s.prototype.renderParagraph=function(e,t){return o.createElement("p",{key:t},this.renderChildren(e))},s.prototype.renderTable=function(e,t){var n=e.children,s=o.createElement("thead",null,this.renderTableHeader(n[0])),r=o.createElement("tbody",null,this.renderTokens(n.slice(1)));return o.createElement("table",{key:t},s,r)},s.prototype.renderTableHeader=s.prototype.renderTableRow=function(e,t){return o.createElement("tr",{key:t},this.renderChildren(e))},s.prototype.renderTableHeaderCell=function(e,t){return o.createElement("th",{key:t,style:{textALign:e.align}},this.renderChildren(e))},s.prototype.renderTableRowCell=function(e,t){return o.createElement("td",{key:t,style:{textALign:e.align}},this.renderChildren(e))},s.prototype.renderStrong=function(e,t){return o.createElement("strong",{key:t},this.renderChildren(e))},s.prototype.renderEmphasized=function(e,t){return o.createElement("em",{key:t},this.renderChildren(e))},s.prototype.renderCodeSpan=function(e,t){var n=e.text;return o.createElement("code",{key:t},n)},s.prototype.renderLineBreak=function(e,t){return o.createElement("br",{key:t})},s.prototype.renderDeleted=function(e,t){return o.createElement("del",{key:t},this.renderChildren(e))},s.prototype.renderUrl=s.prototype.renderAutolink=function(e,t){if(!this.sanitizeUrl(e.href))return"";var n=e.href,s=e.text;return o.createElement("a",{key:t,href:n},s)},s.prototype.renderLink=function(e,t){if(!this.sanitizeUrl(e.href))return null;var n=e.href,s=e.title;return o.createElement("a",{key:t,href:n,title:s},this.renderChildren(e))},s.prototype.sanitizeUrl=function(e){if(this.options.sanitize){try{var t=decodeURIComponent(e).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return!1}if(0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:"))return!1}return!0},s.prototype.renderImage=function(e,t){var n=e.href,s=e.title,r=e.text;return o.createElement("img",{key:t,src:n,alt:r,title:s})},s.prototype.renderText=function(e,t){return e.text},s.prototype.renderHtmlBlock=s.prototype.renderTextBlock=function(e,t){return e.paragraph?this.renderParagraph(e,t):this.renderChildren(e)},s.prototype.renderRefDefinition=s.prototype.renderSpace=function(e,t){return null},e.exports=s},"../node_modules/mark-gor/react.js":function(e,t,n){function s(e,t){var n=new o({options:d(t,o.defaults)}),s=new a({options:d(t,a.defaults)}),r=n.parse(e);return s.render(r)}var o=n("../node_modules/mark-gor/lib/parser.js"),r=n("../node_modules/mark-gor/lib/block-lexer.js"),i=n("../node_modules/mark-gor/lib/inline-lexer.js"),a=n("../node_modules/mark-gor/lib/react-renderer.js"),c=n("../node_modules/mark-gor/lib/helpers.js"),l=c.merge,d=c.pick;t.parse=s,t.defaults=l({},o.defaults,a.defaults),t.BlockLexer=r,t.InlineLexer=i,t.Parser=o,t.Renderer=a},"../node_modules/memoizee/ext/async.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/array/from/index.js"),o=n("../node_modules/es5-ext/object/map.js"),r=n("../node_modules/es5-ext/object/mixin.js"),i=n("../node_modules/es5-ext/function/_define-length.js"),a=n("../node_modules/next-tick/index.js"),c=Array.prototype.slice,l=Function.prototype.apply,d=Object.create;n("../node_modules/memoizee/lib/registered-extensions.js").async=function(e,t){var n,u,p,m=d(null),h=d(null),f=t.memoized,g=t.original;t.memoized=i(function(e){var t=arguments,s=t[t.length-1];return"function"==typeof s&&(n=s,t=c.call(t,0,-1)),f.apply(u=this,p=t)},f);try{r(t.memoized,f)}catch(e){}t.on("get",function(e){var s,o,r;if(n){if(m[e])return"function"==typeof m[e]?m[e]=[m[e],n]:m[e].push(n),void(n=null);s=n,o=u,r=p,n=u=p=null,a(function(){var i;hasOwnProperty.call(h,e)?(i=h[e],t.emit("getasync",e,r,o),l.call(s,i.context,i.args)):(n=s,u=o,p=r,f.apply(o,r))})}}),t.original=function(){var e,o,r,i;return n?(e=s(arguments),o=function e(n){var o,r,c=e.id;return null==c?void a(l.bind(e,this,arguments)):(delete e.id,o=m[c],delete m[c],o?(r=s(arguments),t.has(c)&&(n?t.delete(c):(h[c]={context:this,args:r},t.emit("setasync",c,"function"==typeof o?1:o.length))),"function"==typeof o?i=l.call(o,this,r):o.forEach(function(e){i=l.call(e,this,r)},this),i):void 0)},r=n,n=u=p=null,e.push(o),i=l.call(g,this,e),o.cb=r,n=o,i):l.call(g,this,arguments)},t.on("set",function(e){if(!n)return void t.delete(e);m[e]?"function"==typeof m[e]?m[e]=[m[e],n.cb]:m[e].push(n.cb):m[e]=n.cb,delete n.cb,n.id=e,n=null}),t.on("delete",function(e){var n;hasOwnProperty.call(m,e)||h[e]&&(n=h[e],delete h[e],t.emit("deleteasync",e,c.call(n.args,1)))}),t.on("clear",function(){var e=h;h=d(null),t.emit("clearasync",o(e,function(e){return c.call(e.args,1)}))})}},"../node_modules/memoizee/ext/dispose.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/valid-callable.js"),o=n("../node_modules/es5-ext/object/for-each.js"),r=n("../node_modules/memoizee/lib/registered-extensions.js"),i=Function.prototype.apply;r.dispose=function(e,t,n){var a;if(s(e),n.async&&r.async||n.promise&&r.promise)return t.on("deleteasync",a=function(t,n){i.call(e,null,n)}),void t.on("clearasync",function(e){o(e,function(e,t){a(t,e)})});t.on("delete",a=function(t,n){e(n)}),t.on("clear",function(e){o(e,function(e,t){a(t,e)})})}},"../node_modules/memoizee/ext/max-age.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/array/from/index.js"),o=n("../node_modules/es5-ext/object/for-each.js"),r=n("../node_modules/next-tick/index.js"),i=n("../node_modules/is-promise/index.js"),a=n("../node_modules/timers-ext/valid-timeout.js"),c=n("../node_modules/memoizee/lib/registered-extensions.js"),l=Function.prototype,d=Math.max,u=Math.min,p=Object.create;c.maxAge=function(e,t,n){var m,h,f,g;(e=a(e))&&(m=p(null),h=n.async&&c.async||n.promise&&c.promise?"async":"",t.on("set"+h,function(n){m[n]=setTimeout(function(){t.delete(n)},e),"function"==typeof m[n].unref&&m[n].unref(),g&&(g[n]&&"nextTick"!==g[n]&&clearTimeout(g[n]),g[n]=setTimeout(function(){delete g[n]},f),"function"==typeof g[n].unref&&g[n].unref())}),t.on("delete"+h,function(e){clearTimeout(m[e]),delete m[e],g&&("nextTick"!==g[e]&&clearTimeout(g[e]),delete g[e])}),n.preFetch&&(f=!0===n.preFetch||isNaN(n.preFetch)?.333:d(u(Number(n.preFetch),1),0))&&(g={},f=(1-f)*e,t.on("get"+h,function(e,o,a){g[e]||(g[e]="nextTick",r(function(){var r;"nextTick"===g[e]&&(delete g[e],t.delete(e),n.async&&(o=s(o),o.push(l)),r=t.memoized.apply(a,o),n.promise&&i(r)&&("function"==typeof r.done?r.done(l,l):r.then(l,l)))}))})),t.on("clear"+h,function(){o(m,function(e){clearTimeout(e)}),m={},g&&(o(g,function(e){"nextTick"!==e&&clearTimeout(e)}),g={})}))}},"../node_modules/memoizee/ext/max.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/number/to-pos-integer.js"),o=n("../node_modules/lru-queue/index.js"),r=n("../node_modules/memoizee/lib/registered-extensions.js");r.max=function(e,t,n){var i,a,c;(e=s(e))&&(a=o(e),i=n.async&&r.async||n.promise&&r.promise?"async":"",t.on("set"+i,c=function(e){void 0!==(e=a.hit(e))&&t.delete(e)}),t.on("get"+i,c),t.on("delete"+i,a.delete),t.on("clear"+i,a.clear))}},"../node_modules/memoizee/ext/promise.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/map.js"),o=n("../node_modules/es5-ext/object/primitive-set.js"),r=n("../node_modules/es5-ext/object/validate-stringifiable-value.js"),i=n("../node_modules/es5-ext/to-short-string-representation.js"),a=n("../node_modules/is-promise/index.js"),c=n("../node_modules/next-tick/index.js"),l=Object.create,d=o("then","then:finally","done","done:finally");n("../node_modules/memoizee/lib/registered-extensions.js").promise=function(e,t){var n=l(null),o=l(null),u=l(null);if(!0===e)e=null;else if(e=r(e),!d[e])throw new TypeError("'"+i(e)+"' is not valid promise mode");t.on("set",function(s,r,i){var l=!1;if(!a(i))return o[s]=i,void t.emit("setasync",s,1);n[s]=1,u[s]=i;var d=function(e){var r=n[s];if(l)throw new Error("Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)\nConsider to rely on 'then' or 'done' mode instead.");r&&(delete n[s],o[s]=e,t.emit("setasync",s,r))},p=function(){l=!0,n[s]&&(delete n[s],delete u[s],t.delete(s))},m=e;if(m||(m="then"),"then"===m)i.then(function(e){c(d.bind(this,e))},function(){c(p)});else if("done"===m){if("function"!=typeof i.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");i.done(d,p)}else if("done:finally"===m){if("function"!=typeof i.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if("function"!=typeof i.finally)throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");i.done(d),i.finally(p)}}),t.on("get",function(e,s,o){var r;if(n[e])return void++n[e];r=u[e];var i=function(){t.emit("getasync",e,s,o)};a(r)?"function"==typeof r.done?r.done(i):r.then(function(){c(i)}):i()}),t.on("delete",function(e){if(delete u[e],n[e])return void delete n[e];if(hasOwnProperty.call(o,e)){var s=o[e];delete o[e],t.emit("deleteasync",e,[s])}}),t.on("clear",function(){var e=o;o=l(null),n=l(null),u=l(null),t.emit("clearasync",s(e,function(e){return[e]}))})}},"../node_modules/memoizee/ext/ref-counter.js":function(e,t,n){"use strict";var s=n("../node_modules/d/index.js"),o=n("../node_modules/memoizee/lib/registered-extensions.js"),r=Object.create,i=Object.defineProperties;o.refCounter=function(e,t,n){var a,c;a=r(null),c=n.async&&o.async||n.promise&&o.promise?"async":"",t.on("set"+c,function(e,t){a[e]=t||1}),t.on("get"+c,function(e){++a[e]}),t.on("delete"+c,function(e){delete a[e]}),t.on("clear"+c,function(){a={}}),i(t.memoized,{deleteRef:s(function(){var e=t.get(arguments);return null===e?null:a[e]?!--a[e]&&(t.delete(e),!0):null}),getRefCount:s(function(){var e=t.get(arguments);return null===e?0:a[e]?a[e]:0})})}},"../node_modules/memoizee/index.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/normalize-options.js"),o=n("../node_modules/memoizee/lib/resolve-length.js"),r=n("../node_modules/memoizee/plain.js");e.exports=function(e){var t,i=s(arguments[1]);return i.normalizer||0!==(t=i.length=o(i.length,e.length,i.async))&&(i.primitive?!1===t?i.normalizer=n("../node_modules/memoizee/normalizers/primitive.js"):t>1&&(i.normalizer=n("../node_modules/memoizee/normalizers/get-primitive-fixed.js")(t)):i.normalizer=!1===t?n("../node_modules/memoizee/normalizers/get.js")():1===t?n("../node_modules/memoizee/normalizers/get-1.js")():n("../node_modules/memoizee/normalizers/get-fixed.js")(t)),i.async&&n("../node_modules/memoizee/ext/async.js"),i.promise&&n("../node_modules/memoizee/ext/promise.js"),i.dispose&&n("../node_modules/memoizee/ext/dispose.js"),i.maxAge&&n("../node_modules/memoizee/ext/max-age.js"),i.max&&n("../node_modules/memoizee/ext/max.js"),i.refCounter&&n("../node_modules/memoizee/ext/ref-counter.js"),r(e,i)}},"../node_modules/memoizee/lib/configure-map.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/error/custom.js"),o=n("../node_modules/es5-ext/function/_define-length.js"),r=n("../node_modules/d/index.js"),i=n("../node_modules/event-emitter/index.js").methods,a=n("../node_modules/memoizee/lib/resolve-resolve.js"),c=n("../node_modules/memoizee/lib/resolve-normalize.js"),l=Function.prototype.apply,d=Function.prototype.call,u=Object.create,p=Object.defineProperties,m=i.on,h=i.emit;e.exports=function(e,t,n){var i,f,g,v,b,y,j,x,w,k,_,E,C,S,R,N=u(null);return f=!1!==t?t:isNaN(e.length)?1:e.length,n.normalizer&&(k=c(n.normalizer),g=k.get,v=k.set,b=k.delete,y=k.clear),null!=n.resolvers&&(R=a(n.resolvers)),S=g?o(function(t){var n,o,r=arguments;if(R&&(r=R(r)),null!==(n=g(r))&&hasOwnProperty.call(N,n))return _&&i.emit("get",n,r,this),N[n];if(o=1===r.length?d.call(e,this,r[0]):l.call(e,this,r),null===n){if(null!==(n=g(r)))throw s("Circular invocation","CIRCULAR_INVOCATION");n=v(r)}else if(hasOwnProperty.call(N,n))throw s("Circular invocation","CIRCULAR_INVOCATION");return N[n]=o,E&&i.emit("set",n,null,o),o},f):0===t?function(){var t;if(hasOwnProperty.call(N,"data"))return _&&i.emit("get","data",arguments,this),N.data;if(t=arguments.length?l.call(e,this,arguments):d.call(e,this),hasOwnProperty.call(N,"data"))throw s("Circular invocation","CIRCULAR_INVOCATION");return N.data=t,E&&i.emit("set","data",null,t),t}:function(t){var n,o,r=arguments;if(R&&(r=R(arguments)),o=String(r[0]),hasOwnProperty.call(N,o))return _&&i.emit("get",o,r,this),N[o];if(n=1===r.length?d.call(e,this,r[0]):l.call(e,this,r),hasOwnProperty.call(N,o))throw s("Circular invocation","CIRCULAR_INVOCATION");return N[o]=n,E&&i.emit("set",o,null,n),n},i={original:e,memoized:S,profileName:n.profileName,get:function(e){return R&&(e=R(e)),g?g(e):String(e[0])},has:function(e){return hasOwnProperty.call(N,e)},delete:function(e){var t;hasOwnProperty.call(N,e)&&(b&&b(e),t=N[e],delete N[e],C&&i.emit("delete",e,t))},clear:function(){var e=N;y&&y(),N=u(null),i.emit("clear",e)},on:function(e,t){return"get"===e?_=!0:"set"===e?E=!0:"delete"===e&&(C=!0),m.call(this,e,t)},emit:h,updateEnv:function(){e=i.original}},j=g?o(function(e){var t,n=arguments;R&&(n=R(n)),null!==(t=g(n))&&i.delete(t)},f):0===t?function(){return i.delete("data")}:function(e){return R&&(e=R(arguments)[0]),i.delete(e)},x=o(function(){var e,n=arguments;return 0===t?N.data:(R&&(n=R(n)),e=g?g(n):String(n[0]),N[e])}),w=o(function(){var e,n=arguments;return 0===t?i.has("data"):(R&&(n=R(n)),null!==(e=g?g(n):String(n[0]))&&i.has(e))}),p(S,{__memoized__:r(!0),delete:r(j),clear:r(i.clear),_get:r(x),_has:r(w)}),i}},"../node_modules/memoizee/lib/registered-extensions.js":function(e,t,n){"use strict"},"../node_modules/memoizee/lib/resolve-length.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/number/to-pos-integer.js");e.exports=function(e,t,n){var o;return isNaN(e)?(o=t,o>=0?n&&o?o-1:o:1):!1!==e&&s(e)}},"../node_modules/memoizee/lib/resolve-normalize.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/valid-callable.js");e.exports=function(e){var t;return"function"==typeof e?{set:e,get:e}:(t={get:s(e.get)},void 0!==e.set?(t.set=s(e.set),e.delete&&(t.delete=s(e.delete)),e.clear&&(t.clear=s(e.clear)),t):(t.set=t.get,t))}},"../node_modules/memoizee/lib/resolve-resolve.js":function(e,t,n){"use strict";var s,o=n("../node_modules/es5-ext/array/to-array.js"),r=n("../node_modules/es5-ext/object/is-value.js"),i=n("../node_modules/es5-ext/object/valid-callable.js"),a=Array.prototype.slice;s=function(e){return this.map(function(t,n){return t?t(e[n]):e[n]}).concat(a.call(e,this.length))},e.exports=function(e){return e=o(e),e.forEach(function(e){r(e)&&i(e)}),s.bind(e)}},"../node_modules/memoizee/lib/weak.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/error/custom.js"),o=n("../node_modules/es5-ext/function/_define-length.js"),r=n("../node_modules/es5-ext/function/#/partial.js"),i=n("../node_modules/es5-ext/object/copy.js"),a=n("../node_modules/es5-ext/object/normalize-options.js"),c=n("../node_modules/es5-ext/object/valid-callable.js"),l=n("../node_modules/d/index.js"),d=n("../node_modules/es6-weak-map/index.js"),u=n("../node_modules/memoizee/lib/resolve-length.js"),p=n("../node_modules/memoizee/lib/registered-extensions.js"),m=n("../node_modules/memoizee/lib/resolve-resolve.js"),h=n("../node_modules/memoizee/lib/resolve-normalize.js"),f=Array.prototype.slice,g=Object.defineProperties;e.exports=function(e){return function(t){var n,v,b,y,j,x=a(arguments[1]);return c(t),hasOwnProperty.call(t,"__memoized__")&&!x.force?t:(v=u(x.length,t.length,x.async&&p.async),x.length=v?v-1:0,n=new d,x.resolvers&&(y=m(x.resolvers)),x.normalizer&&(j=h(x.normalizer)),1!==v||j||x.async||x.dispose||x.maxAge||x.max||x.refCounter?(b=g(o(function(s){var o,a=arguments;return y&&(a=y(a),s=a[0]),o=n.get(s),o||(j&&(x=i(x),x.normalizer=i(j),x.normalizer.get=r.call(x.normalizer.get,s),x.normalizer.set=r.call(x.normalizer.set,s),x.normalizer.delete&&(x.normalizer.delete=r.call(x.normalizer.delete,s))),n.set(s,o=e(r.call(t,s),x))),o.apply(this,f.call(a,1))},v),{__memoized__:l(!0),delete:l(o(function(e){var t,s=arguments;y&&(s=y(s),e=s[0]),(t=n.get(e))&&t.delete.apply(this,f.call(s,1))},v))}),x.refCounter?(g(b,{deleteRef:l(o(function(e){var t,s=arguments;return y&&(s=y(s),e=s[0]),t=n.get(e),t?t.deleteRef.apply(this,f.call(s,1)):null},v)),getRefCount:l(o(function(e){var t,s=arguments;return y&&(s=y(s),e=s[0]),t=n.get(e),t?t.getRefCount.apply(this,f.call(s,1)):0},v))}),b):b):g(function(e){var o,r=arguments;if(y&&(r=y(r)),e=r[0],n.has(e))return n.get(e);if(o=t.apply(this,r),n.has(e))throw s("Circular invocation","CIRCULAR_INVOCATION");return n.set(e,o),o},{__memoized__:l(!0),delete:l(function(e){return y&&(e=y(arguments)[0]),n.delete(e)})}))}}},"../node_modules/memoizee/normalizers/get-1.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/array/#/e-index-of.js");e.exports=function(){var e=0,t=[],n=[];return{get:function(e){var o=s.call(t,e[0]);return-1===o?null:n[o]},set:function(s){return t.push(s[0]),n.push(++e),e},delete:function(e){var o=s.call(n,e);-1!==o&&(t.splice(o,1),n.splice(o,1))},clear:function(){t=[],n=[]}}}},"../node_modules/memoizee/normalizers/get-fixed.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/array/#/e-index-of.js"),o=Object.create;e.exports=function(e){var t=0,n=[[],[]],r=o(null);return{get:function(t){for(var o,r=0,i=n;r<e-1;){if(-1===(o=s.call(i[0],t[r])))return null;i=i[1][o],++r}return o=s.call(i[0],t[r]),-1===o?null:i[1][o]||null},set:function(o){for(var i,a=0,c=n;a<e-1;)i=s.call(c[0],o[a]),-1===i&&(i=c[0].push(o[a])-1,c[1].push([[],[]])),c=c[1][i],++a;return i=s.call(c[0],o[a]),-1===i&&(i=c[0].push(o[a])-1),c[1][i]=++t,r[t]=o,t},delete:function(t){for(var o,i=0,a=n,c=[],l=r[t];i<e-1;){if(-1===(o=s.call(a[0],l[i])))return;c.push(a,o),a=a[1][o],++i}if(-1!==(o=s.call(a[0],l[i]))){for(t=a[1][o],a[0].splice(o,1),a[1].splice(o,1);!a[0].length&&c.length;)o=c.pop(),a=c.pop(),a[0].splice(o,1),a[1].splice(o,1);delete r[t]}},clear:function(){n=[[],[]],r=o(null)}}}},"../node_modules/memoizee/normalizers/get-primitive-fixed.js":function(e,t,n){"use strict";e.exports=function(e){return e?function(t){for(var n=String(t[0]),s=0,o=e;--o;)n+=""+t[++s];return n}:function(){return""}}},"../node_modules/memoizee/normalizers/get.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/array/#/e-index-of.js"),o=Object.create;e.exports=function(){var e=0,t=[],n=o(null);return{get:function(e){var n,o=0,r=t,i=e.length;if(0===i)return r[i]||null;if(r=r[i]){for(;o<i-1;){if(-1===(n=s.call(r[0],e[o])))return null;r=r[1][n],++o}return n=s.call(r[0],e[o]),-1===n?null:r[1][n]||null}return null},set:function(o){var r,i=0,a=t,c=o.length;if(0===c)a[c]=++e;else{for(a[c]||(a[c]=[[],[]]),a=a[c];i<c-1;)r=s.call(a[0],o[i]),-1===r&&(r=a[0].push(o[i])-1,a[1].push([[],[]])),a=a[1][r],++i;r=s.call(a[0],o[i]),-1===r&&(r=a[0].push(o[i])-1),a[1][r]=++e}return n[e]=o,e},delete:function(e){var o,r=0,i=t,a=n[e],c=a.length,l=[];if(0===c)delete i[c];else if(i=i[c]){for(;r<c-1;){if(-1===(o=s.call(i[0],a[r])))return;l.push(i,o),i=i[1][o],++r}if(-1===(o=s.call(i[0],a[r])))return;for(e=i[1][o],i[0].splice(o,1),i[1].splice(o,1);!i[0].length&&l.length;)o=l.pop(),i=l.pop(),i[0].splice(o,1),i[1].splice(o,1)}delete n[e]},clear:function(){t=[],n=o(null)}}}},"../node_modules/memoizee/normalizers/primitive.js":function(e,t,n){"use strict";e.exports=function(e){var t,n,s=e.length;if(!s)return"";for(t=String(e[n=0]);--s;)t+=""+e[++n];return t}},"../node_modules/memoizee/plain.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/object/valid-callable.js"),o=n("../node_modules/es5-ext/object/for-each.js"),r=n("../node_modules/memoizee/lib/registered-extensions.js"),i=n("../node_modules/memoizee/lib/configure-map.js"),a=n("../node_modules/memoizee/lib/resolve-length.js");e.exports=function e(t){var n,c,l;if(s(t),n=Object(arguments[1]),n.async&&n.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(t,"__memoized__")&&!n.force?t:(c=a(n.length,t.length,n.async&&r.async),l=i(t,c,n),o(r,function(e,t){n[t]&&e(n[t],l,n)}),e.__profiler__&&e.__profiler__(l),l.updateEnv(),l.memoized)}},"../node_modules/memoizee/weak.js":function(e,t,n){"use strict";e.exports=n("../node_modules/memoizee/lib/weak.js")(n("../node_modules/memoizee/index.js"))},"../node_modules/next-tick/index.js":function(e,t,n){"use strict";(function(t,n){var s,o;s=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},o=function(e){var t,n,o=document.createTextNode(""),r=0;return new e(function(){var e;if(t)n&&(t=n.concat(t));else{if(!n)return;t=n}if(n=t,t=null,"function"==typeof n)return e=n,n=null,void e();for(o.data=r=++r%2;n;)e=n.shift(),n.length||(n=null),e()}).observe(o,{characterData:!0}),function(e){if(s(e),t)return void("function"==typeof t?t=[t,e]:t.push(e));t=e,o.data=r=++r%2}},e.exports=function(){if("object"==typeof t&&t&&"function"==typeof t.nextTick)return t.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return o(MutationObserver);if("function"==typeof WebKitMutationObserver)return o(WebKitMutationObserver)}return"function"==typeof n?function(e){n(s(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(s(e),0)}:null}()}).call(t,n("../node_modules/process/browser.js"),n("../node_modules/timers-browserify/main.js").setImmediate)},"../node_modules/octicons/build/svg/file-text.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{d:"M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"}))}var o=n("../node_modules/react/react.js");s.displayName="FileText",s.defaultProps={viewBox:"0 0 12 16"},e.exports=s,s.default=s},"../node_modules/octicons/build/svg/git-branch.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{fillRule:"evenodd",d:"M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"}))}var o=n("../node_modules/react/react.js");s.displayName="GitBranch",s.defaultProps={viewBox:"0 0 10 16"},e.exports=s,s.default=s},"../node_modules/octicons/build/svg/git-merge.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{fillRule:"evenodd",d:"M10 7c-.73 0-1.38.41-1.73 1.02V8C7.22 7.98 6 7.64 5.14 6.98c-.75-.58-1.5-1.61-1.89-2.44A1.993 1.993 0 0 0 2 .99C.89.99 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2a1.993 1.993 0 0 0 1-3.72V7.67c.67.7 1.44 1.27 2.3 1.69.86.42 2.03.63 2.97.64v-.02c.36.61 1 1.02 1.73 1.02 1.11 0 2-.89 2-2 0-1.11-.89-2-2-2zm-6.8 6c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm8 6c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"}))}var o=n("../node_modules/react/react.js");s.displayName="GitMerge",s.defaultProps={viewBox:"0 0 12 16"},e.exports=s,s.default=s},"../node_modules/octicons/build/svg/git-pull-request.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{fillRule:"evenodd",d:"M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"}))}var o=n("../node_modules/react/react.js");s.displayName="GitPullRequest",s.defaultProps={viewBox:"0 0 12 16"},e.exports=s,s.default=s},"../node_modules/octicons/build/svg/issue-closed.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{fillRule:"evenodd",d:"M7 10h2v2H7v-2zm2-6H7v5h2V4zm1.5 1.5l-1 1L12 9l4-4.5-1-1L12 7l-1.5-1.5zM8 13.7A5.71 5.71 0 0 1 2.3 8c0-3.14 2.56-5.7 5.7-5.7 1.83 0 3.45.88 4.5 2.2l.92-.92A6.947 6.947 0 0 0 8 1C4.14 1 1 4.14 1 8s3.14 7 7 7 7-3.14 7-7l-1.52 1.52c-.66 2.41-2.86 4.19-5.48 4.19v-.01z"}))}var o=n("../node_modules/react/react.js");s.displayName="IssueClosed",s.defaultProps={viewBox:"0 0 16 16"},e.exports=s,s.default=s},"../node_modules/octicons/build/svg/issue-opened.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))}var o=n("../node_modules/react/react.js");s.displayName="IssueOpened",s.defaultProps={viewBox:"0 0 14 16"},e.exports=s,s.default=s},"../node_modules/octicons/build/svg/issue-reopened.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{fillRule:"evenodd",d:"M8 9H6V4h2v5zm-2 3h2v-2H6v2zm6.33-2H10l1.5 1.5c-1.05 1.33-2.67 2.2-4.5 2.2A5.71 5.71 0 0 1 1.3 8c0-.34.03-.67.09-1H.08C.03 7.33 0 7.66 0 8c0 3.86 3.14 7 7 7 2.19 0 4.13-1.02 5.41-2.59L14 14v-4h-1.67zM1.67 6H4L2.5 4.5C3.55 3.17 5.17 2.3 7 2.3c3.14 0 5.7 2.56 5.7 5.7 0 .34-.03.67-.09 1h1.31c.05-.33.08-.66.08-1 0-3.86-3.14-7-7-7-2.19 0-4.13 1.02-5.41 2.59L0 2v4h1.67z"}))}var o=n("../node_modules/react/react.js");s.displayName="IssueReopened",s.defaultProps={viewBox:"0 0 14 16"},e.exports=s,s.default=s},"../node_modules/octicons/build/svg/list-ordered.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{fillRule:"evenodd",d:"M12 13c0 .59 0 1-.59 1H4.59C4 14 4 13.59 4 13c0-.59 0-1 .59-1h6.81c.59 0 .59.41.59 1H12zM4.59 4h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1H4.59C4 2 4 2.41 4 3c0 .59 0 1 .59 1zm6.81 3H4.59C4 7 4 7.41 4 8c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1zM2 1h-.72c-.3.19-.58.25-1.03.34V2H1v2.14H.16V5H3v-.86H2V1zm.25 8.13c-.17 0-.45.03-.66.06.53-.56 1.14-1.25 1.14-1.89C2.71 6.52 2.17 6 1.37 6c-.59 0-.97.2-1.38.64l.58.58c.19-.19.38-.38.64-.38.28 0 .48.16.48.52 0 .53-.77 1.2-1.7 2.06V10h3l-.09-.88h-.66l.01.01zm-.08 3.78v-.03c.44-.19.64-.47.64-.86 0-.7-.56-1.11-1.44-1.11-.48 0-.89.19-1.28.52l.55.64c.25-.2.44-.31.69-.31.27 0 .42.13.42.36 0 .27-.2.44-.86.44v.75c.83 0 .98.17.98.47 0 .25-.23.38-.58.38-.28 0-.56-.14-.81-.38l-.48.66c.3.36.77.56 1.41.56.83 0 1.53-.41 1.53-1.16 0-.5-.31-.81-.77-.94v.01z"}))}var o=n("../node_modules/react/react.js");s.displayName="ListOrdered",s.defaultProps={viewBox:"0 0 12 16"},e.exports=s,s.default=s},"../node_modules/octicons/build/svg/list-unordered.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{fillRule:"evenodd",d:"M2 13c0 .59 0 1-.59 1H.59C0 14 0 13.59 0 13c0-.59 0-1 .59-1h.81c.59 0 .59.41.59 1H2zm2.59-9h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1H4.59C4 2 4 2.41 4 3c0 .59 0 1 .59 1zM1.41 7H.59C0 7 0 7.41 0 8c0 .59 0 1 .59 1h.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm0-5H.59C0 2 0 2.41 0 3c0 .59 0 1 .59 1h.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm10 5H4.59C4 7 4 7.41 4 8c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm0 5H4.59C4 12 4 12.41 4 13c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01z"}))}var o=n("../node_modules/react/react.js");s.displayName="ListUnordered",s.defaultProps={viewBox:"0 0 12 16"},e.exports=s,s.default=s},"../node_modules/octicons/build/svg/milestone.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{fillRule:"evenodd",d:"M8 2H6V0h2v2zm4 5H2c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h10l2 2-2 2zM8 4H6v2h2V4zM6 16h2V8H6v8z"}))}var o=n("../node_modules/react/react.js");s.displayName="Milestone",s.defaultProps={viewBox:"0 0 14 16"},e.exports=s,s.default=s},"../node_modules/octicons/build/svg/note.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{fillRule:"evenodd",d:"M3 10h4V9H3v1zm0-2h6V7H3v1zm0-2h8V5H3v1zm10 6H1V3h12v9zM1 2c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1H1z"}))}var o=n("../node_modules/react/react.js");s.displayName="Note",s.defaultProps={viewBox:"0 0 14 16"},e.exports=s,s.default=s},"../node_modules/octicons/build/svg/person.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{fillRule:"evenodd",d:"M12 14.002a.998.998 0 0 1-.998.998H1.001A1 1 0 0 1 0 13.999V13c0-2.633 4-4 4-4s.229-.409 0-1c-.841-.62-.944-1.59-1-4 .173-2.413 1.867-3 3-3s2.827.586 3 3c-.056 2.41-.159 3.38-1 4-.229.59 0 1 0 1s4 1.367 4 4v1.002z"}))}var o=n("../node_modules/react/react.js");s.displayName="Person",s.defaultProps={viewBox:"0 0 12 16"},e.exports=s,s.default=s},"../node_modules/octicons/build/svg/repo-push.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{fillRule:"evenodd",d:"M4 3H3V2h1v1zM3 5h1V4H3v1zm4 0L4 9h2v7h2V9h2L7 5zm4-5H1C.45 0 0 .45 0 1v12c0 .55.45 1 1 1h4v-1H1v-2h4v-1H2V1h9.02L11 10H9v1h2v2H9v1h2c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1z"}))}var o=n("../node_modules/react/react.js");s.displayName="RepoPush",s.defaultProps={viewBox:"0 0 12 16"},e.exports=s,s.default=s},"../node_modules/octicons/build/svg/repo.svg":function(e,t,n){function s(e){return o.createElement("svg",e,o.createElement("path",{fillRule:"evenodd",d:"M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"}))}var o=n("../node_modules/react/react.js");s.displayName="Repo",s.defaultProps={viewBox:"0 0 12 16"},e.exports=s,s.default=s},"../node_modules/react-easy-emoji/index.js":function(e,t,n){var s=n("../node_modules/react-easy-emoji/lib/replaceEmoji.js"),o=n("../node_modules/react-easy-emoji/lib/makeTwemojiRenderer.js");e.exports=function(e,t){var n="function"==typeof t?t:o(t);return s(e,n)}},"../node_modules/react-easy-emoji/lib/makeTwemojiRenderer.js":function(e,t,n){function s(e){return e&&e.length>0&&":"!==e.charAt(e.length-1)?e+":":e}var o=n("../node_modules/react/react.js"),r=n("../node_modules/lodash.assign/index.js"),i="undefined"==typeof location?"":"https:"===location.protocol?"https:":"http:",a={height:"1em",width:"1em",margin:"0 .05em 0 .1em",verticalAlign:"-0.1em"};e.exports=function(e){return e=r({},{protocol:i,baseUrl:"//twemoji.maxcdn.com/2/",size:"72x72",ext:".png",props:null},e),function(t,n,i){var c=s(e.protocol)+e.baseUrl+e.size+"/"+t+e.ext;return o.createElement("img",r({key:i,alt:n,draggable:!1,src:c,style:a},e.props))}}},"../node_modules/react-easy-emoji/lib/replaceEmoji.js":function(e,t,n){function s(e,t){for(var n=[],s=0,o=0,r=0;r<e.length;)s=e.charCodeAt(r++),o?(n.push((65536+(o-55296<<10)+(s-56320)).toString(16)),o=0):55296<=s&&s<=56319?o=s:n.push(s.toString(16));return n.join(t||"-")}function o(e){return s(e.indexOf(c)<0?e.replace(a,""):e)}var r=n("../node_modules/string-replace-to-array/string-replace-to-array.js"),i=/\ud83d[\udc68-\udc69](?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92])|(?:\ud83c[\udfcb\udfcc]|\ud83d\udd75|\u26f9)(?:\ufe0f|\ud83c[\udffb-\udfff])\u200d[\u2640\u2642]\ufe0f|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd37-\udd39\udd3d\udd3e\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|(?:[\u0023\u002a\u0030-\u0039])\ufe0f?\u20e3|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddd1-\udddd]|[\u270a\u270b])(?:\ud83c[\udffb-\udfff]|)|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud800\udc00|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef8]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd4c\udd50-\udd6b\udd80-\udd97\uddc0\uddd0\uddde-\udde6]|[\u23e9-\u23ec\u23f0\u23f3\u2640\u2642\u2695\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a]|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u00a9\u00ae\u203c\u2049\u2122\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2694\u2696\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))/g,a=/\uFE0F/g,c=String.fromCharCode(8205);e.exports=function(e,t){return r(e,i,function(e,n){var s=o(e);return t(s,e,n)})}},"../node_modules/relaks/index.js":function(e,t,n){function s(){}function o(e,t){var n=e.relaks;this.component=e,this.synchronous=!0,this.showingProgress=!1,this.showingProgressInitially=!1,this.delayWhenEmpty=50,this.delayWhenRendered=1/0,this.canceled=!1,this.prior=t?t.prior:n.previous,this.previous=n.previous,this.current=n.current,this.updateTimeout=0,this.startTime=u(),this.onCancel=null,this.onComplete=null,this.onProgress=null}function r(){this.message="Async rendering interrupted"}function i(e){if(e.render)throw new Error("Class definition should not contain render()");if(!e.renderAsync)throw new Error("Class definition should contain renderAsync()");var t=s.prototype;return e=c(e),e.render=t.render,e.componentWillMount=d(e.componentWillMount,t.componentWillMount),e.componentWillUnmount=d(e.componentWillUnmount,t.componentWillUnmount),e.shouldComponentUpdate=e.shouldComponentUpdate||t.shouldComponentUpdate,p.createClass(e)}function a(e){return!(!e||"function"!=typeof e.then)}function c(e){var t={};for(var n in e)t[n]=e[n];return t}function l(e,t){if(e===t)return!0;if(!e||!t)return!1;for(var n in t){var s=e[n];if(t[n]!==s)return!1}return!0}function d(e,t){return e?function(){e.call(this),t.call(this)}:t}function u(){return new Date-m}var p=n("../node_modules/react/react.js");t.Component=s,t.createClass=i,t.AsyncRenderingInterrupted=r,t.Meanwhile=o,s.prototype=Object.create(p.Component.prototype),s.prototype.constructor=s,s.prototype.render=function(){var e=this.relaks;if(!e)return console.warn("Relaks context is missing. Make sure you are calling componentWillMount() and componentWillUnmount() of the superclass"),null;if(e.promisedElementExpected)return e.promisedElementExpected=!1,e.progressElement=null,e.progressElementRendered=null,e.promisedElement;if(e.progressElementExpected)return e.progressElementExpected=!1,e.progressElementRendered=e.progressElement,e.progressElement;var t=e.meanwhile;if(t){e.meanwhile=null;try{t.cancel()}catch(e){console.error(e)}}e.previous=e.current,e.current={props:this.props,state:this.state||{}};var n=e.meanwhile=new o(this,t);try{var s=this.renderAsync(n);n.synchronous=!1}catch(t){return console.error(t),e.meanwhile.clear(),e.meanwhile=null,e.progressElement||e.progressElementRendered||e.promisedElement}if(a(s)){var i=this,c=function(t){n!==e.meanwhile?n.cancel():i.relaks?(n.finish(),e.promisedElement=t,e.promisedElementExpected=!0,e.meanwhile=null,i.forceUpdate()):n.cancel()},l=function(t){if(t instanceof r);else{console.error(t);var n=e.progressElement||e.promisedElement;c(n)}};s.then(c,l)}else{var d=s;e.meanwhile=null,e.promisedElement=d,e.progressElement=null,e.progressElementRendered=null}return e.promisedElement?e.promisedElement:e.progressElement&&(n.showingProgress||n.showingProgressInitially)?e.progressElement:e.progressElementRendered?e.progressElementRendered:null},s.prototype.shouldComponentUpdate=function(e,t){return!l(this.props,e)||!l(this.state,t)},s.prototype.componentWillMount=function(){this.relaks={progressElement:null,progressElementExpected:!1,promisedElement:null,promisedElementExpected:!1,progressElementRendered:null,meanwhile:null,previous:null,current:{props:{},state:{}}}},s.prototype.componentWillUnmount=function(){var e=this.relaks;e&&(e.meanwhile&&e.meanwhile.cancel(),this.relaks=void 0)},o.prototype.check=function(){var e=this.component.relaks;if(!e||this!==e.meanwhile)throw new r},o.prototype.show=function(e,t){var n=this.component.relaks;if(this.check(),n.progressElement=e,this.showingProgress)return this.update(),!0;if("always"===t)return this.update(!0),!0;if("initial"===t&&!n.promisedElement&&!n.progressElementRendered)return this.update(!0),!0;if(this.updateTimeout)return!1;var s;if((s=n.promisedElement?this.delayWhenRendered:this.delayWhenEmpty)>0){if(s!==1/0){var o=this;this.updateTimeout=setTimeout(function(){0!==o.updateTimeout&&o.update()},s)}return!1}return this.update(),!0},o.prototype.revising=function(){return!!this.component.relaks.promisedElement},o.prototype.delay=function(e,t){this.delayWhenEmpty=e,this.delayWhenRendered=t},o.prototype.update=function(e){var t=this.component.relaks;if(e||(this.showingProgress=!0),t.promisedElement&&(t.promisedElement=null),this.synchronous)return void(e&&(this.showingProgressInitially=!0));if(this.onProgress){var n=u()-this.startTime;this.onProgress({type:"progress",target:this,elapsed:n})}t.progressElement!==t.progressElementRendered&&(t.progressElementExpected=!0,this.component.forceUpdate())},o.prototype.cancel=function(){this.clear(),this.canceled||(this.canceled=!0,this.onCancel&&this.onCancel({type:"cancel",target:this}))},o.prototype.finish=function(){if(this.clear(),this.onComplete){var e=u()-this.startTime;this.onComplete({type:"complete",target:this,elapsed:e})}},o.prototype.clear=function(){this.component.relaks;this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updateTimeout=0)},r.prototype=Object.create(Error.prototype);var m=new Date},"../node_modules/string-replace-to-array/string-replace-to-array.js":function(e,t,n){function s(e,t,n){return i("string"==typeof e,"First param must be a string"),i("string"==typeof t||t instanceof RegExp,"Second param must be a string pattern or a regular expression"),("string"==typeof t?o:r)(e,t,n)}function o(e,t,n){var s=e.indexOf(t);if(s>=0){var o=[],r=s+t.length;return s>0&&o.push(e.substring(0,s)),o.push("function"==typeof n?n(e.substring(s,r),s,e):n),r<e.length&&o.push(e.substring(r)),o}return[e]}function r(e,t,n){var s=[],o="function"==typeof n,r=t.lastIndex;t.lastIndex=0;for(var i,a=0;i=t.exec(e);){var c=i.index;""===i[0]&&t.lastIndex++,c!==a&&s.push(e.substring(a,c));a=c+i[0].length;var l=o?n.apply(this,i.concat(c,i.input)):n;if(s.push(l),!t.global)break}return a<e.length&&s.push(e.substring(a)),t.lastIndex=r,s}var i=n("../node_modules/invariant/browser.js"),a=n("../node_modules/lodash.isstring/index.js"),c=n("../node_modules/lodash.flatten/index.js");e.exports=function(e,t,n){if(a(e))return s(e,t,n);if(Array.isArray(e)&&e[0])return c(e.map(function(e){return a(e)?s(e,t,n):e}));throw new TypeError("First argument must be an array or non-empty string")}},"../node_modules/timers-ext/max-timeout.js":function(e,t,n){"use strict";e.exports=2147483647},"../node_modules/timers-ext/valid-timeout.js":function(e,t,n){"use strict";var s=n("../node_modules/es5-ext/number/to-pos-integer.js"),o=n("../node_modules/timers-ext/max-timeout.js");e.exports=function(e){if((e=s(e))>o)throw new TypeError(e+" exceeds maximum possible timeout");return e}},"./application.jsx":function(e,t,n){"use strict";function s(e){for(;e&&"A"!==e.tagName;)e=e.parentNode;return e}var o,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i=n("../node_modules/lodash/lodash.js"),a=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/moment/moment.js"),n("../node_modules/react/react.js")),c=(a.PropTypes,n("../../common/src/utils/component-refs.js")),l=(n("../../common/src/errors/http-error.js"),n("../../common/src/routing/cors-rewriter.js")),d=(n("../../common/src/objects/finders/system-finder.js"),n("../../common/src/data/remote-data-source/index.jsx")),u=n("../../common/src/data/database.js"),p=n("../../common/src/routing/route-manager.jsx"),m=n("../../common/src/routing/route.js"),h=n("../../common/src/transport/payload-manager.jsx"),f=n("../../common/src/transport/payloads.js"),g=n("../../common/src/transport/connectivity-monitor.jsx"),v=n("../../common/src/locale/locale-manager.jsx"),b=n("../../common/src/locale/locale.js"),y=n("../../common/src/theme/theme-manager.jsx"),j=n("../../common/src/theme/theme.js"),x=n("../../common/src/data/subscription-manager.jsx"),w=n("../../common/src/data/session-manager.jsx"),k=n("../../common/src/routing/link-manager.jsx"),_=n("./pages/start-page.jsx"),E=n("./pages/news-page.jsx"),C=n("./pages/people-page.jsx"),S=n("./pages/notifications-page.jsx"),R=n("./pages/bookmarks-page.jsx"),N=n("./pages/settings-page.jsx"),O=n("./pages/error-page.jsx"),T=n("./widgets/top-navigation.jsx"),P=n("./widgets/bottom-navigation.jsx"),D=n("../../common/src/widgets/upload-progress.jsx"),U=n("./views/notification-view.jsx"),A=n("../../common/src/data/indexed-db-cache.jsx"),I=n("../../common/src/data/local-storage-cache.jsx");A.isAvailable()?o=A:I.isAvailable()&&(o=I);var L=n("../../common/src/transport/websocket-notifier.jsx"),M=L||null,B=n("./keys.js"),z=[_,E,C,S,R,N,O];n("../../common/src/utils/lodash-extra.js"),n("./application.scss"),n("../node_modules/font-awesome-webpack/index.js"),e.exports=a.createClass({displayName:"Application",getInitialState:function(){return this.components=c({remoteDataSource:d,routeManager:p,localeManager:v,themeManager:y,payloadManager:h,subscriptionManager:x,sessionManager:w,linkManager:k,cache:o,notifier:M}),{database:null,payloads:null,route:null,locale:null,theme:null,canAccessServer:!1,canAccessSchema:!1,connection:null,searching:!1,inForeground:!0,sleepTime:null,pageKey:0,pushRelay:null,renderingStartPage:!1,showingUploadProgress:!1,online:!0,networkType:"unknown"}},isReady:function(){return!!(this.state.database&&this.state.payloads&&this.state.route&&this.state.locale&&this.state.theme)},isShowingStartPage:function(){return this.state.route.component===_||this.state.route.component!==O&&(!this.state.canAccessServer||!this.state.canAccessSchema)},render:function(){return a.createElement("div",{onClick:this.handleClick},this.renderUserInterface(),this.renderConfiguration())},renderUserInterface:function(){if(!this.isReady())return null;var e=this.state.route.component.configureUI(this.state.route),t={settings:e,database:this.state.database,payloads:this.state.payloads,online:this.state.online,connected:!!this.state.connection||void 0,searching:this.state.searching,route:this.state.route,locale:this.state.locale,theme:this.state.theme},n={settings:e,hasAccess:this.state.canAccessServer&&this.state.canAccessSchema,database:this.state.database,route:this.state.route,locale:this.state.locale,theme:this.state.theme};this.isShowingStartPage()&&(i.set(e,"navigation.top",!1),i.set(e,"navigation.bottom",!1));var s="application "+this.state.theme.mode;return this.state.theme.keyboard&&(s+=" keyboard"),this.state.theme.touch||(s+=" no-touch"),a.createElement("div",{className:s,id:"application"},a.createElement(T,t),a.createElement("section",{className:"page-view-port"},this.renderCurrentPage()),a.createElement(P,n),this.renderStartPage(),this.renderUploadProgress())},renderCurrentPage:function(){var e=this.state.route.component;if(this.isShowingStartPage())return null;var t={database:this.state.database,route:this.state.route,payloads:this.state.payloads,locale:this.state.locale,theme:this.state.theme};return a.createElement(e,r({key:this.state.pageKey},t))},renderStartPage:function(){if(!this.isShowingStartPage()&&!this.state.renderingStartPage)return null;var e={canAccessServer:this.state.canAccessServer,canAccessSchema:this.state.canAccessSchema,database:this.state.database,route:this.state.route,locale:this.state.locale,theme:this.state.theme,onEntry:this.handleStartPageEntry,onExit:this.handleStartPageExit,onAvailableSchemas:this.handleAvailableSchemas};return a.createElement(_,e)},renderConfiguration:function(){var e=this.components.setters,t=this.state.route,s=t?t.parameters.address:null,c=t?t.parameters.schema:null,l={ref:e.remoteDataSource,inForeground:this.state.inForeground,online:this.state.online,connected:!!this.state.connection||void 0,discoveryFlags:{include_uncommitted:!0},onChange:this.handleDatabaseChange,onSearch:this.handleDatabaseSearch,onAuthorization:this.handleAuthorization,onExpiration:this.handleExpiration,onViolation:this.handleViolation,onStupefaction:this.handleStupefaction},u={ref:e.payloadManager,online:this.state.online,database:this.state.database,route:this.state.route,onChange:this.handlePayloadsChange},m={ref:e.routeManager,pages:z,database:this.state.database,rewrite:this.rewriteURL,onChange:this.handleRouteChange,onRedirectionRequest:this.handleRedirectionRequest},f={ref:e.localeManager,database:this.state.database,directory:n("../../common/src/languages.js"),onChange:this.handleLocaleChange},b={ref:e.themeManager,database:this.state.database,modes:{"single-col":0,"double-col":700,"triple-col":1300},networkType:this.state.networkType,serverAddress:s,onChange:this.handleThemeChange},j={ref:e.cache,databaseName:"trambar"},_={inForeground:this.state.inForeground,onChange:this.handleConnectivityChange},E={ref:e.notifier,serverAddress:s,online:this.state.online,onConnect:this.handleConnection,onDisconnect:this.handleDisconnection,onNotify:this.handleChangeNotification,onAlertClick:this.handleAlertClick};M===L?i.assign(E,{locale:this.state.locale,defaultProfileImage:n("../assets/profile-image-placeholder.png")}):null===M&&(i.assign(E,{android:{icon:"push",iconColor:"#fca326"}}),this.state.pushRelay&&i.assign(E,{relayAddress:this.state.pushRelay.url,searching:this.state.searching})),c&&this.state.canAccessSchema||(c="global");var C={ref:e.subscriptionManager,area:"client",connection:this.state.connection||null,schema:c,database:this.state.database,locale:this.state.locale},S={ref:e.sessionManager,database:this.state.database},R={ref:e.linkManager,hasAccess:this.state.canAccessServer||this.state.canAccessSchema,database:this.state.database,route:this.state.route};this.state.inForeground,B.codePushDeployment;return a.createElement("div",null,a.createElement(o,j),a.createElement(M,E),a.createElement(d,r({},l,{cache:this.components.cache})),a.createElement(h,u),a.createElement(p,m),a.createElement(v,f),a.createElement(y,b),a.createElement(x,C),a.createElement(w,S),a.createElement(k,R),a.createElement(g,_),null)},renderUploadProgress:function(){if(!this.state.showingUploadProgress)return null;var e={payloads:this.state.payloads,locale:this.state.locale};return a.createElement(D,e)},componentDidMount:function(){window.addEventListener("beforeunload",this.handleBeforeUnload),document.addEventListener("visibilitychange",this.handleVisibilityChange)},componentDidUpdate:function(e,t){var n=this;!this.splashScreenHidden&&this.isReady()&&(this.splashScreenHidden=!0,setTimeout(function(){n.hideSplashScreen()},100))},componentWillUnmount:function(){window.removeEventListener("beforeunload",this.handleBeforeUnload),document.removeEventListener("visibilitychange",this.handleVisibilityChange)},discoverPushRelay:function(){return},rewriteURL:function(e,t,n){"parse"===n?l.extract(e,t):(this.state.route&&(t=i.defaults(t,this.state.route.parameters)),l.insert(e,t))},handleDatabaseChange:function(e){var t;this.state.route&&(t={address:this.state.route.parameters.address,schema:this.state.route.parameters.schema});var n=new u(e.target,t,this.state.online);this.setState({database:n})},handleDatabaseSearch:function(e){this.setState({searching:e.searching})},handleAuthorization:function(e){this.components.sessionManager.saveToCache(e.session);var t=this.state.route.parameters.address;e.session.address===t&&this.setState({canAccessServer:!0,canAccessSchema:!0})},handleExpiration:function(e){this.components.sessionManager.removeFromCache(e.session),this.components.linkManager.removeLocations(e.session.address);var t=this.state.route.parameters.address;e.session.address===t&&this.setState({canAccessServer:!1,canAccessSchema:!1})},handleViolation:function(e){var t=this.state.route.parameters.address,n=this.state.route.parameters.schema;e.address===t&&e.schema===n&&this.setState({canAccessSchema:!1})},handleStupefaction:function(e){var t=this.state.route,n=t.url,s=t.parameters.schema;s&&"project"===e.query.table&&e.query.criteria.name===s&&(s=null);var o=t.find(O,{code:404,schema:s});t.change(o,!0,n)},handlePayloadsChange:function(e){var t=new f(e.target),n=this.state.showingUploadProgress;t.uploading||(n=!1),this.setState({payloads:t,showingUploadProgress:n})},handleLocaleChange:function(e){var t=new b(e.target);this.setState({locale:t}),document.title=t.translate("app-name")},handleRouteChange:function(e){var t=this,n=new m(e.target),s=this.components.remoteDataSource,o=this.state.route,r=this.state.pageKey;m.compare(o,n)||r++;var i=this.state.database,a=n.parameters.address;if(a!=i.context.address&&(i=new u(s,{address:a},this.state.online)),this.state.route)if(a!=i.context.address)s.abandon(a);else{var c=this.state.route.parameters.schema,l=n.parameters.schema;c!==l&&s.abandon(a,c)}var d=function(e){t.setState({route:n,database:i,pageKey:r,canAccessServer:e,canAccessSchema:e},function(){if(e&&null===M&&t.discoverPushRelay(),t.scrollBoxNode){var n=document.activeElement;n&&n!==document.body||t.scrollBoxNode.focus()}})};i.hasAuthorization()?d(!0):this.components.sessionManager.loadFromCache(a).then(function(e){e&&i.restoreSession(e),d(i.hasAuthorization(a)?!0:!1)})},handleAvailableSchemas:function(e){var t=this.state.route.parameters.schema;i.includes(e.schemas,t)&&this.setState({canAccessSchema:!0})},handleStartPageEntry:function(e){this.setState({renderingStartPage:!0})},handleStartPageExit:function(e){this.setState({renderingStartPage:!1})},handleRedirectionRequest:function(e){var t=e.target,n=e.url,s=e.replacing,o=t.find(O,{code:404});return t.change(o,s,n)},handleClick:function(e){if(0===e.button){var t=s(e.target);if(t&&!t.target&&!t.download){var n=t.getAttribute("href")||t.getAttribute("data-url");n&&-1===n.indexOf(":")&&(this.state.route.change(n),e.preventDefault(),t.blur())}}},handleThemeChange:function(e){var t=new j(e.target);this.setState({theme:t})},handleConnection:function(e){this.setState({connection:e.connection})},handleDisconnection:function(e){var t=this;this.setState({connection:!1},function(){t.components.remoteDataSource.invalidate()})},handleChangeNotification:function(e){this.components.remoteDataSource.invalidate(e.changes)},handleAlertClick:function(e){var t=e.alert,n={id:t.notification_id,type:t.type,user_id:t.user_id,reaction_id:t.reaction_id,story_id:t.story_id},s=U.getNotificationURL(n,this.state.route),o=U.getNotificationTarget(n);if(o){var r=document.createElement("A");r.href=s,r.target=o,r.click()}else this.state.route.change(s),window.focus();var i=this.state.route.parameters,a=this.state.database.use({schema:i.schema,by:this});a.start().then(function(e){var n={id:t.notification_id,seen:!0};return a.saveOne({table:"notification"},n)})},handleBeforeUnload:function(e){if(this.state.payloads&&this.state.payloads.uploading)return this.setState({showingUploadProgress:!0}),e.returnValue="Are you sure?"},handlePause:function(e){},handleResume:function(e){},handleVisibilityChange:function(e){this.setState({inForeground:!document.hidden})},handleConnectivityChange:function(e){var t={online:e.online,networkType:e.type},n=this.state.database;n&&(t.database=new u(n.remoteDataSource,n.context,e.online)),this.setState(t)},handleDebugKeydown:function(e){},hideSplashScreen:function(){var e=document.getElementById("splash-screen"),t=document.getElementById("splash-screen-style");e&&(e.className="transition-out",setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t)},1e3))}})},"./application.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./application.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/app-component-dialog-box.jsx":function(e,t,n){"use strict";var s=n("../node_modules/react/react.js"),o=s.PropTypes,r=n("../node_modules/mark-gor/react.js"),i=n("../../common/src/locale/locale.js"),a=n("../../common/src/theme/theme.js"),c=n("../../common/src/widgets/overlay.jsx"),l=n("./widgets/push-button.jsx"),d=n("../../common/src/widgets/resource-view.jsx");n("./dialogs/app-component-dialog-box.scss"),e.exports=s.createClass({displayName:"AppComponentDialogBox",propTypes:{show:o.bool,component:o.object.isRequired,locale:o.instanceOf(i).isRequired,theme:o.instanceOf(a).isRequired,onClose:o.func},render:function(){if(!this.props.component)return null;var e={show:this.props.show,onBackgroundClick:this.props.onClose};return s.createElement(c,e,s.createElement("div",{className:"app-component-dialog-box"},s.createElement("div",{className:"contents"},this.renderPicture(),this.renderText()),this.renderButtons()))},renderPicture:function(){var e=this.props.component;if(e.image)return s.createElement("div",{className:"picture"},s.createElement(d,{resource:e.image,height:48,theme:this.props.theme}));var t=e.icon||{},n=t.class||"fa-cubes",o={color:t.color,backgroundColor:t.backgroundColor};return s.createElement("div",{className:"picture"},s.createElement("div",{className:"icon",style:o},s.createElement("i",{className:"fa fa-fw "+n})))},renderText:function(){var e=this.props.locale.pick,t=e(this.props.component.text),n=r.parse(t);return s.createElement("div",{className:"text"},n)},renderButtons:function(){var e=this.props.locale.translate,t={label:e("app-component-close"),emphasized:!0,onClick:this.props.onClose};return s.createElement("div",{className:"buttons"},s.createElement(l,t))}})},"./dialogs/app-component-dialog-box.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/app-component-dialog-box.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/audio-capture-dialog-box-browser.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/bluebird/js/browser/bluebird.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../../common/src/media/media-stream-utils.js"),c=n("../../common/src/transport/payloads.js"),l=n("../../common/src/locale/locale.js"),d=n("../../common/src/mixins/update-check.js"),u=n("../../common/src/widgets/overlay.jsx"),p=n("./widgets/push-button.jsx"),m=n("./widgets/device-placeholder.jsx"),h=n("./widgets/duration-indicator.jsx");n("./dialogs/audio-capture-dialog-box-browser.scss"),e.exports=r.createClass({displayName:"AudioCaptureDialogBox",mixins:[d],propTypes:{show:i.bool,payloads:i.instanceOf(c).isRequired,locale:i.instanceOf(l).isRequired,onCancel:i.func,onCapturePending:i.func,onCaptureError:i.func,onCapture:i.func},statics:{isAvailable:function(){return!!a.hasSupport()&&("function"==typeof MediaRecorder&&"function"==typeof AudioContext)}},getInitialState:function(){return{liveAudioStream:null,liveAudioContext:null,liveAudioProcessor:null,liveAudioSource:null,liveAudioLevel:0,liveAudioError:null,liveAudioRecorder:null,mediaRecorder:null,capturedAudio:null,previewURL:null,startTime:null,duration:0}},componentWillMount:function(){this.props.show&&this.initializeMicrophone()},componentWillReceiveProps:function(e){var t=this;this.props.show!==e.show&&(e.show?(this.clearCapturedAudio(),this.initializeMicrophone()):setTimeout(function(){t.shutdownMicrophone(),t.clearCapturedAudio()},500))},clearCapturedAudio:function(){this.state.capturedAudio&&(URL.revokeObjectURL(this.state.previewURL),this.setState({capturedAudio:null,previewURL:null}))},initializeMicrophone:function(){var e=this;this.createLiveAudioStream().then(function(t){e.setLiveAudioState(null,t)}).catch(function(t){e.setLiveAudioState(t,null)})},shutdownMicrophone:function(){var e=this;this.destroyLiveAudioStream().then(function(){e.setLiveAudioState(null,null)})},setLiveAudioState:function(e,t){var n=this;this.state.liveAudioProcessor&&(this.state.liveAudioSource.disconnect(this.state.liveAudioProcessor),this.state.liveAudioProcessor.disconnect(this.state.liveAudioContext.destination));var s,o,r;if(t){var s=new AudioContext,o=s.createScriptProcessor(4096,1,1),r=s.createMediaStreamSource(t);o.addEventListener("audioprocess",function(e){for(var t=e.inputBuffer.getChannelData(0),s=0,o=t.length,r=0;r<o;r++){var i=t[r];i>s&&(s=i)}var a=Math.round(100*s);a!==n.state.liveAudioLevel&&n.setState({liveAudioLevel:a})}),r.connect(o),o.connect(s.destination)}this.setState({liveAudioStream:t,liveAudioContext:s,liveAudioProcessor:o,liveAudioSource:r,liveAudioError:e}),e&&console.error(e)},setLiveAudioNode:function(e){this.audioNode=e,this.audioNode&&(this.audioNode.srcObject=this.state.liveAudioStream)},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCancelClick};return r.createElement(u,e,r.createElement("div",{className:"audio-capture-dialog-box"},r.createElement("div",{className:"container"},this.renderView()),r.createElement("div",{className:"controls"},this.renderDuration(),this.renderButtons())))},renderView:function(){return this.state.capturedAudio?this.renderCapturedAudio():this.state.liveAudioStream?this.renderLiveAudio():this.renderPlaceholder()},renderPlaceholder:function(){var e={blocked:!!this.state.liveAudioError,icon:"microphone"};return r.createElement(m,e)},renderLiveAudio:function(){var e,t={ref:this.setLiveAudioNode,autoPlay:!0,muted:!0},n=this.state.liveAudioLevel;return e=n<10?"volume-off":n<50?"volume-down":"volume-up",r.createElement("div",null,r.createElement("div",{className:"volume-meter"},r.createElement("div",{className:"icon"},r.createElement("i",{className:"fa fa-"+e})),r.createElement("div",{className:"bar-container"},r.createElement("div",{className:"bar"},r.createElement("div",{className:"fill",style:{width:n+"%"}})))),r.createElement("audio",t))},renderCapturedAudio:function(){var e={src:this.state.previewURL,controls:!0};return r.createElement("audio",e)},renderDuration:function(){if(!this.state.mediaRecorder)return null;var e={duration:this.state.duration,startTime:this.state.startTime};return r.createElement(h,e)},renderButtons:function(){var e=this.props.locale.translate;if(this.state.mediaRecorder){var t="paused"===this.state.mediaRecorder.state,n={label:e("audio-capture-pause"),onClick:this.handlePauseClick,hidden:t},s={label:e("audio-capture-resume"),onClick:this.handleResumeClick,hidden:!t,emphasized:!0},o={label:e("audio-capture-stop"),onClick:this.handleStopClick,emphasized:!t};return r.createElement("div",{className:"buttons"},r.createElement(p,n),r.createElement(p,s),r.createElement(p,o))}if(this.state.capturedAudio){var i={label:e("audio-capture-rerecord"),onClick:this.handleRerecordClick},a={label:e("audio-capture-accept"),onClick:this.handleAcceptClick,emphasized:!0};return r.createElement("div",{className:"buttons"},r.createElement(p,i),r.createElement(p,a))}var c={label:e("audio-capture-cancel"),onClick:this.handleCancelClick},l={label:e("audio-capture-start"),onClick:this.handleStartClick,disabled:!this.state.liveAudioStream,emphasized:!0};return r.createElement("div",{className:"buttons"},r.createElement(p,c),r.createElement(p,l))},componentWillUnmount:function(){this.destroyLiveAudioStream()},createLiveAudioStream:function(){return this.audioStreamPromise||(this.audioStreamPromise=a.getAudioStream()),this.audioStreamPromise},destroyLiveAudioStream:function(){if(!this.audioStreamPromise)return o.resolve();var e=this.audioStreamPromise;return this.audioStreamPromise=null,e.then(function(e){a.stopAllTracks(e)})},beginRecording:function(){var e=this;return o.try(function(){var t={audioBitsPerSecond:128e3,mimeType:"audio/webm"},n=new MediaRecorder(e.state.liveAudioStream,t),s=e.props.payloads.stream();return n.promise=new o(function(e,t){n.resolve=e,n.reject=t}),n.outputStream=s,n.addEventListener("dataavailable",function(e){this.outputStream.push(e.data)}),n.addEventListener("stop",function(e){this.outputStream.close(),n.resolve()}),n.start(3e3),s.start(),n})},pauseRecording:function(){var e=this;return o.try(function(){var t=e.state.mediaRecorder;t&&t.pause()})},resumeRecording:function(){var e=this;return o.try(function(){var t=e.state.mediaRecorder;t&&t.resume()})},endRecording:function(){var e=this;return o.try(function(){var t=e.state.mediaRecorder;if(t)return t.stop(),t.promise})},triggerCaptureEvent:function(e){this.props.onCapture&&this.props.onCapture({type:"capture",target:this,resource:e})},triggerCloseEvent:function(){this.props.onClose&&this.props.onClose({type:"close",target:this})},handleStartClick:function(e){var t=this;return this.beginRecording().then(function(e){return t.props.payloads.stream(e.outputStream),t.setState({mediaRecorder:e,startTime:new Date,duration:0}),null})},handlePauseClick:function(e){var t=this;return this.pauseRecording().then(function(){var e=new Date,n=e-t.state.startTime,s=t.state.duration+n;t.setState({duration:s,startTime:null})})},handleResumeClick:function(e){var t=this;return this.resumeRecording().then(function(){var e=new Date;t.setState({startTime:e})})},handleStopClick:function(e){var t=this;return this.endRecording().then(function(){var e=t.state.mediaRecorder,n=e.outputStream.toBlob(),o=URL.createObjectURL(n),r=0;if(t.state.startTime){r=new Date-t.state.startTime}var i={format:s.last(s.split(e.mimeType,"/")),audioBitsPerSecond:e.audioBitsPerSecond,stream:e.outputStream,duration:t.state.duration+r};t.setState({capturedAudio:i,previewURL:o,mediaRecorder:null})})},handleRerecordClick:function(e){this.clearCapturedAudio()},handleAcceptClick:function(e){var t=this.state.capturedAudio,n=this.props.payloads.add("audio");n.attachStream(t.stream);var s={type:"audio",payload_token:n.token,duration:t.duration,format:t.format,bitrates:{audio:t.audioBitsPerSecond}};this.triggerCloseEvent(),this.triggerCaptureEvent(s)},handleCancelClick:function(e){this.triggerCloseEvent()}})},"./dialogs/audio-capture-dialog-box-browser.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/audio-capture-dialog-box-browser.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/audio-capture-dialog-box.jsx":function(e,t,n){"use strict";e.exports=n("./dialogs/audio-capture-dialog-box-browser.jsx")},"./dialogs/confirmation-dialog-box.jsx":function(e,t,n){"use strict";var s=n("../node_modules/react/react.js"),o=s.PropTypes,r=n("../../common/src/locale/locale.js"),i=n("../../common/src/widgets/overlay.jsx"),a=n("./widgets/push-button.jsx");n("./dialogs/confirmation-dialog-box.scss"),e.exports=s.createClass({displayName:"ConfirmationDialogBox",propTypes:{show:o.bool,locale:o.instanceOf(r).isRequired,onClose:o.func,onConfirm:o.func},render:function(){var e={show:this.props.show,onBackgroundClick:this.props.onClose};return s.createElement(i,e,s.createElement("div",{className:"confirmation-dialog-box"},this.renderMessage(),this.renderButtons()))},renderMessage:function(){return s.createElement("div",{className:"message"},this.props.children)},renderButtons:function(){var e=this.props.locale.translate,t={label:e("confirmation-cancel"),onClick:this.props.onClose,hidden:!this.props.onClose},n={label:e("confirmation-confirm"),onClick:this.props.onConfirm,hidden:!this.props.onConfirm,emphasized:!0};return s.createElement("div",{className:"buttons"},s.createElement(a,t),s.createElement(a,n))}})},"./dialogs/confirmation-dialog-box.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/confirmation-dialog-box.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/issue-dialog-box.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),i=r.PropTypes,a=n("../../common/src/utils/component-refs.js"),c=n("../../common/src/utils/tag-scanner.js"),l=n("../../common/src/locale/locale.js"),d=n("../../common/src/theme/theme.js"),u=n("../../common/src/mixins/update-check.js"),p=n("../../common/src/widgets/overlay.jsx"),m=n("./widgets/push-button.jsx"),h=n("./widgets/text-field.jsx");n("./dialogs/issue-dialog-box.scss"),e.exports=r.createClass({displayName:"IssueDialogBox",mixins:[u],propTypes:{show:i.bool,allowDeletion:i.bool.isRequired,story:i.object.isRequired,repos:i.arrayOf(i.object),issue:i.object,locale:i.instanceOf(l).isRequired,theme:i.instanceOf(d).isRequired,onConfirm:i.func,onClose:i.func},getInitialState:function(){return this.components=a({textField:h}),{issue:this.props.issue?null:this.getDefaultIssue()}},getIssueProperty:function(e){var t=this.state.issue||this.props.issue||{};return o.get(t,e)},setIssueProperty:function(e,t){var n=this.state.issue||this.props.issue||{};n=o.decoupleSet(n,e,t),"repo_id"===e&&(f=t),this.setState({issue:n})},getDefaultIssue:function(){var e=this,t=this.props.locale.translate,n=t(this.props.story.details.text),s=o.split(o.trim(n),/[\r\n]+/),r=c.removeTags(s[0]),i="";r.length<100&&(i=r);var a=o.uniq(o.flatten(o.map(this.props.repos,"details.labels"))),l=o.filter(a,function(t){var n="#"+o.replace(t,/\s+/g,"-");return o.includes(e.props.story.tags,n)});return!i&&o.isEmpty(l)?null:{title:i,labels:l}},getSelectedRepo:function(){var e=this.getIssueProperty("repo_id"),t=this.getAvailableRepos(),n=o.find(this.props.repos,{id:e});return n||(n=o.find(this.props.repos,{id:f})),n||(n=o.find(this.props.repos,function(e){return!o.isEmpty(e.details.labels)})),n||(n=o.first(t)),n||null},getAvailableRepos:function(){var e=this.props.locale.pick,t=this.props.repos;return t=o.filter(t,function(e){return e.details.issues_enabled}),t=o.sortBy(t,function(t){return o.toLower(e(t.details.title)||t.name)})},componentWillReceiveProps:function(e){if(this.props.show!==e.show&&e.show){var t;e.issue||(t=this.getDefaultIssue()),this.setState({issue:t})}},render:function(){var e={show:this.props.show,onBackgroundClick:this.props.onClose};return r.createElement(p,e,r.createElement("div",{className:"issue-dialog-box"},this.renderForm(),r.createElement("div",{className:"controls"},this.renderButtons())))},renderForm:function(){return r.createElement("div",{className:"container"},r.createElement("div",{className:"top"},this.renderTitleInput(),this.renderRepoSelector()),this.renderLabelSelector())},renderTitleInput:function(){var e=this.props.locale.translate,t=this.components.setters,n={id:"title",ref:t.textField,value:this.getIssueProperty("title"),locale:this.props.locale,onChange:this.handleTitleChange};return r.createElement(h,n,e("issue-title"))},renderRepoSelector:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.getAvailableRepos();if(n.length<=1)return null;var s=this.getSelectedRepo(),i=o.map(n,function(e,n){var s=t(e.details.title)||e.name;return r.createElement("option",{key:n,value:e.id},s)});return r.createElement("div",{className:"select-field"},r.createElement("label",null,e("issue-repo")),r.createElement("select",{value:s.id,onChange:this.handleRepoChange},i))},renderLabelSelector:function(){var e=this,t=this.getSelectedRepo();if(!t)return null;for(var n=this.getIssueProperty("labels")||[],i=t.details.labels,a=t.details.label_colors,c=o.map(i,function(t,i){var c={className:"tag",style:{backgroundColor:a[i]},"data-label":t,onClick:e.handleTagClick};return o.includes(n,t)&&(c.className+=" selected"),r.createElement("span",s({key:i},c),t)}),l=1;l<c.length;l+=2)c.splice(l,0," ");return r.createElement("div",{className:"tags"},c)},renderButtons:function(){var e=this.props.locale.translate,t=this.getSelectedRepo(),n=this.getIssueProperty("title"),s=!!o.trim(n),i=!1;this.props.issue&&(s=!!this.state.issue&&!o.isEqual(this.state.issue,this.props.issue),this.props.issue&&this.props.issue.id&&(i=!0)),this.props.allowDeletion||(i=!1);var a={label:e("issue-delete"),emphasized:!1,hidden:!i,onClick:this.handleDeleteClick},c={label:e("issue-cancel"),emphasized:!1,onClick:this.handleCancelClick},l={label:e("issue-ok"),emphasized:!0,disabled:!s||!t,onClick:this.handleOKClick};return r.createElement("div",{className:"buttons"},r.createElement("div",{className:"left"},r.createElement(m,a)),r.createElement("div",{className:"right"},r.createElement(m,c),r.createElement(m,l)))},componentDidMount:function(){this.getIssueProperty("title")||this.components.textField.focus()},handleDeleteClick:function(e){this.props.onConfirm&&this.props.onConfirm({type:"confirm",target:this,issue:null})},handleCancelClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})},handleOKClick:function(e){var t=(this.props.story,o.clone(this.state.issue)),n=this.getSelectedRepo();t.repo_id=n.id,t.labels=o.intersection(t.labels,n.details.labels),this.props.onConfirm&&this.props.onConfirm({type:"close",target:this,issue:t})},handleTitleChange:function(e){var t=e.target.value;this.setIssueProperty("title",t)},handleRepoChange:function(e){var t=parseInt(e.target.value);this.setIssueProperty("repo_id",t)},handleTagClick:function(e){var t=e.target.getAttribute("data-label"),n=this.getIssueProperty("labels")||[];n=o.includes(n,t)?o.difference(n,[t]):o.union(n,[t]),this.setIssueProperty("labels",n)}});var f},"./dialogs/issue-dialog-box.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/issue-dialog-box.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/media-dialog-box.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/bluebird/js/browser/bluebird.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../node_modules/hammerjs/hammer.js"),l=n("../../common/src/locale/locale.js"),d=n("../../common/src/theme/theme.js"),u=n("../../common/src/widgets/overlay.jsx"),p=n("./widgets/push-button.jsx"),m=n("../../common/src/widgets/resource-view.jsx");n("./dialogs/media-dialog-box.scss"),e.exports=i.createClass({displayName:"MediaDialogBox",propTypes:{show:a.bool,resources:a.arrayOf(a.object).isRequired,selectedIndex:a.number.isRequired,locale:a.instanceOf(l).isRequired,theme:a.instanceOf(d).isRequired,onClose:a.func},getInitialState:function(){return{selectedIndex:this.props.selectedIndex}},getResourceCount:function(){return this.props.resources.length},getSelectedResourceIndex:function(){var e=this.getResourceCount()-1;return o.min([this.state.selectedIndex,e])},selectResource:function(e){var t=this;return new r(function(n,s){var o=t.getResourceCount();e>=0&&e<o?t.setState({selectedIndex:e},function(){n(e)}):n(t.getSelectedResourceIndex())})},addListeners:function(){document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("mousewheel",this.handleMouseWheel),this.hammer=new c(document.body),this.hammer.on("swipeleft",this.handleSwipeLeft),this.hammer.on("swiperight",this.handleSwipeRight)},removeListeners:function(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mousewheel",this.handleMouseWheel),this.hammer&&(this.hammer.off("swipeleft",this.handleSwipeLeft),this.hammer.off("swiperight",this.handleSwipeRight),this.hammer.element.style.touchAction="",this.hammer.destroy(),this.hammer=null)},componentWillMount:function(){this.props.show&&this.addListeners()},componentWillReceiveProps:function(e){if(this.props.show!==e.show)if(e.show)this.setState({selectedIndex:e.selectedIndex}),this.addListeners();else{var t=this.refs.video;t&&t.pause(),this.removeListeners()}},render:function(){var e={show:this.props.show,onBackgroundClick:this.props.onClose};return i.createElement(u,e,i.createElement("div",{className:"media-dialog-box"},this.renderView(),i.createElement("div",{className:"controls"},this.renderThumbnails(),this.renderButtons())))},renderView:function(){var e=this,t=this.getSelectedResourceIndex(),n=this.props.resources[t];if(n){var s=document.body.parentNode,r=s.clientWidth,a=s.clientHeight;"single-col"===this.props.theme.mode?(r-=10,a-=100):(r-=100,a-=200);var c,l,d=r/a;o.each(this.props.resources,function(t){var n=e.props.theme.getDimensions(t,{clip:null});c>=n.width||(c=n.width),l>=n.height||(l=n.height)});var u=c/l;d>u?l>a&&(l=a,c=Math.round(l*u)):c>r&&(c=r,l=Math.round(c/u));var p,m={width:c,height:l};switch(n.type){case"image":p=this.renderImage(n,c,l);break;case"video":p=this.renderVideo(n,c,l)}return i.createElement("div",{className:"container",style:m},p)}},renderImage:function(e,t,n){var s={key:this.getSelectedResourceIndex(),resource:e,width:e.width,height:e.height,theme:this.props.theme,clip:!1,animation:!0};return s.width>t&&(s.height=Math.round(t*(s.height/s.width)),s.width=t),s.height>n&&(s.width=Math.round(n*(s.width/s.height)),s.height=n),i.createElement(m,s)},renderVideo:function(e){var t=this.props.theme,n=t.getVideoURL(e),s=t.getDimensions(e,{clip:null}),o=t.getImageURL(e,{width:s.width,height:s.height,clip:null,quality:60}),r={ref:"video",src:n,controls:!0,autoPlay:!0,poster:o};return i.createElement("video",r)},renderThumbnails:function(e){var t=this,n=this.getSelectedResourceIndex(),r=o.map(this.props.resources,function(e,o){var r={className:"thumbnail","data-index":o,onClick:t.handleThumbnailClick};o===n&&(r.className+=" selected");var a={resource:e,theme:t.props.theme,width:28,height:28};return i.createElement("div",s({key:o},r),i.createElement(m,a))});return i.createElement("div",{className:"links"},r)},renderButtons:function(){var e=this.props.locale.translate,t={label:e("media-download-original"),emphasized:!1,hidden:"single-col"===this.props.theme.mode,onClick:this.handleDownloadClick},n={label:e("media-close"),emphasized:!0,onClick:this.props.onClose};return i.createElement("div",{className:"buttons"},i.createElement(p,t),i.createElement(p,n))},componentWillUnmount:function(){this.removeListeners()},handleThumbnailClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-index"));return this.selectResource(t)},handleDownloadClick:function(e){var t=this.getSelectedResourceIndex(),n=this.props.resources[t];if(n){var s,o=document.createElement("A"),r=this.props.theme;switch(n.type){case"image":s=r.getImageURL(n,{original:!0});break;case"video":s=r.getVideoURL(n,{original:!0})}o.href=s,o.download=n.filename||!0,o.click()}},changeSelection:function(e){if(e){var t=this.getResourceCount(),n=this.getSelectedResourceIndex()+e;n>=t?n=0:n<0&&(n=t-1),this.selectResource(n)}},handleKeyDown:function(e){var t=0;if(39===e.keyCode)t=1;else{if(37!=e.keyCode)return;t=-1}this.changeSelection(t),e.preventDefault()},handleMouseWheel:function(e){var t,n=0;if((t=Math.abs(e.deltaX)>=Math.abs(e.deltaY)?e.deltaX:e.deltaY)>0)n=1;else{if(!(t<0))return;n=-1}this.changeSelection(n),e.preventDefault()},handleSwipeLeft:function(e){this.changeSelection(-1)},handleSwipeRight:function(e){this.changeSelection(1)}})},"./dialogs/media-dialog-box.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/media-dialog-box.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/membership-request-dialog-box.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=(n("../node_modules/relaks/index.js"),n("../../common/src/objects/utils/user-utils.js")),a=n("../../common/src/locale/locale.js"),c=n("../../common/src/theme/theme.js"),l=n("../../common/src/widgets/overlay.jsx"),d=n("./widgets/push-button.jsx"),u=n("../../common/src/widgets/resource-view.jsx"),p=n("./widgets/scrollable.jsx"),m=n("../../common/src/widgets/collapsible-container.jsx");n("./dialogs/membership-request-dialog-box.scss"),e.exports=o.createClass({displayName:"MembershipRequestDialogBox",propTypes:{show:r.bool,currentUser:r.object.isRequired,project:r.object.isRequired,locale:r.instanceOf(a).isRequired,theme:r.instanceOf(c).isRequired,onConfirm:r.func,onRevoke:r.func,onClose:r.func,onProceed:r.func},getInitialState:function(){return{userJustJoined:!1}},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCloseClick},t=["membership-request-dialog-box"];return o.createElement(l,e,o.createElement("div",{className:t.join(" ")},this.renderText(),this.renderMessage(),this.renderButtons()))},renderText:function(){var e=this.props.locale.pick,t=this.props.project,n=s.find(t.details.resources,{type:"image"});return o.createElement(p,null,o.createElement("div",{className:"title"},e(t.details.title)||t.name),o.createElement("div",{className:"description"},o.createElement("div",{className:"image"},o.createElement(u,{resource:n,width:160,theme:this.props.theme})),e(t.details.description)))},renderMessage:function(){var e=this.props.locale.translate,t=this.props.locale.name,n=this.props.currentUser,s=this.props.project,r=n?t(n.details.name,n.details.gender):null,a="",c="",l="";return i.isMember(n,s)?(a="accepted",c="user-circle-o",l=this.state.userJustJoined?e("membership-request-$you-are-now-member",r):e("membership-request-$you-are-member",r)):i.isPendingMember(n,s)&&(a="requested",c="clock-o",l=e("membership-request-$you-have-requested-membership",r)),o.createElement(m,{open:!!c},o.createElement("div",{className:"message "+a},o.createElement("i",{className:"fa fa-"+c})," ",l))},renderButtons:function(){var e=this.props.locale.translate,t=this.props.currentUser,n=this.props.project;if(i.isMember(t,n)){var s={label:e("membership-request-cancel"),onClick:this.handleCloseClick},r={label:e("membership-request-proceed"),onClick:this.handleProceedClick,emphasized:!0};return o.createElement("div",{className:"buttons"},o.createElement(d,s),o.createElement(d,r))}if(i.isPendingMember(t,n)){var s={label:e("membership-request-cancel"),onClick:this.handleCloseClick},a={label:e("membership-request-withdraw"),onClick:this.handleWithdrawClick},c={label:e("membership-request-browse"),onClick:this.handleProceedClick,hidden:!i.canViewProject(t,n),emphasized:!0};return o.createElement("div",{className:"buttons"},o.createElement(d,s),o.createElement(d,a),o.createElement(d,c))}var s={label:e("membership-request-cancel"),onClick:this.handleCloseClick},c={label:e("membership-request-browse"),onClick:this.handleProceedClick,hidden:!i.canViewProject(t,n),emphasized:!i.canJoinProject(t,n)},l={label:e("membership-request-join"),onClick:this.handleJoinClick,hidden:!i.canJoinProject(t,n),emphasized:!0};return o.createElement("div",{className:"buttons"},o.createElement(d,s),o.createElement(d,c),o.createElement(d,l))},handleJoinClick:function(e){this.setState({userJustJoined:!0}),this.props.onConfirm&&this.props.onConfirm({type:"confirm",target:this})},handleWithdrawClick:function(e){this.props.onRevoke&&this.props.onRevoke({type:"revoke",target:this})},handleCloseClick:function(e){this.props.onClose&&this.props.onClose({type:"cancel",target:this})},handleProceedClick:function(e){this.props.onProceed&&this.props.onProceed({type:"proceed",target:this})}})},"./dialogs/membership-request-dialog-box.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/membership-request-dialog-box.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/mobile-setup-dialog-box.jsx":function(e,t,n){"use strict";function s(e){if(!e)return e;var t=e.match(/.{1,4}/g);return _.toUpper(t.join(" "))}var o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../node_modules/relaks/index.js"),a=n("../../common/src/routing/universal-link.js"),c=n("../../common/src/objects/finders/device-finder.js"),l=n("../../common/src/objects/finders/user-finder.js"),d=n("../../common/src/data/database.js"),u=n("../../common/src/routing/route.js"),p=n("../../common/src/locale/locale.js"),m=n("../../common/src/widgets/overlay.jsx"),h=n("./widgets/push-button.jsx"),f=n("./widgets/qr-code.jsx");n("./dialogs/mobile-setup-dialog-box.scss"),e.exports=i.createClass({displayName:"MobileSetupDialogBox.Sync",propTypes:{show:r.bool,system:r.object,database:r.instanceOf(d).isRequired,route:r.instanceOf(u).isRequired,locale:r.instanceOf(p).isRequired,onClose:r.func},renderAsync:function(e){var t=this.props.database.use({by:this}),n={activationCode:null,currentUser:null,devices:null,show:this.props.show,system:this.props.system,route:this.props.route,locale:this.props.locale,onClose:this.props.onClose};return e.show(o.createElement(g,n)),t.start().then(function(e){return l.findUser(t,e).then(function(e){n.currentUser=e})}).then(function(){return t.beginMobileSession("client").then(function(e){n.activationCode=e})}).then(function(){return c.findUserDevices(t,n.currentUser).then(function(e){n.devices=e})}).then(function(){return o.createElement(g,n)})},componentWillUnmount:function(){this.props.database.use({by:this}).releaseMobileSession()}});var g=e.exports.Sync=o.createClass({displayName:"MobileSetupDialogBox.Sync",propTypes:{show:r.bool,activationCode:r.string,devices:r.arrayOf(r.object),currentUser:r.object,route:r.instanceOf(u).isRequired,locale:r.instanceOf(p).isRequired,onClose:r.func},componentWillReceiveProps:function(e){if(this.props.devices!==e.devices){var t=e.activationCode;t&&_.some(e.devices,{session_handle:t})&&this.props.onClose&&this.props.onClose({type:"close",target:this})}},render:function(){var e={show:this.props.show,onBackgroundClick:this.props.onClose};return o.createElement(m,e,o.createElement("div",{className:"mobile-setup-dialog-box"},this.renderContents(),this.renderButtons()))},renderContents:function(){var e,t=this.props.locale.translate,r=(this.props.number,this.props.route),i=_.get(this.props.system,"settings.address");i||(i=r.parameters.address);var c=r.parameters.schema,l=this.props.activationCode;if(l){var d=n("./pages/start-page.jsx"),u=d.getURL({activationCode:l,schema:c});e=a.form(i,u.path,u.query),console.log(e)}return o.createElement("div",{className:"contents"},o.createElement(f,{text:e,scale:6}),o.createElement("div",{className:"info"},o.createElement("div",{className:"label"},t("mobile-setup-address")),o.createElement("div",{className:"value"},i),o.createElement("div",{className:"label"},t("mobile-setup-code")),o.createElement("div",{className:"value"},s(l)),o.createElement("div",{className:"label"},t("mobile-setup-project")),o.createElement("div",{className:"value"},c)))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("mobile-setup-close"),emphasized:!0,onClick:this.props.onClose};return o.createElement("div",{className:"buttons"},o.createElement(h,t))}})},"./dialogs/mobile-setup-dialog-box.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/mobile-setup-dialog-box.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/photo-capture-dialog-box-browser.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/bluebird/js/browser/bluebird.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../../common/src/media/frame-grabber.js"),c=n("../../common/src/media/device-manager.js"),l=n("../../common/src/media/media-stream-utils.js"),d=n("../../common/src/transport/blob-manager.js"),u=n("../../common/src/transport/payloads.js"),p=n("../../common/src/locale/locale.js"),m=n("../../common/src/widgets/overlay.jsx"),h=n("./widgets/push-button.jsx"),f=n("./widgets/device-selector.jsx"),g=n("./widgets/device-placeholder.jsx");n("./dialogs/photo-capture-dialog-box-browser.scss"),e.exports=r.createClass({displayName:"PhotoCaptureDialogBox",propTypes:{show:i.bool,cameraDirection:i.oneOf(["front","back"]),payloads:i.instanceOf(u).isRequired,locale:i.instanceOf(p).isRequired,onClose:i.func,onCapturePending:i.func,onCaptureError:i.func,onCapture:i.func},statics:{isAvailable:function(){return!!l.hasSupport()&&("function"==typeof HTMLCanvasElement.prototype.toBlob||"function"==typeof HTMLCanvasElement.prototype.toDataURL)}},getInitialState:function(){var e=c.getDevices("videoinput"),t=f.choose(e,this.props.cameraDirection);return{liveVideoStream:null,liveVideoError:null,liveVideoWidth:640,liveVideoHeight:480,capturedImage:null,videoDevices:e,selectedDeviceId:t?t.deviceId:null}},componentWillMount:function(){this.props.show&&this.initializeCamera(),c.addEventListener("change",this.handleDeviceChange)},componentWillReceiveProps:function(e){var t=this;this.props.show!==e.show&&(e.show?(this.setState({capturedImage:null}),this.initializeCamera()):setTimeout(function(){t.shutdownCamera(),t.setState({capturedImage:null})},500))},initializeCamera:function(){var e=this;this.createLiveVideoStream().then(function(t){var n=l.getVideoDimensions(t);e.setState({liveVideoStream:t,liveVideoError:null,liveVideoWidth:n.width,liveVideoHeight:n.height})}).catch(function(t){console.error(t),e.setState({liveVideoStream:null,liveVideoError:t})})},shutdownCamera:function(){var e=this;this.destroyLiveVideoStream().then(function(){e.setState({liveVideoStream:null,liveVideoError:null})})},reinitializeCamera:function(){var e=this;this.destroyLiveVideoStream().then(function(){e.initializeCamera()})},setLiveVideoNode:function(e){var t=this;this.videoNode=e,this.videoNode&&(this.videoNode.srcObject=this.state.liveVideoStream,this.videoNode.play(),l.getActualVideoDimensions(e,function(e){t.state.liveVideoWidth===e.width&&t.state.liveVideoHeight===e.height||t.setState({liveVideoWidth:e.width,liveVideoHeight:e.height})}))},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCancelClick};return r.createElement(m,e,r.createElement("div",{className:"photo-capture-dialog-box"},r.createElement("div",{className:"container"},this.renderView()),r.createElement("div",{className:"controls"},this.renderDeviceSelector(),this.renderButtons())))},renderView:function(){return this.state.capturedImage?this.renderCapturedImage():this.state.liveVideoStream?this.renderLiveVideo():this.renderPlaceholder()},renderPlaceholder:function(){var e={blocked:!!this.state.liveVideoError,icon:"camera"};return r.createElement(g,e)},renderLiveVideo:function(){var e={ref:this.setLiveVideoNode,className:"live-video",muted:!0};return r.createElement("div",null,this.renderSpacer(),r.createElement("video",e))},renderSpacer:function(){var e={className:"spacer",width:this.state.liveVideoWidth,height:this.state.liveVideoHeight};return r.createElement("canvas",e)},renderCapturedImage:function(){var e={className:"preview",src:this.state.capturedImage.url};return r.createElement("div",null,this.renderSpacer(),r.createElement("img",e))},renderDeviceSelector:function(){if(this.state.capturedImage)return null;var e={type:"video",devices:this.state.videoDevices,selectedDeviceId:this.state.selectedDeviceId,locale:this.props.locale,onSelect:this.handleDeviceSelect};return r.createElement(f,e)},renderButtons:function(){var e=this.props.locale.translate;if(this.state.capturedImage){var t={label:e("photo-capture-retake"),onClick:this.handleRetakeClick},n={label:e("photo-capture-accept"),onClick:this.handleAcceptClick,emphasized:!0};return r.createElement("div",{className:"buttons"},r.createElement(h,t),r.createElement(h,n))}var s={label:e("photo-capture-cancel"),onClick:this.handleCancelClick},o={label:e("photo-capture-snap"),onClick:this.handleSnapClick,disabled:!this.state.liveVideoStream,emphasized:!0};return r.createElement("div",{className:"buttons"},r.createElement(h,s),r.createElement(h,o))},componentDidUpdate:function(e,t){this.videoNode&&t.liveVideoStream!==this.state.liveVideoStream&&this.setLiveVideoNode(this.videoNode)},componentWillUnmount:function(){this.destroyLiveVideoStream(),c.removeEventListener("change",this.handleDeviceChange)},createLiveVideoStream:function(){return this.videoStreamPromise||(this.videoStreamPromise=l.getSilentVideoStream(this.state.selectedDeviceId)),this.videoStreamPromise},destroyLiveVideoStream:function(){if(!this.videoStreamPromise)return o.resolve();var e=this.videoStreamPromise;return this.videoStreamPromise=null,e.then(function(e){l.stopAllTracks(e)})},captureImage:function(){var e=this.videoNode;return a.capture(e).then(function(t){return{url:d.manage(t),blob:t,width:e.videoWidth,height:e.videoHeight}})},triggerCaptureEvent:function(e){this.props.onCapture&&this.props.onCapture({type:"capture",target:this,resource:e})},triggerCloseEvent:function(){this.props.onClose&&this.props.onClose({type:"close",target:this})},handleSnapClick:function(e){var t=this;this.captureImage().then(function(e){t.setState({capturedImage:e})}).catch(function(e){console.error(e)})},handleRetakeClick:function(e){d.release(this.state.capturedImage.blob),this.setState({capturedImage:null})},handleAcceptClick:function(e){var t=this.state.capturedImage,n=this.props.payloads.add("image");n.attachFile(t.blob);var s=(n.token,{type:"image",payload_token:n.token,width:t.width,height:t.height,format:"jpeg"});this.triggerCloseEvent(!0),this.triggerCaptureEvent(s)},handleCancelClick:function(e){this.triggerCloseEvent(!1)},handleDeviceSelect:function(e){var t=this,n=e.currentTarget.value;this.setState({selectedDeviceId:n},function(){t.reinitializeCamera()})},handleDeviceChange:function(e){var t=this,n=c.getDevices("videoinput"),o=this.state.selectedDeviceId,r=!1;o&&(s.some(n,{deviceId:o})||(o=null,r=!0)),this.setState({videoDevices:n,selectedDeviceId:o},function(){r&&t.reinitializeCamera()})}})},"./dialogs/photo-capture-dialog-box-browser.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/photo-capture-dialog-box-browser.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/photo-capture-dialog-box.jsx":function(e,t,n){"use strict";e.exports=n("./dialogs/photo-capture-dialog-box-browser.jsx")},"./dialogs/project-description-dialog-box.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/locale/locale.js"),a=n("../../common/src/theme/theme.js"),c=n("../../common/src/widgets/overlay.jsx"),l=n("./widgets/push-button.jsx"),d=n("../../common/src/widgets/resource-view.jsx"),u=n("./widgets/scrollable.jsx");n("./dialogs/project-description-dialog-box.scss"),e.exports=o.createClass({displayName:"ProjectDescriptionDialogBox",propTypes:{show:r.bool,project:r.object.isRequired,locale:r.instanceOf(i).isRequired,theme:r.instanceOf(a).isRequired,onClose:r.func},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCloseClick};return o.createElement(c,e,o.createElement("div",{className:"project-description-dialog-box"},this.renderText(),this.renderButtons()))},renderText:function(){var e=this.props.locale.pick,t=this.props.project,n=s.find(t.details.resources,{type:"image"});return o.createElement(u,null,o.createElement("div",{className:"title"},e(t.details.title)||t.name),o.createElement("div",{className:"description"},o.createElement("div",{className:"image"},o.createElement(d,{resource:n,width:160,theme:this.props.theme})),e(t.details.description)))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("project-description-close"),emphasized:!0,onClick:this.handleCloseClick};return o.createElement("div",{className:"buttons"},o.createElement(l,t))},handleCloseClick:function(e){this.props.onClose&&this.props.onClose({type:"cancel",target:this})}})},"./dialogs/project-description-dialog-box.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/project-description-dialog-box.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/project-management-dialog-box.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=(n("../node_modules/relaks/index.js"),n("../../common/src/routing/route.js")),c=n("../../common/src/locale/locale.js"),l=n("../../common/src/widgets/overlay.jsx"),d=n("./widgets/push-button.jsx"),u=n("./widgets/scrollable.jsx"),p=n("./widgets/option-button.jsx");n("./dialogs/project-management-dialog-box.scss"),e.exports=r.createClass({displayName:"ProjectManagementDialogBox",propTypes:{show:i.bool,projectLinks:i.arrayOf(i.object).isRequired,route:i.instanceOf(a).isRequired,locale:i.instanceOf(c).isRequired,onDelete:i.func,onCancel:i.func},getInitialState:function(){return{selection:[]}},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCancelClick};return r.createElement(l,e,r.createElement("div",{className:"project-management-dialog-box"},this.renderList(),this.renderButtons()))},renderList:function(){return r.createElement(u,null,o.map(this.props.projectLinks,this.renderProjectButton))},renderProjectButton:function(e,t){var n=this.props.locale.pick,i={id:e.key,label:n(e.name),iconOn:"times-circle",selected:o.includes(this.state.selection,e.key),onClick:this.handleProjectClick};return r.createElement(p,s({key:t},i))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("project-management-cancel"),onClick:this.handleCancelClick},n={label:e("project-management-remove"),onClick:this.handleRemoveClick,emphasized:!0,disabled:o.isEmpty(this.state.selection)};return r.createElement("div",{className:"buttons"},r.createElement(d,t),r.createElement(d,n))},handleProjectClick:function(e){var t=e.currentTarget.id,n=o.slice(this.state.selection);o.includes(n,t)?o.pull(n,t):n.push(t),this.setState({selection:n})},handleRemoveClick:function(e){this.props.onDelete&&this.props.onDelete({type:"delete",target:this,selection:this.state.selection})},handleCancelClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})}})},"./dialogs/project-management-dialog-box.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/project-management-dialog-box.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/system-description-dialog-box.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/locale/locale.js"),a=n("../../common/src/theme/theme.js"),c=n("../../common/src/widgets/overlay.jsx"),l=n("./widgets/push-button.jsx"),d=n("./widgets/scrollable.jsx");n("./dialogs/system-description-dialog-box.scss"),e.exports=o.createClass({displayName:"SystemDescriptionDialogBox",propTypes:{show:r.bool,system:r.object.isRequired,locale:r.instanceOf(i).isRequired,theme:r.instanceOf(a).isRequired,onClose:r.func},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCloseClick};return o.createElement(c,e,o.createElement("div",{className:"system-description-dialog-box"},this.renderText(),this.renderButtons()))},renderText:function(){var e=this.props.locale.pick,t=this.props.system,n=e(s.get(t,"details.title")),r=e(s.get(t,"details.description"));return o.createElement(d,null,o.createElement("div",{className:"title"},n),o.createElement("div",{className:"description"},r))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("project-description-close"),emphasized:!0,onClick:this.handleCloseClick};return o.createElement("div",{className:"buttons"},o.createElement(l,t))},handleCloseClick:function(e){this.props.onClose&&this.props.onClose({type:"cancel",target:this})}})},"./dialogs/system-description-dialog-box.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/system-description-dialog-box.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/telephone-number-dialog-box.jsx":function(e,t,n){"use strict";var s=n("../node_modules/react/react.js"),o=s.PropTypes,r=n("../../common/src/locale/locale.js"),i=n("../../common/src/widgets/overlay.jsx"),a=n("./widgets/push-button.jsx"),c=n("./widgets/qr-code.jsx");n("./dialogs/telephone-number-dialog-box.scss"),e.exports=s.createClass({displayName:"TelephoneNumberDialogBox",propTypes:{show:o.bool,number:o.string,locale:o.instanceOf(r).isRequired,onClose:o.func},render:function(){var e={show:this.props.show,onBackgroundClick:this.props.onClose};return s.createElement(i,e,s.createElement("div",{className:"telephone-number-dialog-box"},this.renderContents(),this.renderButtons()))},renderContents:function(){var e=this.props.number,t="tel:"+e;return s.createElement("div",{className:"contents"},s.createElement(c,{text:t,scale:6}),s.createElement("div",{className:"number"},e))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("telephone-dialog-close"),emphasized:!0,onClick:this.props.onClose};return s.createElement("div",{className:"buttons"},s.createElement(a,t))}})},"./dialogs/telephone-number-dialog-box.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/telephone-number-dialog-box.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/user-selection-dialog-box.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=(n("../node_modules/relaks/index.js"),n("../../common/src/data/database.js")),a=n("../../common/src/routing/route.js"),c=n("../../common/src/locale/locale.js"),l=n("../../common/src/theme/theme.js"),d=n("../../common/src/widgets/overlay.jsx"),u=n("./widgets/push-button.jsx"),p=n("./widgets/scrollable.jsx"),m=n("./lists/user-selection-list.jsx");n("./dialogs/user-selection-dialog-box.scss"),e.exports=o.createClass({displayName:"UserSelectionDialogBox",propTypes:{show:r.bool,selection:r.arrayOf(r.number).isRequired,disabled:r.arrayOf(r.number),database:r.instanceOf(i).isRequired,route:r.instanceOf(a).isRequired,locale:r.instanceOf(c).isRequired,theme:r.instanceOf(l).isRequired,onSelect:r.func,onCancel:r.func},getInitialState:function(){return{selection:this.props.selection}},componentWillReceiveProps:function(e){this.props.selection!==e.selection&&this.setState({selection:e.selection})},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCancelClick};return o.createElement(d,e,o.createElement("div",{className:"user-selection-dialog-box"},this.renderList(),this.renderButtons()))},renderList:function(){var e={selection:this.state.selection,disabled:this.props.disabled,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleListSelect};return o.createElement(p,null,o.createElement(m,e))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("selection-cancel"),onClick:this.handleCancelClick},n={label:e("selection-ok"),onClick:this.handleOKClick,emphasized:!0};return o.createElement("div",{className:"buttons"},o.createElement(u,t),o.createElement(u,n))},handleListSelect:function(e){var t=e.selection;s.isEqual(t,this.props.selection)&&(t=this.props.selection),this.setState({selection:t})},handleOKClick:function(e){this.props.onSelect&&this.props.onSelect({type:"select",target:this,selection:this.state.selection})},handleCancelClick:function(e){this.props.onCancel&&this.props.onCancel({type:"cancel",target:this})}})},"./dialogs/user-selection-dialog-box.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/user-selection-dialog-box.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/video-capture-dialog-box-browser.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/bluebird/js/browser/bluebird.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../../common/src/media/frame-grabber.js"),c=n("../../common/src/media/device-manager.js"),l=n("../../common/src/media/media-stream-utils.js"),d=(n("../../common/src/transport/blob-manager.js"),n("../../common/src/transport/payloads.js")),u=n("../../common/src/locale/locale.js"),p=n("../../common/src/widgets/overlay.jsx"),m=n("./widgets/push-button.jsx"),h=n("./widgets/device-selector.jsx"),f=n("./widgets/device-placeholder.jsx"),g=n("./widgets/duration-indicator.jsx");n("./dialogs/video-capture-dialog-box-browser.scss"),e.exports=r.createClass({displayName:"VideoCaptureDialogBox",propTypes:{show:i.bool,payloads:i.instanceOf(d).isRequired,locale:i.instanceOf(u).isRequired,onClose:i.func,onCapturePending:i.func,onCaptureError:i.func,onCapture:i.func},statics:{isAvailable:function(){return!!l.hasSupport()&&"function"==typeof MediaRecorder}},getInitialState:function(){var e=c.getDevices("videoinput"),t=h.choose(e,this.props.cameraDirection);return{liveVideoStream:null,liveVideoError:null,liveVideoWidth:640,liveVideoHeight:480,mediaRecorder:null,capturedVideo:null,capturedImage:null,previewURL:null,videoDevices:e,selectedDeviceId:t?t.deviceId:null,startTime:null,duration:0}},componentWillMount:function(){this.props.show&&this.initializeCamera(),c.addEventListener("change",this.handleDeviceChange)},componentWillReceiveProps:function(e){var t=this;this.props.show!==e.show&&(e.show?(this.clearCapturedVideo(),this.initializeCamera()):setTimeout(function(){t.shutdownCamera(),t.clearCapturedVideo()},500))},clearCapturedVideo:function(){this.state.capturedVideo&&(URL.revokeObjectURL(this.state.previewURL),this.setState({capturedVideo:null,capturedImage:null,previewURL:null}))},initializeCamera:function(){var e=this;return this.createLiveVideoStream().then(function(t){var n=l.getVideoDimensions(t);e.setState({liveVideoStream:t,liveVideoError:null,liveVideoWidth:n.width,liveVideoHeight:n.height})}).catch(function(t){e.setState({liveVideoStream:null,liveVideoError:t})})},shutdownCamera:function(){var e=this;this.destroyLiveVideoStream().then(function(){e.setState({liveVideoStream:null,liveVideoError:null})})},reinitializeCamera:function(){var e=this;this.destroyLiveVideoStream().then(function(){e.initializeCamera()})},setLiveVideoNode:function(e){var t=this;this.videoNode=e,this.videoNode&&(this.videoNode.srcObject=this.state.liveVideoStream,this.videoNode.play(),l.getActualVideoDimensions(e,function(e){t.state.liveVideoWidth===e.width&&t.state.liveVideoHeight===e.height||t.setState({liveVideoWidth:e.width,liveVideoHeight:e.height})}))},render:function(){var e={show:this.props.show,onBackgroundClick:this.handleCancelClick};return r.createElement(p,e,r.createElement("div",{className:"video-capture-dialog-box"},r.createElement("div",{className:"container"},this.renderView()),r.createElement("div",{className:"controls"},this.renderDeviceSelector(),this.renderButtons(),this.renderDuration())))},renderView:function(){return this.state.capturedVideo?this.renderCapturedVideo():this.state.liveVideoStream?this.renderLiveVideo():this.renderPlaceholder()},renderPlaceholder:function(){var e={blocked:!!this.state.liveVideoError,icon:"video-camera"};return r.createElement(f,e)},renderLiveVideo:function(){var e={ref:this.setLiveVideoNode,key:"live",className:"live-video",muted:!0};return r.createElement("div",null,this.renderSpacer(),r.createElement("video",e))},renderSpacer:function(){var e={className:"spacer",width:this.state.liveVideoWidth,height:this.state.liveVideoHeight};return r.createElement("canvas",e)},renderCapturedVideo:function(){var e={key:"preview",className:"preview",src:this.state.previewURL,controls:!0};return r.createElement("div",null,this.renderSpacer(),r.createElement("video",e))},renderDeviceSelector:function(){if(this.state.mediaRecorder)return null;if(this.state.capturedVideo)return null;var e={type:"video",devices:this.state.videoDevices,selectedDeviceId:this.state.selectedDeviceId,locale:this.props.locale,onSelect:this.handleDeviceSelect};return r.createElement(h,e)},renderDuration:function(){if(!this.state.mediaRecorder)return null;var e={duration:this.state.duration,startTime:this.state.startTime};return r.createElement(g,e)},renderButtons:function(){var e=this.props.locale.translate;if(this.state.mediaRecorder){var t="paused"===this.state.mediaRecorder.state,n={label:e("video-capture-pause"),onClick:this.handlePauseClick,hidden:t},s={label:e("video-capture-resume"),onClick:this.handleResumeClick,hidden:!t,emphasized:!0},o={label:e("video-capture-stop"),onClick:this.handleStopClick,emphasized:!t};return r.createElement("div",{className:"buttons"},r.createElement(m,n),r.createElement(m,s),r.createElement(m,o))}if(this.state.capturedVideo){var i={label:e("video-capture-retake"),onClick:this.handleRetakeClick},a={label:e("video-capture-accept"),onClick:this.handleAcceptClick,emphasized:!0};return r.createElement("div",{className:"buttons"},r.createElement(m,i),r.createElement(m,a))}var c={label:e("video-capture-cancel"),onClick:this.handleCancelClick},l={label:e("video-capture-start"),onClick:this.handleStartClick,disabled:!this.state.liveVideoStream,emphasized:!0};return r.createElement("div",{className:"buttons"},r.createElement(m,c),r.createElement(m,l))},componentDidUpdate:function(e,t){this.videoNode&&t.liveVideoStream!==this.state.liveVideoStream&&this.setLiveVideoNode(this.videoNode)},componentWillUnmount:function(){this.destroyLiveVideoStream(),this.clearCapturedVideo(),c.removeEventListener("change",this.handleDeviceChange)},createLiveVideoStream:function(){return this.videoStreamPromise||(this.videoStreamPromise=l.getVideoStream(this.state.selectedDeviceId)),this.videoStreamPromise},destroyLiveVideoStream:function(){if(!this.videoStreamPromise)return o.resolve();var e=this.videoStreamPromise;return this.videoStreamPromise=null,e.then(function(e){l.stopAllTracks(e)})},captureImage:function(){var e=this.videoNode;return a.capture(e).then(function(t){return{blob:t,width:e.videoWidth,height:e.videoHeight}})},beginRecording:function(){var e=this;return o.try(function(){var t={audioBitsPerSecond:128e3,videoBitsPerSecond:25e5,mimeType:"video/webm"},n=new MediaRecorder(e.state.liveVideoStream,t),s=e.props.payloads.stream();return n.outputStream=s,n.promise=new o(function(e,t){n.resolve=e,n.reject=t}),n.addEventListener("dataavailable",function(e){this.outputStream.push(e.data)}),n.addEventListener("stop",function(e){this.outputStream.close(),n.resolve()}),n.start(3e3),s.start(),n})},pauseRecording:function(){var e=this;return o.try(function(){var t=e.state.mediaRecorder;t&&t.pause()})},resumeRecording:function(){var e=this;return o.try(function(){var t=e.state.mediaRecorder;t&&t.resume()})},endRecording:function(){var e=this;return o.try(function(){var t=e.state.mediaRecorder;if(t)return t.stop(),t.promise})},triggerCaptureEvent:function(e){this.props.onCapture&&this.props.onCapture({type:"capture",target:this,resource:e})},triggerCloseEvent:function(){this.props.onClose&&this.props.onClose({type:"close",target:this})},handleStartClick:function(e){var t=this;return o.join(this.captureImage(),this.beginRecording(),function(e,n){return t.setState({capturedImage:e,mediaRecorder:n,startTime:new Date,duration:0}),null}).catch(function(e){console.error(e)})},handlePauseClick:function(e){var t=this;return this.pauseRecording().then(function(){var e=new Date,n=e-t.state.startTime,s=t.state.duration+n;t.setState({duration:s,startTime:null})})},handleResumeClick:function(e){var t=this;return this.resumeRecording().then(function(){var e=new Date;t.setState({startTime:e})})},handleStopClick:function(e){var t=this;return this.endRecording().then(function(){var e=t.state.mediaRecorder,n=e.outputStream.toBlob(),o=URL.createObjectURL(n),r=0;if(t.state.startTime){r=new Date-t.state.startTime}var i={format:s.last(s.split(e.mimeType,"/")),audioBitsPerSecond:e.audioBitsPerSecond,videoBitsPerSecond:e.videoBitsPerSecond,stream:e.outputStream,duration:t.state.duration+r};t.setState({capturedVideo:i,previewURL:o,mediaRecorder:null})})},handleRetakeClick:function(e){this.clearCapturedVideo()},handleAcceptClick:function(e){var t=this.state.capturedVideo,n=this.state.capturedImage,s=this.props.payloads.add("video");s.attachStream(t.stream),s.attachFile(n.blob,"poster");var o={type:"video",payload_token:s.token,width:n.width,height:n.height,duration:t.duration,format:t.format,bitrates:{audio:t.audioBitsPerSecond,video:t.videoBitsPerSecond}};this.triggerCloseEvent(),this.triggerCaptureEvent(o)},handleCancelClick:function(e){this.triggerCloseEvent()},handleDeviceSelect:function(e){var t=this,n=e.currentTarget.value;this.setState({selectedDeviceId:n},function(){t.reinitializeCamera()})},handleDeviceChange:function(e){var t=this,n=c.getDevices("videoinput"),o=this.state.selectedDeviceId,r=!1;o&&(s.some(n,{deviceId:o})||(o=null,r=!0)),this.setState({videoDevices:n,selectedDeviceId:o},function(){r&&t.reinitializeCamera()})}})},"./dialogs/video-capture-dialog-box-browser.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./dialogs/video-capture-dialog-box-browser.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./dialogs/video-capture-dialog-box.jsx":function(e,t,n){"use strict";e.exports=n("./dialogs/video-capture-dialog-box-browser.jsx")},"./editors/audio-editor.jsx":function(e,t,n){"use strict";function s(e){var t=e.resource,n=t.duration;return t.width&&t.height?o.createElement(r,e,o.createElement("div",{className:"audio-duration"},i.format(n))):o.createElement("div",{className:"audio-editor"},o.createElement("div",{className:"graphic"},o.createElement("div",{className:"icon"},o.createElement("i",{className:"fa fa-microphone"})),o.createElement("div",{className:"duration"},i.format(n))))}var o=n("../node_modules/react/react.js"),r=(o.PropTypes,n("./editors/image-editor.jsx")),i=n("./widgets/duration-indicator.jsx");e.exports=s,n("./editors/audio-editor.scss"),s.propTypes=r.propTypes},"./editors/audio-editor.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/audio-editor.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./editors/image-editor.jsx":function(e,t,n){"use strict";function s(e){return r.startsWith(e,"json:")}function o(e){var t=e.substr(5);return JSON.parse(t)}var r=n("../node_modules/lodash/lodash.js"),i=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),a=i.PropTypes,c=n("../../common/src/transport/blob-manager.js"),l=(n("../../common/src/transport/payload.js"),n("../../common/src/media/image-cropping.js")),d=n("../../common/src/utils/focus-manager.js"),u=n("../../common/src/utils/component-refs.js"),p=n("../../common/src/locale/locale.js"),m=n("../../common/src/theme/theme.js"),h=n("../../common/src/mixins/update-check.js"),f=n("../../common/src/widgets/image-cropper.jsx");n("./editors/image-editor.scss"),e.exports=i.createClass({displayName:"ImageEditor",mixins:[h],propTypes:{resource:a.object,locale:a.instanceOf(p).isRequired,theme:a.instanceOf(m).isRequired,previewWidth:a.number,previewHeight:a.number,disabled:a.bool,onChange:a.func},getDefaultProps:function(){return{previewWidth:512,previewHeight:512,disabled:!1}},getInitialState:function(){return this.components=u({imageCropper:f}),{fullImageURL:null,loadedImageURL:null,previewImageURL:null,placeholderMessage:null,placeholderIcon:null}},componentWillMount:function(){this.prepareImage(this.props.resource,this.props.disabled)},componentWillReceiveProps:function(e){this.props.resource===e.resource&&this.props.disabled===e.disabled||this.prepareImage(e.resource,e.disabled)},prepareImage:function(e,t){var n=this,i={fullImageURL:null,previewImageURL:null,placeholderMessage:null,placeholderIcon:null},a=this.props.theme.getImageURL(e,{original:!0});if(a){if(s(a)){var l=o(a);i.fullImageURL=l.url}else{var d=c.find(a);d&&(i.fullImageURL=c.url(d))}i.fullImageURL||(i.previewImageURL=this.props.theme.getImageURL(e,{width:this.props.previewWidth,height:this.props.previewHeight}),t||c.fetch(a).then(function(e){n.setState({fullImageURL:c.url(e),previewImageURL:null,placeholderMessage:null,placeholderIcon:null})}))}if(!i.fullImageURL&&!i.previewImageURL){var u=this.props.locale.translate;e.width&&e.height?(i.placeholderMessage=u("image-editor-upload-in-progress"),i.placeholderIcon="cloud-upload"):e.pending||("video"===e.type?(i.placeholderMessage=u("image-editor-poster-extraction-in-progress"),i.placeholderIcon="film"):"website"===e.type&&(i.placeholderMessage=u("image-editor-page-rendering-in-progress"),i.placeholderIcon="file-image-o"))}r.isMatch(this.state,i)||this.setState(i)},render:function(){return i.createElement("div",{className:"image-editor"},this.renderImage(),this.renderSpinner(),this.props.children)},renderImage:function(){return this.state.fullImageURL?this.renderImageCropper():this.state.previewImageURL?this.renderPreviewImage():this.renderPlaceholder()},renderPreviewImage:function(){var e="preview";this.props.disabled&&(e+=" disabled");var t={src:this.state.previewImageURL,width:this.props.previewWidth,height:this.props.previewHeight};return i.createElement("div",{className:e},i.createElement("img",t))},renderSpinner:function(){return this.props.disabled?null:this.state.plaeholderMessage||this.state.placeholderIcon?null:this.state.fullImageURL&&this.state.fullImageURL===this.state.loadedImageURL?null:i.createElement("div",{className:"spinner"},i.createElement("i",{className:"fa fa-refresh fa-spin fa-fw"}))},renderImageCropper:function(){var e=this.components.setters,t=this.props.resource,n={ref:e.imageCropper,url:this.state.fullImageURL,clippingRect:t.clip||l.default(t.width,t.height),vector:"svg"===t.format,disabled:this.props.disabled,onChange:this.handleClipRectChange,onLoad:this.handleFullImageLoad};return i.createElement(f,n)},renderPlaceholder:function(){return this.state.fullImageURL||this.state.previewImageURL?null:this.state.plaeholderMessage||this.state.placeholderIcon?i.createElement("div",{className:"placeholder"},i.createElement("div",{className:"icon"},i.createElement("i",{className:"fa fa-"+this.state.placeholderIcon})),i.createElement("div",{className:"message"},this.state.placeholderMessage)):null},componentDidMount:function(){d.register(this,{type:"ImageEditor"})},componentWillUnmount:function(){d.unregister(this)},focus:function(){var e=this.components.imageCropper;e&&e.focus()},triggerChangeEvent:function(e){this.props.onChange&&this.props.onChange({type:"change",target:this,resource:e})},handleClipRectChange:function(e){var t=r.clone(this.props.resource);return t.clip=e.rect,this.triggerChangeEvent(t)},handleFullImageLoad:function(e){var t=e.target.props.url;this.setState({loadedImageURL:t})}})},"./editors/image-editor.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/image-editor.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./editors/media-editor.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),r=o.PropTypes,i=n("../../common/src/locale/locale.js"),a=n("../../common/src/theme/theme.js"),c=n("../../common/src/transport/payloads.js"),l=n("../../common/src/mixins/update-check.js"),d=n("./widgets/media-button.jsx"),u=n("./editors/image-editor.jsx"),p=n("./editors/video-editor.jsx"),m=n("./editors/audio-editor.jsx");n("./editors/media-editor.scss"),e.exports=o.createClass({displayName:"MediaEditor",mixins:[l],propTypes:{allowEmbedding:r.bool,resources:r.arrayOf(r.object),resourceIndex:r.number,locale:r.instanceOf(i).isRequired,theme:r.instanceOf(a).isRequired,payloads:r.instanceOf(c).isRequired,onChange:r.func.isRequired,onEmbed:r.func},render:function(){var e=this.props.resourceIndex,t=s.get(this.props.resources,e);if(t)return o.createElement("div",{key:e,className:"media-editor"},o.createElement("div",{className:"resource"},this.renderResource(t),this.renderNavigation()));var n;return"single-col"!==this.props.theme.mode&&(n=this.props.children),o.createElement("div",{className:"media-editor empty"},n)},renderResource:function(e){var t={resource:e,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onChange:this.handleResourceChange};switch(e.type){case"image":case"website":return o.createElement(u,t);case"video":return o.createElement(p,t);case"audio":return o.createElement(m,t)}},renderNavigation:function(){var e=this.props.locale.translate,t=this.props.resourceIndex,n=s.size(this.props.resources);if(0===n)return null;var r={label:e("media-editor-remove"),icon:"remove",onClick:this.handleRemoveClick},i={label:e("media-editor-embed"),icon:"code",hidden:!this.props.allowEmbedding,onClick:this.handleEmbedClick},a={label:e("media-editor-shift"),icon:"chevron-left",hidden:!(n>1),disabled:!(t>0),onClick:this.handleShiftClick},c={index:t,count:n,hidden:!(n>1),onBackwardClick:this.handleBackwardClick,onForwardClick:this.handleForwardClick};return o.createElement("div",{className:"navigation"},o.createElement("div",{className:"left"},o.createElement(d,r),o.createElement(d,i),o.createElement(d,a)),o.createElement("div",{className:"right"},o.createElement(d.Direction,c)))},triggerChangeEvent:function(e,t){return this.props.onChange({type:"change",target:this,resources:e,selection:t})},triggerEmbedEvent:function(e){this.props.onEmbed&&this.props.onEmbed({type:"embed",target:this,resource:e})},handleShiftClick:function(e){var t=this.props.resourceIndex;if(!(t<1)){var n=s.slice(this.props.resources),o=n[t];n.splice(t,1),n.splice(t-1,0,o),this.triggerChangeEvent(n,t-1)}},handleRemoveClick:function(e){var t=this.props.resourceIndex,n=s.slice(this.props.resources);n.splice(t,1);var o=t;t>=n.length&&(o=n.length-1),this.triggerChangeEvent(n,o)},handleEmbedClick:function(e){var t=this.props.resourceIndex,n=this.props.resources[t];this.triggerEmbedEvent(n)},handleBackwardClick:function(e){var t=this.props.resourceIndex,n=this.props.resources;t<=0||this.triggerChangeEvent(n,t-1)},handleForwardClick:function(e){var t=this.props.resourceIndex,n=this.props.resources;t>=s.size(n)-1||this.triggerChangeEvent(n,t+1)},handleResourceChange:function(e){var t=this.props.resourceIndex,n=s.slice(this.props.resources);n[t]=e.resource,this.triggerChangeEvent(n,t)}})},"./editors/media-editor.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/media-editor.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./editors/media-importer.jsx":function(e,t,n){"use strict";function s(e){var t=i.filter(e,function(e){if("string"===e.kind)return/^text\/(html|uri-list)/.test(e.type)}),n={};return i.each(t,function(e){n[e.type]=new a(function(t,n){e.getAsString(t)})}),a.props(n)}function o(e){if(e){var t=document.createElement("DIV");t.innerHTML=e.replace(/<.*?>/g,""),website.title=t.innerText}}function r(e){return i.toUpper(c().format("YYYY-MMM-DD-hhA"))+e}var i=n("../node_modules/lodash/lodash.js"),a=n("../node_modules/bluebird/js/browser/bluebird.js"),c=n("../node_modules/moment/moment.js"),l=n("../node_modules/react/react.js"),d=l.PropTypes,u=n("../../common/src/media/media-loader.js"),p=n("../../common/src/media/media-tag-reader.js"),m=n("../../common/src/utils/link-parser.js"),h=n("../../common/src/media/quick-start.js"),f=n("../../common/src/transport/blob-reader.js"),g=n("../../common/src/objects/types/resource-types.js"),v=n("../../common/src/locale/locale.js"),b=n("../../common/src/theme/theme.js"),y=n("../../common/src/transport/payloads.js"),j=n("../../common/src/mixins/update-check.js"),x=n("./dialogs/photo-capture-dialog-box.jsx"),w=n("./dialogs/audio-capture-dialog-box.jsx"),k=n("./dialogs/video-capture-dialog-box.jsx");n("./editors/media-editor.scss"),e.exports=l.createClass({displayName:"MediaImporter",mixins:[j],propTypes:{resources:d.arrayOf(d.object).isRequired,types:d.arrayOf(d.oneOf(g)),cameraDirection:d.oneOf(["front","back"]),limit:d.number,locale:d.instanceOf(v).isRequired,theme:d.instanceOf(b).isRequired,payloads:d.instanceOf(y).isRequired,onCaptureStart:d.func,onCaptureEnd:d.func,onChange:d.func.isRequired},getDefaultProps:function(){return{types:g,limit:1/0}},getInitialState:function(){return{capturing:null}},isAcceptable:function(e){return i.includes(this.props.types,e)},getResourceType:function(e){var t=u.extractFileCategory(e);if("application"===t)switch(u.extractFileFormat(e)){case"x-mswinurl":case"x-desktop":t="website"}if(this.isAcceptable(t))return t},capture:function(e){this.setState({capturing:e}),this.triggerCaptureStartEvent()},importFiles:function(e){var t=this;e=i.filter(e,function(e){return!!t.getResourceType(e.type)});var n=i.map(e,function(e){return t.getResourceType(e.type)});return this.addResourcePlaceholders(n).then(function(n){return a.each(e,function(e,s){return t.importFile(e).then(function(e){return t.updateResource(n[s],e)}).catch(function(e){return t.removeResource(n[s])})})})},importFile:function(e){switch(this.getResourceType(e.type)){case"image":return this.importImageFile(e);case"video":return this.importVideoFile(e);case"audio":return this.importAudioFile(e);case"website":return this.importBookmarkFile(e)}},importImageFile:function(e){var t=this.props.payloads.add("image").attachFile(e);return u.getImageMetadata(e).then(function(n){return{type:"image",payload_token:t.token,width:n.width,height:n.height,format:n.format,filename:e.name,imported:!0}}).catch(function(n){return{type:"image",payload_token:t.token,format:u.extractFileFormat(e.type),filename:e.name,imported:!0}})},importVideoFile:function(e){var t=this;return h.process(e).then(function(n){n||(n=e);var s=t.props.payloads.add("video"),o=t.props.payloads.stream().pipe(n);return s.attachStream(o),u.getVideoMetadata(n).then(function(t){return s.attachFile(t.poster,"poster"),{type:"video",payload_token:s.token,width:t.width,height:t.height,format:t.format,duration:t.duration,filename:e.name,imported:!0}}).catch(function(t){return s.attachStep("main","poster"),{type:"video",payload_token:s.token,format:u.extractFileFormat(e.type),filename:e.name,imported:!0}})})},importAudioFile:function(e){var t=this.props.payloads.add("audio"),n=this.props.payloads.stream().pipe(e);return t.attachStream(n),u.getAudioMetadata(e).then(function(n){var s={type:"audio",payload_token:t.token,format:n.format,duration:n.duration,filename:e.name,imported:!0};return p.extractAlbumArt(e).then(function(e){return e?(t.attachFile(e,"poster"),u.getImageMetadata(e).then(function(e){return s.width=e.width,s.height=e.height,s})):s})}).catch(function(n){return{type:"audio",payload_token:t.token,format:u.extractFileFormat(e.type),filename:e.name,imported:!0}})},importBookmarkFile:function(e){var t=this;return f.loadText(e).then(function(n){var s=m.parse(n);if(s&&/https?:/.test(s.url)){return{type:"website",payload_token:t.props.payloads.add("website").attachURL(s.url,"poster").token,url:s.url,title:s.name||i.replace(e.name,/\.\w+$/,"")}}})},importDataItems:function(e){var t=this;return s(e).then(function(e){var n=e["text/html"],s=e["text/uri-list"];if(s){var r=/<img\b/i.test(n)?"image":"website";if(t.isAcceptable(r)){if("image"===r){var i=s.replace(/.*\/([^\?#]*).*/,"$1")||void 0,a=t.props.payloads.add("image").attachURL(s);return{type:"image",payload_token:a.token,filename:i}}if("website"===r){var a=t.props.payloads.add("website").attachURL(s,"poster");return{type:"website",payload_token:a.token,url:s,title:o(n)}}}}}).then(function(e){return e?t.addResources([e]):0})},render:function(){return l.createElement("div",null,this.renderPhotoDialog(),this.renderAudioDialog(),this.renderVideoDialog())},renderPhotoDialog:function(){var e={show:"image"===this.state.capturing,cameraDirection:this.props.cameraDirection,payloads:this.props.payloads,locale:this.props.locale,onLoadStart:this.handleLoadStart,onClose:this.handleClose,onCapturePending:this.handleCapturePending,onCaptureError:this.handleCaptureError,onCapture:this.handleCapture};return l.createElement(x,e)},renderVideoDialog:function(){var e={show:"video"===this.state.capturing,cameraDirection:this.props.cameraDirection,payloads:this.props.payloads,locale:this.props.locale,onLoadStart:this.handleLoadStart,onClose:this.handleClose,onCapturePending:this.handleCapturePending,onCaptureError:this.handleCaptureError,onCapture:this.handleCapture};return l.createElement(k,e)},renderAudioDialog:function(){var e={show:"audio"===this.state.capturing,payloads:this.props.payloads,locale:this.props.locale,onClose:this.handleClose,onCapturePending:this.handleCapturePending,onCaptureError:this.handleCaptureError,onCapture:this.handleCapture};return l.createElement(w,e)},componentWillUnmount:function(){this.state.capturing&&this.triggerCaptureEndEvent()},addResourcePlaceholders:function(e){var t=i.map(e,function(e){return{type:e,pending:"import-"+ ++_}});return this.addResources(t).return(t)},addResources:function(e){if(i.isEmpty(e))return a.resolve(0);var t,n=this.props.resources||[];if(1===this.props.limit){var s=i.first(e),o=i.findIndex(n,{type:s.type});t=i.concat(n,s),-1!==o&&t.splice(o,1)}else t=i.concat(n,e);var r=n.length;return this.triggerChangeEvent(t,r)},updateResource:function(e,t){var n=i.slice(this.props.resources),s=i.findIndex(n,e);if(-1!==s)return n[s]=t,this.triggerChangeEvent(n)},removeResource:function(e,t){var n=i.slice(this.props.resources),s=i.findIndex(n,e);if(-1!==s)return n.splice(s,1),this.triggerChangeEvent(n)},triggerChangeEvent:function(e,t){return this.props.onChange({type:"change",target:this,resources:e,selection:t})},triggerCaptureStartEvent:function(){this.props.onCaptureStart&&this.props.onCaptureStart({type:"capturestart",target:this,mediaType:this.state.capturing})},triggerCaptureEndEvent:function(e){this.props.onCaptureEnd&&this.props.onCaptureEnd({type:"captureend",target:this,mediaType:this.state.capturing,resource:e})},handleClose:function(e){this.setState({capturing:null}),this.triggerCaptureEndEvent()},handleCapturePending:function(e){this.resourcePlaceholder={type:e.resourceType,pending:"capture-"+ ++E},this.addResources([this.resourcePlaceholder])},handleCaptureError:function(e){this.resourcePlaceholder&&this.removeResource(this.resourcePlaceholder)},handleCapture:function(e){var t=i.clone(e.resource),n="jpeg"===t.format?"jpg":t.format;t.filename=r("."+n),this.resourcePlaceholder?this.updateResource(this.resourcePlaceholder,t):this.addResources([t])}});var _=0,E=0},"./editors/reaction-editor.jsx":function(e,t,n){"use strict";function s(e){return o.some(e,function(e){if(!e.url&&!e.payload_id)return!0})}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/bluebird/js/browser/bluebird.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/src/utils/memoize.js"),l=n("../../common/src/media/device-manager.js"),d=n("../../common/src/utils/component-refs.js"),u=n("../../common/src/utils/tag-scanner.js"),p=n("../../common/src/utils/markdown.js"),m=n("../../common/src/utils/focus-manager.js"),h=n("../../common/src/objects/utils/reaction-utils.js"),f=n("../../common/src/data/database.js"),g=n("../../common/src/transport/payloads.js"),v=n("../../common/src/routing/route.js"),b=n("../../common/src/locale/locale.js"),y=n("../../common/src/theme/theme.js"),j=n("../../common/src/mixins/update-check.js"),x=n("../../common/src/widgets/autosize-text-area.jsx"),w=n("./widgets/push-button.jsx"),k=(n("./widgets/header-button.jsx"),n("./widgets/profile-image.jsx")),_=(n("./widgets/drop-zone.jsx"),n("./widgets/reaction-media-toolbar.jsx")),E=n("./editors/media-editor.jsx"),C=n("./editors/media-importer.jsx");n("./editors/reaction-editor.scss");e.exports=i.createClass({displayName:"CommentEditor",mixins:[j],propTypes:{reaction:a.object,story:a.object.isRequired,currentUser:a.object,database:a.instanceOf(f).isRequired,payloads:a.instanceOf(g).isRequired,route:a.instanceOf(v).isRequired,locale:a.instanceOf(b).isRequired,theme:a.instanceOf(y).isRequired,onFinish:a.func},getInitialState:function(){this.components=d({mediaImporter:C,textArea:x});var e={draft:null,original:null,selectedResourceIndex:0,hasCamera:l.hasDevice("videoinput"),hasMicrophone:l.hasDevice("audioinput")};return this.updateDraft(e,this.props),this.updateResourceIndex(e,this.props),e},componentWillReceiveProps:function(e){var t=o.clone(this.state);this.props.reaction!==e.reaction&&(this.updateDraft(t,e),this.updateResourceIndex(t,e));var n=o.shallowDiff(t,this.state);o.isEmpty(n)||this.setState(n)},updateDraft:function(e,t){t.reaction?(e.draft=t.reaction,t.reaction.uncommitted||(e.original=t.reaction)):(e.draft=S(t.story,t.currentUser),e.original=null)},updateResourceIndex:function(e,t){var n=o.get(e.draft,"details.resources"),s=o.size(n);e.selectedResourceIndex>=s?e.selectedResourceIndex=s-1:e.selectedResourceIndex<0&&s>0&&(e.selectedResourceIndex=0)},render:function(){return i.createElement("div",{className:"reaction-editor"},i.createElement("div",{className:"profile-image-column"},this.renderProfileImage()),i.createElement("div",{className:"editor-column"},i.createElement("div",{className:"controls"},i.createElement("div",{className:"textarea"},this.renderTextArea()),i.createElement("div",{className:"buttons"},this.renderMediaToolbar(),this.renderActionButtons())),i.createElement("div",{className:"media"},this.renderMediaEditor(),this.renderMediaImporter())))},renderProfileImage:function(){var e={user:this.props.currentUser,theme:this.props.theme,size:"small"};return i.createElement(k,e)},renderTextArea:function(){var e=this.props.locale.languageCode,t=o.get(this.state.draft,["details","text",e],""),n={ref:this.components.setters.textArea,value:t,lang:this.props.locale.localeCode,onChange:this.handleTextChange,onKeyPress:this.handleKeyPress,onPaste:this.handlePaste};return i.createElement(x,n)},renderMediaToolbar:function(){var e={reaction:this.state.draft,capturing:this.state.capturing,locale:this.props.locale,onAction:this.handleAction};return i.createElement(_,e)},renderActionButtons:function(){var e=this.props.locale.translate,t=o.isEmpty(o.get(this.state.draft,"details.text")),n=o.isEmpty(o.get(this.state.draft,"details.resources")),s=o.get(this.state.draft,"published",!1),r={label:e("story-cancel"),onClick:this.handleCancelClick,disabled:s},a={label:e("story-post"),onClick:this.handlePublishClick,emphasized:!0,disabled:t&&n||s};return i.createElement("div",{className:"action-buttons"},i.createElement(w,r),i.createElement(w,a))},renderMediaEditor:function(){var e=(this.props.locale.translate,{ref:this.components.setters.mediaImporter,resources:o.get(this.state.draft,"details.resources"),resourceIndex:this.state.selectedResourceIndex,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onChange:this.handleResourcesChange});return i.createElement(E,e)},renderMediaImporter:function(){var e=(this.props.locale.translate,{ref:this.components.setters.mediaImporter,resources:o.get(this.state.draft,"details.resources"),locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,cameraDirection:"back",onCaptureStart:this.handleCaptureStart,onCaptureEnd:this.handleCaptureEnd,onChange:this.handleResourcesChange});return i.createElement(C,e)},componentDidMount:function(){m.register(this,{type:"ReactionEditor",story_id:this.props.story.id,user_id:this.props.currentUser.id})},componentWillUnmount:function(){m.unregister(this)},changeDraft:function(e,t){var n=this;return new r(function(s,o){var r={draft:e};void 0!==t&&(r.selectedResourceIndex=t),n.setState(r,function(){s(e)})})},saveDraft:function(e,t,n){var s=this;return this.changeDraft(e,n).then(function(e){return s.saveReaction(e,t),e})},saveReaction:function(e,t){var n=this,s=this.props.route.parameters,o=this.state.original,r={delay:t?void 0:2e3,onConflict:function(e){h.mergeRemoteChanges(e.local,e.remote,o)&&e.preventDefault()}},i=this.props.database.use({schema:s.schema,by:this});return i.start().then(function(){return i.saveOne({table:"reaction"},e,r).then(function(e){return n.props.payloads.dispatch(e),e})})},removeReaction:function(e){var t=this.props.route,n=t.parameters.schema;return this.props.database.use({schema:n,by:this}).removeOne({table:"reaction"},e)},triggerFinishEvent:function(){this.props.onFinish&&this.props.onFinish({type:"finish",target:this})},focus:function(){var e=this.components.textArea;e&&e.focus()},handleTextChange:function(e){var t=e.currentTarget.value,n=this.props.locale.languageCode,s="details.text."+n,r=o.decoupleSet(this.state.draft,s,t);return void 0===r.details.markdown&&p.detect(t,this.handleReference)&&(r.details.markdown=!0),r.tags=u.findTags(r.details.text),this.saveDraft(r)},handleKeyPress:function(e){var t=e.target;13==e.charCode&&"single-col"===this.props.theme.mode&&(e.preventDefault(),this.handlePublishClick(e),t.blur())},handlePaste:function(e){this.components.mediaImporter.importFiles(e.clipboardData.files),this.components.mediaImporter.importDataItems(e.clipboardData.items)},handlePublishClick:function(e){this.triggerFinishEvent();var t=o.clone(this.state.draft);return t.published=!0,this.saveDraft(t,!0)},handleCancelClick:function(e){var t=this;return r.try(function(){t.triggerFinishEvent();var e=t.props.reaction;return e?e.ptime?(e=o.clone(e),e.published=!0,t.saveReaction(e)):t.removeReaction(e):e})},handleResourcesChange:function(e){var t=o.get(this.state.draft,"details.resources"),n=e.resources,r=e.selection;if(t!==n){var i=o.decoupleSet(this.state.draft,"details.resources",e.resources),a=s(e.resources);return this.saveDraft(i,a,r)}this.setState({selectedResourceIndex:r})},handleCaptureStart:function(e){this.setState({capturing:e.mediaType})},handleCaptureEnd:function(e){this.setState({capturing:null})},handleReference:function(e){var t=this.state.draft.details.resources,n=p.findReferencedResource(t,e.name);if(n){var s;return s=e.forImage?this.props.theme.getImageURL(n,{height:24}):this.props.theme.getURL(n),{href:s,title:void 0}}},handleAction:function(e){switch(e.action){case"markdown-set":var t=o.decoupleSet(this.state.draft,"details.markdown",e.value);this.saveDraft(t);break;case"photo-capture":this.components.mediaImporter.capture("image");break;case"video-capture":this.components.mediaImporter.capture("video");break;case"audio-capture":this.components.mediaImporter.capture("audio");break;case"file-import":this.components.mediaImporter.importFiles(e.files)}}});var S=c(function(e,t){return{type:"comment",story_id:e.id,user_id:t?t.id:null,details:{}}})},"./editors/reaction-editor.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/reaction-editor.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./editors/story-editor-options.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/objects/utils/user-utils.js"),a=n("../../common/src/data/database.js"),c=n("../../common/src/routing/route.js"),l=n("../../common/src/locale/locale.js"),d=n("../../common/src/theme/theme.js"),u=(n("./widgets/header-button.jsx"),n("./widgets/option-button.jsx")),p=n("./dialogs/user-selection-dialog-box.jsx"),m=n("./dialogs/issue-dialog-box.jsx");n("./editors/story-editor-options.scss"),e.exports=o.createClass({displayName:"StoryEditorOptions",propTypes:{section:r.oneOf(["main","preview","both"]),story:r.object.isRequired,repos:r.arrayOf(r.object),currentUser:r.object,options:r.object.isRequired,database:r.instanceOf(a).isRequired,route:r.instanceOf(c).isRequired,locale:r.instanceOf(l).isRequired,theme:r.instanceOf(d).isRequired,onChange:r.func,onComplete:r.func},getDefaultProps:function(){return{section:"both"}},getInitialState:function(){return{selectingRecipients:!1,renderingRecipientDialogBox:!1,enteringIssueDetails:!1,renderingIssueDialogBox:!1}},render:function(){return"both"===this.props.section?o.createElement("div",{className:"story-editor-options"},this.renderButtons("main"),o.createElement("div",{className:"border"}),this.renderButtons("preview")):o.createElement("div",{className:"story-editor-options"},this.renderButtons(this.props.section))},renderButtons:function(e){var t=this.props.locale.translate,n=this.props.options;if("main"===e){var r=this.props.currentUser,a=this.props.story,c=this.props.repos,l=!!r&&s.includes(n.bookmarkRecipients,r.id),d=r?s.without(n.bookmarkRecipients,r.id):[],p={label:t("option-add-bookmark"),selected:l,onClick:this.handleBookmarkClick},m={label:s.isEmpty(d)?t("option-send-bookmarks"):t("option-send-bookmarks-to-$count-users",s.size(d)),hidden:!i.canSendBookmarks(r,a,"read-write"),selected:!s.isEmpty(d),onClick:this.handleSendBookmarkClick},h={label:t("option-add-issue"),selected:!!n.issueDetails,hidden:!i.canAddIssue(r,a,c,"read-write"),onClick:this.handleAddIssueClick},f={label:t("option-hide-story"),selected:n.hidePost,hidden:!i.canHideStory(r,a,"read-write"),onClick:this.handleHidePostClick};return o.createElement("div",{className:e},o.createElement(u,p),o.createElement(u,m),o.createElement(u,h),o.createElement(u,f),this.renderRecipientDialogBox(),this.renderIssueDialogBox())}if("preview"===e){var g={label:t("option-show-media-preview"),selected:"media"===n.preview||!n.preview,onClick:this.handleShowMediaPreviewClick},v={label:t("option-show-text-preview"),selected:"text"===n.preview,onClick:this.handleShowTextPreviewClick};return o.createElement("div",{className:e},o.createElement(u,g),o.createElement(u,v))}},renderRecipientDialogBox:function(){if(!this.state.renderingRecipientDialogBox)return null;var e={show:this.state.selectingRecipients,selection:this.props.options.bookmarkRecipients,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleRecipientsSelect,onCancel:this.handleRecipientsCancel};return o.createElement(p,e)},renderIssueDialogBox:function(){if(!this.state.renderingIssueDialogBox)return null;var e={show:this.state.enteringIssueDetails,allowDeletion:!1,story:this.props.story,issue:this.props.options.issueDetails,repos:this.props.repos,locale:this.props.locale,theme:this.props.theme,onConfirm:this.handleIssueConfirm,onCancel:this.handleIssueCancel};return o.createElement(m,e)},triggerChangeEvent:function(e){this.props.onChange&&this.props.onChange({type:"change",target:this,options:e})},triggerCompleteEvent:function(){this.props.onComplete&&this.props.onComplete({type:"complete",target:this})},openSelectionDialogBox:function(e){this.state.selectingRecipients||this.setState({selectingRecipients:!0,renderingRecipientDialogBox:!0})},closeSelectionDialogBox:function(){var e=this;this.state.selectingRecipients&&(this.setState({selectingRecipients:!1}),setTimeout(function(){e.state.selectingRecipients||e.setState({renderingRecipientDialogBox:!1})},500))},openIssueDialogBox:function(e){this.state.enteringIssueDetails||this.setState({enteringIssueDetails:!0,renderingIssueDialogBox:!0})},closeIssueDialogBox:function(){var e=this;this.state.enteringIssueDetails&&(this.setState({enteringIssueDetails:!1}),setTimeout(function(){e.state.enteringIssueDetails||e.setState({renderingIssueDialogBox:!1})},500))},handleBookmarkClick:function(e){var t=s.clone(this.props.options),n=this.props.currentUser.id;s.includes(t.bookmarkRecipients,n)?t.bookmarkRecipients=s.difference(t.bookmarkRecipients,[n]):t.bookmarkRecipients=s.union(t.bookmarkRecipients,[n]),this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleSendBookmarkClick:function(e){this.openSelectionDialogBox(e)},handleAddIssueClick:function(e){this.openIssueDialogBox(e)},handleHidePostClick:function(e){var t=s.clone(this.props.options);t.hidePost=!t.hidePost,this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleRecipientsSelect:function(e){var t=s.clone(this.props.options);t.bookmarkRecipients=e.selection,this.triggerChangeEvent(t),this.triggerCompleteEvent(),this.closeSelectionDialogBox()},handleRecipientsCancel:function(e){this.triggerCompleteEvent(),this.closeSelectionDialogBox()},handleIssueConfirm:function(e){var t=s.clone(this.props.options);t.issueDetails=e.issue,this.triggerChangeEvent(t),this.triggerCompleteEvent(),this.closeIssueDialogBox()},handleIssueCancel:function(e){this.triggerCompleteEvent(),this.closeIssueDialogBox()},handleShowMediaPreviewClick:function(e){var t=s.clone(this.props.options);t.preview="media",this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleShowTextPreviewClick:function(e){var t=s.clone(this.props.options);t.preview="text",this.triggerChangeEvent(t),this.triggerCompleteEvent()}})},"./editors/story-editor-options.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/story-editor-options.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./editors/story-editor.jsx":function(e,t,n){"use strict";function s(e){return{id:b.allocate(),user_ids:[e.id],details:{},public:!0,published:!1}}function o(e){return a.some(e,function(e){if(e.pending)return!0})}function r(e){return a.some(e,function(e){if(!e.url&&!e.payload_id)return!0})}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a=n("../node_modules/lodash/lodash.js"),c=n("../node_modules/bluebird/js/browser/bluebird.js"),l=n("../node_modules/react/react.js"),d=l.PropTypes,u=(n("../../common/src/utils/memoize.js"),n("../../common/src/utils/list-parser.js")),p=n("../../common/src/utils/markdown.js"),m=n("../../common/src/utils/plain-text.js"),h=n("../../common/src/utils/tag-scanner.js"),f=(n("../../common/src/utils/focus-manager.js"),n("../../common/src/utils/component-refs.js")),g=n("../../common/src/objects/utils/story-utils.js"),v=n("../../common/src/objects/utils/issue-utils.js"),b=n("../../common/src/data/remote-data-source/temporary-id.js"),y=n("../../common/src/utils/random-token.js"),j=n("../../common/src/data/database.js"),x=n("../../common/src/transport/payloads.js"),w=n("../../common/src/routing/route.js"),k=n("../../common/src/locale/locale.js"),_=n("../../common/src/theme/theme.js"),E=n("../../common/src/mixins/update-check.js"),C=n("./widgets/author-names.jsx"),S=n("./widgets/profile-image.jsx"),R=n("./widgets/coauthoring-button.jsx"),N=n("./widgets/push-button.jsx"),O=n("../../common/src/widgets/autosize-text-area.jsx"),T=n("./widgets/media-toolbar.jsx"),P=n("./widgets/text-toolbar.jsx"),D=n("./widgets/header-button.jsx"),U=n("./widgets/drop-zone.jsx"),A=n("./editors/media-editor.jsx"),I=n("./editors/media-importer.jsx"),L=n("./widgets/media-placeholder.jsx"),M=n("./editors/story-editor-options.jsx"),B=n("./widgets/corner-pop-up.jsx"),z=n("./dialogs/confirmation-dialog-box.jsx");n("./editors/story-editor.scss");e.exports=l.createClass({displayName:"StoryEditor",mixins:[E],propTypes:{isStationary:d.bool,highlighting:d.bool,story:d.object,authors:d.arrayOf(d.object),recommendations:d.arrayOf(d.object),recipients:d.arrayOf(d.object),currentUser:d.object,repos:d.arrayOf(d.object),database:d.instanceOf(j).isRequired,payloads:d.instanceOf(x).isRequired,route:d.instanceOf(w).isRequired,locale:d.instanceOf(k).isRequired,theme:d.instanceOf(_).isRequired},getDefaultProps:function(){return{isStationary:!1}},getInitialState:function(){this.components=f({mediaImporter:I,textArea:O,mainPopUp:B,previewPopUp:B});var e={options:q,selectedResourceIndex:0,original:null,draft:null,confirming:!1,capturing:null,action:null};return this.updateDraft(e,this.props),this.updateOptions(e,this.props),this.updateLocaleCode(e,this.props),this.updateLeadAuthor(e,this.props),this.updateBookmarkRecipients(e,this.props),this.updateResourceIndex(e,this.props),e},getClassName:function(){var e="story-editor";return this.props.highlighting&&(e+=" highlighting"),e},isCoauthoring:function(){var e=a.get(this.props.story,"user_ids"),t=a.get(this.props.currentUser,"id");return a.indexOf(e,t)>0},componentWillReceiveProps:function(e){var t=a.clone(this.state);this.props.story!==e.story&&(this.updateDraft(t,e),this.updateOptions(t,e),this.updateLocaleCode(t,e),this.updateResourceIndex(t,e)),this.props.currentUser!==e.currentUser&&this.updateLeadAuthor(t,e),this.props.locale!==e.locale&&this.updateLocaleCode(t,e),this.props.recommendations!==e.recommendations&&this.updateBookmarkRecipients(t,e),this.props.repos!==e.repos&&(this.updateOptions(t,e),this.updateLocaleCode(t,e));var n=a.shallowDiff(t,this.state);a.isEmpty(n)||this.setState(n)},updateDraft:function(e,t){t.story?(e.draft=t.story,t.story.uncommitted||(e.original=t.story)):(e.draft=s(t.currentUser),e.original=null)},updateLeadAuthor:function(e,t){if(!e.story){var n=a.get(t.currentUser,"id");e.draft.user_ids||(e.draft=a.decouple(e.draft,"user_ids",[]),e.draft.user_ids[0]=n)}},updateOptions:function(e,t){t.story?(e.options=a.clone(e.options),e.options.hidePost=!e.draft.public,e.options.issueDetails=v.extractIssueDetails(e.draft,t.repos),e.options.preview||(e.options.preview=this.choosePreview(e.draft))):e.options=q},updateBookmarkRecipients:function(e,t){var n=a.map(t.recommendations,"target_user_id");e.options=a.clone(e.options),e.options.bookmarkRecipients=a.union(e.options.bookmarkRecipients,n)},updateLocaleCode:function(e,t){e.options=a.clone(e.options),e.options.localeCode=this.chooseLocale(e.draft,t.locale)},updateResourceIndex:function(e,t){var n=a.get(e.draft,"details.resources"),s=a.size(n);e.selectedResourceIndex>=s?e.selectedResourceIndex=s-1:e.selectedResourceIndex<0&&s>0&&(e.selectedResourceIndex=0)},choosePreview:function(e){return"survey"===e.type||"task-list"===e.type?"text":a.get(e,"details.markdown",!1)?"text":""},chooseLocale:function(e,t){var n,s=a.get(e,"details.text");if(a.isEmpty(s))n=t.localeCode;else{var o=a.first(a.keys(s));if(o===t.languageCode)n=t.localeCode;else{var r=a.find(t.directory,{code:o});if(r){n=o+"-"+r.defaultCountry}else n=o}}return n},render:function(){switch(this.props.theme.mode){case"single-col":return this.renderSingleColumn();case"double-col":return this.renderDoubleColumn();case"triple-col":return this.renderTripleColumn()}},renderSingleColumn:function(){return l.createElement("div",{className:this.getClassName()},l.createElement("div",{className:"header"},l.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderAuthorNames(),this.renderPopUpMenu("main"))),l.createElement("div",{className:"body"},l.createElement("div",{className:"column-1 padded"},this.renderCoauthoringButton(),this.renderTextArea(),this.renderButtons())),l.createElement("div",{className:"header"},l.createElement("div",{className:"column-2 padded"},this.renderToolbar(),this.renderPopUpMenu("preview"))),l.createElement("div",{className:"body"},l.createElement("div",{className:"column-2"},this.renderPreview())),this.renderMediaImporter(),this.renderConfirmationDialogBox())},renderDoubleColumn:function(){return l.createElement("div",{className:this.getClassName()},l.createElement("div",{className:"header"},l.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderAuthorNames(),this.renderPopUpMenu("main")),l.createElement("div",{className:"column-2 padded"},this.renderToolbar(),this.renderPopUpMenu("preview"))),l.createElement("div",{className:"body"},l.createElement("div",{className:"column-1 padded"},this.renderCoauthoringButton(),this.renderTextArea(),this.renderButtons()),l.createElement("div",{className:"column-2"},this.renderPreview())),this.renderMediaImporter(),this.renderConfirmationDialogBox())},renderTripleColumn:function(){var e=this.props.locale.translate;return l.createElement("div",{className:this.getClassName()},l.createElement("div",{className:"header"},l.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderAuthorNames()),l.createElement("div",{className:"column-2 padded"},this.renderToolbar()),l.createElement("div",{className:"column-3 padded"},l.createElement(D,{icon:"chevron-circle-right",label:e("story-options"),disabled:!0}))),l.createElement("div",{className:"body"},l.createElement("div",{className:"column-1 padded"},this.renderCoauthoringButton(),this.renderTextArea(),this.renderButtons()),l.createElement("div",{className:"column-2"},this.renderPreview()),l.createElement("div",{className:"column-3 padded"},this.renderOptions())),this.renderMediaImporter(),this.renderConfirmationDialogBox())},renderProfileImage:function(){var e={user:a.get(this.props.authors,0),theme:this.props.theme,size:"medium"};return l.createElement(S,e)},renderAuthorNames:function(){var e={authors:this.props.authors,locale:this.props.locale,theme:this.props.theme};return l.createElement(C,e)},renderCoauthoringButton:function(){var e={coauthoring:this.isCoauthoring(),story:this.state.draft,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleCoauthorSelect,onRemove:this.handleCancelClick};return l.createElement(R,e)},renderTextArea:function(){var e=this.components.setters,t=this.state.options.localeCode,n=t.substr(0,2),s=a.get(this.state.draft,["details","text",n],""),o={value:s,lang:t,onChange:this.handleTextChange,onBeforeInput:this.handleBeforeInput,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onPaste:this.handlePaste};return l.createElement(O,i({ref:e.textArea},o))},renderButtons:function(){var e=this.props.locale.translate,t=this.state.draft,n=a.get(t,"details.text"),s=a.get(t,"details.resources"),r=a.isEmpty(a.pickBy(n)),i=a.isEmpty(s),c=o(s),d=a.get(t,"published",!1),u={label:e("story-cancel"),onClick:this.handleCancelClick,disabled:r&&i||d},p={label:e("story-post"),onClick:this.handlePublishClick,emphasized:!0,disabled:r&&i||c||d};return l.createElement("div",{className:"buttons"},l.createElement(N,u),l.createElement(N,p))},renderToolbar:function(){return"text"===this.state.options.preview?this.renderTextToolbar():this.renderMediaToolbar()},renderTextToolbar:function(){var e={story:this.state.draft,locale:this.props.locale,onAction:this.handleAction};return l.createElement(P,e)},renderMediaToolbar:function(){var e={story:this.state.draft,capturing:this.state.capturing,locale:this.props.locale,onAction:this.handleAction};return l.createElement(T,e)},renderPreview:function(){return"text"===this.state.options.preview?this.renderTextPreview():this.renderMediaPreview()},renderTextPreview:function(){var e;switch(this.state.draft.type){case void 0:case"":case"post":e=this.renderRegularPost();break;case"task-list":e=this.renderTaskListText();break;case"survey":e=this.renderSurveyText()}return l.createElement("div",{className:"story-contents"},e)},renderRegularPost:function(){var e=this.props.locale.pick,t="text story",n=this.state.draft,s=e(n.details.text);return n.details.markdown?(s=p.render(s,this.handleReference),t+=" markdown"):(s=l.createElement("p",null,m.renderEmoji(s)),t+=" plain-text"),l.createElement("div",{className:t,onClick:this.handleTextClick},s)},renderTaskListText:function(){var e,t=this.props.locale.pick,n="text task-list",s=this.state.draft,o=t(s.details.text);return s.details.markdown?(e=p.renderTaskList(o,null,this.handleItemChange,this.handleReference),n+=" markdown"):(e=m.renderTaskList(o,null,this.handleItemChange),e=l.createElement("p",null,e),n+=" plain-text"),l.createElement("div",{className:n,onClick:this.handleTextClick},e)},renderSurveyText:function(){var e,t=this.props.locale.pick,n="text survey",s=this.state.draft,o=t(s.details.text);return s.details.markdown?(e=p.renderSurvey(o,null,this.handleItemChange,this.handleReference),n+=" markdown"):(e=m.renderSurvey(o,null,this.handleItemChange),e=l.createElement("p",null,e),n+=" plain-text"),l.createElement("div",{className:n,onClick:this.handleTextClick},e)},renderMediaPreview:function(){var e={allowEmbedding:!0,resources:a.get(this.state.draft,"details.resources"),resourceIndex:this.state.selectedResourceIndex,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,onChange:this.handleResourcesChange,onEmbed:this.handleResourceEmbed},t={showHints:this.props.isStationary,locale:this.props.locale,theme:this.props.theme};return l.createElement(U,{onDrop:this.handleDrop},l.createElement(A,e,l.createElement(L,t)))},renderMediaImporter:function(){var e={ref:this.components.setters.mediaImporter,resources:a.get(this.state.draft,"details.resources",[]),locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads,cameraDirection:"back",onCaptureStart:this.handleCaptureStart,onCaptureEnd:this.handleCaptureEnd,onChange:this.handleResourcesChange};return l.createElement(I,e)},renderPopUpMenu:function(e){var t=this.components.setters[e+"PopUp"];return l.createElement(B,{ref:t},this.renderOptions(e))},renderOptions:function(e){var t={section:e,story:this.state.draft,options:this.state.options,currentUser:this.props.currentUser,repos:this.props.repos,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onChange:this.handleOptionChange,onComplete:this.handleOptionComplete};return l.createElement(M,t)},renderConfirmationDialogBox:function(){var e,t=this.props.locale.translate,n={show:this.state.confirming,locale:this.props.locale,onClose:this.handleDialogClose};return"delete-post"===this.state.action?(e=t("story-cancel-are-you-sure"),n.onConfirm=this.handleCancelConfirm):"cancel-edit"===this.state.action?(e=t("story-cancel-edit-are-you-sure"),n.onConfirm=this.handleCancelConfirm):(e=t("story-remove-yourself-are-you-sure"),n.onConfirm=this.handleRemoveConfirm),l.createElement(z,n,e)},componentDidUpdate:function(e,t){if(this.repositionCursor){var n=this.repositionCursor.target;n.selectionStart=n.selectionEnd=this.repositionCursor.position,this.repositionCursor=null}},changeDraft:function(e,t){var n=this;return new c(function(s,o){var r=n.state.options;if(!r.preview){var i=n.choosePreview(e);i&&(r=a.decoupleSet(r,"preview",i))}var c={draft:e,options:r};void 0!==t&&(c.selectedResourceIndex=t),n.setState(c,function(){s(e)})})},changeOptions:function(e){var t=this;return new c(function(n,s){t.setState({options:e},function(){n(e)})})},saveDraft:function(e,t,n){var s=this;return e.public=!this.state.options.hidePost,this.changeDraft(e,n).then(function(e){return s.saveStory(e,t),e})},saveStory:function(e,t){var n=this,s=this.props.route.parameters,o=(e.details.resources,this.state.original),r={delay:t?void 0:2e3,onConflict:function(e){g.mergeRemoteChanges(e.local,e.remote,o)&&e.preventDefault()}},i=this.props.database.use({schema:s.schema,by:this});return i.start().then(function(){return i.saveOne({table:"story"},e,r).then(function(e){return n.props.payloads.dispatch(e),e})})},removeStory:function(e){var t=this.props.route,n=t.parameters.schema;return this.props.database.use({schema:n,by:this}).removeOne({table:"story"},e)},removeSelf:function(){var e=this.props.story,t=a.without(e.user_ids,this.props.currentUser.id),n={id:e.id,user_ids:t},s=this.props.route.parameters,o=this.props.database.use({schema:s.schema,by:this});return o.start().then(function(){return o.saveOne({table:"story"},n)})},saveBookmarks:function(e){if(a.isEmpty(e))return c.resolve([]);var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.save({table:"bookmark"},e)})},removeBookmarks:function(e){if(a.isEmpty(e))return c.resolve([]);var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.remove({table:"bookmark"},e)})},sendBookmarks:function(e,t){var n=this,s=this.props.recommendations,o=[];a.each(t,function(t){if(!a.some(s,{target_user_id:t})){var r={story_id:e.published_version_id||e.id,user_ids:[n.props.currentUser.id],target_user_id:t};o.push(r)}});var r=[];return a.each(s,function(e){a.includes(t,e.target_user_id)||r.push(e)}),this.saveBookmarks(o).then(function(e){return n.removeBookmarks(r).then(function(t){return a.concat(e,t)})})},sendTask:function(e,t){var n={action:e,options:t,user_id:this.props.currentUser.id,token:y.generate()},s=this.props.route.parameters,o=this.props.database.use({schema:s.schema,by:this});return o.start().then(function(){return o.saveOne({table:"task"},n)})},publishStory:function(){var e=this,t=a.clone(this.state.draft),n=this.state.options;if(t.type||(t.type="post"),a.isEmpty(t.role_ids)){var s=a.map(this.props.authors,"role_ids");t.role_ids=a.uniq(a.flatten(s))}return t.published=!0,this.saveDraft(t,!0).then(function(t){return e.sendBookmarks(t,n.bookmarkRecipients).then(function(){var n=v.extractIssueDetails(e.state.draft,e.props.repos),s=e.state.options.issueDetails;if(!a.isEqual(s,n)&&s){var o=a.clone(s);return o.story_id=t.id,e.sendTask("export-issue",o)}})})},handlePublishClick:function(e){this.publishStory()},handleTextChange:function(e){var t=e.currentTarget.value,n=this.state.options.localeCode,s=n.substr(0,2);s=n?n.substr(0,2):this.props.locale.languageCode;var o="details.text."+s,r=a.decoupleSet(this.state.draft,o,t);if(r.details.text=a.pickBy(r.details.text,"length"),a.isEmpty(r.details.text)&&(r.details=a.omit(r.details,"text")),r.type||u.detect(r.details.text)&&(r.type="task-list",void 0===r.details.markdown&&(r.details.markdown=!1)),"task-list"===r.type){var i=[];a.each(r.details.text,function(e){var t=u.extract(e),n=u.count(t,!1);i.push(n)}),r.unfinished_tasks=a.max(i)}void 0===r.details.markdown&&p.detect(t)&&(r.details.markdown=!0),r.tags=h.findTags(r.details.text),this.saveDraft(r)},handleKeyDown:function(e){this.lastInput=null},handleBeforeInput:function(e){var t=e.target;if("\n"===e.data){var n=this.state.draft.type;if("survey"!==n&&"task-list"!==n&&"single-col"===this.props.theme.mode)return e.preventDefault(),this.handlePublishClick(e),void t.blur()}this.lastInput=e.data},handleKeyUp:function(e){var t=e.target;if("\n"===this.lastInput){var n=this.state.draft.type;if("survey"===n||"task-list"===n){var s=t.value,o=t.selectionStart,r=s.substr(0,o),i=a.lastIndexOf(r.substr(0,r.length-1),"\n"),c=r.substr(i+1),l=u.extract(c),d=a.get(l,[0,0]);d instanceof Object&&(d.label?document.execCommand("insertText",!1,"* [ ] "):(t.selectionStart=i+1,document.execCommand("insertText",!1,"\n")))}}else if("]"===this.lastInput){var s=t.value,o=t.selectionStart,r=s.substr(0,o),i=a.lastIndexOf(r,"\n"),c=r.substr(i+1);/^\s*\*\[\]/.test(c)&&(t.selectionStart=o-3,document.execCommand("insertText",!1,"* [ ]"))}},handlePaste:function(e){c.all([this.components.mediaImporter.importFiles(e.clipboardData.files),this.components.mediaImporter.importDataItems(e.clipboardData.items)]),e.clipboardData.files.length>0&&e.preventDefault()},handleCancelClick:function(e){var t;t=this.isCoauthoring()?"remove-self":this.props.isStationary?"delete-post":"cancel-edit",this.setState({confirming:!0,action:t})},handleOptionChange:function(e){return this.changeOptions(e.options)},handleOptionComplete:function(e){var t=e.target.props.section,n=this.components[t+"PopUp"];n&&n.close()},handleDialogClose:function(e){this.setState({confirming:!1})},handleCancelConfirm:function(e){var t=this;this.setState({confirming:!1});var n=this.state.draft;if(this.props.isStationary){var o=s(this.props.currentUser);this.changeDraft(o).then(function(){return n.id?t.removeStory(n):n})}else this.removeStory(n)},handleReference:function(e){var t=this.state.draft.details.resources,s=p.findReferencedResource(t,e.name);if(s){var o,r=this.props.theme;return o=e.forImage?"audio"===s.type?n("../node_modules/file-loader/index.js!../assets/speaker.svg")+"#"+encodeURI(s.url):r.getImageURL(s,{height:24}):r.getURL(s),{href:o,title:e.name}}},handleTextClick:function(e){var t=e.target;t.viewportElement&&(t=t.viewportElement);var n;if("svg"===t.tagName){var s=t.getElementsByTagName("title")[0];s&&(n=s.textContent)}else n=e.target.title;if(n){var o=this.state.draft.details.resources,r=p.findReferencedResource(o,n);if(r){var i=a.indexOf(o,r),c=a.decoupleSet(this.state.options,"preview","media");this.setState({selectedResourceIndex:i,options:c})}}},handleItemChange:function(e){var t=e.currentTarget,n=parseInt(t.name),s=parseInt(t.value),o=t.checked,r=a.decouple(this.state.draft,"details");if("task-list"===r.type){var i=[];r.details.text=a.mapValues(r.details.text,function(e){var t=u.extract(e);u.set(t,n,s,o);var r=u.count(t,!1);return i.push(r),u.join(t)}),r.unfinished_tasks=a.max(i)}else"survey"===r.type&&(r.details.text=a.mapValues(r.details.text,function(e){var t=u.extract(e);return u.set(t,n,s,o,!0),u.join(t)}));this.saveDraft(r)},handleRemoveConfirm:function(e){this.setState({confirming:!1}),this.removeSelf()},handleCoauthorSelect:function(e){var t=a.decoupleSet(this.state.draft,"user_ids",e.selection);this.saveDraft(t,!0)},handleResourcesChange:function(e){var t=this.state.draft.resources,n=e.resources,s=e.selection;if(void 0===s&&(s=this.state.selectedResourceIndex),t!==n){var i=a.decoupleSet(this.state.draft,"details.resources",n),c=!1;return o(n)&&r(n)&&(c=!0),this.saveDraft(i,c,s)}this.setState({selectedResourceIndex:s})},handleResourceEmbed:function(e){var t=this,n=e.resource,s=a.decouple(this.state.draft,"details"),o=s.details.resources,r=a.filter(o,{type:n.type}),i=a.indexOf(r,n);if(-1!==i){var c=a.clone(this.state.options);c.preview="media",this.changeOptions(c).then(function(){a.set(s,"details.markdown",!0),t.changeDraft(s).then(function(){t.components.textArea.getElement().focus(),setTimeout(function(){var e="!["+n.type+"-"+(i+1)+"]";document.execCommand("insertText",!1,e)},10)})})}},handleDrop:function(e){c.all([this.components.mediaImporter.importFiles(e.files),this.components.mediaImporter.importDataItems(e.items)])},handleCaptureStart:function(e){this.setState({capturing:e.mediaType})},handleCaptureEnd:function(e){this.setState({capturing:null})},handleAction:function(e){switch(e.action){case"markdown-set":var t=a.decouple(this.state.draft,"details");t.details.markdown=e.value,this.saveDraft(t);break;case"story-type-set":var t=a.decouple(this.state.draft,"details");if(t.type=e.value,"task-list"===t.type||"survey"===t.type){var n=this.components.textArea.getElement();n.focus(),u.detect(n.value)||setTimeout(function(){var e=n.value,t="* [ ] ",s=n.selectionStart;/[^\n]$/.test(e.substr(0,s))&&(t="\n"+t),document.execCommand("insertText",!1,t)},10)}this.saveDraft(t);break;case"photo-capture":this.components.mediaImporter.capture("image");break;case"video-capture":this.components.mediaImporter.capture("video");break;case"audio-capture":this.components.mediaImporter.capture("audio");break;case"file-import":this.components.mediaImporter.importFiles(e.files)}}});var q={localeCode:"",issueDetails:null,hidePost:!1,bookmarkRecipients:[],preview:""}},"./editors/story-editor.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/story-editor.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./editors/video-editor.jsx":function(e,t,n){"use strict";function s(e){var t=e.resource.duration;return o.createElement(r,e,o.createElement("div",{className:"video-duration"},i.format(t)))}var o=n("../node_modules/react/react.js"),r=(o.PropTypes,n("./editors/image-editor.jsx")),i=n("./widgets/duration-indicator.jsx");e.exports=s,n("./editors/video-editor.scss"),s.propTypes=r.propTypes},"./editors/video-editor.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./editors/video-editor.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./keys.js":function(e,t,n){"use strict"},"./lists/bookmark-list.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),r=o.PropTypes,i=n("../node_modules/relaks/index.js"),a=n("../../common/src/utils/memoize.js"),c=n("../../common/src/data/empty.js"),l=(n("../../common/src/data/merger.js"),n("../../common/src/objects/finders/user-finder.js")),d=n("../../common/src/objects/finders/story-finder.js"),u=n("../../common/src/objects/finders/repo-finder.js"),p=n("../../common/src/objects/finders/bookmark-finder.js"),m=n("../../common/src/objects/finders/reaction-finder.js"),h=n("../../common/src/data/database.js"),f=n("../../common/src/transport/payloads.js"),g=n("../../common/src/routing/route.js"),v=n("../../common/src/locale/locale.js"),b=n("../../common/src/theme/theme.js"),y=n("../../common/src/mixins/update-check.js"),j=n("../../common/src/widgets/smart-list.jsx"),x=n("./views/bookmark-view.jsx"),w=n("./views/story-view.jsx"),k=n("./editors/story-editor.jsx"),_=n("./widgets/new-items-alert.jsx");n("./lists/bookmark-list.scss"),e.exports=i.createClass({displayName:"BookmarkList",propTypes:{access:r.oneOf(["read-only","read-comment","read-write"]).isRequired,bookmarks:r.arrayOf(r.object),currentUser:r.object,project:r.object,selectedStoryId:r.number,database:r.instanceOf(h).isRequired,payloads:r.instanceOf(f).isRequired,route:r.instanceOf(g).isRequired,locale:r.instanceOf(v).isRequired,theme:r.instanceOf(b).isRequired},statics:{parseHash:function(e){var t,n;return(t=g.parseId(e,/S(\d+)/))?n=!0:(t=g.parseId(e,/s(\d+)/))&&(n=!1),{story:t,highlighting:n}},getHash:function(e){return e.story?e.highlighting?"S"+e.story:"s"+e.story:""}},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this}),r={stories:null,draftStories:null,authors:null,senders:null,reactions:null,respondents:null,recommendations:null,recipients:null,repos:null,access:this.props.access,bookmarks:this.props.bookmarks,currentUser:this.props.currentUser,project:this.props.project,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(o.createElement(E,r)),n.start().then(function(e){return u.findProjectRepos(n,r.project).then(function(e){r.repos=e})}).then(function(){return d.findStoriesOfBookmarks(n,r.bookmarks,r.currentUser).then(function(e){r.stories=e})}).then(function(){return e.show(o.createElement(E,r)),d.findDraftStories(n,r.currentUser).then(function(e){r.draftStories=e})}).then(function(){e.show(o.createElement(E,r));var t=s.filter(s.concat(r.draftStories,r.stories));return l.findStoryAuthors(n,t).then(function(e){r.authors=e})}).then(function(){return e.show(o.createElement(E,r)),l.findBookmarkSenders(n,r.bookmarks).then(function(e){r.senders=e})}).then(function(){return e.show(o.createElement(E,r)),m.findReactionsToStories(n,r.stories,r.currentUser).then(function(e){r.reactions=e})}).then(function(){return e.show(o.createElement(E,r)),l.findReactionAuthors(n,r.reactions).then(function(e){r.respondents=e})}).then(function(){return e.show(o.createElement(E,r)),p.findBookmarksByUser(n,r.currentUser).then(function(e){r.recommendations=e})}).then(function(){return e.show(o.createElement(E,r)),l.findBookmarkRecipients(n,r.recommendations).then(function(e){r.recipients=e})}).then(function(){return o.createElement(E,r)})}});var E=e.exports.Sync=o.createClass({displayName:"BookmarkList.Sync",mixins:[y],propTypes:{access:r.oneOf(["read-only","read-comment","read-write"]).isRequired,bookmarks:r.arrayOf(r.object),senders:r.arrayOf(r.object),stories:r.arrayOf(r.object),authors:r.arrayOf(r.object),draftStories:r.arrayOf(r.object),draftAuthors:r.arrayOf(r.object),reactions:r.arrayOf(r.object),respondents:r.arrayOf(r.object),recommendations:r.arrayOf(r.object),recipients:r.arrayOf(r.object),currentUser:r.object,project:r.object,repos:r.arrayOf(r.object),database:r.instanceOf(h).isRequired,payloads:r.instanceOf(f).isRequired,route:r.instanceOf(g).isRequired,locale:r.instanceOf(v).isRequired,theme:r.instanceOf(b).isRequired},getInitialState:function(){return{hiddenStoryIds:[]}},render:function(){var t,n=S(this.props.bookmarks),s=e.exports.parseHash(this.props.route.hash);s.story&&(t="story-"+s.story);var r={items:n,behind:4,ahead:8,anchor:t,offset:20,onIdentity:this.handleBookmarkIdentity,onRender:this.handleBookmarkRender,onAnchorChange:this.handleBookmarkAnchorChange,onBeforeAnchor:this.handleBookmarkBeforeAnchor};return o.createElement("div",{className:"bookmark-list"},o.createElement(j,r),this.renderNewStoryAlert())},renderNewStoryAlert:function(){var t=this.props.locale.translate,n=s.size(this.state.hiddenStoryIds),r={story:s.first(this.state.hiddenStoryIds)},i={hash:e.exports.getHash(r),route:this.props.route,onClick:this.handleNewBookmarkAlertClick};return o.createElement(_,i,t("alert-$count-new-bookmarks",n))},handleBookmarkIdentity:function(e){return"story-"+e.item.story_id},handleBookmarkRender:function(t){var n=this,r=t.item,i=R(this.props.stories,r);if(!i)return null;var a=!1,c=!1;if(i){if("read-write"===this.props.access)if(i.published){var l=s.find(this.props.draftStories,{published_version_id:i.id});l&&(i=l,a=!0)}else a=!0;var d=this.props.route.hash,u=e.exports.parseHash(d);i.id===u.story&&u.highlighting&&(c=!0,setTimeout(function(){n.props.route.reanchor(s.toLower(d))},1e3))}if(a||t.needed)var p=T(this.props.senders,r),m={highlighting:c,bookmark:r,senders:p,currentUser:this.props.currentUser,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};if(a){var h=O(this.props.authors,i),f=D(this.props.recommendations,i),g=U(this.props.recipients,f);i||(h=C(this.props.currentUser));var v={story:i,authors:h,recommendations:f,recipients:g,currentUser:this.props.currentUser,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement(x,m,o.createElement(k,v))}if(t.needed){var b=N(this.props.reactions,i),h=O(this.props.authors,i),y=P(this.props.respondents,b),f=D(this.props.recommendations,i),g=U(this.props.recipients,f),j={access:this.props.access,story:i,bookmark:r,reactions:b,authors:h,respondents:y,recommendations:f,recipients:g,repos:this.props.repos,currentUser:this.props.currentUser,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement(x,m,o.createElement(w,j))}var _=t.previousHeight||t.estimatedHeight||100;return o.createElement("div",{className:"bookmark-view",style:{height:_}})},handleBookmarkAnchorChange:function(t){var n={story:s.get(t.item,"story_id")},o=e.exports.getHash(n);this.props.route.reanchor(o)},handleBookmarkBeforeAnchor:function(e){var t=s.map(e.items,"story_id");this.setState({hiddenStoryIds:t})},handleNewBookmarkAlertClick:function(e){this.setState({hiddenStoryIds:[]})}}),C=a(function(e){return[e]}),S=a(function(e){return s.orderBy(e,["id"],["desc"])}),R=a(function(e,t){return t?s.find(e,{id:t.story_id}):null}),N=a(function(e,t){if(t){var n=s.filter(e,{story_id:t.id});if(!s.isEmpty(n))return n}return c.array}),O=a(function(e,t){if(t){var n=s.filter(s.map(t.user_ids,function(t){return s.find(e,{id:t})}));if(!s.isEmpty(n))return n}return c.array}),T=O,P=a(function(e,t){var n=s.uniq(s.map(t,"user_id")),o=s.filter(s.map(n,function(t){return s.find(e,{id:t})}));return s.isEmpty(o)?c.array:o}),D=a(function(e,t){if(t){var n=t.published_version_id||t.id,o=s.filter(e,{story_id:n});if(!s.isEmpty(o))return o}return c.array}),U=a(function(e,t){var n=s.filter(e,function(e){return s.some(t,{target_user_id:e.id})});return s.isEmpty(n)?c.array:n})},"./lists/bookmark-list.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/bookmark-list.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./lists/notification-list.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../node_modules/relaks/index.js"),c=n("../../common/src/utils/memoize.js"),l=(n("../../common/src/data/merger.js"),n("../../common/src/objects/finders/user-finder.js")),d=n("../../common/src/objects/finders/story-finder.js"),u=n("../../common/src/data/database.js"),p=n("../../common/src/routing/route.js"),m=n("../../common/src/locale/locale.js"),h=n("../../common/src/theme/theme.js"),f=n("../../common/src/mixins/update-check.js"),g=n("../../common/src/widgets/smart-list.jsx"),v=n("./views/notification-view.jsx"),b=n("./widgets/new-items-alert.jsx");n("./lists/notification-list.scss"),e.exports=a.createClass({displayName:"NotificationList",propTypes:{notifications:i.arrayOf(i.object),currentUser:i.object,database:i.instanceOf(u).isRequired,route:i.instanceOf(p).isRequired,locale:i.instanceOf(m).isRequired,theme:i.instanceOf(h).isRequired},statics:{parseHash:function(e){var t,n;return(t=p.parseId(e,/N(\d+)/))?n=!0:(t=p.parseId(e,/n(\d+)/))&&(n=!1),{notification:t,highlighting:n}},getHash:function(e){return void 0!=e.notification?e.highlighting?"N"+e.notification:"n"+e.notification:""}},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this}),s={users:null,stories:null,currentUser:this.props.currentUser,notifications:this.props.notifications,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(r.createElement(y,s)),n.start().then(function(e){return l.findNotificationTriggerers(n,s.notifications).then(function(e){s.users=e})}).then(function(){return e.show(r.createElement(y,s)),d.findStoriesOfNotifications(n,s.notifications,s.currentUser).then(function(e){s.stories=e})}).then(function(){return r.createElement(y,s)})}});var y=e.exports.Sync=r.createClass({displayName:"NotificationList.Sync",mixins:[f],propTypes:{notifications:i.arrayOf(i.object),currentUser:i.object,users:i.arrayOf(i.object),database:i.instanceOf(u).isRequired,route:i.instanceOf(p).isRequired,locale:i.instanceOf(m).isRequired,theme:i.instanceOf(h).isRequired},getInitialState:function(){return{hiddenNotificationIds:[]}},render:function(){var t,n=j(this.props.notifications),s=e.exports.parseHash(this.props.route.hash);s.notification&&(t="notification-"+s.notification);var o={items:n,behind:20,ahead:40,anchor:t,offset:10,onIdentity:this.handleNotificationIdentity,onRender:this.handleNotificationRender,onAnchorChange:this.handleNotificationAnchorChange,onBeforeAnchor:this.handleNotificationBeforeAnchor};return r.createElement("div",{className:"notification-list"},r.createElement(g,o),this.renderNewNotificationAlert())},renderNewNotificationAlert:function(){var t=this.props.locale.translate,n=o.size(this.state.hiddenNotificationIds),s={notification:o.first(this.state.hiddenNotificationIds)},i={hash:e.exports.getHash(s),route:this.props.route,onClick:this.handleNewNotificationAlertClick};return r.createElement(b,i,t("alert-$count-new-notifications",n))},componentDidUpdate:function(e,t){var n=this;e.notifications===this.props.notifications&&t.hiddenNotificationIds===this.state.hiddenNotificationIds||setTimeout(function(){var e=o.filter(n.props.notifications,function(e){if(!e.seen&&!o.includes(n.state.hiddenNotificationIds,e.id))return!0});if(!o.isEmpty(e)){var t=e.length;t>5?t=5:t<2&&(t=2),clearTimeout(n.markAsSeenTimeout),n.markAsSeenTimeout=setTimeout(function(){n.markAsSeen(e)},1e3*t)}},50)},componentWillUnmount:function(){clearTimeout(this.markAsSeenTimeout)},handleNotificationIdentity:function(e){return"notification-"+e.item.id},handleNotificationRender:function(e){if(e.needed){var t=e.item,n=x(this.props.users,t),o={notification:t,user:n,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onClick:this.handleNotificationClick};return r.createElement(v,s({key:t.id},o))}var i=e.previousHeight||e.estimatedHeight||25;return r.createElement("div",{className:"notification-view",style:{height:i}})},markAsSeen:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this}),s=o.map(e,function(e){return{id:e.id,seen:!0}});return n.save({table:"notification"},s)},handleNotificationClick:function(e){var t=e.target.props.notification;t.seen||this.markAsSeen([t])},handleNotificationAnchorChange:function(t){var n={notification:o.get(t.item,"id")},s=e.exports.getHash(n);this.props.route.reanchor(s)},handleNotificationBeforeAnchor:function(e){var t=o.map(e.items,"id");this.setState({hiddenNotificationIds:t})},handleNewNotificationAlertClick:function(e){this.setState({hiddenNotificationIds:[]})}}),j=c(function(e){return o.orderBy(e,["ctime"],["desc"])}),x=c(function(e,t){return t?o.find(e,{id:t.user_id}):null})},"./lists/notification-list.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/notification-list.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./lists/reaction-list.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=(n("../node_modules/react-dom/index.js"),n("../../common/src/utils/memoize.js")),c=(n("../../common/src/data/merger.js"),n("../../common/src/data/database.js")),l=n("../../common/src/transport/payloads.js"),d=n("../../common/src/routing/route.js"),u=n("../../common/src/locale/locale.js"),p=n("../../common/src/theme/theme.js"),m=n("../../common/src/mixins/update-check.js"),h=n("./views/reaction-view.jsx"),f=n("./editors/reaction-editor.jsx"),g=n("../../common/src/widgets/smart-list.jsx");n("./lists/reaction-list.scss"),e.exports=r.createClass({displayName:"ReactionList",mixins:[m],propTypes:{access:i.oneOf(["read-only","read-comment","read-write"]).isRequired,story:i.object.isRequired,reactions:i.arrayOf(i.object),respondents:i.arrayOf(i.object),repo:i.object,currentUser:i.object,database:i.instanceOf(c).isRequired,payloads:i.instanceOf(l).isRequired,route:i.instanceOf(d).isRequired,locale:i.instanceOf(u).isRequired,theme:i.instanceOf(p).isRequired,onFinish:i.func},statics:{parseHash:function(e){var t,n;return(t=d.parseId(e,/R(\d+)/))?n=!0:(t=d.parseId(e,/r(\d+)/))&&(n=!1),{reaction:t,highlighting:n}},getHash:function(e){return void 0!=e.reaction?e.highlighting?"R"+e.reaction:"r"+e.reaction:""}},getInitialState:function(){return{hiddenReactionIds:[]}},render:function(){var t,n=v(this.props.reactions,this.props.currentUser),s=e.exports.parseHash(this.props.route.hash);s.reaction&&(t="reaction-"+s.reaction);var o={items:n,behind:5,ahead:10,anchor:t,offset:4,inverted:!0,fresh:!1,onIdentity:this.handleReactionIdentity,onTransition:this.handleReactionTransition,onRender:this.handleReactionRender,onBeforeAnchor:this.handleReactionBeforeAnchor};return r.createElement("div",{className:"reaction-list"},r.createElement(g,o))},handleReactionIdentity:function(e){if(!e.alternative)return"reaction-"+e.item.id;var t=this.props.route.parameters,n={schema:t.schema,table:"reaction"},s=this.props.database.findTemporaryID(n,e.item.id);return s?"reaction-"+s:void 0},handleReactionTransition:function(e){return!(e.item.id<1)},handleReactionRender:function(t){var n=t.item,o=!1,i=!1,a=!1;if(n){n.published||n.user_id===this.props.currentUser.id&&(o=!0,n.ptime||(i=!0));var c=e.exports.parseHash(this.props.route.hash);n.id===c.reaction&&(a=c.highlighting)}else o=!0,i=!0;if(o){var l=i?0:n.id,d={reaction:n,story:this.props.story,currentUser:this.props.currentUser,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onFinish:this.props.onFinish};return r.createElement(f,s({key:l},d))}var u=b(this.props.respondents,n),d={access:this.props.access,highlighting:a,reaction:n,respondent:u,story:this.props.story,repo:this.props.repo,currentUser:this.props.currentUser,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return r.createElement(h,s({key:n.id},d))},handleReactionBeforeAnchor:function(e){var t=o.map(e.items,"id");this.setState({hiddenReactionIds:t})}});var v=a(function(e,t){var n=o.orderBy(e,["ptime","id"],["desc","desc"]),s=o.remove(n,{user_id:t,ptime:null});return o.each(s,function(e){n.unshift(e)}),n}),b=a(function(e,t){return t?o.find(e,{id:t.user_id}):null})},"./lists/reaction-list.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/reaction-list.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./lists/story-list.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),r=o.PropTypes,i=n("../node_modules/relaks/index.js"),a=n("../../common/src/utils/memoize.js"),c=n("../../common/src/data/empty.js"),l=n("../../common/src/utils/component-refs.js"),d=n("../../common/src/objects/finders/user-finder.js"),u=n("../../common/src/objects/finders/repo-finder.js"),p=n("../../common/src/objects/finders/bookmark-finder.js"),m=n("../../common/src/objects/finders/reaction-finder.js"),h=n("../../common/src/data/database.js"),f=n("../../common/src/transport/payloads.js"),g=n("../../common/src/routing/route.js"),v=n("../../common/src/locale/locale.js"),b=n("../../common/src/theme/theme.js"),y=n("../../common/src/mixins/update-check.js"),j=n("../../common/src/widgets/smart-list.jsx"),x=n("./views/story-view.jsx"),w=n("./editors/story-editor.jsx"),k=n("./widgets/new-items-alert.jsx");n("./lists/story-list.scss"),e.exports=i.createClass({displayName:"StoryList",propTypes:{access:r.oneOf(["read-only","read-comment","read-write"]).isRequired,acceptNewStory:r.bool,stories:r.arrayOf(r.object),draftStories:r.arrayOf(r.object),pendingStories:r.arrayOf(r.object),currentUser:r.object,project:r.object,database:r.instanceOf(h).isRequired,payloads:r.instanceOf(f).isRequired,route:r.instanceOf(g).isRequired,locale:r.instanceOf(v).isRequired,theme:r.instanceOf(b).isRequired},statics:{parseHash:function(e){var t,n;return(t=g.parseId(e,/S(\d+)/))?n=!0:(t=g.parseId(e,/s(\d+)/))&&(n=!1),{story:t,highlighting:n}},getHash:function(e){return e.story?e.highlighting?"S"+e.story:"s"+e.story:""}},getDefaultProps:function(){return{acceptNewStory:!1}},renderAsync:function(e,t){var n=this.props.route.parameters,r=this.props.database.use({schema:n.schema,by:this}),i={authors:null,reactions:null,respondents:null,recommendations:null,recipients:null,repos:null,access:this.props.access,acceptNewStory:this.props.acceptNewStory,stories:this.props.stories,draftStories:this.props.draftStories,pendingStories:this.props.pendingStories,currentUser:this.props.currentUser,project:this.props.project,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(o.createElement(_,i)),r.start().then(function(e){return u.findProjectRepos(r,i.project).then(function(e){i.repos=e})}).then(function(){e.show(o.createElement(_,i));var t=s.filter(s.concat(i.pendingStories,i.draftStories,i.stories));return d.findStoryAuthors(r,t).then(function(e){i.authors=e})}).then(function(){e.show(o.createElement(_,i));var t=s.filter(s.concat(i.pendingStories,i.stories));return m.findReactionsToStories(r,t,i.currentUser).then(function(e){i.reactions=e})}).then(function(){return e.show(o.createElement(_,i)),d.findReactionAuthors(r,i.reactions).then(function(e){i.respondents=e})}).then(function(){e.show(o.createElement(_,i));var t=s.filter(s.concat(i.pendingStories,i.stories));return p.findBookmarksByUser(r,i.currentUser,t).then(function(e){i.recommendations=e})}).then(function(){return e.show(o.createElement(_,i)),d.findBookmarkRecipients(r,i.bookmarks).then(function(e){i.recipients=e})}).then(function(){return o.createElement(_,i)})}});var _=e.exports.Sync=o.createClass({displayName:"StoryList.Sync",mixins:[y],propTypes:{access:r.oneOf(["read-only","read-comment","read-write"]).isRequired,acceptNewStory:r.bool,stories:r.arrayOf(r.object),authors:r.arrayOf(r.object),draftStories:r.arrayOf(r.object),pendingStories:r.arrayOf(r.object),reactions:r.arrayOf(r.object),respondents:r.arrayOf(r.object),recommendations:r.arrayOf(r.object),recipients:r.arrayOf(r.object),currentUser:r.object,project:r.object,repos:r.arrayOf(r.object),database:r.instanceOf(h).isRequired,payloads:r.instanceOf(f).isRequired,route:r.instanceOf(g).isRequired,locale:r.instanceOf(v).isRequired,theme:r.instanceOf(b).isRequired},getInitialState:function(){return this.components=l({list:j}),{hiddenStoryIds:[]}},render:function(){var t=this.components.setters,n=C(this.props.stories,this.props.pendingStories);this.props.acceptNewStory&&(n=S(n,this.props.draftStories,this.props.currentUser));var s,r=e.exports.parseHash(this.props.route.hash);r.story&&(s="story-"+r.story);var i={ref:t.list,items:n,offset:20,behind:4,ahead:8,anchor:s,onIdentity:this.handleStoryIdentity,onRender:this.handleStoryRender,onAnchorChange:this.handleStoryAnchorChange,onBeforeAnchor:this.handleStoryBeforeAnchor};return this.freshList=!1,o.createElement("div",{className:"story-list"},o.createElement(j,i),this.renderNewStoryAlert())},renderNewStoryAlert:function(){var t=this.props.locale.translate,n=s.size(this.state.hiddenStoryIds),r={story:s.first(this.state.hiddenStoryIds)},i={hash:e.exports.getHash(r),route:this.props.route,onClick:this.handleNewStoryAlertClick};return o.createElement(k,i,t("alert-$count-new-stories",n))},handleStoryIdentity:function(e){if(!e.alternative||!e.item)return this.props.acceptNewStory&&0===e.currentIndex?"story-top":"story-"+e.item.id;var t=this.props.route.parameters,n={schema:t.schema,table:"story"},s=this.props.database.findTemporaryID(n,e.item.id);return s?"story-"+s:void 0},handleStoryRender:function(t){var n=this,r=t.item,i=!1,a=!1;if(r){if("read-write"===this.props.access)if(r.published){var c=s.find(this.props.draftStories,{published_version_id:r.id});c&&(r=c,i=!0)}else i=!0;var l=this.props.route.hash,d=e.exports.parseHash(l);r.id===d.story&&d.highlighting&&(a=!0,setTimeout(function(){n.props.route.reanchor(s.toLower(l))},1e3))}else i=!0;if(i){var u=O(this.props.authors,r),p=P(this.props.recommendations,r),m=D(this.props.recipients,p);r||(u=E(this.props.currentUser));var h={highlighting:a,story:r,authors:u,recommendations:p,recipients:m,repos:this.props.repos,isStationary:0===t.currentIndex,currentUser:this.props.currentUser,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement(w,h)}if(t.needed){var f=N(this.props.reactions,r),u=O(this.props.authors,r),g=T(this.props.respondents,f),p=P(this.props.recommendations,r),m=D(this.props.recipients,p),v=!s.includes(this.props.stories,r),b={highlighting:a,pending:v,access:this.props.access,story:r,reactions:f,authors:u,respondents:g,recommendations:p,recipients:m,repos:this.props.repos,currentUser:this.props.currentUser,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onBump:this.handleStoryBump};return o.createElement(x,b)}var y=t.previousHeight||t.estimatedHeight||100;return o.createElement("div",{className:"story-view",style:{height:y}})},handleStoryAnchorChange:function(t){var n={story:s.get(t.item,"id")},o=e.exports.getHash(n);this.props.route.reanchor(o)},handleStoryBeforeAnchor:function(e){var t=s.map(e.items,"id");this.setState({hiddenStoryIds:t})},handleNewStoryAlertClick:function(e){this.setState({hiddenStoryIds:[]})},handleStoryBump:function(e){this.components.list.releaseAnchor()}}),E=a(function(e){return[e]}),C=a(function(e,t){return s.isEmpty(t)||(e=s.slice(e),s.each(t,function(t){t.published_version_id||e.push(t)})),s.orderBy(e,[R,"id"],["desc","desc"])}),S=a(function(e,t,n){var o=s.filter(t,function(e){return!e.published_version_id&&!e.published}),r=function(e){return e.user_ids[0]===n.id};return o=s.orderBy(o,[r,"id"],["desc","desc"]),s.find(o,function(e){if(e.user_ids[0]===n.id)return!0})||o.unshift(null),s.concat(o,e)},[null]),R=function(e){return e.btime||e.ptime},N=a(function(e,t){if(t){var n=s.filter(e,{story_id:t.id});if(!s.isEmpty(n))return n}return c.array}),O=a(function(e,t){if(t){var n=s.keyBy(e,"id"),o=s.filter(s.map(t.user_ids,function(e){return n[e]}));if(!s.isEmpty(o))return o}return c.array}),T=a(function(e,t){var n=s.uniq(s.map(t,"user_id")),o=s.keyBy(e,"id"),r=s.filter(s.map(n,function(e){return o[e]}));return s.isEmpty(r)?c.array:r}),P=a(function(e,t){if(t){var n=t.published_version_id||t.id,o=s.filter(e,{story_id:n});if(!s.isEmpty(o))return o}return c.array}),D=a(function(e,t){var n=s.filter(e,function(e){return s.some(t,{target_user_id:e.id})});return s.isEmpty(n)?c.array:n})},"./lists/story-list.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/story-list.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./lists/user-activity-list.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/utils/memoize.js"),a=n("../../common/src/utils/date-tracker.js"),c=n("../../common/src/routing/route.js"),l=n("../../common/src/locale/locale.js"),d=n("../../common/src/theme/theme.js"),u=n("../../common/src/mixins/update-check.js"),p=(n("./widgets/profile-image.jsx"),n("../../common/src/widgets/time.jsx"));n("./lists/user-activity-list.scss"),e.exports=o.createClass({displayName:"UserActivityList",mixins:[u],propTypes:{user:r.object,stories:r.arrayOf(r.object),storyCountEstimate:r.number,route:r.instanceOf(c).isRequired,locale:r.instanceOf(l).isRequired,theme:r.instanceOf(d).isRequired},render:function(){if(this.props.stories){var e=m(this.props.stories);return o.createElement("div",{className:"user-activity-list"},s.map(e,this.renderActivity))}var t=s.range(0,this.props.storyCountEstimate);return o.createElement("div",{className:"user-activity-list"},s.map(t,this.renderActivityPlaceholder))},renderActivity:function(e){var t=this.props.route,r=[n("./pages/people-page.jsx"),n("./lists/story-list.jsx")],i=s.pick(t.parameters,"schema","date","search");i.user=this.props.user.id,i.story=e.id,i.highlighting=!0;var c=t.find(r,i),l=this.renderText(e),d="label",u=e.btime||e.ptime;return(u>=a.todayISO||u>=a.yesterdayISO)&&(d+=" recent"),o.createElement("div",{key:e.id,className:"activity"},o.createElement(p,{time:e.ptime,locale:this.props.locale,compact:!0}),o.createElement("div",{className:d},o.createElement("a",{href:c},l)))},renderActivityPlaceholder:function(e){return o.createElement("div",{key:e,className:"activity"}," ")},renderText:function(e){var t=this.props.locale.translate,n=this.props.locale.name,o=this.props.user,r=n(s.get(o,"details.name"),s.get(o,"details.gender"));switch(e.type){case"push":return t("user-activity-$name-pushed-code",r);case"merge":return t("user-activity-$name-merged-code",r);case"branch":return t("user-activity-$name-created-branch",r);case"issue":return t("user-activity-$name-reported-issue",r);case"milestone":return t("user-activity-$name-created-milestone",r);case"merge-request":return t("user-activity-$name-created-merge-request",r);case"wiki":return t("user-activity-$name-edited-wiki-page",r);case"member":case"repo":return t("user-activity-$name-"+e.details.action+"-repo",r);case"post":var i=e.details.resources,a=s.countBy(i,"type");return a.video>0?t("user-activity-$name-posted-$count-video-clips",r,a.video):a.image>0?t("user-activity-$name-posted-$count-pictures",r,a.image):a.audio>0?t("user-activity-$name-posted-$count-audio-clips",r,a.audio):a.website>0?t("user-activity-$name-posted-$count-links",r,a.website):t("user-activity-$name-wrote-post",r);case"survey":return t("user-activity-$name-started-survey",r);case"task-list":return t("user-activity-$name-started-task-list",r);default:return e.type}}});var m=i(function(e){return e=s.orderBy(e,[h],["desc"])}),h=function(e){return e.btime||e.ptime}},"./lists/user-activity-list.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/user-activity-list.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./lists/user-list.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=(n("../node_modules/relaks/index.js"),n("../node_modules/moment/moment.js"),n("../../common/src/utils/memoize.js")),a=n("../../common/src/data/empty.js"),c=(n("../../common/src/utils/date-tracker.js"),n("../../common/src/utils/date-utils.js"),n("../../common/src/data/database.js")),l=n("../../common/src/routing/route.js"),d=n("../../common/src/locale/locale.js"),u=n("../../common/src/theme/theme.js"),p=n("../../common/src/mixins/update-check.js"),m=n("../../common/src/widgets/smart-list.jsx"),h=n("./views/user-view.jsx");n("./lists/user-list.scss"),e.exports=o.createClass({displayName:"UserList",mixins:[p],propTypes:{users:r.arrayOf(r.object),roles:r.arrayOf(r.object),dailyActivities:r.object,listings:r.arrayOf(r.object),stories:r.arrayOf(r.object),currentUser:r.object,selectedDate:r.string,today:r.string,link:r.oneOf(["user","team"]),database:r.instanceOf(c).isRequired,route:r.instanceOf(l).isRequired,locale:r.instanceOf(d).isRequired,theme:r.instanceOf(u).isRequired,loading:r.bool},statics:{parseHash:function(e){var t,n;return(t=l.parseId(e,/U(\d+)/))?n=!0:(t=l.parseId(e,/u(\d+)/))&&(n=!1),{user:t,highlighting:n}},getHash:function(e){return e.user?e.highlighting?"U"+e.user:"u"+e.user:""}},getInitialState:function(){return{viewOptions:{}}},render:function(){var t,n=f(this.props.users,this.props.locale),s=e.exports.parseHash(this.props.route.hash);s.user&&(t="user-"+s.user);var r={items:n,offset:16,behind:4,ahead:8,anchor:t,onIdentity:this.handleUserIdentity,onRender:this.handleUserRender,onAnchorChange:this.handleUserAnchorChange};return o.createElement("div",{className:"user-list"},o.createElement(m,r))},handleUserIdentity:function(e){return"user-"+e.item.id},handleUserRender:function(e){if(e.needed){var t,n=e.item,r=g(this.props.roles,n),i=s.get(this.props.dailyActivities,n.id);if(this.props.listings){var a=v(this.props.listings,n);t=b(this.props.stories,a)}else t=y(this.props.stories,n);t&&t.length>5&&(t=s.slice(t,-5));var c=this.state.viewOptions[n.id]||{},l={user:n,roles:r,dailyActivities:i,stories:t,options:c,currentUser:this.props.currentUser,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,selectedDate:this.props.selectedDate,today:this.props.today,link:this.props.link,onOptionChange:this.handleOptionChange};return o.createElement(h,l)}var d=e.previousHeight||e.estimatedHeight||100;return o.createElement("div",{className:"user-view",style:{height:d}})},handleUserAnchorChange:function(t){var n={user:s.get(t.item,"id")},o=e.exports.getHash(n);this.props.route.reanchor(o)},handleOptionChange:function(e){var t=s.clone(this.state.viewOptions);t[e.user.id]=e.options,this.setState({viewOptions:t})}});var f=i(function(e,t){var n=t.pick,o=function(e){return n(e.details.name)};return s.orderBy(e,[o],["asc"])}),g=i(function(e,t){if(t){var n=s.filter(s.map(t.role_ids,function(t){return s.find(e,{id:t})}));if(!s.isEmpty(n))return n}return a.array}),v=i(function(e,t){return t?s.find(e,function(e){if(e.filters.user_ids[0]===t.id)return!0}):null}),b=i(function(e,t){if(t){var n=s.keyBy(e,"id"),o=s.filter(s.map(t.story_ids,function(e){return n[e]}));if(!s.isEmpty(o))return o}return a.array}),y=i(function(e,t){var n=s.filter(e,function(e){return s.includes(e.user_ids,t.id)});return s.isEmpty(n)?a.array:n})},"./lists/user-list.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/user-list.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./lists/user-selection-list.jsx":function(e,t,n){"use strict";function s(e){var t=e.locale.pick,n=["user"];e.selected&&n.push("selected"),e.disabled&&n.push("disabled");var s=t(e.user.details.name),o={className:n.join(" "),"data-user-id":e.user.id,onClick:e.disabled?null:e.onClick},r={user:e.user,theme:e.theme,size:"small"};return i.createElement("div",o,i.createElement(g,r),i.createElement("span",{className:"name"},s),i.createElement("i",{className:"fa fa-check-circle"}))}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../node_modules/relaks/index.js"),l=n("../../common/src/utils/memoize.js"),d=n("../../common/src/objects/finders/project-finder.js"),u=n("../../common/src/objects/finders/user-finder.js"),p=n("../../common/src/data/database.js"),m=n("../../common/src/routing/route.js"),h=n("../../common/src/locale/locale.js"),f=n("../../common/src/theme/theme.js"),g=n("./widgets/profile-image.jsx");n("./lists/user-selection-list.scss"),e.exports=c.createClass({displayName:"UserSelectionList",propTypes:{selection:a.arrayOf(a.number),disabled:a.arrayOf(a.number),database:a.instanceOf(p).isRequired,route:a.instanceOf(m).isRequired,locale:a.instanceOf(h).isRequired,theme:a.instanceOf(f).isRequired,onSelect:a.func},renderAsync:function(e){var t=(this.props.route.parameters,this.props.database.use({by:this})),n={users:null,selection:this.props.selection,disabled:this.props.disabled,locale:this.props.locale,theme:this.props.theme,onSelect:this.props.onSelect};return e.show(i.createElement(v,n)),t.start().then(function(e){return d.findCurrentProject(t).then(function(e){return u.findProjectMembers(t,e).then(function(e){n.users=e})})}).then(function(){return i.createElement(v,n)})}});var v=e.exports.Sync=i.createClass({displayName:"UserSelectionList.Sync",propTypes:{users:a.arrayOf(a.object),selection:a.arrayOf(a.number),disabled:a.arrayOf(a.number),locale:a.instanceOf(h).isRequired,theme:a.instanceOf(f).isRequired,onSelect:a.func},render:function(){var e=b(this.props.users,this.props.locale);return i.createElement("div",{className:"user-selection-list"},r.map(e,this.renderUser))},renderUser:function(e){var t={user:e,selected:r.includes(this.props.selection,e.id),disabled:r.includes(this.props.disabled,e.id),locale:this.props.locale,theme:this.props.theme,onClick:this.handleUserClick};return i.createElement(s,o({key:e.id},t))},triggerSelectEvent:function(e){this.props.onSelect&&this.props.onSelect({type:"select",target:this,selection:e})},handleUserClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-user-id")),n=this.props.selection;n=r.includes(n,t)?r.difference(n,[t]):r.union(n,[t]),this.triggerSelectEvent(n)}}),b=l(function(e,t){var n=t.pick,s=function(e){return n(e.details.name)};return r.orderBy(e,[s],["asc"])})},"./lists/user-selection-list.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./lists/user-selection-list.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./pages/bookmarks-page.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../node_modules/relaks/index.js"),a=n("../../common/src/objects/finders/user-finder.js"),c=n("../../common/src/objects/finders/bookmark-finder.js"),l=n("../../common/src/objects/finders/project-finder.js"),d=n("../../common/src/objects/settings/project-settings.js"),u=n("../../common/src/data/database.js"),p=n("../../common/src/transport/payloads.js"),m=n("../../common/src/routing/route.js"),h=n("../../common/src/locale/locale.js"),f=n("../../common/src/theme/theme.js"),g=n("./widgets/page-container.jsx"),v=n("./lists/bookmark-list.jsx"),b=n("./widgets/loading-animation.jsx"),y=n("./widgets/empty-message.jsx");n("./pages/bookmarks-page.scss"),e.exports=i.createClass({displayName:"BookmarksPage",propTypes:{database:r.instanceOf(u).isRequired,payloads:r.instanceOf(p).isRequired,route:r.instanceOf(m).isRequired,locale:r.instanceOf(h).isRequired,theme:r.instanceOf(f).isRequired},statics:{parseURL:function(e,t){return m.match(e,["/:schema/bookmarks/?"],function(e){return{schema:e.schema}})},getURL:function(e){var t="/"+e.schema+"/bookmarks/";return{path:t,query:void 0}},configureUI:function(e){return{navigation:{route:{schema:e.parameters.schema},section:"bookmarks"}}}},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this}),s={bookmarks:null,currentUser:null,project:null,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(o.createElement(j,s)),n.start().then(function(e){return a.findUser(n,e).then(function(e){s.currentUser=e})}).then(function(){return l.findCurrentProject(n).then(function(e){s.project=e})}).then(function(e){return c.findBookmarksForUser(n,s.currentUser).then(function(e){s.bookmarks=e})}).then(function(){return o.createElement(j,s)})}});var j=e.exports.Sync=o.createClass({displayName:"BookmarksPage.Sync",propTypes:{bookmarks:r.arrayOf(r.object),currentUser:r.object,project:r.object,database:r.instanceOf(u).isRequired,route:r.instanceOf(m).isRequired,locale:r.instanceOf(h).isRequired,theme:r.instanceOf(f).isRequired},getAccessLevel:function(){var e=this.props,t=e.project,n=e.currentUser;return d.getUserAccessLevel(t,n)||"read-only"},render:function(){return o.createElement(g,{className:"bookmarks-page"},this.renderList(),this.renderEmptyMessage())},renderList:function(){var e=(this.props.route.parameters,{access:this.getAccessLevel(),bookmarks:this.props.bookmarks,currentUser:this.props.currentUser,project:this.props.project,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme});return o.createElement(v,e)},renderEmptyMessage:function(){var e=this.props.bookmarks;if(!s.isEmpty(e))return null;if(e){var t={locale:this.props.locale,online:this.props.database.online,phrase:"bookmarks-no-bookmarks"};return o.createElement(y,t)}return o.createElement(b,null)}})},"./pages/bookmarks-page.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/bookmarks-page.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./pages/error-page.jsx":function(e,t,n){"use strict";var s=n("../node_modules/react/react.js"),o=s.PropTypes,r=n("../../common/src/errors/http-error.js"),i=n("../../common/src/data/database.js"),a=n("../../common/src/routing/route.js"),c=n("../../common/src/locale/locale.js"),l=n("../../common/src/theme/theme.js"),d=n("./widgets/page-container.jsx");n("./pages/error-page.scss"),e.exports=s.createClass({displayName:"ErrorPage",propTypes:{database:o.instanceOf(i).isRequired,route:o.instanceOf(a).isRequired,locale:o.instanceOf(c).isRequired,theme:o.instanceOf(l).isRequired},statics:{parseURL:function(e,t,n){return a.match(e,["/:schema/error/:code","/error/:code"],function(e){return{schema:e.schema,code:parseInt(e.code)}})},getURL:function(e){var t="/error/"+e.code;return e.schema&&(t="/"+e.schema+t),{path:t,query:void 0,hash:void 0}},configureUI:function(e){var t=e.parameters,n=!!t.schema;return{navigation:{top:n,bottom:n}}}},render:function(){var e,t=this.props.route.parameters,o=new r(t.code),i=n("../assets/unicorn.svg");return e=404===t.code?"The page you're trying to reach doesn't exist. But then again, who does?":"The application is behaving in ways its maker never intended.",s.createElement(d,{className:"error-page"},s.createElement("div",{className:"graphic"},s.createElement(i,null)),s.createElement("div",{className:"text"},s.createElement("h1",{className:"title"},o.statusCode," ",o.message),s.createElement("p",null,e)))}})},"./pages/error-page.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/error-page.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./pages/news-page.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=(n("../node_modules/react-dom/index.js"),n("../node_modules/moment/moment.js")),a=n("../node_modules/relaks/index.js"),c=n("../../common/src/objects/finders/user-finder.js"),l=n("../../common/src/objects/finders/project-finder.js"),d=n("../../common/src/objects/finders/story-finder.js"),u=n("../../common/src/objects/settings/project-settings.js"),p=n("../../common/src/utils/tag-scanner.js"),m=n("../../common/src/data/database.js"),h=n("../../common/src/transport/payloads.js"),f=n("../../common/src/routing/route.js"),g=n("../../common/src/locale/locale.js"),v=n("../../common/src/theme/theme.js"),b=n("../../common/src/mixins/update-check.js"),y=n("./widgets/page-container.jsx"),j=n("./lists/story-list.jsx"),x=n("./widgets/loading-animation.jsx"),w=n("./widgets/empty-message.jsx");n("./pages/news-page.scss"),e.exports=a.createClass({displayName:"NewsPage",propTypes:{database:r.instanceOf(m).isRequired,payloads:r.instanceOf(h).isRequired,route:r.instanceOf(f).isRequired,locale:r.instanceOf(g).isRequired,theme:r.instanceOf(v).isRequired},statics:{parseURL:function(e,t){return f.match(e,["/:schema/news/?"],function(e){return{schema:e.schema,roles:f.parseIdList(t.roles),search:t.search,date:f.parseDate(t.date)}})},getURL:function(e){var t="/"+e.schema+"/news/",n={};return void 0!=e.date&&(n.date=e.date),void 0!=e.roles&&(n.roles=e.roles.join("+")),void 0!=e.search&&(n.search=e.search),{path:t,query:n}},configureUI:function(e){var t=e.parameters,n={schema:t.schema},s={type:"daily-activities",schema:t.schema,public:"guest"};return{calendar:{route:n,statistics:s},filter:{route:n},search:{route:n,statistics:s},navigation:{route:n,section:"news"}}}},renderAsync:function(e){var t,n=this,r=this.props.route.parameters,i=this.props.database.use({schema:r.schema,by:this});r.search&&!p.removeTags(r.search)&&(t=p.findTags(r.search));var a={stories:null,draftStories:null,pendingStories:null,project:null,currentUser:null,acceptNewStory:!r.date&&s.isEmpty(r.roles)&&!r.search,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme},u=!e.revising();return e.show(o.createElement(k,a)),i.start().then(function(e){return c.findUser(i,e).then(function(e){a.currentUser=e})}).then(function(){return l.findCurrentProject(i).then(function(e){a.project=e})}).then(function(){return e.show(o.createElement(k,a)),t?d.findStoriesWithTags(i,t,a.currentUser).then(function(e){a.stories=e}):r.search?d.findStoriesMatchingText(i,r.search,a.locale,a.currentUser).then(function(e){a.stories=e}):r.date?d.findStoriesOnDate(i,r.date,a.currentUser).then(function(e){a.stories=e}):s.isEmpty(r.roles)?d.findStoriesInListing(i,"news",a.currentUser,u).then(function(e){a.stories=e}).then(function(){return e.show(o.createElement(k,a)),d.findDraftStories(i,a.currentUser).then(function(e){a.draftStories=e})}).then(function(){return d.findUnlistedStories(i,a.currentUser,a.stories).then(function(e){a.pendingStories=e})}):d.findStoriesWithRolesInListing(i,r.roles,a.currentUser,u).then(function(e){a.stories=e})}).then(function(){if(!r.date){var e=j.parseHash(n.props.route.hash);if(e.story&&e.highlighting){var t=s.concat(a.stories,a.draftStories,a.pendingStories);if(!s.find(t,{id:e.story}))return d.findStory(i,e.story).then(function(e){return n.redirectToStory(r.schema,e)}).catch(function(e){})}}}).then(function(){return o.createElement(k,a)})},redirectToStory:function(e,t){if(t.ptime&&t.published&&!1!==t.ready){if(i()-i(t.ptime)<6e4)return}var s=[n("./pages/news-page.jsx"),n("./lists/story-list.jsx")],o={schema:e,date:i(t.ptime).format("YYYY-MM-DD"),story:t.id,highlighting:!0};return this.props.route.replace(s,o)}});var k=e.exports.Sync=o.createClass({displayName:"NewsPage.Sync",mixins:[b],propTypes:{acceptNewStory:r.bool,listing:r.object,stories:r.arrayOf(r.object),draftStories:r.arrayOf(r.object),pendingStories:r.arrayOf(r.object),currentUser:r.object,project:r.object,database:r.instanceOf(m).isRequired,payloads:r.instanceOf(h).isRequired,route:r.instanceOf(f).isRequired,locale:r.instanceOf(g).isRequired,theme:r.instanceOf(v).isRequired},getAccessLevel:function(){var e=this.props,t=e.project,n=e.currentUser;return u.getUserAccessLevel(t,n)||"read-only"},render:function(){return o.createElement(y,{className:"news-page"},this.renderList(),this.renderEmptyMessage())},renderList:function(){if(!this.props.stories)return null;var e=this.getAccessLevel(),t=(this.props.route.parameters,{access:e,acceptNewStory:this.props.acceptNewStory&&"read-write"===e,stories:this.props.stories,draftStories:this.props.draftStories,pendingStories:this.props.pendingStories,currentUser:this.props.currentUser,project:this.props.project,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onMissingStory:this.handleMissingStory});return o.createElement(j,t)},renderEmptyMessage:function(){var e=this.props.stories;if(!s.isEmpty(e))return null;if(e){var t,n=this.props.route.parameters;t=n.date?"news-no-stories-on-date":s.isEmpty(n.roles)?n.search?"news-no-stories-found":"news-no-stories-yet":"news-no-stories-by-role";var r={locale:this.props.locale,online:this.props.database.online,phrase:t};return o.createElement(w,r)}return o.createElement(x,null)},handleMissingStory:function(e){}})},"./pages/news-page.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/news-page.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./pages/notifications-page.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../node_modules/relaks/index.js"),a=(n("../node_modules/moment/moment.js"),n("../../common/src/utils/date-tracker.js"),n("../../common/src/objects/finders/user-finder.js")),c=n("../../common/src/objects/finders/notification-finder.js"),l=n("../../common/src/data/database.js"),d=n("../../common/src/routing/route.js"),u=n("../../common/src/locale/locale.js"),p=n("../../common/src/theme/theme.js"),m=n("./widgets/page-container.jsx"),h=n("./lists/notification-list.jsx"),f=n("./widgets/loading-animation.jsx"),g=n("./widgets/empty-message.jsx");n("./pages/notifications-page.scss"),e.exports=i.createClass({displayName:"NotificationsPage",propTypes:{database:r.instanceOf(l).isRequired,route:r.instanceOf(d).isRequired,locale:r.instanceOf(u).isRequired,theme:r.instanceOf(p).isRequired},statics:{parseURL:function(e,t){return d.match(e,["/:schema/notifications/:date/?","/:schema/notifications/?"],function(e){return{schema:e.schema,date:d.parseDate(e.date)}})},getURL:function(e){var t="/"+e.schema+"/notifications/";return void 0!=e.date&&(t+=(e.date||"date")+"/"),{path:t,query:void 0}},configureUI:function(e){var t=e.parameters,n={schema:t.schema};return{calendar:{route:n,statistics:{type:"daily-notifications",schema:t.schema,user_id:"current"}},navigation:{route:n,section:"notifications"}}}},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this}),s={currentUser:null,notifications:null,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(o.createElement(v,s)),n.start().then(function(e){return a.findUser(n,e).then(function(e){s.currentUser=e})}).then(function(){return t.date?c.findNotificationsForUserOnDate(n,s.currentUser,t.date).then(function(e){s.notifications=e}):c.findNotificationsForUser(n,s.currentUser).then(function(e){s.notifications=e})}).then(function(){return o.createElement(v,s)})}});var v=e.exports.Sync=o.createClass({displayName:"NotificationsPage.Sync",propTypes:{notifications:r.arrayOf(r.object),currentUser:r.object,database:r.instanceOf(l).isRequired,route:r.instanceOf(d).isRequired,locale:r.instanceOf(u).isRequired,theme:r.instanceOf(p).isRequired},render:function(){return o.createElement(m,{className:"notifications-page"},this.renderList(),this.renderEmptyMessage())},renderList:function(){var e={notifications:this.props.notifications,currentUser:this.props.currentUser,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement(h,e)},renderEmptyMessage:function(){var e=this.props.notifications;if(!s.isEmpty(e))return null;if(e){var t,n=this.props.route.parameters;t=n.date?"notifications-no-notifications-on-date":"notifications-no-notifications-yet";var r={locale:this.props.locale,online:this.props.database.online,phrase:t};return o.createElement(g,r)}return o.createElement(f,null)}})},"./pages/notifications-page.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/notifications-page.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./pages/people-page.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),r=o.PropTypes,i=n("../node_modules/relaks/index.js"),a=n("../node_modules/moment/moment.js"),c=n("../../common/src/utils/memoize.js"),l=(n("../../common/src/data/empty.js"),n("../../common/src/utils/date-tracker.js")),d=n("../../common/src/objects/finders/project-finder.js"),u=n("../../common/src/objects/settings/project-settings.js"),p=n("../../common/src/objects/finders/statistics-finder.js"),m=n("../../common/src/objects/finders/story-finder.js"),h=n("../../common/src/objects/finders/user-finder.js"),f=n("../../common/src/utils/tag-scanner.js"),g=n("../../common/src/data/database.js"),v=n("../../common/src/transport/payloads.js"),b=n("../../common/src/routing/route.js"),y=n("../../common/src/locale/locale.js"),j=n("../../common/src/theme/theme.js"),x=n("./widgets/page-container.jsx"),w=n("./lists/user-list.jsx"),k=n("./lists/story-list.jsx"),_=n("./widgets/loading-animation.jsx"),E=n("./widgets/empty-message.jsx");n("./pages/people-page.scss"),e.exports=i.createClass({displayName:"PeoplePage",propTypes:{database:r.instanceOf(g).isRequired,payloads:r.instanceOf(v).isRequired,route:r.instanceOf(b).isRequired,locale:r.instanceOf(y).isRequired,theme:r.instanceOf(j).isRequired},statics:{parseURL:function(e,t){return b.match(e,["/:schema/people/:user/?","/:schema/people/?"],function(e){return{schema:e.schema,search:t.search,user:b.parseId(e.user),date:b.parseDate(t.date),roles:b.parseIdList(t.roles)}})},getURL:function(e){var t="/"+e.schema+"/people/",n={};return e.user&&(t+=e.user+"/"),void 0!=e.date&&(n.date=e.date),void 0!=e.roles&&(n.roles=e.roles.join("+")),void 0!=e.search&&(n.search=e.search),{path:t,query:n}},configureUI:function(e){var t=e.parameters,n={schema:t.schema,user:t.user},o={type:"daily-activities",schema:t.schema,user_id:t.user};return t.user?{calendar:{route:n,statistics:o},search:{route:n,statistics:o},navigation:{route:s.omit(n,"user"),section:"people"}}:{calendar:{route:n,statistics:o},filter:{route:n},search:{route:n,statistics:o},navigation:{route:n,section:"people"}}}},getInitialState:function(){return{today:l.today}},renderAsync:function(e){var t,n=this,r=this.props.route.parameters,i=this.props.database.use({schema:r.schema,by:this});r.search&&!f.removeTags(r.search)&&(t=f.findTags(r.search),s.isEmpty(t)&&(t=null));var a={project:null,members:null,stories:null,currentUser:null,selectedUser:null,visibleUsers:null,selectedDate:r.date,today:this.state.today,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme},c=!e.revising();return e.show(o.createElement(C,a)),i.start().then(function(e){return h.findUser(i,e).then(function(e){a.currentUser=e})}).then(function(){return d.findCurrentProject(i).then(function(e){a.project=e})}).then(function(e){return h.findProjectMembers(i,a.project).then(function(e){if(a.members=e,r.user){var t=s.find(e,{id:r.user});if(t)return h.findUser(i,r.user).then(function(e){a.selectedUser=e,a.visibleUsers=[e]});a.selectedUser=t,a.visibleUsers=[t]}else r.search||r.date||(s.isEmpty(r.roles)?a.visibleUsers=e:a.visibleUsers=S(e,r.roles))})}).then(function(){"single-col"!==n.props.theme.mode&&e.show(o.createElement(C,a));var c="guest"===a.currentUser.type;return p.findDailyActivitiesOfUsers(i,a.project,a.members,c).then(function(e){if(a.dailyActivities=e,a.visibleUsers){if(a.selectedUser&&!s.some(a.members,{id:a.selectedUser}))return p.findDailyActivitiesOfUser(i,a.project,a.selectedUser,c).then(function(e){s.set(a.dailyActivities,a.selectedUser.id,e)})}else{var n;r.date?n=R(a.members,e,r.date):r.search&&t&&(n=N(a.members,e,t)),n&&(s.isEmpty(r.roles)?a.visibleUsers=n:a.visibleUsers=S(n,r.roles))}})}).then(function(){return e.show(o.createElement(C,a),"initial"),r.search?t?m.findStoriesWithTags(i,t,5).then(function(e){a.stories=e,a.selectedUser||(a.visibleUsers=O(a.members,e))}):m.findStoriesMatchingText(i,r.search,n.props.locale,5).then(function(e){a.stories=e,a.selectedUser||(a.visibleUsers=O(a.members,e))}):r.date?m.findStoriesOnDate(i,r.date,5).then(function(e){a.stories=e,a.selectedUser||(a.visibleUsers=O(a.members,e))}):m.findStoriesByUsersInListings(i,"news",a.visibleUsers,a.currentUser,5,c).then(function(e){a.stories=e})}).then(function(){if(e.show(o.createElement(C,a)),a.selectedUser)return r.search?t?m.findStoriesByUserWithTags(i,a.selectedUser,t).then(function(e){a.selectedUserStories=e}):m.findStoriesByUserMatchingText(i,a.selectedUser,r.search,n.props.locale).then(function(e){a.selectedUserStories=e}):r.date?m.findStoriesByUserOnDate(i,a.selectedUser,r.date).then(function(e){a.selectedUserStories=e}):m.findStoriesByUserInListing(i,"news",a.selectedUser,a.currentUser,c).then(function(e){a.selectedUserStories=e});var l=s.uniq(s.flatten(s.map(a.stories,"user_ids"))),d=s.map(a.members,"id"),u=s.difference(l,d),f="guest"===a.currentUser.type;return s.isEmpty(u)?void 0:h.findUsers(i,u).then(function(t){return a.visibleUsers=s.concat(a.visibleUsers,t),e.show(o.createElement(C,a)),p.findDailyActivitiesOfUsers(i,a.project,t,f).then(function(e){a.dailyActivities=s.assign({},a.dailyActivities,e)})})}).then(function(){if(!r.date){var e=k.parseHash(n.props.route.hash);if(e.story&&e.highlighting){var t=a.selectedUserStories;if(!s.find(t,{id:e.story}))return m.findStory(i,e.story).then(function(e){return n.redirectToStory(r.schema,e)}).catch(function(e){})}}}).then(function(){return o.createElement(C,a)})},redirectToStory:function(e,t){if(t.ptime&&t.published&&!1!==t.ready){if(a()-a(t.ptime)<6e4)return}var s=[n("./pages/people-page.jsx"),n("./lists/story-list.jsx")],o={schema:e,date:a(t.ptime).format("YYYY-MM-DD"),user:t.user_ids[0],story:t.id,highlighting:!0};return this.props.route.replace(s,o)},componentDidMount:function(){l.addEventListener("change",this.handleDateChange)},componentWillUnmount:function(){l.removeEventListener("change",this.handleDateChange)},handleDateChange:function(){this.setState({today:l.today})}});var C=e.exports.Sync=o.createClass({displayName:"PeoplePageSync",propTypes:{project:r.object,members:r.arrayOf(r.object),selectedUser:r.object,visibleUsers:r.arrayOf(r.object),dailyActivities:r.object,listings:r.arrayOf(r.object),stories:r.arrayOf(r.object),selectedUserStories:r.arrayOf(r.object),currentUser:r.object,selectedDate:r.string,today:r.string,database:r.instanceOf(g).isRequired,route:r.instanceOf(b).isRequired,locale:r.instanceOf(y).isRequired,theme:r.instanceOf(j).isRequired},getInitialState:function(){return{chartType:void 0}},getAccessLevel:function(){var e=this.props,t=e.project,n=e.currentUser;return u.getUserAccessLevel(t,n)||"read-only"},componentWillReceiveProps:function(e){this.props.selectedUser&&!e.selectedUser&&(this.previouslySelectedUser=this.props.selectedUser)},render:function(){return o.createElement(x,{className:"people-page"},this.renderUserList(),this.renderSelectedUserStoryList(),this.renderEmptyMessage())},renderUserList:function(){var e=(this.props.route.parameters,{users:this.props.visibleUsers,dailyActivities:this.props.dailyActivities,listings:this.props.listings,stories:this.props.stories,currentUser:this.props.currentUser,selectedDate:this.props.selectedDate,today:this.props.today,link:this.props.selectedUser?"team":"user",database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme});return o.createElement(w,e)},renderSelectedUserStoryList:function(){if(!this.props.selectedUser||!this.props.selectedUserStories)return null;var e=(this.props.route.parameters,{access:this.getAccessLevel(),stories:this.props.selectedUserStories,currentUser:this.props.currentUser,project:this.props.project,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme});return o.createElement(k,e)},renderEmptyMessage:function(){var e;if(e=this.props.selectedUser?this.props.selectedUserStories:this.props.visibleUsers,!s.isEmpty(e))return null;if(e){var t,n=this.props.route.parameters;t=n.date?"people-no-stories-on-date":s.isEmpty(n.roles)?n.search?"people-no-stories-found":"people-no-users-yet":"people-no-users-by-role";var r={locale:this.props.locale,online:this.props.database.online,phrase:t};return o.createElement(E,r)}return o.createElement(_,null)}}),S=c(function(e,t){return s.filter(e,function(e){return s.some(e.role_ids,function(e){return s.includes(t,e)})})}),R=c(function(e,t,n){var o=s.filter(e,function(e){var s=t[e.id];if(s)return s.daily[n]});return s.isEmpty(o),o}),N=c(function(e,t,n){var o=s.filter(e,function(e){var o=t[e.id];if(o)return s.some(o.daily,function(e,t){return s.some(n,function(t){return!!e[t]})})});return s.isEmpty(o),o}),O=c(function(e,t){var n=s.filter(e,function(e){return s.some(t,function(t){return s.includes(t.user_ids,e.id)})});return s.isEmpty(n),n})},"./pages/people-page.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/people-page.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./pages/settings-page.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../node_modules/relaks/index.js"),a=n("../../common/src/utils/konami-code.js"),c=n("../../common/src/objects/finders/device-finder.js"),l=n("../../common/src/objects/finders/project-finder.js"),d=n("../../common/src/objects/finders/repo-finder.js"),u=n("../../common/src/objects/finders/system-finder.js"),p=n("../../common/src/objects/finders/user-finder.js"),m=n("../../common/src/objects/utils/user-utils.js"),h=n("../../common/src/data/database.js"),f=n("../../common/src/transport/payloads.js"),g=n("../../common/src/routing/route.js"),v=n("../../common/src/locale/locale.js"),b=n("../../common/src/theme/theme.js"),y=n("./widgets/page-container.jsx"),j=n("./panels/development-panel.jsx"),x=n("./panels/project-panel.jsx"),w=n("./panels/device-panel.jsx"),k=n("./panels/user-info-panel.jsx"),_=n("./panels/user-image-panel.jsx"),E=n("./panels/notification-panel.jsx"),C=n("./panels/web-alert-panel.jsx"),S=n("./panels/mobile-alert-panel.jsx"),R=n("./panels/social-network-panel.jsx"),N=n("./panels/language-panel.jsx"),O=n("./panels/diagnostics-panel.jsx");n("./pages/settings-page.scss");e.exports=i.createClass({displayName:"SettingsPage",propTypes:{database:r.instanceOf(h).isRequired,payloads:r.instanceOf(f).isRequired,route:r.instanceOf(g).isRequired,locale:r.instanceOf(v).isRequired,theme:r.instanceOf(b).isRequired},statics:{parseURL:function(e,t){return g.match(e,["/global/settings/?","/:schema/settings/?"],function(e){return{schema:e.schema,diagnostics:!!t.diagnostics}})},getURL:function(e){var t="/"+(e.schema||"global")+"/settings/",n={};return e.diagnostics&&(n.diagnostics=1),{path:t,query:n}},configureUI:function(e){return{navigation:{route:{schema:e.parameters.schema},section:"settings"}}}},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this}),s={currentUser:null,currentProject:null,projectLinks:null,repos:null,devices:null,system:null,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return e.show(o.createElement(T,s)),n.start().then(function(e){return p.findUser(n,e).then(function(e){s.currentUser=e})}).then(function(){return l.findProjectLinks(n).then(function(e){s.projectLinks=e})}).then(function(){return l.findCurrentProject(n).then(function(e){s.currentProject=e})}).then(function(){return e.show(o.createElement(T,s)),c.findUserDevices(n,s.currentUser,1).then(function(e){s.devices=e})}).then(function(){return e.show(o.createElement(T,s)),d.findProjectRepos(n,s.currentProject).then(function(e){s.repos=e})}).then(function(){return e.show(o.createElement(T,s)),u.findSystem(n).then(function(e){s.system=e})}).then(function(){return o.createElement(T,s)})}});var T=e.exports.Sync=o.createClass({displayName:"SettingsPage.Sync",propTypes:{currentUser:r.object,currentProject:r.object,projectLinks:r.arrayOf(r.object),repos:r.arrayOf(r.object),devices:r.arrayOf(r.object),system:r.object,database:r.instanceOf(h).isRequired,payloads:r.instanceOf(f).isRequired,route:r.instanceOf(g).isRequired,locale:r.instanceOf(v).isRequired,theme:r.instanceOf(b).isRequired},getInitialState:function(){return{user:null,original:null}},getUser:function(){return this.state.user||this.props.currentUser},componentWillReceiveProps:function(e){if(this.props.currentUser!==e.currentUser){var t={user:null};e.currentUser&&!e.currentUser.uncommitted&&(t.original=e.currentUser),this.setState({user:null})}},render:function(){return this.props.route.parameters.diagnostics?this.renderDiagnostics():this.renderSettings()},renderSettings:function(){return this.props.currentUser?o.createElement(y,{className:"settings-page"},o.createElement("div",{className:"panels"},this.renderDevelopmentPanel(),this.renderProjectPanel(),this.renderDevicePanel(),this.renderNotificationPanel(),this.renderWebAlertPanel(),this.renderMobileAlertPanel(),this.renderUserInfoPanel(),this.renderUserImagePanel(),this.renderSocialNetworkPanel(),this.renderLanguagePanel())):null},renderDiagnostics:function(){return o.createElement(y,{className:"settings-page"},o.createElement("div",{className:"panels diagnostics"},o.createElement(O,{type:"connectivity-monitor",title:"Network"}),o.createElement(O,{type:"websocket-notifier",title:"Web Socket"}),o.createElement(O,{type:"push-notifier",title:"Push Notification"}),o.createElement(O,{type:"subscription-manager",title:"Data Subscription"}),o.createElement(O,{type:"session-manager",title:"Sessions"}),o.createElement(O,{type:"link-manager",title:"Project Links"}),o.createElement(O,{type:"locale-manager",title:"Locale Manager"}),o.createElement(O,{type:"indexed-db-cache",title:"IndexedDB Cache"}),o.createElement(O,{type:"sqlite-cache",title:"SQLite Cache"}),o.createElement(O,{type:"remote-data-source",title:"Remote Data Source"}),o.createElement(O,{type:"payload-manager",title:"Payload Manager"}),o.createElement(O,{type:"code-push",title:"CodePush"})))},renderDevelopmentPanel:function(){var e=this.getUser();if(!s.get(e,"settings.development.show_panel"))return null;var t={currentUser:e,route:this.props.route,locale:this.props.locale,onChange:this.handleChange};return o.createElement(j,t)},renderProjectPanel:function(){var e={system:this.props.system,currentUser:this.getUser(),currentProject:this.props.currentProject,projectLinks:this.props.projectLinks,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onChange:this.handleChange};return o.createElement(x,e)},renderDevicePanel:function(){if(s.isEmpty(this.props.devices))return null;var e={devices:this.props.devices,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement(w,e)},renderUserInfoPanel:function(){var e={currentUser:this.getUser(),locale:this.props.locale,onChange:this.handleChange};return o.createElement(k,e)},renderUserImagePanel:function(){var e={currentUser:this.getUser(),payloads:this.props.payloads,locale:this.props.locale,theme:this.props.theme,onChange:this.handleChange};return o.createElement(_,e)},renderSocialNetworkPanel:function(){var e={currentUser:this.getUser(),locale:this.props.locale,onChange:this.handleChange};return o.createElement(R,e)},renderNotificationPanel:function(){var e={currentUser:this.getUser(),repos:this.props.repos,locale:this.props.locale,onChange:this.handleChange};return o.createElement(E,e)},renderWebAlertPanel:function(){var e={currentUser:this.getUser(),repos:this.props.repos,locale:this.props.locale,onChange:this.handleChange};return o.createElement(C,e)},renderMobileAlertPanel:function(){if(s.isEmpty(this.props.devices))return null;var e={currentUser:this.getUser(),repos:this.props.repos,locale:this.props.locale,onChange:this.handleChange};return o.createElement(S,e)},renderLanguagePanel:function(){var e={locale:this.props.locale};return o.createElement(N,e)},componentDidMount:function(){a.addListener(this.handleKonamiCode)},componentWillUnmount:function(){a.removeListener(this.handleKonamiCode)},saveUser:function(e,t){var n=this,s=this.state.original,o={delay:t?void 0:2e3,onConflict:function(e){m.mergeRemoteChanges(e.local,e.remote,s)&&e.preventDefault()}};return this.props.database.use({schema:"global",by:this}).saveOne({table:"user"},e,o).then(function(e){return n.props.payloads.dispatch(e),e})},handleChange:function(e){var t=this,n=e.user;this.setState({user:n},function(){t.saveUser(n,e.immediate||!1)})},handleKonamiCode:function(e){var t=this,n=s.decoupleSet(this.getUser(),"settings.development.show_panel",!0);this.setState({user:n},function(){t.saveUser(n,!0)})}})},"./pages/settings-page.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/settings-page.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./pages/start-page.jsx":function(e,t,n){"use strict";function s(e){switch(e){case"facebook":return"facebook-official";default:return e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/bluebird/js/browser/bluebird.js"),a=n("../node_modules/react/react.js"),c=a.PropTypes,l=n("../node_modules/relaks/index.js"),d=(n("../../common/src/transport/http-request.js"),n("../../common/src/utils/memoize.js")),u=(n("../../common/src/routing/universal-link.js"),n("../../common/src/objects/finders/project-finder.js")),p=n("../../common/src/objects/finders/system-finder.js"),m=n("../../common/src/objects/finders/user-finder.js"),h=n("../../common/src/objects/utils/user-utils.js"),f=n("../../common/src/data/database.js"),g=n("../../common/src/routing/route.js"),v=n("../../common/src/locale/locale.js"),b=n("../../common/src/theme/theme.js"),y=n("./widgets/scrollable.jsx"),j=n("./widgets/push-button.jsx"),x=(n("./widgets/profile-image.jsx"),n("../../common/src/widgets/resource-view.jsx")),w=n("./dialogs/membership-request-dialog-box.jsx"),k=n("./widgets/loading-animation.jsx"),_=n("./widgets/empty-message.jsx");n("./pages/start-page.scss");var E=e.exports=l.createClass({displayName:"StartPage",propTypes:{canAccessServer:c.bool,canAccessSchema:c.bool,database:c.instanceOf(f).isRequired,route:c.instanceOf(g).isRequired,locale:c.instanceOf(v).isRequired,theme:c.instanceOf(b).isRequired,onEntry:c.func,onExit:c.func,onAvailableSchemas:c.func},statics:{parseURL:function(e,t){return g.match(e,["/:extra?"],function(e){return r.trimEnd(e.extra,"/")?null:{add:!!t.add,activationCode:t.ac,schema:t.p}})},getURL:function(e){var t={};return e&&(e.add&&(t.add=1),e.activationCode&&(t.ac=e.activationCode),e.schema&&(t.p=e.schema)),{path:"/",query:t}},configureUI:function(e){return{navigation:{top:!1,bottom:!1}}}},renderAsync:function(e){var t=this,n=this.props.route.parameters,s=this.props.database.use({schema:"global",by:this}),o={currentUser:null,system:this.sessionStartSystem||null,servers:null,projects:null,projectLinks:null,canAccessServer:this.props.canAccessServer,canAccessSchema:this.props.canAccessSchema,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onEntry:this.props.onEntry,onExit:this.props.onExit,onAvailableSchemas:this.props.onAvailableSchemas};return this.props.canAccessServer?(n.add||e.delay(void 0,300),e.show(a.createElement(C,o)),s.start().then(function(e){return m.findUser(s,e).then(function(e){o.currentUser=e})}).then(function(){return e.show(a.createElement(C,o)),p.findSystem(s).then(function(e){o.system=e})}).then(function(){return e.show(a.createElement(C,o)),u.findActiveProjects(s,1).then(function(e){o.projects=e})}).then(function(){return e.show(a.createElement(C,o)),u.findProjectLinks(s).then(function(e){o.projectLinks=e})}).then(function(){return a.createElement(C,o)})):(e.show(a.createElement(C,o)),s.beginSession("client").then(function(e){return t.sessionStartSystem=e.system,o.system=e.system,o.servers=e.servers,a.createElement(C,o)}))}}),C=e.exports.Sync=a.createClass({displayName:"StartPage.Sync",propTypes:{currentUser:c.object,system:c.object,servers:c.arrayOf(c.object),projects:c.arrayOf(c.object),projectLinks:c.arrayOf(c.object),canAccessServer:c.bool,canAccessSchema:c.bool,serverError:c.instanceOf(Error),database:c.instanceOf(f).isRequired,route:c.instanceOf(g).isRequired,locale:c.instanceOf(v).isRequired,theme:c.instanceOf(b).isRequired,onEntry:c.func,onExit:c.func,onAvailableSchemas:c.func},getInitialState:function(){return{transition:null,selectedProjectId:0,oauthErrors:{},renderingProjectDialog:!1,showingProjectDialog:!1}},getTargetPage:function(){return n(this.props.route.parameters.add?"./pages/settings-page.jsx":"./pages/news-page.jsx")},componentWillReceiveProps:function(e){if(this.props.route!==e.route||this.props.canAccessServer!==e.canAccessServer||this.props.canAccessSchema!==e.canAccessSchema){e.route.component!==E&&e.canAccessSchema&&e.canAccessServer&&this.transitionOut(e.route)}this.props.projects!==e.projects&&this.state.renderingProjectDialog&&(r.some(e.projects,{id:this.state.selectedProjectId})||this.setState({renderingProjectDialog:!1,showingProjectDialog:!1,selectedProjectId:0})),this.state.receivedCorrectQRCode&&e.serverError&&this.setState({receivedCorrectQRCode:!1,receivedInvalidQRCode:!1}),this.state.addingServer&&this.props.route!==e.route&&this.setState({addingServer:!1})},render:function(){return this.renderForBrowser()},renderForBrowser:function(){var e,t=this.props.locale.translate;if(this.props.system){var n=r.get(this.props.system,"details.resources"),s=r.find(n,{type:"image"});if(s){e={backgroundImage:"url("+this.props.theme.getImageURL(s,{width:1024,quality:40})+")"}}}var o="start-page browser";return this.state.transition&&(o+=" "+this.state.transition),a.createElement("div",{className:o,style:e},a.createElement("div",{className:"bar"},a.createElement("h1",{className:"welcome"},t("start-welcome")),a.createElement("div",{className:"content-area"},this.renderDescription(),this.renderChoices())),this.renderProjectDialog())},renderForCordova:function(){return},renderDescription:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.props.system;if(!n)return null;var s=t(r.get(n,"details.title"))||e("start-system-title-default"),o=t(r.get(n,"details.description"));return a.createElement("div",{className:"section description"},a.createElement("h2",null,s),a.createElement(y,null,a.createElement("p",null,o)))},renderTitle:function(){return},renderMobileGreeting:function(){return},renderActivationControls:function(){return a.createElement("div",null,this.renderActivationInstructions(),this.renderActivationButtons(),this.renderQRScannerDialogBox(),this.renderActivationDialogBox())},renderActivationInstructions:function(){return},renderActivationButtons:function(){return},renderActivationSelector:function(){return},renderChoices:function(){return this.props.canAccessServer?this.renderProjectButtons():this.renderOAuthButtons()},renderEmptyMessage:function(){if(this.props.canAccessServer){var e=this.props.projects;if(!r.isEmpty(e))return null;if(e){var t={locale:this.props.locale,online:this.props.database.online,phrase:"start-no-projects"};return a.createElement(_,t)}return a.createElement(k,null)}var n=this.props.servers;if(!r.isEmpty(n))return null;if(n){var t={locale:this.props.locale,online:this.props.database.online,phrase:"start-no-servers"};return a.createElement(_,t)}},renderOAuthButtons:function(){var e=this.props.locale.translate,t=this.props.servers;return t?a.createElement("div",{className:"section buttons"},a.createElement("h2",null,e("start-social-login")),a.createElement(y,null,this.renderEmptyMessage(),a.createElement("p",null,r.map(t,this.renderOAuthButton)))):null},renderOAuthButton:function(e,t){var n=this.props.locale.translate,r=this.props.locale.pick,i=r(e.details.title)||n("server-type-"+e.type),c=s(e.type),l=this.props.database.getOAuthURL(e),d={className:"oauth-button",href:l,onClick:this.handleOAuthButtonClick,"data-type":e.type},u=this.state.oauthErrors[e.type];if(u){var n=this.props.locale.translate,p=n("start-error-"+u.reason);return d.className+=" error",a.createElement("a",o({key:t},d),a.createElement("span",{className:"icon"},a.createElement("i",{className:"fa fa-fw fa-"+c})),a.createElement("span",{className:"error"},p))}return a.createElement("a",o({key:t},d),a.createElement("span",{className:"icon"},a.createElement("i",{className:"fa fa-fw fa-"+c})),a.createElement("span",{className:"label"},i))},renderProjectButtons:function(){var e=this.props.locale.translate,t=S(this.props.projects,this.props.locale);return a.createElement("div",{className:"section buttons"},a.createElement("h2",null,t?e("start-projects"):""),a.createElement(y,null,this.renderEmptyMessage(),r.map(t,this.renderProjectButton)))},renderProjectButton:function(e,t){var s,i=(this.props.locale.translate,this.props.locale.pick),c=i(e.details.title)||e.name,l=i(e.details.description),d=r.get(e,"details.resources"),u=r.find(d,{type:"image"});if(u)s=a.createElement(x,{resource:u,width:56,height:56,theme:this.props.theme});else{var p=n("../assets/trambar-logo.svg"),m=e.id%5+1;s=a.createElement("div",{className:"default v"+m},a.createElement(p,null))}var f;h.isMember(this.props.currentUser,e)?f=a.createElement("i",{className:"fa fa-user-circle-o badge"}):h.isPendingMember(this.props.currentUser,e)&&(f=a.createElement("i",{className:"fa fa-clock-o badge"}));var g={"data-project-id":e.id,className:"project-button"},v=!1,b=this.props.route.parameters;return b.add||(v=r.some(this.props.projectLinks,{address:b.address,schema:e.name})),v?g.href=this.props.route.find(this.getTargetPage(),{schema:e.name}):g.onClick=this.handleProjectButtonClick,a.createElement("a",o({key:e.id},g),a.createElement("div",{className:"icon"},s),a.createElement("div",{className:"text"},f,a.createElement("div",{className:"title"},c),a.createElement("div",{className:"description"},a.createElement("div",{className:"contents"},l,a.createElement("div",{className:"ellipsis"},a.createElement("i",{className:"fa fa-ellipsis-h"}))))))},renderAvailableServers:function(){var e=this.props.locale.translate,t=r.uniq(r.map(this.props.projectLinks,"address")).sort();if(r.isEmpty(t))return null;var n={label:e("start-activation-return"),hidden:!this.props.canAccessServer,onClick:this.handleReturnClick};return a.createElement("div",{className:"other-servers"},a.createElement("h2",{className:"title"},e("start-activation-others-servers")),a.createElement("ul",null,r.map(t,this.renderServerLink)),a.createElement("div",{className:"activation-buttons"},a.createElement("div",{className:"right"},a.createElement(j,n))))},renderServerLink:function(e,t){var s=this.props.route,o={address:e,add:s.parameters.add},r=s.find(n("./pages/start-page.jsx"),o);return a.createElement("li",{key:t},a.createElement("a",{href:r},a.createElement("i",{className:"fa fa-home"})," ",e))},renderProjectDialog:function(){if(!this.state.renderingProjectDialog)return null;var e=r.find(this.props.projects,{id:this.state.selectedProjectId});if(!e)return null;var t=this.props.currentUser,n={show:this.state.showingProjectDialog,currentUser:t,project:e,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onConfirm:this.handleMembershipRequestConfirm,onRevoke:this.handleMembershipRequestRevoke,onClose:this.handleMembershipRequestClose,onProceed:this.handleMembershipRequestProceed};return a.createElement(w,n)},componentDidUpdate:function(e,t){var n=this;if(e.projects!==this.props.projects||e.currentUser!==this.props.currentUser){var s=r.filter(this.props.projects,function(e){return h.canViewProject(n.props.currentUser,e)});r.isEmpty(s)||this.props.onAvailableSchemas&&this.props.onAvailableSchemas({type:"availableschemas",target:this,schemas:r.map(s,"name")})}},componentDidMount:function(){this.props.onEntry&&this.props.onEntry({type:"entry",target:this})},transitionOut:function(e){var t=this,n="fast",s=1300,o=e.parameters;!r.some(this.props.projectLinks,{address:o.address,schema:o.schema})&&(n="slow",s=3700),this.setState({transition:"transition-out-"+n},function(){setTimeout(function(){t.props.onExit&&t.props.onExit({type:"exit",target:t})},s)})},openPopUpWindow:function(e){return new i(function(t,n){var s={width:800,height:600,left:window.screenLeft+Math.round((window.outerWidth-800)/2),top:window.screenTop+Math.round((window.outerHeight-600)/2),toolbar:"no",menubar:"no",status:"no"},o=r.map(s,function(e,t){return t+"="+e}),i=window.open(e,"login",o.join(","));if(i){i.location=e;var a=setInterval(function(){i.closed&&(clearInterval(a),t())},50)}else n(new Error("Unable to open popup"))})},handleOAuthButtonClick:function(e){var t=this,n=e.currentTarget.getAttribute("href"),s=e.currentTarget.getAttribute("data-type");return e.preventDefault(),this.openPopUpWindow(n).then(function(){return t.props.database.use({by:t}).checkSession().catch(function(e){var n=r.clone(t.state.oauthErrors);n[s]=e,t.setState({oauthErrors:n})})})},handleProjectButtonClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-project-id"));this.setState({selectedProjectId:t,showingProjectDialog:!0,renderingProjectDialog:!0})},handleMembershipRequestConfirm:function(e){var t=this.state.selectedProjectId,n=(r.find(this.props.projects,{id:t}),this.props.database.use({schema:"global",by:this})),s=r.clone(this.props.currentUser);return s.requested_project_ids=r.union(s.requested_project_ids,[t]),n.saveOne({table:"user"},s)},handleMembershipRequestRevoke:function(e){var t=this.state.selectedProjectId,n=(r.find(this.props.projects,{id:t}),this.props.database.use({schema:"global",by:this})),s=r.clone(this.props.currentUser);return s.requested_project_ids=r.difference(s.requested_project_ids,[t]),n.saveOne({table:"user"},s)},handleMembershipRequestClose:function(e){var t=this;this.setState({showingProjectDialog:!1}),setTimeout(function(){t.setState({renderingProjectDialog:!1})},500)},handleMembershipRequestProceed:function(e){this.setState({showingProjectDialog:!1,renderingProjectDialog:!1});var t=this.state.selectedProjectId,n=r.find(this.props.projects,{id:t});this.props.route.push(this.getTargetPage(),{schema:n.name})},renderQRScannerDialogBox:function(){return},renderActivationDialogBox:function(){return},handleScanClick:function(e){},handleManualClick:function(e){this.setState({enteringManually:!0})},handleAddClick:function(e){this.setState({addingServer:!0})},handleReturnClick:function(e){this.setState({addingServer:!1})},handleCancelScan:function(e){},handleScanResult:function(e){return},handleActivationCancel:function(e){this.setState({enteringManually:!1})},handleActivationConfirm:function(e){this.handleActivationCancel();var t={cors:!0,address:e.address,schema:e.schema,activationCode:e.code};this.props.route.push(E,t)}}),S=d(function(e,t){var n=t.pick;return r.sortBy(e,function(e){return n(e.details.title)||e.name})})},"./pages/start-page.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./pages/start-page.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./panels/development-panel.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),i=r.PropTypes,a=n("../../common/src/routing/route.js"),c=n("../../common/src/locale/locale.js"),l=n("../../common/src/mixins/update-check.js"),d=n("./widgets/settings-panel.jsx"),u=n("./widgets/push-button.jsx"),p=n("./widgets/option-button.jsx");n("./panels/development-panel.scss"),e.exports=r.createClass({displayName:"DevelopmentPanel",mixins:[l],propTypes:{currentUser:i.object,route:i.instanceOf(a).isRequired,locale:i.instanceOf(c).isRequired,onChange:i.func},getInitialState:function(){return{selectedDeploymentName:null}},setUserProperty:function(e,t){if(this.props.currentUser){var n=o.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n})}},componentWillMount:function(){},render:function(){var e=this.props.locale.translate;return r.createElement(d,{className:"diagnostics"},r.createElement("header",null,r.createElement("div",{className:"icon"},r.createElement("i",{className:"fa fa-bug"}),r.createElement("i",{className:"fa fa-search icon-overlay"}))," ",e("settings-development")),r.createElement("body",null,this.renderDevelopmentOptions(),this.renderDeploymentOptions()),r.createElement("footer",null,this.renderButtons()))},renderDeploymentOptions:function(){return null},renderDevelopmentOptions:function(){var e=["show-panel"];return o.map(e,this.renderDevelopmentOption)},renderDevelopmentOption:function(e,t){var n=this.props.locale.translate,i=o.snakeCase(e),a=o.get(this.props.currentUser,"settings",{}),c=!!o.get(a,"development."+i),l={label:n("development-"+e),selected:c,onClick:this.handleDevelopmentOptionClick,id:i};return r.createElement(p,s({key:t},l))},renderDeploymentOption:function(e,t){return null},renderButtons:function(){var e=this.props.locale.translate,t={label:e("development-show-diagnostics"),onClick:this.handleShowClick};return r.createElement("div",{className:"buttons"},r.createElement(u,t))},handleDevelopmentOptionClick:function(e){var t=e.currentTarget.id,n="development."+t,s=o.clone(o.get(this.props.currentUser,"settings",{}));!o.get(s,n)?o.set(s,n,!0):o.unset(s,n),this.setUserProperty("settings",s)},handleDeploymentOptionClick:function(e){return null},handleShowClick:function(e){var t=this.props.route,s={schema:t.parameters.schema,diagnostics:!0};t.push(n("./pages/settings-page.jsx"),s)}})},"./panels/development-panel.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/development-panel.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./panels/device-panel.jsx":function(e,t,n){"use strict";function s(e){var t;switch(e.type){case"ios":case"osx":t="apple";break;default:t=e.type}return i.createElement("div",{className:"device-icon"},i.createElement("i",{className:"fa fa-tablet background"}),i.createElement("i",{className:"fa fa-"+t+" icon-overlay"}))}function o(e){var t=e.details.manufacturer,n=e.details.display_name||e.details.name;return r.includes(r.toLower(n),r.toLower(t))||(n=t+" "+n),n}var r=n("../node_modules/lodash/lodash.js"),i=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),a=i.PropTypes,c=n("../../common/src/data/database.js"),l=n("../../common/src/routing/route.js"),d=n("../../common/src/locale/locale.js"),u=n("../../common/src/theme/theme.js"),p=n("../../common/src/mixins/update-check.js"),m=n("./widgets/settings-panel.jsx"),h=(n("./widgets/push-button.jsx"),n("./dialogs/confirmation-dialog-box.jsx"));n("./panels/device-panel.scss"),e.exports=i.createClass({displayName:"DevicePanel",mixins:[p],propTypes:{devices:a.arrayOf(a.object),database:a.instanceOf(c).isRequired,route:a.instanceOf(l).isRequired,locale:a.instanceOf(d).isRequired,theme:a.instanceOf(u).isRequired},getInitialState:function(){return{renderingDialog:null,showingDialog:!1,selectedDeviceId:null}},render:function(){var e,t=this.props.locale.translate;return e=t(1===r.size(this.props.devices)?"settings-device":"settings-devices"),i.createElement(m,{className:"device"},i.createElement("header",null,i.createElement("i",{className:"fa fa-tablet"})," ",e),i.createElement("body",null,this.renderDevices(),this.renderDialogBox()))},renderDevices:function(){return r.map(this.props.devices,this.renderDevice)},renderDevice:function(e){var t=this.props.locale.translate,n=o(e);return i.createElement("div",{key:e.id,className:"device-option-button selected"},i.createElement("div",{className:"icon"},i.createElement(s,{type:e.type})),i.createElement("div",{className:"text"},i.createElement("span",{className:"name"},n),i.createElement("div",{"data-device-id":e.id,className:"revoke",onClick:this.handleRevokeClick},i.createElement("i",{className:"fa fa-ban"})," ",i.createElement("span",null,t("mobile-device-revoke")))))},renderDialogBox:function(){if("revoke"!==this.state.renderingDialog)return null;var e=this.props.locale.translate,t={show:this.state.showingDialog,locale:this.props.locale,onClose:this.handleDialogClose,onConfirm:this.handleRevokeConfirm};return i.createElement(h,t,e("mobile-device-revoke-are-you-sure"))},handleRevokeClick:function(e){var t=parseInt(e.currentTarget.getAttribute("data-device-id"));this.setState({renderingDialog:"revoke",showingDialog:!0,selectedDeviceId:t})},handleRevokeConfirm:function(e){var t=this,n=r.find(this.props.devices,{id:this.state.selectedDeviceId}),s=this.props.database.use({schema:"global",by:this});s.removeOne({table:"device"},n).then(function(){return s.endMobileSession(n.session_handle)}).finally(function(){t.handleDialogClose()})},handleDialogClose:function(e){var t=this;this.setState({showingDialog:!1},function(){setTimeout(function(){t.setState({renderingDialog:!1})},500)})}})},"./panels/device-panel.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/device-panel.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./panels/diagnostics-panel.jsx":function(e,t,n){"use strict";var s=(n("../node_modules/lodash/lodash.js"),n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),o=s.PropTypes,r=n("./widgets/settings-panel.jsx"),i=n("../../common/src/widgets/diagnostics.jsx");n("./panels/diagnostics-panel.scss"),e.exports=s.createClass({displayName:"DiagnosticsPanel",propTypes:{type:o.string.isRequired,title:o.string.isRequired},getInitialState:function(){return{contents:i.get(this.props.type)}},render:function(){if(!this.state.contents)return null;var e="diagnostics "+this.props.type;return s.createElement(r,{className:e},s.createElement("header",null,s.createElement("i",{className:"fa fa-gear"})," ",this.props.title),s.createElement("body",null,this.state.contents))},componentDidMount:function(){i.addListener(this.handleChange)},componentWillUnmount:function(){i.removeListener(this.handleChange)},handleChange:function(){var e=i.get(this.props.type);this.state.contents!==e&&this.setState({contents:e})}})},"./panels/diagnostics-panel.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/diagnostics-panel.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./panels/language-panel.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),i=r.PropTypes,a=(n("../node_modules/relaks/index.js"),n("../../common/src/locale/locale.js")),c=n("../../common/src/mixins/update-check.js"),l=n("./widgets/settings-panel.jsx"),d=n("./widgets/option-button.jsx");n("./panels/language-panel.scss"),e.exports=r.createClass({displayName:"LanguagePanel",mixins:[c],propTypes:{locale:i.instanceOf(a).isRequired},render:function(){var e=this.props.locale.translate;return r.createElement(l,{className:"language"},r.createElement("header",null,r.createElement("i",{className:"fa fa-language"})," ",e("settings-language")),r.createElement("body",null,this.renderList()))},renderList:function(){var e=o.filter(this.props.locale.directory,function(e){return!!e.module});return o.map(e,this.renderButton)},renderButton:function(e){var t={label:e.name,afterLabel:this.renderCountrySelect(e),selected:e.code===this.props.locale.languageCode,onClick:this.handleLanguageClick,id:e.code};return r.createElement(d,s({key:e.code},t))},renderCountrySelect:function(e){var t=this.props.locale.languageCode,n=this.props.locale.countryCode;n||(n=e.defaultCountry);var i=o.map(e.countries,function(e,t){return r.createElement("option",{key:t,value:t},e)}),a={value:n,onChange:this.handleCountryChange};return(e.code!==t||o.size(e.countries)<=1)&&(a.className="sole"),r.createElement("select",s({key:1},a),i)},handleLanguageClick:function(e){var t=e.currentTarget.id;if(t!==this.props.locale.languageCode){var n=o.find(this.props.locale.directory,{code:t}),s=n.code+"-"+n.defaultCountry;this.props.locale.change(s)}},handleCountryChange:function(e){var t=e.currentTarget.value;if(t!==this.props.locale.countryCode){var n=this.props.locale.languageCode,s=n+"-"+t;this.props.locale.change(s)}}})},"./panels/language-panel.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/language-panel.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./panels/mobile-alert-panel.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),i=r.PropTypes,a=n("../../common/src/objects/types/notification-types.js"),c=n("../../common/src/objects/utils/user-utils.js"),l=n("../../common/src/locale/locale.js"),d=n("../../common/src/mixins/update-check.js"),u=n("./widgets/settings-panel.jsx"),p=n("./widgets/option-button.jsx");n("./panels/mobile-alert-panel.scss"),e.exports=r.createClass({displayName:"WebAlertPanel",mixins:[d],propTypes:{currentUser:i.object,locale:i.instanceOf(l).isRequired,onChange:i.func},setUserProperty:function(e,t){if(this.props.currentUser){var n=o.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n})}},render:function(){var e=this.props.locale.translate;return r.createElement(u,{className:"mobile-alert"},r.createElement("header",null,r.createElement("div",{className:"icon"},r.createElement("i",{className:"fa fa-tablet"}),r.createElement("i",{className:"fa fa-exclamation-circle icon-overlay"}))," ",e("settings-mobile-alert")),r.createElement("body",null,this.renderOptions()))},renderOptions:function(){var e=a;return"admin"!==o.get(this.props.currentUser,"type")&&(e=o.without(e,a.admin)),e=o.concat(e,"web-session"),o.map(e,this.renderOption)},renderOption:function(e,t){var n=this.props.locale.translate,i=o.snakeCase(e),a=o.get(this.props.currentUser,"settings",{}),l=!!o.get(a,"notification."+i),d=!!o.get(a,"mobile_alert."+i),u=c.canReceiveNotification(this.props.currentUser,this.props.repos,e),m={label:n("notification-option-"+e),selected:d&&(l||"web-session"===e),hidden:!u,disabled:!(l||"web-session"===e),onClick:this.handleOptionClick,id:i};return r.createElement(p,s({key:t},m))},handleOptionClick:function(e){var t=e.currentTarget.id,n="mobile_alert."+t,s=o.clone(o.get(this.props.currentUser,"settings",{}));!o.get(s,n)?o.set(s,n,!0):o.unset(s,n),this.setUserProperty("settings",s)}})},"./panels/mobile-alert-panel.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/mobile-alert-panel.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./panels/notification-panel.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),i=r.PropTypes,a=n("../../common/src/objects/types/notification-types.js"),c=n("../../common/src/objects/utils/user-utils.js"),l=n("../../common/src/locale/locale.js"),d=n("../../common/src/mixins/update-check.js"),u=n("./widgets/settings-panel.jsx"),p=n("./widgets/option-button.jsx");n("./panels/notification-panel.scss"),e.exports=r.createClass({displayName:"NotificationPanel",mixins:[d],propTypes:{currentUser:i.object,repos:i.arrayOf(i.object),locale:i.instanceOf(l).isRequired,onChange:i.func},setUserProperty:function(e,t){if(this.props.currentUser){var n=o.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n})}},render:function(){var e=this.props.locale.translate;return r.createElement(u,{className:"notification"},r.createElement("header",null,r.createElement("i",{className:"fa fa-exclamation-circle"})," ",e("settings-notification")),r.createElement("body",null,this.renderOptions()))},renderOptions:function(){var e=a;return"admin"!==o.get(this.props.currentUser,"type")&&(e=o.without(e,a.admin)),o.map(e,this.renderOption)},renderOption:function(e,t){var n=this.props.locale.translate,i=o.snakeCase(e),a=o.get(this.props.currentUser,"settings",{}),l=!!o.get(a,"notification."+i),d=c.canReceiveNotification(this.props.currentUser,this.props.repos,e),u={label:n("notification-option-"+e),selected:l,hidden:!d,onClick:this.handleOptionClick,id:i};return r.createElement(p,s({key:t},u))},handleOptionClick:function(e){var t=e.currentTarget.id,n=["notification."+t,"web_alert."+t,"mobile_alert."+t],s=o.clone(o.get(this.props.currentUser,"settings",{})),r=!!o.get(s,n[0]);o.each(n,function(e,n){r?o.unset(s,e):0===n&&"merge"===t?o.set(s,e,"master"):o.set(s,e,!0)}),this.setUserProperty("settings",s)}})},"./panels/notification-panel.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/notification-panel.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./panels/project-panel.jsx":function(e,t,n){"use strict";function s(e){return e.hidden?null:r.createElement("div",{className:"item"},r.createElement("span",{className:"button",onClick:e.onClick},r.createElement("i",{className:"fa fa-fw fa-"+e.icon}),r.createElement("span",{className:"label"},e.label)))}var o=n("../node_modules/lodash/lodash.js"),r=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),i=r.PropTypes,a=n("../../common/src/objects/utils/user-utils.js"),c=n("../../common/src/data/database.js"),l=n("../../common/src/routing/route.js"),d=n("../../common/src/locale/locale.js"),u=n("../../common/src/theme/theme.js"),p=n("../../common/src/mixins/update-check.js"),m=n("./widgets/settings-panel.jsx"),h=n("./widgets/push-button.jsx"),f=n("./dialogs/system-description-dialog-box.jsx"),g=n("./dialogs/project-description-dialog-box.jsx"),v=n("./dialogs/mobile-setup-dialog-box.jsx"),b=n("./dialogs/confirmation-dialog-box.jsx"),y=n("./dialogs/project-management-dialog-box.jsx");n("./panels/project-panel.scss"),e.exports=r.createClass({displayName:"ProjectPanel",mixins:[p],propTypes:{system:i.object,currentUser:i.object,currentProject:i.object,projectLinks:i.arrayOf(i.object),database:i.instanceOf(c).isRequired,route:i.instanceOf(l).isRequired,locale:i.instanceOf(d).isRequired,theme:i.instanceOf(u).isRequired,onChange:i.func},getInitialState:function(){return{renderingDialog:null,showingDialog:!1}},componentWillReceiveProps:function(e){var t=this.props.currentProject,n=e.currentProject,s=this.props.currentUser;if(t!==n&&t&&n&&t.id===n.id){var o=a.isMember(s,t),r=a.isMember(s,n);!o&&r&&(this.state.renderingDialog||this.setState({renderingDialog:"membership",showingDialog:!0}))}},render:function(){var e=this.props.locale.translate;return r.createElement(m,{className:"project"},r.createElement("header",null,r.createElement("i",{className:"fa fa-database"})," ",e("settings-projects")),r.createElement("body",null,this.renderProjects(),this.renderDialogBox()),r.createElement("footer",null,this.renderButtons()))},renderProjects:function(){return o.map(this.props.projectLinks,this.renderProject)},renderProject:function(e,t){var n=this.props.locale.translate,i=this.props.locale.pick,a=this.props.route.parameters;if(e.schema===a.schema&&e.address==a.address){var c=!0,l=!1,d=this.props.currentProject,u=this.props.currentUser;d&&u&&(o.includes(d.user_ids,u.id)||(c=!1,o.includes(u.requested_project_ids,d.id)&&(l=!0)));var p={icon:"home",label:e.address,onClick:this.handleSystemDescriptionClick},m={icon:"info-circle",label:n("project-management-description"),onClick:this.handleProjectDescriptionClick},h={icon:"qrcode",label:n("project-management-mobile-set-up"),hidden:!1,onClick:this.handleMobileSetupClick},f={icon:l?"clock-o":"user-circle-o",label:n("project-management-"+(l?"withdraw-request":"join-project")),hidden:c,onClick:l?this.handleCancelJoinClick:this.handleJoinClick},g={icon:"sign-out",label:n("project-management-sign-out"),onClick:this.handleSignOutClick};return r.createElement("div",{key:t,className:"project-option-button selected"},r.createElement("i",{className:"icon fa fa-check-circle"}),r.createElement("div",{className:"text"},r.createElement("span",{className:"name"},i(e.name)),r.createElement("div",{className:"supplemental"},r.createElement(s,p),r.createElement(s,m),r.createElement(s,h),r.createElement(s,f),r.createElement(s,g))))}return r.createElement("div",{key:t,"data-key":e.key,className:"project-option-button",onClick:this.handleProjectClick},r.createElement("i",{className:"icon fa fa-circle-o"}),r.createElement("div",{className:"text"},r.createElement("span",{className:"name"},i(e.name))))},renderButtons:function(){var e=this.props.locale.translate,t={label:e("project-management-add"),onClick:this.handleAddClick},n={label:e("project-management-manage"),onClick:this.handleManageClick};return r.createElement("div",{className:"buttons"},r.createElement(h,n),r.createElement(h,t))},renderDialogBox:function(){return this.props.currentProject?r.createElement("div",null,this.renderSystemDescriptionDialogBox(),this.renderProjectDescriptionDialogBox(),this.renderMobileSetupDialogBox(),this.renderSignOutDialogBox(),this.renderProjectManagementDialogBox(),this.renderMembershipDialogBox()):null},renderSystemDescriptionDialogBox:function(){if("system-description"!==this.state.renderingDialog)return null;var e={show:this.state.showingDialog,system:this.props.system,locale:this.props.locale,theme:this.props.theme,onClose:this.handleDialogClose};return r.createElement(f,e)},renderProjectDescriptionDialogBox:function(){if("project-description"!==this.state.renderingDialog)return null;var e={show:this.state.showingDialog,project:this.props.currentProject,locale:this.props.locale,theme:this.props.theme,onClose:this.handleDialogClose};return r.createElement(g,e)},renderMobileSetupDialogBox:function(){if("mobile-setup"!==this.state.renderingDialog)return null;var e={show:this.state.showingDialog,system:this.props.system,database:this.props.database,route:this.props.route,locale:this.props.locale,onClose:this.handleDialogClose};return r.createElement(v,e)},renderSignOutDialogBox:function(){if("sign-out"!==this.state.renderingDialog)return null;var e=this.props.locale.translate,t={show:this.state.showingDialog,locale:this.props.locale,onClose:this.handleDialogClose,onConfirm:this.handleSignOutConfirm};return r.createElement(b,t,e("project-management-sign-out-are-you-sure"))},renderMembershipDialogBox:function(){if("membership"!==this.state.renderingDialog)return null;var e=this.props.locale.translate,t=this.props.locale.name,n=this.props.currentUser,s=t(o.get(n,"details.name"),o.get(n,"details.gender")),i={show:this.state.showingDialog,locale:this.props.locale,onConfirm:this.handleDialogClose};return r.createElement(b,i,e("membership-request-$you-are-now-member",s))},renderProjectManagementDialogBox:function(){if("management"!==this.state.renderingDialog)return null;var e={show:this.state.showingDialog,projectLinks:this.props.projectLinks,route:this.props.route,locale:this.props.locale,onDelete:this.handleProjectDelete,onCancel:this.handleDialogClose};return r.createElement(y,e)},handleProjectClick:function(e){var t=e.currentTarget.getAttribute("data-key"),s=o.find(this.props.projectLinks,{key:t});if(s){var r=window.location.origin,i={address:s.address,schema:s.schema,cors:r!==s.address};this.props.route.replace(n("./pages/settings-page.jsx"),i)}},handleAddClick:function(e){this.props.route.push(n("./pages/start-page.jsx"),{add:!0})},handleManageClick:function(e){this.setState({renderingDialog:"management",showingDialog:!0})},handleSystemDescriptionClick:function(e){this.setState({renderingDialog:"system-description",showingDialog:!0})},handleProjectDescriptionClick:function(e){this.setState({renderingDialog:"project-description",showingDialog:!0})},handleMobileSetupClick:function(e){this.setState({renderingDialog:"mobile-setup",showingDialog:!0})},handleJoinClick:function(e){var t=o.cloneDeep(this.props.currentUser);t.requested_project_ids=o.union(t.requested_project_ids,[this.props.currentProject.id]),this.props.onChange&&this.props.onChange({type:"change",target:this,user:t})},handleCancelJoinClick:function(e){var t=o.cloneDeep(this.props.currentUser);o.pull(t.requested_project_ids,this.props.currentProject.id),this.props.onChange&&this.props.onChange({type:"change",target:this,user:t})},handleSignOutClick:function(e){this.setState({renderingDialog:"sign-out",showingDialog:!0})},handleDialogClose:function(e){var t=this;this.setState({showingDialog:!1},function(){setTimeout(function(){t.setState({renderingDialog:null})},500)})},handleProjectDelete:function(e){var t=this;this.handleDialogClose();var s=this.props.route.parameters,r=o.includes(e.selection,s.address+"/"+s.schema),i=o.map(e.selection,function(e){return{key:e}});this.props.database.use({by:this}).remove({schema:"local",table:"project_link"},i).then(function(){if(r)return t.props.route.replace(n("./pages/start-page.jsx"))})},handleSignOutConfirm:function(e){var t=this,s=this.props.route.parameters,r=this.props.database.use({by:this});r.endSession().then(function(){var e=o.filter(t.props.projectLinks,{address:s.address});return r.remove({schema:"local",table:"project_link"},e).then(function(){return t.props.route.replace(n("./pages/start-page.jsx"))})})}})},"./panels/project-panel.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/project-panel.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./panels/social-network-panel.jsx":function(e,t,n){"use strict";function s(e,t){if(/https?:/.test(e)){e=o.trim(e.replace(/\?.*/,""));var n=o.filter(e.split("/"));return n[n.length-1]}return e}var o=n("../node_modules/lodash/lodash.js"),r=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),i=r.PropTypes,a=(n("../node_modules/relaks/index.js"),n("../../common/src/locale/locale.js")),c=n("../../common/src/mixins/update-check.js"),l=n("./widgets/settings-panel.jsx"),d=(n("./widgets/push-button.jsx"),n("./widgets/text-field.jsx"));n("./panels/social-network-panel.scss"),e.exports=r.createClass({displayName:"UserPanel",mixins:[c],propTypes:{currentUser:i.object,locale:i.instanceOf(a).isRequired,onChange:i.func},getUserProperty:function(e){return o.get(this.props.currentUser,e)},setUserProperty:function(e,t){if(this.props.currentUser){var n=o.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n})}},render:function(){var e=this.props.locale.translate;return r.createElement(l,{className:"user"},r.createElement("header",null,r.createElement("i",{className:"fa fa-handshake-o"})," ",e("settings-social-networks")),r.createElement("body",null,this.renderSkypeNameInput(),this.renderIChatInput(),this.renderTwitterInput(),this.renderGithubURLInput(),this.renderGitlabURLInput(),this.renderLinkedInURLInput(),this.renderStackoverflowURLInput()))},renderSkypeNameInput:function(){var e=this.props.locale.translate,t={id:"skype",value:this.getUserProperty("details.skype_username"),locale:this.props.locale,onChange:this.handleSkypeUsernameChange};return r.createElement(d,t,e("social-network-skype"))},renderIChatInput:function(){var e=this.props.locale.translate,t={id:"ichat",value:this.getUserProperty("details.ichat_username"),locale:this.props.locale,onChange:this.handleIchatUsernameChange};return r.createElement(d,t,e("social-network-ichat"))},renderTwitterInput:function(){var e=this.props.locale.translate,t={id:"twitter",value:this.getUserProperty("details.twitter_username"),locale:this.props.locale,onChange:this.handleTwitterUsernameChange};return r.createElement(d,t,e("social-network-twitter"))},renderGithubURLInput:function(){var e=this.props.locale.translate,t={id:"github",value:this.getUserProperty("details.github_url"),locale:this.props.locale,onChange:this.handleGitHubURLChange};return r.createElement(d,t,e("social-network-github"))},renderGitlabURLInput:function(){var e=this.props.locale.translate,t={id:"github",value:this.getUserProperty("details.gitlab_url"),locale:this.props.locale,onChange:this.handleGitlabURLChange};return r.createElement(d,t,e("social-network-gitlab"))},renderLinkedInURLInput:function(){var e=this.props.locale.translate,t={id:"linkedin",value:this.getUserProperty("details.linkedin_url"),locale:this.props.locale,onChange:this.handleLinkedinURLChange};return r.createElement(d,t,e("social-network-linkedin"))},renderStackoverflowURLInput:function(){var e=this.props.locale.translate,t={id:"stackoverflow",value:this.getUserProperty("details.stackoverflow_url"),locale:this.props.locale,onChange:this.handleStackoverflowURLChange};return r.createElement(d,t,e("social-network-stackoverflow"))},handleSkypeUsernameChange:function(e){var t=o.trim(e.target.value);this.setUserProperty("details.skype_username",t)},handleIchatUsernameChange:function(e){var t=o.trim(e.target.value);this.setUserProperty("details.ichat_username",t)},handleTwitterUsernameChange:function(e){var t=s(e.target.value);this.setUserProperty("details.twitter_username",t)},handleLinkedinURLChange:function(e){var t=o.trim(e.target.value);this.setUserProperty("details.linkedin_url",t)},handleGitHubURLChange:function(e){var t=o.trim(e.target.value);this.setUserProperty("details.github_url",t)},handleGitlabURLChange:function(e){var t=o.trim(e.target.value);this.setUserProperty("details.gitlab_url",t)},handleStackoverflowURLChange:function(e){var t=o.trim(e.target.value);this.setUserProperty("details.stackoverflow_url",t)}})},"./panels/social-network-panel.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/social-network-panel.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./panels/user-image-panel.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/bluebird/js/browser/bluebird.js"),r=(n("../node_modules/moment/moment.js"),n("../node_modules/react/react.js")),i=r.PropTypes,a=(n("../node_modules/relaks/index.js"),n("../../common/src/utils/component-refs.js")),c=(n("../../common/src/utils/focus-manager.js"),n("../../common/src/media/device-manager.js")),l=n("../../common/src/transport/payloads.js"),d=n("../../common/src/locale/locale.js"),u=n("../../common/src/theme/theme.js"),p=n("../../common/src/mixins/update-check.js"),m=n("./widgets/settings-panel.jsx"),h=n("./widgets/push-button.jsx"),f=n("./editors/image-editor.jsx"),g=n("./editors/media-importer.jsx"),v=n("./dialogs/photo-capture-dialog-box.jsx");n("./panels/user-image-panel.scss"),e.exports=r.createClass({displayName:"UserImagePanel",mixins:[p],propTypes:{currentUser:i.object,payloads:i.instanceOf(l).isRequired,locale:i.instanceOf(d).isRequired,theme:i.instanceOf(u).isRequired,onChange:i.func},getInitialState:function(){return this.components=a({importer:g}),{action:null,image:null,hasCamera:c.hasDevice("videoinput")}},getUserProperty:function(e){return s.get(this.props.currentUser,e)},getImage:function(){if(this.state.image)return this.state.image;var e=this.getUserProperty("details.resources");return s.find(e,{type:"image"})},setUserProperty:function(e,t){if(this.props.currentUser){var n=s.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n,immediate:!0})}},render:function(){var e=this.props.locale.translate;return r.createElement(m,{className:"user-image"},r.createElement("header",null,r.createElement("i",{className:"fa fa-image"})," ",e("settings-profile-image")),r.createElement("body",null,this.renderProfilePicture(),this.renderMediaImporter()),r.createElement("footer",null,this.renderButtons()))},renderProfilePicture:function(){var e,t=this.getImage();if(t){var s={resource:t,locale:this.props.locale,theme:this.props.theme,previewWidth:256,previewHeight:256,disabled:"adjust"!==this.state.action,onChange:this.handleImageChange};e=r.createElement(f,s)}else{var o=n("../node_modules/octicons/build/svg/person.svg");e=r.createElement("div",{className:"no-image"},r.createElement(o,{className:""}))}return r.createElement("div",{className:"image-container"},e)},renderMediaImporter:function(){var e,t=this.components.setters;e=this.state.image?[this.state.image]:s.get(this.props.currentUser,"details.resources",[]);var n={ref:t.importer,types:["image"],limit:1,schema:"global",resources:e,locale:this.props.locale,theme:this.props.theme,payloads:this.props.payloads.override({schema:"global"}),cameraDirection:"front",onChange:this.handleChange,onCaptureEnd:this.handleCaptureEnd};return r.createElement(g,n)},renderButtons:function(){var e=this.props.locale.translate,t=!!this.getImage();if("adjust"===this.state.action&&t){var n={label:e("user-image-cancel"),onClick:this.handleCancelClick},s={label:e("user-image-save"),emphasized:!0,disabled:!this.state.image,onClick:this.handleSaveClick};return r.createElement("div",{key:"adjust",className:"buttons"},r.createElement(h,n),r.createElement(h,s))}if("replace"===this.state.action&&t){var n={label:e("user-image-cancel"),onClick:this.handleCancelClick},o={label:e("user-image-snap"),hidden:!v.isAvailable()||!this.state.hasCamera,onClick:this.handleTakeClick},i={label:e("user-image-select"),accept:"image/*",onChange:this.handleFileChange};return r.createElement("div",{key:"replace",className:"buttons"},r.createElement(h,n),r.createElement(h,o),r.createElement(h.File,i))}if(t){var a={label:e("user-image-adjust"),onClick:this.handleAdjustClick},c={label:e("user-image-replace"),onClick:this.handleReplaceClick};return r.createElement("div",{key:"action",className:"buttons"},r.createElement(h,a),r.createElement(h,c))}var o={label:e("user-image-snap"),hidden:!v.isAvailable()||!this.state.hasCamera,onClick:this.handleTakeClick},i={label:e("user-image-select"),accept:"image/*",onChange:this.handleFileChange};return r.createElement("div",{key:"add",className:"buttons"},r.createElement(h,o),r.createElement(h.File,i))},componentDidMount:function(){c.addEventListener("change",this.handleDeviceChange)},componentWillUnmount:function(){c.removeEventListener("change",this.handleDeviceChange)},handleCancelClick:function(e){this.setState({action:null,image:null})},handleAdjustClick:function(e){this.setState({action:"adjust"})},handleReplaceClick:function(e){this.setState({action:"replace"})},handleTakeClick:function(e){this.components.importer.capture("image")},handleFileChange:function(e){var t=e.target.files;this.components.importer.importFiles(t)},handleSaveClick:function(e){this.state.image&&(this.setUserProperty("details.resources",[this.state.image]),this.setState({action:null,image:null}))},handleImageChange:function(e){this.setState({image:e.resource})},handleChange:function(e){return this.setState({image:e.resources[0],action:"adjust"}),o.resolve()},handleCaptureEnd:function(e){},handleDeviceChange:function(e){this.setState({hasCamera:c.hasDevice("videoinput")})}})},"./panels/user-image-panel.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/user-image-panel.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./panels/user-info-panel.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),r=o.PropTypes,i=(n("../node_modules/relaks/index.js"),n("../../common/src/locale/locale.js")),a=n("../../common/src/mixins/update-check.js"),c=n("./widgets/settings-panel.jsx"),l=(n("./widgets/push-button.jsx"),n("./widgets/text-field.jsx"));n("./panels/user-info-panel.scss"),e.exports=o.createClass({displayName:"UserInfoPanel",mixins:[a],propTypes:{currentUser:r.object,locale:r.instanceOf(i).isRequired,onChange:r.func},getUserProperty:function(e){return s.get(this.props.currentUser,e)},setUserProperty:function(e,t){if(this.props.currentUser){var n=s.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n})}},render:function(){var e=this.props.locale.translate;return o.createElement(c,{className:"user-info"},o.createElement("header",null,o.createElement("i",{className:"fa fa-user-circle"})," ",e("settings-user-information")),o.createElement("body",null,this.renderNameInput(),this.renderEmailInput(),this.renderPhoneInput(),this.renderGenderSelector()))},renderNameInput:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.getUserProperty("details.name"),s={id:"name",value:t(n),locale:this.props.locale,onChange:this.handleNameChange};return o.createElement(l,s,e("user-info-name"))},renderEmailInput:function(){var e=this.props.locale.translate,t={id:"email",value:this.getUserProperty("details.email"),locale:this.props.locale,onChange:this.handleEmailChange};return o.createElement(l,t,e("user-info-email"))},renderPhoneInput:function(){var e=this.props.locale.translate,t={id:"email",value:this.getUserProperty("details.phone"),locale:this.props.locale,onChange:this.handlePhoneChange};return o.createElement(l,t,e("user-info-phone"))},renderGenderSelector:function(){var e=this.props.locale.translate,t={id:"gender",value:this.getUserProperty("details.gender")||"",size:3,onChange:this.handleGenderChange};return o.createElement("div",{className:"gender-selector"},o.createElement("label",{htmlFor:"gender"},e("user-info-gender")),o.createElement("select",t,o.createElement("option",{value:"male"},e("user-info-gender-male")),o.createElement("option",{value:"female"},e("user-info-gender-female")),o.createElement("option",{value:""},e("user-info-gender-unspecified"))))},handleNameChange:function(e){var t=e.target.value;this.setUserProperty("details.name",t)},handleEmailChange:function(e){var t=e.target.value;this.setUserProperty("details.email",t)},handlePhoneChange:function(e){var t=e.target.value;this.setUserProperty("details.phone",t)},handleGenderChange:function(e){var t=e.target.value;this.setUserProperty("details.gender",t||void 0)}})},"./panels/user-info-panel.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/user-info-panel.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./panels/web-alert-panel.jsx":function(e,t,n){"use strict";function s(){var e=navigator.userAgent;for(var t in h){if(h[t].test(e))return t}return"globe"}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r=n("../node_modules/lodash/lodash.js"),i=(n("../node_modules/bluebird/js/browser/bluebird.js"),n("../node_modules/react/react.js")),a=i.PropTypes,c=n("../../common/src/objects/types/notification-types.js"),l=n("../../common/src/objects/utils/user-utils.js"),d=n("../../common/src/locale/locale.js"),u=n("../../common/src/mixins/update-check.js"),p=n("./widgets/settings-panel.jsx"),m=n("./widgets/option-button.jsx");n("./panels/web-alert-panel.scss"),e.exports=i.createClass({displayName:"WebAlertPanel",mixins:[u],propTypes:{currentUser:a.object,locale:a.instanceOf(d).isRequired,onChange:a.func},setUserProperty:function(e,t){if(this.props.currentUser){var n=r.decoupleSet(this.props.currentUser,e,t);this.props.onChange&&this.props.onChange({type:"change",target:this,user:n})}},render:function(){var e=this.props.locale.translate,t=s();return i.createElement(p,{className:"web-alert"},i.createElement("header",null,i.createElement("div",{className:"icon"},i.createElement("i",{className:"fa fa-"+t}),i.createElement("i",{className:"fa fa-exclamation-circle icon-overlay"}))," ",e("settings-web-alert")),i.createElement("body",null,this.renderOptions()))},renderOptions:function(){var e=c;return"admin"!==r.get(this.props.currentUser,"type")&&(e=r.without(e,c.admin)),r.map(e,this.renderOption)},renderOption:function(e,t){var n=this.props.locale.translate,s=r.snakeCase(e),a=r.get(this.props.currentUser,"settings",{}),c=!!r.get(a,"notification."+s),d=!!r.get(a,"web_alert."+s),u=l.canReceiveNotification(this.props.currentUser,this.props.repos,e),p={label:n("notification-option-"+e),selected:d&&c,hidden:!u,disabled:!c,onClick:this.handleOptionClick,id:s};return i.createElement(m,o({key:t},p))},handleOptionClick:function(e){var t=e.currentTarget.id,n="web_alert."+t,s=r.clone(r.get(this.props.currentUser,"settings",{}));!r.get(s,n)?r.set(s,n,!0):r.unset(s,n),this.setUserProperty("settings",s)}});var h={edge:/(Edge|Internet Explorer)/,chrome:/Chrome/,safari:/Safari/,firefox:/Firefox/}},"./panels/web-alert-panel.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./panels/web-alert-panel.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./views/app-component.jsx":function(e,t,n){"use strict";var s=(n("../node_modules/lodash/lodash.js"),n("../node_modules/react/react.js")),o=s.PropTypes,r=n("../node_modules/mark-gor/react.js"),i=n("../../common/src/theme/theme.js"),a=n("../../common/src/locale/locale.js"),c=n("../../common/src/widgets/resource-view.jsx");n("./views/app-component.scss"),e.exports=s.createClass({displayName:"AppComponent",propTypes:{component:o.object.isRequired,theme:o.instanceOf(i),locale:o.instanceOf(a),onSelect:o.func},render:function(){return s.createElement("div",{className:"app-component",onClick:this.handleClick},this.renderPicture(),this.renderText())},renderPicture:function(){var e=this.props.component;if(e.image)return s.createElement("div",{className:"picture"},s.createElement(c,{resource:e.image,height:48,theme:this.props.theme}));var t=e.icon||{},n=t.class||"fa-cubes",o={color:t.color,backgroundColor:t.backgroundColor};return s.createElement("div",{className:"picture"},s.createElement("div",{className:"icon",style:o},s.createElement("i",{className:"fa fa-fw "+n})))},renderText:function(){var e=this.props.locale.pick,t=e(this.props.component.text),n=r.parse(t);return s.createElement("div",{className:"description"},s.createElement("div",{className:"description-contents"},n,s.createElement("div",{className:"ellipsis"},s.createElement("i",{className:"fa fa-ellipsis-h"}))))},handleClick:function(e){this.props.onSelect&&this.props.onSelect({type:"select",target:this,component:this.props.component})}})},"./views/app-component.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/app-component.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./views/bookmark-view.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../../common/src/data/database.js"),c=n("../../common/src/routing/route.js"),l=n("../../common/src/locale/locale.js"),d=n("../../common/src/theme/theme.js"),u=n("./widgets/multiple-user-names.jsx");n("./views/bookmark-view.scss"),e.exports=r.createClass({displayName:"BookmarkView",propTypes:{highlighting:i.bool,bookmark:i.object,senders:i.arrayOf(i.object),currentUser:i.object,database:i.instanceOf(a).isRequired,route:i.instanceOf(c).isRequired,locale:i.instanceOf(l).isRequired,theme:i.instanceOf(d).isRequired},render:function(){var e="bookmark-view";return this.props.highlighting&&(e+=" highlighting"),r.createElement("div",{className:e},r.createElement("div",{className:"title"},this.renderSenderNames()),r.createElement("div",{className:"story"},this.props.children))},renderSenderNames:function(){var e,t=this.props.locale.translate,n=this.props.locale.name,i=o.get(this.props.currentUser,"id"),a=o.some(this.props.senders,{id:i}),c=o.filter(this.props.senders,function(e){return e.id!==i});if(a){var l=this.props.currentUser,d=n(l.details.name,l.details.gender);switch(c.length){case 0:e=t("bookmark-$you-bookmarked-it",d);break;case 1:var p=n(c[0].details.name,c[0].details.gender);e=t("bookmark-$you-bookmarked-it-and-$name-recommends-it",d,p);break;default:var m={users:c,label:t("bookmark-$count-users",c.length),title:t("bookmark-recommendations"),locale:this.props.locale,theme:this.props.theme},h=r.createElement(u,s({key:1},m));e=t("bookmark-$you-bookmarked-it-and-$others-recommends-it",d,h,c.length)}}else switch(c.length){case 0:e=" ";break;case 1:var p=n(c[0].details.name,c[0].details.gender);e=t("bookmark-$name-recommends-this",p);break;case 2:var f=n(c[0].details.name,c[0].details.gender);n(c[1].details.name,c[1].details.gender);e=t("bookmark-$name1-and-$name2-recommend-this",f);break;default:var p=n(c[0].details.name,c[0].details.gender),g=o.slice(c,1),m={users:g,label:t("bookmark-$count-other-users",g.length),title:t("bookmark-recommendations"),locale:this.props.locale,theme:this.props.theme},h=r.createElement(u,s({key:1},m));e=t("bookmark-$name1-and-$others-recommend-this",p,h,c.length-1)}return r.createElement("span",{className:"name"},e)},removeBookmark:function(e){var t=this.props.route.parameters;return this.props.database.use({schema:t.schema,by:this}).removeOne({table:"bookmark"},e)},handleCloseClick:function(e){this.removeBookmark(this.props.bookmark)}})},"./views/bookmark-view.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/bookmark-view.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./views/media-view.jsx":function(e,t,n){"use strict";function s(e){return o.first(o.keys(e.versions))||null}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=(n("../../common/src/transport/http-request.js"),n("../../common/src/utils/memoize.js")),c=n("../../common/src/utils/component-refs.js"),l=(n("../../common/src/transport/payload.js"),n("../../common/src/media/image-cropping.js"),n("../../common/src/locale/locale.js")),d=n("../../common/src/theme/theme.js"),u=(n("../../common/src/widgets/overlay.jsx"),n("./widgets/media-button.jsx")),p=n("./dialogs/media-dialog-box.jsx"),m=n("../../common/src/widgets/resource-view.jsx"),h=n("./widgets/duration-indicator.jsx"),f=n("../../common/src/mixins/update-check.js");n("./views/media-view.scss"),e.exports=r.createClass({displayName:"MediaView",mixins:[f],propTypes:{resources:i.arrayOf(i.object).isRequired,locale:i.instanceOf(l).isRequired,theme:i.instanceOf(d).isRequired},getInitialState:function(){return this.components=c({audioPlayer:HTMLAudioElement}),{selectedIndex:0,renderingDialogBox:!1,showingDialogBox:!1,audioURL:null}},getResourceCount:function(){return this.props.resources.length},getSelectedResourceIndex:function(){var e=this.getResourceCount()-1;return Math.min(this.state.selectedIndex,e)},getSelectedResource:function(){var e=this.getSelectedResourceIndex();return-1!==e?this.props.resources[e]:null},selectResource:function(e){var t=this;return new Promise(function(n,s){var o=t.getResourceCount();e>=0&&e<o?t.setState({selectedIndex:e},function(){n(e)}):n(t.getSelectedResourceIndex())})},render:function(){return r.createElement("div",{className:"media-view"},r.createElement("div",{className:"spacer"}),r.createElement("div",{className:"container"},this.renderResource(),this.renderNavigation(),this.renderAudioPlayer(),this.renderDialogBox()))},renderNavigation:function(){var e=this.getResourceCount();if(e<=1)return null;var t=Math.min(e-1,this.state.selectedIndex),n={index:t,count:e,onBackwardClick:this.handleBackwardClick,onForwardClick:this.handleForwardClick};return r.createElement("div",{className:"navigation"},r.createElement("div",{className:"right"},r.createElement(u.Direction,n)))},renderAudioPlayer:function(){if(!this.state.audioURL)return null;var e={ref:this.components.setters.audioPlayer,src:this.state.audioURL,autoPlay:!0,controls:!0,onEnded:this.handleAudioEnded};return r.createElement("audio",e)},renderDialogBox:function(){if(!this.state.renderingDialogBox)return null;var e=g(this.props.resources),t=this.getSelectedResourceIndex(),n=o.indexOf(e,this.props.resources[t]),s={show:this.state.showingDialogBox,resources:e,selectedIndex:n,locale:this.props.locale,theme:this.props.theme,onClose:this.handleDialogClose};return r.createElement(p,s)},renderResource:function(){var e=this.props.resources.length,t=Math.min(e-1,this.state.selectedIndex),n=this.props.resources[t];switch(n.type){case"image":return this.renderImage(n,t);case"video":return this.renderVideo(n,t);case"audio":return this.renderAudio(n,t);case"website":return this.renderWebsite(n,t)}},renderImage:function(e,t){return r.createElement("div",{key:t,className:"image",onClick:this.handleImageClick},this.renderImageElement(e))},renderVideo:function(e,t){var n="video",s=this.renderImageElement(e);return s||(n+=" posterless"),r.createElement("div",{key:t,className:n,onClick:this.handleVideoClick},s,r.createElement("div",{className:"overlay"},r.createElement("div",{className:"icon"},r.createElement("i",{className:"fa fa-play-circle-o"})),r.createElement("div",{className:"duration"},h.format(e.duration))))},renderAudio:function(e,t){var n="audio";this.props.theme.getImageURL(e)||(n+=" posterless");var s=this.state.audioURL?"stop":"play";return r.createElement("div",{key:t,className:n,onClick:this.handleAudioClick},this.renderImageElement(e),r.createElement("div",{className:"overlay"},r.createElement("div",{className:"icon"},r.createElement("i",{className:"fa fa-"+s+"-circle"})),r.createElement("div",{className:"duration"},h.format(e.duration))))},renderWebsite:function(e,t){return r.createElement("div",{key:t,className:"website"},r.createElement("a",{href:e.url,target:"_blank"},this.renderImageElement(e),r.createElement("div",{className:"overlay hidden"},r.createElement("div",{className:"icon"},r.createElement("i",{className:"fa fa-external-link"})))))},renderImageElement:function(e){return r.createElement(m,{resource:e,theme:this.props.theme})},pauseAudio:function(){var e=this.components.audioPlayer;e&&e.pause()},handleBackwardClick:function(e){var t=this.getSelectedResourceIndex();return this.selectResource(t-1)},handleForwardClick:function(e){var t=this.getSelectedResourceIndex();return this.selectResource(t+1)},handleImageClick:function(e){this.setState({showingDialogBox:!0,renderingDialogBox:!0})},handleVideoClick:function(e){this.pauseAudio(),this.setState({showingDialogBox:!0,renderingDialogBox:!0})},handleAudioClick:function(e){if(this.state.audioURL)this.setState({audioURL:null});else{var t=this.getSelectedResource(),n=s(t),o=this.props.theme.getAudioURL(t,{version:n});this.setState({audioURL:o})}},handleAudioEnded:function(e){this.setState({audioURL:null})},handleDialogClose:function(e){var t=this;this.setState({showingDialogBox:!1},function(){setTimeout(function(){t.setState({renderingDialogBox:!1})},1e3)})}});var g=a(function(e){return o.filter(e,function(e){switch(e.type){case"image":case"video":return!0}})})},"./views/media-view.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/media-view.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./views/notification-view.jsx":function(e,t,n){"use strict";function s(e,t){var s=r.clone(t.parameters);switch(e.type){case"like":case"comment":case"issue":case"vote":case"task-completion":case"coauthor":case"note":case"assignment":case"push":case"merge":case"survey":case"issue":case"mention":var o=[n("./pages/news-page.jsx"),n("./lists/story-list.jsx"),n("./lists/reaction-list.jsx")];return s.story=e.story_id,s.reaction=e.reaction_id||void 0,s.highlighting=!0,t.find(o,s);case"bookmark":var o=[n("./pages/bookmarks-page.jsx"),n("./lists/story-list.jsx")];return s.story=e.story_id,s.highlighting=!0,t.find(o,s);case"join-request":return"/admin/projects/"+r.get(e,"details.project_id")+"/members/"}}function o(e){switch(e.type){case"join-request":return"admin"}return""}var r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/src/data/database.js"),l=n("../../common/src/routing/route.js"),d=n("../../common/src/locale/locale.js"),u=n("../../common/src/theme/theme.js"),p=n("../../common/src/mixins/update-check.js"),m=n("../../common/src/widgets/time.jsx"),h=n("./widgets/profile-image.jsx");n("./views/notification-view.scss"),e.exports=i.createClass({displayName:"NotificationView",mixins:[p],propTypes:{notification:a.object.isRequired,user:a.object,database:a.instanceOf(c).isRequired,route:a.instanceOf(l).isRequired,locale:a.instanceOf(d).isRequired,theme:a.instanceOf(u).isRequired,onClick:a.func},render:function(){var e={className:"notification-view "+this.props.theme.mode,href:this.getNotificationURL(),target:this.getNotificationTarget(),onClick:this.handleClick};return this.props.notification.seen||(e.className+=" unread"),i.createElement("a",e,i.createElement("div",{className:"event"},this.renderProfileImage(),this.renderText()),i.createElement("div",{className:"date"},this.renderTime(),this.renderIcon()))},renderProfileImage:function(){var e={user:this.props.user,theme:this.props.theme,size:"small"};return i.createElement(h,e)},renderText:function(){var e=this.getNotificationText();return i.createElement("span",{className:"text"},e)},renderTime:function(){var e={time:this.props.notification.ctime,locale:this.props.locale};return i.createElement(m,e)},renderIcon:function(){return i.createElement("i",{className:"fa fa-"+this.getNotificationIcon()+" fa-fw"})},getNotificationURL:function(){return s(this.props.notification,this.props.route)},getNotificationTarget:function(){return o(this.props.notification)},getNotificationText:function(){var e=this.props.locale.translate,t=this.props.locale.name,n=this.props.user,s=this.props.notification,o=n?t(n.details.name,n.details.gender):"";switch(s.type){case"like":return e("notification-$name-likes-your-$story",o,s.details.story_type);case"comment":return e("notification-$name-commented-on-your-$story",o,s.details.story_type);case"issue":return e("notification-$name-opened-an-issue",o);case"vote":return e("notification-$name-voted-in-your-survey",o);case"task-completion":return e("notification-$name-completed-task",o);case"coauthor":return e("notification-$name-added-you-as-coauthor",o);case"note":return e("notification-$name-posted-a-note-about-your-$story",o,s.details.story_type);case"assignment":return e("notification-$name-is-assigned-to-your-issue",o);case"push":return e("notification-$name-pushed-code-to-$branch",o,s.details.branch);case"merge":return e("notification-$name-merged-code-to-$branch",o,s.details.branch);case"survey":return e("notification-$name-posted-a-survey",o);case"bookmark":return e("notification-$name-sent-bookmark-to-$story",o,s.details.story_type);case"mention":if(s.details.story_type)return e("notification-$name-mentioned-you-in-$story",o,s.details.story_type);if(s.details.reaction_type)return e("notification-$name-mentioned-you-in-$reaction",o,s.details.reaction_type);break;case"join-request":return e("notification-$name-requested-to-join",o)}},getNotificationIcon:function(){switch(this.props.notification.type){case"like":return"thumbs-up";case"comment":return"comment";case"issue":return"exclamation-circle";case"vote":return"check-square-o";case"task-completion":return"star";case"note":return"sticky-note";case"assignment":return"hand-o-right";case"push":case"merge":return"cubes";case"coauthor":return"handshake-o";case"survey":return"list-url";case"bookmark":return"bookmark";case"mention":return"at";case"join-request":return"user-circle"}},handleClick:function(e){this.props.onClick&&this.props.onClick({type:"click",target:this})}}),e.exports.getNotificationURL=s,e.exports.getNotificationTarget=o},"./views/notification-view.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/notification-view.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./views/reaction-view-options.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=(n("../node_modules/moment/moment.js"),n("../../common/src/objects/utils/user-utils.js")),a=n("../../common/src/locale/locale.js"),c=n("../../common/src/theme/theme.js"),l=n("./widgets/pop-up-menu.jsx"),d=n("./widgets/option-button.jsx");n("./views/reaction-view-options.scss"),e.exports=o.createClass({displayName:"ReactionViewOptions",propTypes:{access:r.oneOf(["read-only","read-comment","read-write"]).isRequired,currentUser:r.object.isRequired,reaction:r.object.isRequired,story:r.object.isRequired,options:r.object.isRequired,locale:r.instanceOf(a),theme:r.instanceOf(c)},getInitialState:function(){return{open:!1}},render:function(){var e=this.props.access,t=this.props.currentUser,n=this.props.story,s=this.props.reaction,r=!1;i.canHideReaction(t,n,s,e)&&(r=!0),i.canEditReaction(t,n,s,e)&&(r=!0),i.canRemoveReaction(t,n,s,e)&&(r=!0);var a={className:"reaction-view-options",disabled:!r,popOut:!0,onOpen:this.handleOpen,onClose:this.handleClose};return o.createElement(l,a,o.createElement("button",null,o.createElement("i",{className:"fa fa-ellipsis-v"})),o.createElement("menu",null,this.renderOptions()))},renderOptions:function(){if(!this.state.open)return null;var e=this.props.locale.translate,t=this.props.options,n=this.props.access,s=this.props.currentUser,r=this.props.story,a=this.props.reaction,c={label:e("option-hide-comment"),hidden:!i.canHideReaction(s,r,a,n),selected:t.hideReaction,onClick:this.handleHideClick},l={label:e("option-edit-comment"),hidden:!i.canEditReaction(s,r,a,n),selected:t.editReaction,onClick:this.handleEditClick},u={label:e("option-remove-comment"),hidden:!i.canRemoveReaction(s,r,a,n),selected:t.removeReaction,onClick:this.handleRemoveClick};return o.createElement("div",{className:"view-options in-menu"},o.createElement(d,c),o.createElement(d,l),o.createElement(d,u))},triggerChangeEvent:function(e){this.props.onChange&&this.props.onChange({type:"change",target:this,options:e})},handleOpen:function(e){this.setState({open:!0})},handleClose:function(e){this.setState({open:!1})},handleHideClick:function(e){var t=s.clone(this.props.options);t.hideReaction=!t.hideReaction,this.triggerChangeEvent(t)},handleEditClick:function(e){var t=s.clone(this.props.options);t.editReaction=!0,this.triggerChangeEvent(t)},handleRemoveClick:function(e){var t=s.clone(this.props.options);t.removeReaction=!0,this.triggerChangeEvent(t)}})},"./views/reaction-view-options.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/reaction-view-options.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./views/reaction-view.jsx":function(e,t,n){"use strict";function s(e){return r.first(r.keys(e.versions))||null}function o(e){var t=r.get(e,"note.id");return t?"#note_"+t:""}var r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/src/utils/markdown.js"),l=n("../../common/src/utils/plain-text.js"),d=n("../../common/src/utils/memoize.js"),u=n("../../common/src/utils/component-refs.js"),p=n("../../common/src/objects/utils/external-data-utils.js"),m=n("../../common/src/objects/utils/user-utils.js"),h=n("../../common/src/data/database.js"),f=n("../../common/src/routing/route.js"),g=n("../../common/src/locale/locale.js"),v=n("../../common/src/theme/theme.js"),b=n("../../common/src/mixins/update-check.js"),y=n("./widgets/profile-image.jsx"),j=n("./views/media-view.jsx"),x=n("./dialogs/media-dialog-box.jsx"),w=n("./widgets/reaction-progress.jsx"),k=(n("../../common/src/widgets/time.jsx"),n("./views/reaction-view-options.jsx"));n("./views/reaction-view.scss"),e.exports=i.createClass({displayName:"ReactionView",mixins:[b],propTypes:{access:a.oneOf(["read-only","read-comment","read-write"]).isRequired,highlighting:a.bool,reaction:a.object.isRequired,respondent:a.object,story:a.object.isRequired,currentUser:a.object.isRequired,repo:a.object,database:a.instanceOf(h).isRequired,route:a.instanceOf(f).isRequired,locale:a.instanceOf(g).isRequired,theme:a.instanceOf(v).isRequired},getInitialState:function(){this.components=u({audioPlayer:HTMLAudioElement});var e={options:_,selectedResourceURL:null,showingReferencedMediaDialog:!1,renderingReferencedMediaDialog:!1};return this.updateOptions(e,this.props),e},getClassName:function(){var e="reaction-view";return this.props.highlighting&&(e+=" highlighting"),e},componentWillReceiveProps:function(e){var t=this,n=r.clone(this.state);this.props.reaction!==e.reaction&&this.updateOptions(n,e);var s=r.pickBy(n,function(e,n){return t.state[n]!==e});r.isEmpty(s)||this.setState(s)},updateOptions:function(e,t){(e.options=r.clone(e.options)).hideReaction=!t.reaction.public},render:function(){return i.createElement("div",{className:this.getClassName()},i.createElement("div",{className:"profile-image-column"},this.renderProfileImage()),i.createElement("div",{className:"contents-column"},i.createElement("div",{className:"text"},this.renderOptionButton(),this.renderProgress(),this.renderText(),this.renderReferencedMediaDialog()),this.renderAudioPlayer(),this.renderMedia()))},renderProfileImage:function(){var e={user:this.props.respondent,theme:this.props.theme,size:"small"};return this.props.respondent&&(e.url=this.props.route.find(n("./pages/people-page.jsx"),{schema:this.props.route.parameters.schema,user:this.props.respondent.id})),i.createElement(y,e)},renderText:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.props.reaction,s=this.props.currentUser,a=this.props.story,d=this.props.repo,u=t(r.get(this.props.respondent,"details.name"));if(this.resourcesReferenced={},!n.published||!1===n.ready){var h;return h=n.published?"reaction-$name-is-sending":n.ptime?"reaction-$name-is-editing":"reaction-$name-is-writing",i.createElement("span",{className:"in-progress"},e(h,u))}switch(n.type){case"like":return i.createElement("span",{className:"like"},e("reaction-$name-likes-this",u));case"comment":var f=r.get(n,"details.text");if(r.get(n,"details.markdown",!1)){var g=c.render(t(f),this.handleReference);return g[0]&&"p"===g[0].type&&(g[0]=i.createElement("span",{key:0},g[0].props.children)),i.createElement("span",{className:"comment markdown",onClick:this.handleMarkdownClick},u,": ",g)}return i.createElement("span",{className:"comment"},u,": ",l.renderEmoji(t(f)));case"vote":return i.createElement("span",{className:"vote"},e("reaction-$name-cast-a-vote",u));case"task-completion":return i.createElement("span",{className:"task-completion"},e("reaction-$name-completed-a-task",u));case"note":var v,b,s=this.props.currentUser,d=this.props.repo;if(m.canAccessRepo(s,d))switch(a.type){case"push":case"merge":var y=p.findLinkByRelations(n,"note","commit");if(y){var j=y.commit.id,x=o(y);v=d.details.web_url+"/commit/"+j+x,b=y.type}break;case"issue":var y=p.findLinkByRelations(n,"note","issue");if(y){var w=y.issue.number,x=o(y);v=d.details.web_url+"/issues/"+w+x,b=y.type}break;case"merge-request":var y=p.findLinkByRelations(n,"note","merge_request");if(y){var k=y.merge_request.number,x=o(y);v=d.details.web_url+"/merge_requests/"+k+x,b=y.type}}return i.createElement("a",{className:"note",href:v,target:b},e("reaction-$name-commented-on-"+a.type,u));case"assignment":if("issue"===a.type||"post"===a.type){var v,b;if(m.canAccessRepo(s,d)){var y=p.findLinkByRelations(n,"issue");if(y){var w=r.get(y,"issue.number"),x=o(y);v=d.details.web_url+"/issues/"+w+x,b=y.type}}return i.createElement("a",{className:"issue-assignment",href:v,target:b},e("reaction-$name-is-assigned-to-issue",u))}if("merge-request"===a.type){var v,b;if(m.canAccessRepo(s,d)){var y=p.findLinkByRelations(n,"merge_request");if(y){var k=y.merge_request.number,x=o(y);v=d.details.web_url+"/merge_requests/"+k+x,b=y.type}}return i.createElement("a",{className:"issue-assignment",href:v,target:b},e("reaction-$name-is-assigned-to-merge-request",u))}case"tracking":var v,b;if(m.canAccessRepo(s,d)){var y=p.findLinkByRelations(n,"issue");if(y){var w=y.issue.number;v=d.details.web_url+"/issues/"+w,b=y.type}}return i.createElement("a",{className:"issue-tracking",href:v,target:b},e("reaction-$name-added-story-to-issue-tracker",u))}},renderOptionButton:function(){if(!this.props.reaction.published)return null;var e={access:this.props.access,currentUser:this.props.currentUser,reaction:this.props.reaction,story:this.props.story,locale:this.props.locale,theme:this.props.theme,options:this.state.options,onChange:this.handleOptionsChange};return i.createElement(k,e)},renderProgress:function(){if(!this.props.reaction.published)return null;var e={reaction:this.props.reaction,locale:this.props.locale};return i.createElement(w,e)},renderAudioPlayer:function(){if(!this.state.audioURL)return null;var e={ref:this.components.setters.audioPlayer,src:this.state.audioURL,autoPlay:!0,controls:!0,onEnded:this.handleAudioEnded};return i.createElement("audio",e)},renderMedia:function(){var e=r.get(this.props.reaction,"details.resources");if(r.isEmpty(this.resourcesReferenced)||(e=r.difference(e,r.values(this.resourcesReferenced))),r.isEmpty(e))return null;var t={locale:this.props.locale,theme:this.props.theme,resources:e};return i.createElement("div",{className:"media"},i.createElement(j,t))},renderReferencedMediaDialog:function(){if(!this.state.renderingReferencedMediaDialog)return null;var e=this.resourcesReferenced[this.state.selectedResourceURL],t=E(this.resourcesReferenced),n=r.indexOf(t,e);if(-1===n)return null;var s={show:this.state.showingReferencedMediaDialog,resources:t,selectedIndex:n,locale:this.props.locale,theme:this.props.theme,onClose:this.handleReferencedMediaDialogClose};return i.createElement(x,s)},saveReaction:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.saveOne({table:"reaction"},e)})},removeReaction:function(e){var t=this.props.route.parameters;return this.props.database.use({schema:t.schema,by:this}).removeOne({table:"reaction"},e)},setOptions:function(e){var t=this,n=this.state.options;this.setState({options:e},function(){if(e.editReaction&&!n.editReaction){var s=r.clone(t.props.reaction);s.published=!1,t.saveReaction(s)}if(e.removeReaction&&!n.removeReaction&&t.removeReaction(t.props.reaction),e.hideReaction!==n.hideReaction){var s=r.clone(t.props.reaction);s.public=!e.hideReaction,t.saveReaction(s)}})},handleReference:function(e){var t=this.props.reaction.details.resources,s=c.findReferencedResource(t,e.name);if(s){var o,r=this.props.theme;return o=e.forImage?"audio"===s.type?n("../node_modules/file-loader/index.js!../assets/speaker.svg")+"#"+encodeURI(s.url):r.getImageURL(s,{height:24}):r.getURL(s),this.resourcesReferenced[o]=s,{href:o,title:void 0}}},handleMarkdownClick:function(e){var t=e.target;if("IMG"===t.tagName){var n=t.getAttribute("src"),o=this.resourcesReferenced[n];if(o){if("image"===o.type||"video"===o.type)this.setState({selectedResourceURL:n,renderingReferencedMediaDialog:!0,showingReferencedMediaDialog:!0});else if("website"===o.type)window.open(o.url);else if("audio"===o.type){var r=s(o),i=this.props.theme.getAudioURL(o,{version:r});this.setState({audioURL:i})}}else{var a=t.getBoundingClientRect(),c=t.naturalWidth+50,l=t.naturalHeight+50,d=a.left+window.screenLeft,u=a.top+window.screenTop;window.open(t.src,"_blank","width="+c+",height="+l+",left="+d+",top="+u+"status=no,menubar=no")}}},handleReferencedMediaDialogClose:function(e){var t=this;this.setState({showingReferencedMediaDialog:!1},function(){setTimeout(function(){t.state.showingReferencedMediaDialog||t.setState({renderingReferencedMediaDialog:!1,selectedResourceURL:null})},500)})},handleOptionsChange:function(e){this.setOptions(e.options)},handleAudioEnded:function(e){this.setState({audioURL:null})}});var _={hideReaction:!1,editReaction:!1,removeReaction:!1},E=d(function(e){return r.filter(e,function(e){switch(e.type){case"image":case"video":return!0}})})},"./views/reaction-view.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/reaction-view.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./views/story-contents.jsx":function(e,t,n){"use strict";function s(e){if(e=i.trim(e)){return l(e).format("ll")}}function o(e){return i.first(i.keys(e.versions))||null}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i=n("../node_modules/lodash/lodash.js"),a=n("../node_modules/react/react.js"),c=a.PropTypes,l=n("../node_modules/moment/moment.js"),d=n("../../common/src/utils/memoize.js"),u=n("../../common/src/utils/list-parser.js"),p=n("../../common/src/utils/markdown.js"),m=n("../../common/src/utils/plain-text.js"),h=n("../../common/src/utils/component-refs.js"),f=n("../../common/src/objects/utils/external-data-utils.js"),g=n("../../common/src/objects/utils/user-utils.js"),v=(n("../../common/src/transport/payload.js"),n("../../common/src/locale/locale.js")),b=n("../../common/src/theme/theme.js"),y=n("../../common/src/mixins/update-check.js"),j=n("./views/media-view.jsx"),x=n("./dialogs/media-dialog-box.jsx"),w=n("./views/app-component.jsx"),k=n("./dialogs/app-component-dialog-box.jsx"),_=n("./widgets/scrollable.jsx"),E=n("./widgets/push-button.jsx");n("./views/story-contents.scss"),e.exports=a.createClass({displayName:"StoryContents",mixins:[y],propTypes:{access:c.oneOf(["read-only","read-comment","read-write"]).isRequired,story:c.object.isRequired,authors:c.arrayOf(c.object),currentUser:c.object.isRequired,reactions:c.arrayOf(c.object),repo:c.object,locale:c.instanceOf(v).isRequired,theme:c.instanceOf(b).isRequired,onChange:c.func,onReaction:c.func},getInitialState:function(){this.components=h({audioPlayer:HTMLAudioElement});var e={voteSubmitted:!1,selectedComponent:null,showingComponentDialog:!1,renderingComponentDialog:!1,selectedResourceName:null,showingReferencedMediaDialog:!1,renderingReferencedMediaDialog:!1,audioURL:null};return this.updateUserAnswers({},e),e},getAuthorName:function(){var e=this.props.locale.name,t=i.first(this.props.authors);return t?e(t.details.name,t.details.gender):""},componentWillReceiveProps:function(e){var t=i.clone(this.state);this.props.story!==e.story&&this.updateUserAnswers(t,e);var n=i.shallowDiff(t,this.state);i.isEmpty(n)||this.setState(n)},updateUserAnswers:function(e,t){if(t.story)if("survey"===t.story.type){var n=t.locale.pick,s=n(t.story.details.text),o=u.extract(s),r=e.userAnswers;i.each(o,function(e,t){i.each(e,function(e,t){e.checked&&(r&&void 0!==r[e.list]||(r=i.decoupleSet(r,[e.list],e.key)))})}),e.userAnswers=r}else"task-list"===t.story.type&&(e.userAnswers=null)},isCurrentUserAuthor:function(){var e=this.props.story.user_ids,t=this.props.currentUser.id;return i.includes(e,t)},hasUserVoted:function(){if(null!==this.props.reactions){return!!S(this.props.reactions,this.props.currentUser)}},canUserVote:function(){return"read-write"===this.props.access},componentDidUpdate:function(e){if(this.props.reactions!==e.reactions&&this.state.voteSubmitted){S(e.reactions,e.currentUser)&&this.setState({voteSubmitted:!1})}},render:function(){return a.createElement("div",{className:"story-contents"},this.renderText(),this.renderAudioPlayer(),this.renderMedia(),this.renderReferencedMediaDialog(),this.renderAppComponents(),this.renderButtons())},renderText:function(){var e=this.props.story;switch(this.resourcesReferenced=[],e.type){case"post":return this.renderStoryText();case"task-list":return this.renderTaskListText();case"survey":return this.renderSurveyText();case"repo":return this.renderRepoText();case"member":return this.renderMemberText();case"push":case"merge":case"branch":return this.renderPushText();case"issue":return e.details.exported?this.renderStoryText():this.renderIssueText();case"merge-request":return this.renderMergeRequestText();case"milestone":return this.renderMilestoneText();case"wiki":return this.renderWikiText()}},renderStoryText:function(){var e=this.props.locale.pick,t=this.props.story,n=i.trimEnd(e(t.details.text));if(!n)return null;var s;return t.details.labels&&(s=this.renderLabels()),t.details.markdown?a.createElement("div",{className:"text story markdown",onClick:this.handleMarkdownClick},p.render(n,this.handleReference),s):a.createElement("div",{className:"text story plain-text"},a.createElement("p",null,m.renderEmoji(n)),s)},renderTaskListText:function(){var e=this.props.locale.pick,t=this.props.story,n=i.trimEnd(e(t.details.text));if(!n)return null;var s=this.state.userAnswers,o=this.isCurrentUserAuthor()?this.handleTaskListItemChange:null,r=this.handleReference;if(t.details.markdown){var c=p.renderTaskList(n,s,o,r);return a.createElement("div",{className:"text task-list markdown",onClick:this.handleMarkdownClick},c)}var c=m.renderTaskList(n,s,o);return a.createElement("div",{className:"text task-list plain-text"},a.createElement("p",null,c))},renderSurveyText:function(){var e=this.props.locale.pick,t=this.props.story,n=i.trimEnd(e(t.details.text));if(!n)return null;var s=this.handleSurveyItemChange,o=this.handleReference;if(this.canUserVote()&&!this.hasUserVoted()){var r=this.state.userAnswers;if(t.details.markdown){var c=p.renderSurvey(n,r,s,o);return a.createElement("div",{className:"text survey markdown",onClick:this.handleMarkdownClick},c)}var c=m.renderSurvey(n,r,s);return a.createElement("div",{className:"text survey plain-text"},a.createElement("p",null,c))}var l=C(this.props.reactions)||{};if(t.details.markdown){var d=p.renderSurveyResults(n,l,o);return a.createElement("div",{className:"text survey markdown",onClick:this.handleMarkdownClick},d)}var d=m.renderSurveyResults(n,l);return a.createElement("div",{className:"text survey plain-text"},a.createElement("p",null,d))},renderRepoText:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.props.story,s=this.getAuthorName(),o=n.details.action,r=this.props.repo,c=t(i.get(r,"details.title"))||i.get(r,"name"),l=i.get(r,"details.web_url");return a.createElement("div",{className:"text repo"},a.createElement("p",null,a.createElement("a",{href:l,target:"_blank"},e("story-$name-"+o+"-$repo",s,c))))},renderMemberText:function(){var e=this.props.locale.translate,t=this.props.locale.pick,n=this.props.story,s=this.getAuthorName(),o=n.details.action,r=this.props.repo,c=t(i.get(r,"details.title"))||i.get(r,"name"),l=i.get(r,"details.web_url");return a.createElement("div",{className:"text member"},a.createElement("p",null,a.createElement("a",{href:l,target:"_blank"},e("story-$name-"+o+"-$repo",s,c))))},renderIssueText:function(){var e,t,n=this.props.locale.translate,s=this.props.locale.pick,o=this.props.story,r=this.getAuthorName(),i=o.details.title,c=this.props.repo,l=f.findLinkByRelations(this.props.story,"issue");if(g.canAccessRepo(this.props.currentUser,c)&&l){var d=l.issue.number;e=c.details.web_url+"/issues/"+d,t=l.type}var u=l?l.issue.number:"";return a.createElement("div",{className:"text issue"},a.createElement("p",null,a.createElement("a",{href:e,target:t},n("story-$name-opened-issue-$number-$title",r,u,s(i)))),this.renderStatus(),this.renderLabels())},renderMilestoneText:function(){var e,t=this.props.locale.translate,n=this.props.locale.pick,o=this.props.story,r=this.getAuthorName(),i=this.props.repo,c=o.details.title,l=s(o.details.due_date),d=s(o.details.start_date)||"-";if(g.canAccessRepo(this.props.currentUser,i)){var u=f.findLinkByRelations(this.props.story,"milestone");u&&(e=i.details.web_url+"/milestones/"+u.milestone.id)}return a.createElement("div",{className:"text milestone"},a.createElement("p",null,a.createElement("a",{href:e,target:"_blank"},t("story-$name-created-$milestone",r,n(c)))),a.createElement("p",{className:"start-date"},a.createElement("span",null,t("story-milestone-start-date"))," ",a.createElement("span",null,d)),a.createElement("p",{className:"due-date"},a.createElement("span",{className:"label"},t("story-milestone-due-date"))," ",a.createElement("span",null,l)))},renderMergeRequestText:function(){var e,t=this.props.locale.translate,n=(this.props.locale.pick,this.props.story),s=this.getAuthorName(),o=this.props.repo,r=i.get(n,"details.source_branch"),c=i.get(n,"details.branch");if(g.canAccessRepo(this.props.currentUser,o)){var l=f.findLinkByRelations(this.props.story,"merge_request");l&&(e=o.details.web_url+"/merge_requests/"+l.merge_request.id)}return a.createElement("div",{className:"text merge-request"},a.createElement("p",null,a.createElement("a",{href:e,target:"_blank"},t("story-$name-requested-merge-$branch1-into-$branch2",s,r,c))),this.renderStatus(),this.renderLabels())},renderWikiText:function(){var e=this.props.locale.translate,t=this.props.story,n=this.getAuthorName(),s=t.details.url,o=i.capitalize(t.details.title),r=t.details.action+"d";return"deleted"===r&&(s=void 0),a.createElement("div",{className:"text wiki"},a.createElement("p",null,a.createElement("a",{href:s,target:"_blank"},e("story-$name-"+r+"-$page",n,o))))},renderPushText:function(){var e,t=this.props.locale.translate,n=this.props.locale.pick,s=this.props.story,o=this.getAuthorName(),r=i.get(this.props.story,"details.files"),c=i.get(this.props.story,"details.lines"),l=(i.get(this.props.story,"details.commit_ids.length"),this.props.repo),d=n(i.get(l,"details.title"))||i.get(l,"name"),u=s.details.branch,p=["added","deleted","modified","renamed"],m=i.transform(p,function(e,n,s){var o=r[n];o>0&&e.push(a.createElement("li",{key:s,className:n},t("story-push-"+n+"-$count-files",o)))},[]),h=["added","deleted","modified"],f=i.transform(h,function(e,n,s){var o=c[n];o>0&&e.push(a.createElement("li",{key:s,className:n},t("story-push-"+n+"-$count-lines",o)))},[]);if(g.canAccessRepo(this.props.currentUser,l))if("push"===s.type||"merge"===s.type){var v=s.details.commit_before,b=s.details.commit_after;e=v?l.details.web_url+"/compare/"+v+"..."+b:l.details.web_url+"/commit/"+b}else"branch"===s.type&&(e=l.details.web_url+"/commits/"+u);var y;if("push"===s.type)y=t("story-$name-pushed-to-$branch-of-$repo",o,u,d);else if("merge"===s.type){var j=s.details.source_branches;y=t("story-$name-merged-$branches-into-$branch-of-$repo",o,j,u,d)}else"branch"===s.type&&(y=t("story-$name-created-$branch-in-$repo",o,u,d));return a.createElement("div",{className:"text push"},a.createElement("p",null,a.createElement("a",{href:e,target:"_blank"},y)),a.createElement("div",null,a.createElement("ul",{className:"files"},m),a.createElement("ul",{className:"lines"},f)))},renderStatus:function(){var e=this.props.locale.translate,t=this.props.story.details.state;return t?a.createElement("p",{className:"status-"+t},a.createElement("span",null,e("story-issue-current-status"))," ",a.createElement("span",null,e("story-issue-status-"+t))):null},renderLabels:function(){var e=this.props.story.details.labels;if(i.isEmpty(e))return null;for(var t=this.props.repo,n=i.map(e,function(e,n){var s;if(t){var o=i.indexOf(t.details.labels,e),r=i.get(t.details.label_colors,o);r&&(s={backgroundColor:r})}return a.createElement("span",{key:n,className:"tag",style:s},e)}),s=1;s<n.length;s+=2)n.splice(s,0," ");return a.createElement("p",{className:"tags"},n)},renderButtons:function(){if("survey"!==this.props.story.type)return null;if(!this.canUserVote())return null;if(!1!==this.hasUserVoted())return null;var e=this.props.locale.translate,t={label:e("story-vote-submit"),emphasized:!i.isEmpty(this.state.userAnswers),disabled:this.state.voteSubmitted||i.isEmpty(this.state.userAnswers),onClick:this.handleVoteSubmitClick};return a.createElement("div",{className:"buttons"},a.createElement(E,t))},renderAudioPlayer:function(){if(!this.state.audioURL)return null;var e={ref:this.components.setters.audioPlayer,src:this.state.audioURL,autoPlay:!0,controls:!0,onEnded:this.handleAudioEnded};return a.createElement("audio",e)},renderMedia:function(){var e=i.get(this.props.story,"details.resources");if(i.isEmpty(this.resourcesReferenced)||(e=i.difference(e,this.resourcesReferenced)),i.isEmpty(e))return null;var t={locale:this.props.locale,theme:this.props.theme,resources:e};return a.createElement(j,t)},renderReferencedMediaDialog:function(){if(!this.state.renderingReferencedMediaDialog)return null;var e=this.props.story.details.resources,t=p.findReferencedResource(e,this.state.selectedResourceName);if(!t)return null;var n=R(this.resourcesReferenced),s=i.indexOf(n,t);if(-1===s)return null;var o={show:this.state.showingReferencedMediaDialog,resources:n,selectedIndex:s,locale:this.props.locale,theme:this.props.theme,onClose:this.handleReferencedMediaDialogClose};return a.createElement(x,o)},renderAppComponents:function(){var e=this.props.locale.translate,t=i.get(this.props.story,"details.components");return i.isEmpty(t)?null:(t=N(t,this.props.locale),a.createElement("div",{className:"impact"},a.createElement("p",{className:"message"},e("story-push-components-changed")),a.createElement(_,null,i.map(t,this.renderAppComponent)),this.renderAppComponentDialog()))},renderAppComponent:function(e,t){var n={component:e,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleComponentSelect};return a.createElement(w,r({key:t},n))},renderAppComponentDialog:function(){if(!this.state.renderingComponentDialog)return null;var e={show:this.state.showingComponentDialog,component:this.state.selectedComponent,locale:this.props.locale,theme:this.props.theme,onClose:this.handleComponentDialogClose};return a.createElement(k,e)},triggerChangeEvent:function(e){this.props.onChange&&this.props.onChange({type:"change",target:this,story:e})},triggerReactionEvent:function(e){this.props.onReaction&&this.props.onReaction({type:"reaction",target:this,reaction:e})},handleReference:function(e){var t=this.props.story.details.resources,s=p.findReferencedResource(t,e.name);if(s){var o,r=this.props.theme;return o=e.forImage?"audio"===s.type?n("../node_modules/file-loader/index.js!../assets/speaker.svg")+"#"+encodeURI(s.url):r.getImageURL(s,{height:24}):r.getURL(s),this.resourcesReferenced.push(s),{href:o,title:e.name}}},handleMarkdownClick:function(e){var t=e.target;t.viewportElement&&(t=t.viewportElement);var n;if("svg"===t.tagName){var s=t.getElementsByTagName("title")[0];s&&(n=s.textContent)}else n=e.target.title;if(n){var r=this.props.story.details.resources,i=p.findReferencedResource(r,n);if(i)if("image"===i.type||"video"===i.type)this.setState({selectedResourceName:n,renderingReferencedMediaDialog:!0,showingReferencedMediaDialog:!0});else if("website"===i.type)window.open(i.url,"_blank");else if("audio"===i.type){var a=o(i),c=this.props.theme.getAudioURL(i,{version:a});this.setState({audioURL:c})}}else if("IMG"===t.tagName){var l=(t.getAttribute("src"),t.getBoundingClientRect()),d=t.naturalWidth+50,u=t.naturalHeight+50,m=l.left+window.screenLeft,h=l.top+window.screenTop;window.open(t.src,"_blank","width="+d+",height="+u+",left="+m+",top="+h+"status=no,menubar=no")}},handleTaskListItemChange:function(e){var t=this,n=e.currentTarget,s=parseInt(n.name),o=parseInt(n.value),r=n.checked,a=i.decoupleSet(this.state.userAnswers,[s,o],r);this.setState({userAnswers:a});var c=i.cloneDeep(this.props.story),l=[];c.details.text=i.mapValues(c.details.text,function(e){var t=u.extract(e);u.set(t,s,o,r);var n=u.count(t,!1);return l.push(n),u.join(t)}),c.unfinished_tasks=i.max(l),this.triggerChangeEvent(c);var d={list:s,item:o};if(r){var p={type:"task-completion",story_id:c.id,user_id:this.props.currentUser.id,published:!0,public:!0,details:{task:d}};this.triggerReactionEvent(p)}else{var p=i.find(this.props.reactions,function(e){if("task-completion"===e.type&&e.user_id===t.props.currentUser.id)return i.isEqual(e.details.task,d)});p&&(p=i.clone(p),p.deleted=!0,this.triggerReactionEvent(p))}},handleSurveyItemChange:function(e){var t=e.currentTarget,n=t.name,s=t.value,o=i.decoupleSet(this.state.userAnswers,[n],s);this.setState({userAnswers:o})},handleVoteSubmitClick:function(e){var t=this.props.story,n={type:"vote",story_id:t.id,user_id:this.props.currentUser.id,published:!0,public:!0,details:{answers:this.state.userAnswers}};this.triggerReactionEvent(n),this.setState({voteSubmitted:!0})},handleComponentSelect:function(e){this.setState({renderingComponentDialog:!0,showingComponentDialog:!0,selectedComponent:e.component})},handleComponentDialogClose:function(e){var t=this;this.setState({showingComponentDialog:!1},function(){setTimeout(function(){t.state.showingComponentDialog||t.setState({renderingComponentDialog:!1,selectedComponent:null})},500)})},handleReferencedMediaDialogClose:function(e){var t=this;this.setState({showingReferencedMediaDialog:!1},function(){setTimeout(function(){t.state.showingReferencedMediaDialog||t.setState({renderingReferencedMediaDialog:!1,selectedResourceURL:null})},500)})},handleAudioEnded:function(e){this.setState({audioURL:null})}});var C=d(function(e){var t={};return i.each(e,function(e){"vote"===e.type&&i.forIn(e.details.answers,function(e,n){var s=[n,"total"],o=i.get(t,s,0)+1;i.set(t,s,o);var r=[n,"answers",e],a=i.get(t,r,0)+1;i.set(t,r,a)})}),t}),S=d(function(e,t){return t?i.find(e,{type:"vote",user_id:t.id}):null}),R=d(function(e){return i.filter(e,function(e){switch(e.type){case"image":case"video":return!0}})}),N=d(function(e,t){var n=t.pick;return i.sortBy(e,function(e){return i.toLower(n(e.text))})})},"./views/story-contents.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/story-contents.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./views/story-view-options.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/objects/utils/user-utils.js"),a=n("../../common/src/data/database.js"),c=n("../../common/src/routing/route.js"),l=n("../../common/src/locale/locale.js"),d=n("../../common/src/theme/theme.js"),u=n("./widgets/option-button.jsx"),p=n("./dialogs/user-selection-dialog-box.jsx"),m=n("./dialogs/issue-dialog-box.jsx");n("./views/story-view-options.scss"),e.exports=o.createClass({displayName:"StoryViewOptions",propTypes:{section:r.oneOf(["main","both"]),access:r.oneOf(["read-only","read-comment","read-write"]).isRequired,story:r.object.isRequired,reactions:r.arrayOf(r.object),repos:r.arrayOf(r.object),currentUser:r.object.isRequired,options:r.object.isRequired,database:r.instanceOf(a).isRequired,route:r.instanceOf(c).isRequired,locale:r.instanceOf(l).isRequired,theme:r.instanceOf(d).isRequired,onChange:r.func,onComplete:r.func},getDefaultProps:function(){return{section:"both"}},getInitialState:function(){return{selectingRecipients:!1,renderingRecipientDialogBox:!1,enteringIssueDetails:!1,renderingIssueDialogBox:!1}},render:function(){this.props.locale.translate;return o.createElement("div",{className:"story-view-options"},this.renderButtons("main"))},renderButtons:function(e){var t=this.props.locale.translate,n=this.props.options,r=this.props.access,a=this.props.currentUser,c=this.props.story,l=this.props.repos;if("main"===e){var d;if(void 0===n.keepBookmark){var p=!!a&&s.includes(n.bookmarkRecipients,a.id);d={label:t("option-add-bookmark"),selected:p,hidden:!i.canCreateBookmark(a,c,r),onClick:this.handleAddBookmarkClick}}else d={label:t("option-keep-bookmark"),selected:n.keepBookmark,onClick:this.handleKeepBookmarkClick};var m=a?s.without(n.bookmarkRecipients,a.id):[],h={label:s.isEmpty(m)?t("option-send-bookmarks"):t("option-send-bookmarks-to-$count-users",s.size(m)),hidden:!i.canSendBookmarks(a,c,r),selected:!s.isEmpty(m)||this.state.selectingRecipients,onClick:this.handleSendBookmarkClick},f={label:t("option-add-issue"),hidden:!i.canAddIssue(a,c,l,r),selected:!!n.issueDetails||this.state.enteringIssueDetails,onClick:this.handleAddIssueClick},g={label:t("option-hide-story"),hidden:!i.canHideStory(a,c,r),selected:n.hideStory,onClick:this.handleHideClick},v={label:t("option-edit-post"),hidden:!i.canEditStory(a,c,r),selected:n.editStory,onClick:this.handleEditClick},b={label:t("option-remove-story"),hidden:!i.canRemoveStory(a,c,r),selected:n.removeStory,onClick:this.handleRemoveClick},y={label:t("option-bump-story"),hidden:!i.canBumpStory(a,c,r),selected:n.bumpStory,onClick:this.handleBumpClick};return o.createElement("div",{className:e},o.createElement(u,d),o.createElement(u,h),o.createElement(u,f),o.createElement(u,g),o.createElement(u,v),o.createElement(u,b),o.createElement(u,y),this.renderRecipientDialogBox(),this.renderIssueDialogBox())}},renderRecipientDialogBox:function(){if(!this.state.renderingRecipientDialogBox)return null;var e={show:this.state.selectingRecipients,selection:this.props.options.bookmarkRecipients,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleRecipientsSelect,onCancel:this.handleRecipientsCancel};return o.createElement(p,e)},renderIssueDialogBox:function(){if(!this.state.renderingIssueDialogBox)return null;var e={show:this.state.enteringIssueDetails,allowDeletion:!s.some(this.props.reactions,{type:"assignment "}),story:this.props.story,issue:this.props.options.issueDetails,repos:this.props.repos,locale:this.props.locale,theme:this.props.theme,onConfirm:this.handleIssueConfirm,onCancel:this.handleIssueCancel};return o.createElement(m,e)},triggerChangeEvent:function(e){this.props.onChange&&this.props.onChange({type:"change",target:this,options:e})},triggerCompleteEvent:function(){this.props.onComplete&&this.props.onComplete({type:"complete",target:this})},openSelectionDialogBox:function(e){this.state.selectingRecipients||this.setState({selectingRecipients:!0,renderingRecipientDialogBox:!0})},closeSelectionDialogBox:function(){var e=this;this.state.selectingRecipients&&(this.setState({selectingRecipients:!1}),setTimeout(function(){e.state.selectingRecipients||e.setState({renderingRecipientDialogBox:!1})},500))},openIssueDialogBox:function(e){this.state.enteringIssueDetails||this.setState({enteringIssueDetails:!0,renderingIssueDialogBox:!0})},closeIssueDialogBox:function(){var e=this;this.state.enteringIssueDetails&&(this.setState({enteringIssueDetails:!1}),setTimeout(function(){e.state.enteringIssueDetails||e.setState({renderingIssueDialogBox:!1})},500))},handleAddBookmarkClick:function(e){var t=s.clone(this.props.options),n=this.props.currentUser.id;s.includes(t.bookmarkRecipients,n)?t.bookmarkRecipients=s.difference(t.bookmarkRecipients,[n]):t.bookmarkRecipients=s.union(t.bookmarkRecipients,[n]),this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleKeepBookmarkClick:function(e){var t=s.clone(this.props.options);this.props.currentUser.id;t.keepBookmark=!1,this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleSendBookmarkClick:function(e){this.openSelectionDialogBox(e)},handleAddIssueClick:function(e){this.openIssueDialogBox(e)},handleHideClick:function(e){var t=s.clone(this.props.options);t.hideStory=!t.hideStory,this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleEditClick:function(e){var t=s.clone(this.props.options);t.editStory=!0,this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleRemoveClick:function(e){var t=s.clone(this.props.options);t.removeStory=!0,this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleBumpClick:function(e){var t=s.clone(this.props.options);t.bumpStory=!0,this.triggerChangeEvent(t),this.triggerCompleteEvent()},handleRecipientsSelect:function(e){var t=s.clone(this.props.options);t.bookmarkRecipients=e.selection,this.triggerChangeEvent(t),this.triggerCompleteEvent(),this.closeSelectionDialogBox()},handleRecipientsCancel:function(e){this.triggerCompleteEvent(),this.closeSelectionDialogBox()},handleIssueConfirm:function(e){var t=s.clone(this.props.options);t.issueDetails=e.issue,this.triggerChangeEvent(t),this.triggerCompleteEvent(),this.closeIssueDialogBox()},handleIssueCancel:function(e){this.triggerCompleteEvent(),this.closeIssueDialogBox()}})},"./views/story-view-options.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/story-view-options.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./views/story-view.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../node_modules/moment/moment.js"),c=n("../../common/src/utils/memoize.js"),l=n("../../common/src/utils/component-refs.js"),d=n("../../common/src/utils/focus-manager.js"),u=n("../../common/src/objects/utils/external-data-utils.js"),p=n("../../common/src/objects/utils/issue-utils.js"),m=n("../../common/src/objects/utils/story-utils.js"),h=n("../../common/src/utils/random-token.js"),f=n("../../common/src/data/database.js"),g=n("../../common/src/transport/payloads.js"),v=n("../../common/src/routing/route.js"),b=n("../../common/src/locale/locale.js"),y=n("../../common/src/theme/theme.js"),j=n("../../common/src/mixins/update-check.js"),x=n("./widgets/profile-image.jsx"),w=n("./widgets/author-names.jsx"),k=n("./widgets/story-progress.jsx"),_=n("./widgets/story-emblem.jsx"),E=(n("./widgets/scrollable.jsx"),n("./widgets/reaction-toolbar.jsx")),C=n("./lists/reaction-list.jsx"),S=n("./widgets/header-button.jsx"),R=n("./views/story-contents.jsx"),N=n("./views/story-view-options.jsx"),O=n("./widgets/corner-pop-up.jsx");n("./views/story-view.scss"),e.exports=r.createClass({displayName:"StoryView",mixins:[j],propTypes:{access:i.oneOf(["read-only","read-comment","read-write"]).isRequired,highlighting:i.bool,pending:i.bool,story:i.object.isRequired,bookmark:i.object,authors:i.arrayOf(i.object),reactions:i.arrayOf(i.object),respondents:i.arrayOf(i.object),recommendations:i.arrayOf(i.object),recipients:i.arrayOf(i.object),repos:i.arrayOf(i.object),currentUser:i.object.isRequired,selectedReactionId:i.number,database:i.instanceOf(f).isRequired,payloads:i.instanceOf(g).isRequired,route:i.instanceOf(v).isRequired,locale:i.instanceOf(b).isRequired,theme:i.instanceOf(y).isRequired,onBump:i.func},getInitialState:function(){this.components=l({reactionContainer:HTMLDivElement,reactionList:C,mainPopUp:O});var e={options:P,commentsExpanded:this.shouldExpandComments(this.props),isTall:!1};return this.updateOptions(e,this.props),e},getClassName:function(){var e="story-view";return this.props.highlighting&&(e+=" highlighting"),e},hasUserDraft:function(){var e=this;return o.some(this.props.reactions,function(t){if(!t.published&&t.user_id===e.props.currentUser.id)return!0})},shouldExpandComments:function(e){if(e.reactions&&e.respondents){var t=o.get(this.props.currentUser,"id");return!!o.includes(e.story.user_ids,t)||(!!o.some(e.reactions,{user_id:t})||!(!e.selectedReactionId||!o.some(e.reactions,{id:e.selectedReactionId})))}},componentWillReceiveProps:function(e){var t=o.clone(this.state);this.props.story===e.story&&this.props.recommendations===e.recommendations||this.updateOptions(t,e),this.props.reactions===e.reactions&&this.props.respondents===e.respondents||!0!==t.commentsExpanded&&this.shouldExpandComments(e)&&(t.commentsExpanded=!0);var n=o.shallowDiff(t,this.state);o.isEmpty(n)||this.setState(n)},updateOptions:function(e,t){var n=e.options=o.clone(e.options);n.hideStory=!t.story.public,n.bookmarkRecipients=o.map(t.recommendations,"target_user_id"),n.issueDetails=p.extractIssueDetails(t.story,t.repos),n.keepBookmark=!!t.bookmark||void 0},render:function(){switch(this.props.theme.mode){case"single-col":return this.renderSingleColumn();case"double-col":return this.renderDoubleColumn();case"triple-col":return this.renderTripleColumn()}},renderSingleColumn:function(){var e=this.renderReactionToolbar(),t=this.renderReactionLink(),n=!1;return(e||t)&&(n=!0,e||(e=" ")),r.createElement("div",{className:this.getClassName()},r.createElement("div",{className:"header"},r.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderAuthorNames(),this.renderPopUpMenu("main"))),r.createElement("div",{className:"body"},r.createElement("div",{className:"column-1 padded"},this.renderProgress(),this.renderEmblem(),this.renderContents())),r.createElement("div",{className:"header"},r.createElement("div",{className:"column-2"+(n?" padded":"")},e,t)),r.createElement("div",{className:"body"},r.createElement("div",{className:"column-2"},this.renderReactions())))},renderDoubleColumn:function(){return r.createElement("div",{className:this.getClassName()},r.createElement("div",{className:"header"},r.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderAuthorNames(),this.renderPopUpMenu("main")),r.createElement("div",{className:"column-2 padded"},this.renderReactionToolbar())),r.createElement("div",{className:"body"},r.createElement("div",{className:"column-1 padded"},this.renderProgress(),this.renderEmblem(),this.renderContents()),r.createElement("div",{className:"column-2"},this.renderReactions())))},renderTripleColumn:function(){var e=this.props.locale.translate;return r.createElement("div",{className:this.getClassName()},r.createElement("div",{className:"header"},r.createElement("div",{className:"column-1 padded"},this.renderProfileImage(),this.renderAuthorNames()),r.createElement("div",{className:"column-2 padded"},this.renderReactionToolbar()),r.createElement("div",{className:"column-3 padded"},r.createElement(S,{icon:"chevron-circle-right",label:e("story-options"),disabled:!0}))),r.createElement("div",{className:"body"},r.createElement("div",{className:"column-1 padded"},this.renderProgress(),this.renderEmblem(),this.renderContents()),r.createElement("div",{className:"column-2"},this.renderReactions()),r.createElement("div",{className:"column-3 padded"},this.renderOptions())))},renderProfileImage:function(){var e=o.get(this.props.authors,0),t={user:e,theme:this.props.theme,size:"medium"};return e&&(t.href=this.props.route.find(n("./pages/people-page.jsx"),{schema:this.props.route.parameters.schema,user:e.id})),r.createElement(x,t)},renderAuthorNames:function(){var e={authors:this.props.authors,locale:this.props.locale,theme:this.props.theme};return r.createElement(w,e)},renderReactionToolbar:function(){var e=this.props.access;if("read-comment"!==e&&"read-write"!==e)return null;var t={access:e,currentUser:this.props.currentUser,reactions:this.props.reactions,respondents:this.props.respondents,locale:this.props.locale,theme:this.props.theme,disabled:!m.isSaved(this.props.story),onAction:this.handleAction};return r.createElement(E,t)},renderReactionLink:function(){var e=o.size(this.props.reactions);if(0===e)return null;if(this.state.commentsExpanded)return" ";var t=this.props.locale.translate;return r.createElement("span",{className:"reaction-link",onClick:this.handleExpansionClick},t("story-$count-reactions",e))},renderProgress:function(){var e;!1===this.props.story.ready&&(e=this.props.payloads.inquire(this.props.story));var t={status:e,story:this.props.story,pending:this.props.pending,locale:this.props.locale};return r.createElement(k,t)},renderEmblem:function(){var e={story:this.props.story};return r.createElement(_,e)},renderContents:function(){var e={access:this.props.access,story:this.props.story,authors:this.props.authors,currentUser:this.props.currentUser,reactions:this.props.reactions,repo:D(this.props.repos,this.props.story),locale:this.props.locale,theme:this.props.theme,onChange:this.handleStoryChange,onReaction:this.handleStoryReaction};return r.createElement(R,e)},renderReactions:function(){if(o.isEmpty(this.props.reactions))return null;if("single-col"===this.props.theme.mode&&!this.state.commentsExpanded)return null;var e=this.components.setters,t={access:this.props.access,story:this.props.story,reactions:this.props.reactions,respondents:this.props.respondents,repo:D(this.props.repos,this.props.story),currentUser:this.props.currentUser,database:this.props.database,payloads:this.props.payloads,route:this.props.route,locale:this.props.locale,theme:this.props.theme,selectedReactionId:this.props.selectedReactionId},n="scrollable";return this.state.isTall&&"single-col"!==this.props.theme.mode&&(n+=" abs"),r.createElement("div",{ref:e.reactionContainer,className:n},r.createElement(C,s({ref:e.reactionList},t)))},adjustReactionContainer:function(){if("single-col"!==this.props.theme.mode){var e=this.components.reactionContainer;if(e){var t=e.parentNode;if(!T){var n=getComputedStyle(e);T=parseInt(n.maxHeight)}var s=t.offsetHeight>T;this.state.isTall!==s&&this.setState({isTall:s})}}},renderPopUpMenu:function(e){var t=this.components.setters[e+"PopUp"];return r.createElement(O,{ref:t},this.renderOptions(e))},renderOptions:function(e){var t={section:e,access:this.props.access,story:this.props.story,reactions:this.props.reactions,repos:this.props.repos,currentUser:this.props.currentUser,options:this.state.options,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onChange:this.handleOptionsChange,onComplete:this.handleOptionsComplete};return r.createElement(N,t)},componentDidMount:function(){this.adjustReactionContainer()},componentDidUpdate:function(e,t){this.adjustReactionContainer()},autosaveStory:function(e,t){var n=this;this.cancelAutosave(),this.autosaveTimeout=setTimeout(function(){n.saveStory(e)},t),this.autosaveUnloadHandler=function(){n.saveStory(e)},window.addEventListener("beforeunload",this.autosaveUnloadHandler)},cancelAutosave:function(){this.autosaveTimeout&&(clearTimeout(this.autosaveTimeout),this.autosaveTimeout=0),this.autosaveUnloadHandler&&(window.removeEventListener("beforeunload",this.autosaveUnloadHandler),this.autosaveUnloadHandler=null)},saveStory:function(e){var t=this;this.cancelAutosave();var n=this.props.route.parameters,s=this.props.database.use({schema:n.schema,by:this});return s.start().then(function(){var n=!m.isSaved(e),r=t.state.options.bookmarkRecipients;return s.saveOne({table:"story"},e).then(function(e){return n&&!o.isEmpty(r)?t.sendBookmarks(e,r).then(function(t){return e}):e})})},removeStory:function(e){var t=this.props.route.parameters;return this.props.database.use({schema:t.schema,by:this}).removeOne({table:"story"},e)},saveReaction:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.saveOne({table:"reaction"},e)})},removeReaction:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.removeOne({table:"reaction"},e)})},saveBookmarks:function(e){if(o.isEmpty(e))return Promise.resolve([]);var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.save({table:"bookmark"},e)})},removeBookmarks:function(e){if(o.isEmpty(e))return Promise.resolve([]);var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(){return n.remove({table:"bookmark"},e)})},sendBookmarks:function(e,t){var n=this,s=this.props.recommendations,r=[];o.each(t,function(t){if(!o.some(s,{target_user_id:t})){var i={story_id:e.published_version_id||e.id,user_ids:[n.props.currentUser.id],target_user_id:t};r.push(i)}});var i=[];return o.each(s,function(e){o.includes(t,e.target_user_id)||i.push(e)}),this.saveBookmarks(r).then(function(e){return n.removeBookmarks(i).then(function(t){return o.concat(e,t)})})},sendTask:function(e,t){var n={action:e,options:t,user_id:this.props.currentUser.id,token:h.generate()},s=this.props.route.parameters,o=this.props.database.use({schema:s.schema,by:this});return o.start().then(function(){return o.saveOne({table:"task"},n)})},setOptions:function(e){var t=this,n=this.state.options;this.setState({options:e},function(){var s=t.props.story;if(e.editStory&&!n.editStory)if(s.id>1){var r=o.omit(s,"id","published","ptime");r.published_version_id=s.id,t.saveStory(r)}else{var i=o.clone(s);i.published=!1,t.saveStory(i)}if(e.removeStory&&!n.removeStory&&t.removeStory(s),e.bumpStory&&!n.bumpStory){var i=o.clone(s);i.bump=!0,i.btime=a().toISOString(),t.saveStory(i),t.props.onBump&&t.props.onBump({type:"bump",target:t})}if(e.hideStory!==n.hideStory){var i=o.clone(s);i.public=!e.hideStory,t.saveStory(i)}if(e.keepBookmark!==n.keepBookmark&&t.props.bookmark&&!e.keepBookmark&&t.removeBookmarks([t.props.bookmark]),!o.isEqual(e.issueDetails,n.issueDetails)){var c=o.clone(e.issueDetails)||{};c.story_id=s.id,t.sendTask("export-issue",c)}o.isEqual(e.bookmarkRecipients,n.bookmarkRecipients)||(m.isSaved(s)?t.sendBookmarks(t.props.story,e.bookmarkRecipients):t.saveStory(s))})},handleStoryChange:function(e){this.autosaveStory(e.story,1e3)},handleStoryReaction:function(e){e.reaction.deleted?this.removeReaction(e.reaction):this.saveReaction(e.reaction)},handleExpansionClick:function(e){this.setState({commentsExpanded:!0})},handleOptionsChange:function(e){this.setOptions(e.options);var t=e.target.props.section,n=this.components[t+"PopUp"];n&&n.close()},handleOptionsComplete:function(e){var t=e.target.props.section,n=this.components[t+"PopUp"];n&&n.close()},handleAction:function(e){switch(e.action){case"like-add":var t={type:"like",story_id:this.props.story.id,user_id:this.props.currentUser.id,published:!0,public:!0};this.saveReaction(t);break;case"like-remove":this.removeReaction(e.like);break;case"reaction-add":this.state.commentsExpanded||this.setState({commentsExpanded:!0});if(!o.some(this.props.reactions,{user_id:this.props.currentUser.id,published:!1})){var n={type:"comment",story_id:this.props.story.id,user_id:this.props.currentUser.id,details:{},published:!1,public:!0};this.saveReaction(n)}d.focus({type:"ReactionEditor",story_id:this.props.story.id,user_id:this.props.currentUser.id});break;case"reaction-expand":this.setState({commentsExpanded:!0})}}});var T,P={issueDetails:null,hideStory:!1,editStory:!1,removeStory:!1,bumpStory:!1,bookmarkRecipients:[],keepBookmark:void 0},D=c(function(e,t){return o.find(e,function(e){return!!u.findLinkByRelative(t,e,"project")})});c(function(e){var t=o.map(e,"user_id");return o.size(o.uniq(t))},0)},"./views/story-view.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/story-view.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./views/user-statistics.jsx":function(e,t,n){"use strict";function s(e){return e.format("YYYY-MM-DD")}function o(e){return c.createElement("div",{className:"item"},c.createElement("svg",{className:"ct-chart-bar",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},c.createElement("g",{className:"ct-series ct-series-"+e.series},c.createElement("line",{className:"ct-bar",x1:0,y1:5,x2:10,y2:5}))),c.createElement("span",{className:"label"},e.label))}function r(e){var t=Math.round(.75*e.columns)+"em";return e.scrollable?c.createElement("div",{className:"scroll-container-frame"},c.createElement("div",{className:"scroll-container"},c.createElement("div",{className:"scroll-container-contents",style:{width:t}},e.children))):e.children}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a=n("../node_modules/lodash/lodash.js"),c=n("../node_modules/react/react.js"),l=c.PropTypes,d=n("../../common/src/widgets/chartist.jsx"),u=n("../node_modules/moment/moment.js"),p=n("../../common/src/utils/memoize.js"),m=(n("../../common/src/utils/date-tracker.js"),n("../../common/src/objects/types/story-types.js")),h=n("../../common/src/routing/route.js"),f=n("../../common/src/locale/locale.js"),g=n("../../common/src/theme/theme.js"),v=n("../../common/src/mixins/update-check.js");n("./views/user-statistics.scss"),e.exports=c.createClass({displayName:"UserStatistics",mixins:[v],propTypes:{chartType:l.oneOf(["bar","line","pie"]),chartRange:l.oneOf(["biweekly","monthly","full"]),dailyActivities:l.object,selectedDate:l.string,today:l.string,user:l.object,route:l.instanceOf(h).isRequired,locale:l.instanceOf(f).isRequired,theme:l.instanceOf(g).isRequired},getDefaultProps:function(){return{chartRange:"biweekly"}},getInitialState:function(){var e={dates:[],labels:[],series:[],indices:[],upperRange:0,selectedDateIndex:-1};return this.updateSeries(e,this.props),e},componentWillReceiveProps:function(e){var t=a.shallowDiff(e,this.props);if(t.chartRange||t.dailyActivities||t.selectedDate||t.today){var n=a.clone(this.state);this.updateSeries(n,e),this.setState(n)}},updateSeries:function(e,t){var n=t.selectedDate||t.today,s=a.get(t.dailyActivities,"daily",{}),o=t.locale.localeCode,r=t.locale.translate;switch(t.chartRange){case"biweekly":var i=t.selectedDate?6:0;e.dates=C(n,i),e.labels=w(e.dates,o);break;case"monthly":e.dates=S(n),e.labels=k(e.dates,o);break;case"full":var c=a.get(t.dailyActivities,"range");e.dates=c?R(c.start,c.end):S(t.today),e.labels=_(e.dates,o)}var l="bar"===t.chartType;if(e.series=y(s,e.dates),e.upperRange=j(e.series,l),e.indices=b(s,e.dates),e.selectedDateIndex=a.indexOf(e.dates,n),t.selectedDate){var d=u(t.selectedDate);e.selectedDateLabel=d.locale(o).format("l")}else e.selectedDateLabel=r("user-statistics-today");var p=x(e.dates,o);e.tooltips=a.map(e.series,function(e){return a.map(e.data,function(t,n){return r("user-statistics-tooltip-$count-"+e.name,t)+"\n"+p[n]})})},render:function(){return c.createElement("div",{className:"user-statistics"},this.renderLegend(),this.renderChart())},renderLegend:function(){if(!this.props.chartType)return null;var e=this.props.locale.translate,t=a.map(this.state.indices,function(t,n){var s={series:String.fromCharCode("a".charCodeAt(0)+t),label:e("user-statistics-legend-"+n)};return c.createElement(o,i({key:t},s))});return a.isEmpty(t)&&(t=" "),c.createElement("div",{className:"legend"},t)},renderChart:function(){switch(this.props.chartType){case"bar":return this.renderBarChart();case"line":return this.renderLineChart();case"pie":return this.renderPieChart();default:return null}},renderBarChart:function(){var e={type:"bar",data:{labels:this.state.labels,series:this.state.series},options:{stackBars:!0,chartPadding:{left:-25,right:30},high:this.state.upperRange,low:0},onDraw:this.handleChartDraw,onClick:this.handleChartClick};return c.createElement(r,{scrollable:"full"===this.props.chartRange,columns:this.state.dates.length},c.createElement(d,e))},renderLineChart:function(){var e={type:"line",data:{labels:this.state.labels,series:this.state.series},options:{fullWidth:!0,chartPadding:{left:-25,right:30},showPoint:!1,high:this.state.upperRange,low:0},onDraw:this.handleChartDraw};return c.createElement(r,{scrollable:"full"===this.props.chartRange,columns:this.state.dates.length},c.createElement(d,e))},renderPieChart:function(){var e={type:"pie",data:{series:a.map(this.state.series,function(e){return a.sum(e.data)})},options:{labelInterpolationFnc:function(e){if(e)return e}}};return c.createElement(d,e)},handleChartDraw:function(e){if("label"===e.type&&"y"===e.axis.units.pos)e.element.attr({x:e.axis.chartRect.width()+5});else if("grid"===e.type&&"x"===e.axis.units.pos){if(e.index===this.state.dates.length-1&&"bar"===this.props.chartType){var t=new d.Svg("line");t.attr({x1:e.x2+e.axis.stepLength,y1:e.y1,x2:e.x2+e.axis.stepLength,y2:e.y2,class:"ct-grid ct-vertical"}),e.group.append(t)}if("full"===this.props.chartRange){var n=this.state.labels[e.index];n&&e.element.addClass("month-start")}if(e.index===this.state.selectedDateIndex){var s=e.x2;"bar"===this.props.chartType&&(s+=.5*e.axis.stepLength);var o=e.y1+12,r=new d.Svg("text");r.text(this.state.selectedDateLabel),r.attr({x:s,y:o,"text-anchor":"middle",class:"date-label"}),e.group.append(r);var i=new d.Svg("text");i.text(""),i.attr({x:s,y:o+8,"text-anchor":"middle",class:"date-arrow"}),e.group.append(i),e.label="Hello"}}else if("grid"===e.type&&"y"===e.axis.units.pos){if(e.index===e.axis.ticks.length-1){var n=e.group.querySelector(".date-label"),i=e.group.querySelector(".date-arrow");n&&e.group.append(n),i&&e.group.append(i)}}else if("bar"===e.type){var c=a.get(this.state.tooltips,[e.seriesIndex,e.index]),l=this.state.dates[e.index],u=new d.Svg("title");u.text(c),e.element.append(u),e.element.attr({"data-date":l})}},handleChartClick:function(e){var t=e.target.getAttribute("data-date");if(t){var s=this.props.route,o={schema:s.parameters.schema,user:this.props.user.id,date:t};s.push(n("./pages/people-page.jsx"),o)}}});var b=p(function(e,t){var n={};a.each(t,function(t){var s=e[t];a.forIn(s,function(e,t){e&&(n[t]=!0)})});var s={};return a.each(m,function(e,t){n[e]&&(s[e]=t)}),s}),y=p(function(e,t){return a.map(m,function(n){var s=!0,o=a.map(t,function(t){var o=a.get(e,[t,n],0);return o&&(s=!1),o});return s?[]:{name:n,data:o}})}),j=p(function(e,t){var n=0;if(t){var s=[];a.each(e,function(e){var t=e.data;a.each(t,function(e,t){s[t]=s[t]?s[t]+e:e})}),a.isEmpty(s)||(n=a.max(s))}else a.each(e,function(e){var t=e.data,s=a.max(t);s>n&&(n=s)});if(n<=17)return 20;if(n<=42)return 50;for(var o=100*Math.ceil(n/100);n/o>.85;)o+=100;return o}),x=p(function(e,t){return a.map(e,function(e){return u(e).locale(t).format("l")})}),w=p(function(e,t){return a.map(e,function(e){return u(e).locale(t).format("dd")})}),k=p(function(e,t){return a.map(e,function(e){var n=u(e);return n.date()%2==0?n.locale(t).format("D"):""})}),_=p(function(e,t){return a.map(e,function(e){var n=u(e);return 1===n.date()?n.locale(t).format("MMMM"):""})}),E=p(function(e,t){for(var n=u(e),o=u(t),r=[],i=n.clone();i<=o;){var a=s(i);r.push(a),i.add(1,"day")}return r},[],!1),C=p(function(e,t){var n=u(e).add(t,"day"),o=s(n),r=s(n.subtract(13,"day"));return E(r,o)},[],!1),S=p(function(e){var t=u(e).startOf("month"),n=s(t),o=s(u(e).endOf("month"));return E(n,o)},[],!1),R=p(function(e,t){return e=s(u(e).startOf("month")),t=s(u(t).endOf("month")),E(e,t)},[],!1)},"./views/user-statistics.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/user-statistics.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./views/user-view-options.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/locale/locale.js"),a=n("../../common/src/theme/theme.js"),c=n("./widgets/option-button.jsx"),l=n("./dialogs/telephone-number-dialog-box.jsx");n("./views/user-view-options.scss"),e.exports=o.createClass({displayName:"UserViewOptions",propTypes:{section:r.oneOf(["main","statistics","both"]),user:r.object,options:r.object.isRequired,locale:r.instanceOf(i).isRequired,theme:r.instanceOf(a).isRequired,onChange:r.func,onComplete:r.func},getDefaultProps:function(){return{section:"both"}},getInitialState:function(){return{showingPhoneDialog:!1,renderingPhoneDialog:!1}},render:function(){return"both"===this.props.section?o.createElement("div",{className:"user-view-options"},this.renderButtons("main"),o.createElement("div",{className:"border"}),this.renderButtons("statistics")):o.createElement("div",{className:"user-view-options"},this.renderButtons(this.props.section))},renderButtons:function(e){var t=this.props.locale.translate,n=s.get(this.props.user,"details",{});if("main"===e){var r={label:t("action-contact-by-phone"),icon:"phone-square",url:"tel:"+n.phone,hidden:!n.phone,onClick:this.handlePhoneClick},i={label:t("action-contact-by-email"),icon:"envelope",url:"mailto:"+n.email,hidden:!n.email,onClick:this.handleLinkClick},a={label:t("action-contact-by-skype"),icon:"skype",url:"skype:"+n.skype_username,hidden:!n.phone,onClick:this.handleLinkClick},l={label:t("action-contact-by-ichat"),icon:"apple",url:"ichat:"+n.ichat_username,hidden:!n.ichat_username,onClick:this.handleLinkClick},d={label:t("action-contact-by-twitter"),icon:"twitter",url:"https://twitter.com/"+n.twitter_username,target:"_blank",hidden:!n.twitter_username,onClick:this.handleLinkClick},u={label:t("action-view-gitlab-page"),icon:"gitlab",url:n.gitlab_url,target:"_blank",hidden:!n.gitlab_url,onClick:this.handleLinkClick},p={label:t("action-view-github-page"),icon:"github",url:n.github_url,target:"_blank",hidden:!n.github_url,onClick:this.handleLinkClick},m={label:t("action-view-linkedin-page"),icon:"linkedin",url:n.linkedin_url,target:"_blank",hidden:!n.linkedin_url,onClick:this.handleLinkClick},h={label:t("action-view-stackoverflow-page"),icon:"stack-overflow",url:n.stackoverflow_url,target:"_blank",hidden:!n.stackoverflow_url,onClick:this.handleLinkClick};return o.createElement("div",{className:e},o.createElement(c,r),o.createElement(c,i),o.createElement(c,a),o.createElement(c,l),o.createElement(c,d),o.createElement(c,u),o.createElement(c,p),o.createElement(c,m),o.createElement(c,h),this.renderPhoneDialog())}var f=this.props.options,g={label:t("option-statistics-biweekly"),selected:"biweekly"===f.chartRange||!f.chartRange,onClick:this.handleBiweeklyActivitiesClick},v={label:t("option-statistics-monthly"),selected:"monthly"===f.chartRange,onClick:this.handleMonthlyActivitiesClick},b={label:t("option-statistics-to-date"),selected:"full"===f.chartRange,onClick:this.handleActivitiesToDateClick};return o.createElement("div",{className:e},o.createElement(c,g),o.createElement(c,v),o.createElement(c,b))},renderPhoneDialog:function(){if(!this.state.renderingPhoneDialog)return null;var e={show:this.state.showingPhoneDialog,number:this.props.user.details.phone,locale:this.props.locale,onClose:this.handlePhoneDialogClose};return o.createElement(l,e)},triggerChangeEvent:function(e){var t=s.assign({},this.props.options,e);this.props.onChange&&this.props.onChange({type:"change",target:this,options:t})},triggerCompleteEvent:function(){this.props.onComplete&&this.props.onComplete({type:"complete",target:this})},handlePhoneClick:function(e){e.preventDefault(),this.setState({renderingPhoneDialog:!0,showingPhoneDialog:!0})},handlePhoneDialogClose:function(e){var t=this;this.setState({showingPhoneDialog:!1},function(){t.triggerCompleteEvent(),setTimeout(function(){t.state.showingPhoneDialog||t.setState({renderingPhoneDialog:!1})},500)})},handleBiweeklyActivitiesClick:function(e){var t=this.props.options.chartType||"bar";this.triggerChangeEvent({chartRange:"biweekly",chartType:t}),this.triggerCompleteEvent()},handleMonthlyActivitiesClick:function(e){var t=this.props.options.chartType||"bar";this.triggerChangeEvent({chartRange:"monthly",chartType:t}),this.triggerCompleteEvent()},handleActivitiesToDateClick:function(e){var t=this.props.options.chartType||"bar";this.triggerChangeEvent({chartRange:"full",chartType:t}),this.triggerCompleteEvent()},handleLinkClick:function(e){this.triggerCompleteEvent()}})},"./views/user-view-options.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/user-view-options.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./views/user-view.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/utils/component-refs.js"),a=n("../../common/src/utils/tag-scanner.js"),c=n("../../common/src/data/database.js"),l=n("../../common/src/routing/route.js"),d=n("../../common/src/locale/locale.js"),u=n("../../common/src/theme/theme.js"),p=n("../../common/src/mixins/update-check.js"),m=n("./widgets/profile-image.jsx"),h=n("./widgets/chart-toolbar.jsx"),f=n("./widgets/header-button.jsx"),g=n("./lists/user-activity-list.jsx"),v=n("./views/user-statistics.jsx"),b=n("./views/user-view-options.jsx"),y=n("./widgets/corner-pop-up.jsx");n("./views/user-view.scss"),e.exports=o.createClass({displayName:"UserView",mixins:[p],propTypes:{user:r.object,roles:r.arrayOf(r.object),stories:r.arrayOf(r.object),options:r.object.isRequired,dailyActivities:r.object,currentUser:r.object,selectedDate:r.string,today:r.string,link:r.oneOf(["user","team"]),database:r.instanceOf(c).isRequired,route:r.instanceOf(l).isRequired,locale:r.instanceOf(d).isRequired,theme:r.instanceOf(u).isRequired,onOptionChange:r.func},getInitialState:function(){return this.components=i({mainPopUp:y,statisticsPopUp:y}),{}},getChartType:function(){var e=this.props.options.chartType;return e||"single-col"!==this.props.theme.mode&&(e="bar"),e},getChartRange:function(){var e=this.props.options.chartRange;return e||(e="biweekly"),e},getStoryCountEstimate:function(){if(this.props.dailyActivities){var e,t=this.props.route.parameters;if(t.search){if(a.removeTags(t.search))return;e=a.findTags(t.search),s.isEmpty(e)&&(e=null)}var n,o=0;if(this.props.selectedDate){var r=this.props.dailyActivities.daily[this.props.selectedDate];n=r?[r]:[]}else n=s.values(this.props.dailyActivities.daily);return s.each(n,function(t){if(s.each(t,function(t,n){e&&!s.includes(e,n)||(o+=t)}),o>5)return!1}),Math.min(5,o)}},getUserPageURL:function(){if("user"!==this.props.link)return null;var e=this.props.route,t=s.pick(e.parameters,"schema","date","search");return t.user=this.props.user.id,e.find(n("./pages/people-page.jsx"),t)},getTeamPageURL:function(){if("team"!==this.props.link)return null;var e=this.props.route,t=s.pick(e.parameters,"schema","date","search");return e.find(n("./pages/people-page.jsx"),t)+"#"+n("./lists/user-list.jsx").getHash({user:this.props.user.id})},render:function(){switch(this.props.theme.mode){case"single-col":return this.renderSingleColumn();case"double-col":return this.renderDoubleColumn();case"triple-col":return this.renderTripleColumn()}},renderSingleColumn:function(){return o.createElement("div",{className:"user-view"},o.createElement("div",{className:"header"},o.createElement("div",{className:"column-1 padded selectable"},this.renderProfileImage(),this.renderRoles(),this.renderPopUpMenu("main"))),o.createElement("div",{className:"body"},o.createElement("div",{className:"column-1 padded"},this.renderName(),this.renderTag(),this.renderBackLink(),this.renderRecentActivities())),o.createElement("div",{className:"header"},o.createElement("div",{className:"column-2 padded"},this.renderChartToolbar(),this.renderPopUpMenu("statistics"))),o.createElement("div",{className:"body"},o.createElement("div",{className:"column-2"},this.renderStatistics())))},renderDoubleColumn:function(){return o.createElement("div",{className:"user-view"},o.createElement("div",{className:"header"},o.createElement("div",{className:"column-1 padded selectable"},this.renderProfileImage(),this.renderRoles(),this.renderPopUpMenu("main")),o.createElement("div",{className:"column-2 padded"},this.renderChartToolbar(),this.renderPopUpMenu("statistics"))),o.createElement("div",{className:"body"},o.createElement("div",{className:"column-1 padded"},this.renderName(),this.renderTag(),this.renderBackLink(),this.renderRecentActivities()),o.createElement("div",{className:"column-2"},this.renderStatistics())))},renderTripleColumn:function(){var e=this.props.locale.translate;return o.createElement("div",{className:"user-view triple-col"},o.createElement("div",{className:"header"},o.createElement("div",{className:"column-1 padded selectable"},this.renderProfileImage(),this.renderRoles()),o.createElement("div",{className:"column-2 padded"},this.renderChartToolbar()),o.createElement("div",{className:"column-3 padded"},o.createElement(f,{icon:"chevron-circle-right",label:e("user-actions"),disabled:!0}))),o.createElement("div",{className:"body"},o.createElement("div",{className:"column-1 padded"},this.renderName(),this.renderTag(),this.renderBackLink(),this.renderRecentActivities()),o.createElement("div",{className:"column-2"},this.renderStatistics()),o.createElement("div",{className:"column-3 padded"},this.renderOptions())))},renderProfileImage:function(){var e={user:this.props.user,theme:this.props.theme,size:"large"},t=this.getUserPageURL();return o.createElement("a",{href:t},o.createElement(m,e))},renderRoles:function(){var e=this.props.locale.pick,t=s.map(this.props.roles,function(t){return e(t.details.title)||t.name});return o.createElement("span",{className:"roles"},t.join(", ")||" ")},renderChartToolbar:function(){var e={chartType:this.getChartType(),locale:this.props.locale,onAction:this.handleAction};return o.createElement(h,e)},renderName:function(){var e=this.props.user,t=this.props.locale.pick,n=e?t(e.details.name):" ",s=this.getUserPageURL();return o.createElement("h2",{className:"name"},o.createElement("a",{href:s},n))},renderTag:function(){var e,t,s=(this.props.locale.translate,this.props.user);if(s){var r=this.props.route,i=r.parameters;e="@"+s.username,t=r.find(n("./pages/news-page.jsx"),{schema:i.schema,search:e})}return o.createElement("h3",{className:"tag"},o.createElement("a",{href:t},e||" "))},renderRecentActivities:function(){var e=this.getStoryCountEstimate(),t={stories:this.props.stories,storyCountEstimate:e,user:this.props.user,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement(g,t)},renderBackLink:function(){var e=this.getTeamPageURL();if(!e)return null;var t=this.props.locale.translate;this.props.route;return o.createElement("div",{className:"back-link"},o.createElement("a",{href:e},o.createElement("i",{className:"fa fa-chevron-left"})," ",t("user-activity-back")))},renderStatistics:function(){var e={user:this.props.user,story:this.props.story,dailyActivities:this.props.dailyActivities,chartType:this.getChartType(),chartRange:this.getChartRange(),selectedDate:this.props.selectedDate,today:this.props.today,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return o.createElement(v,e)},renderPopUpMenu:function(e){var t=this.components.setters[e+"PopUp"];return o.createElement(y,{ref:t},this.renderOptions(e))},renderOptions:function(e){var t={section:e,user:this.props.user,options:this.props.options,locale:this.props.locale,theme:this.props.theme,onChange:this.handleOptionChange,onComplete:this.handleOptionComplete};return o.createElement(b,t)},handleAction:function(e){switch(e.action){case"chart-type-set":var t=s.clone(this.props.options);"single-col"===this.props.theme.mode&&t.chartType===e.value?t.chartType=null:t.chartType=e.value,this.props.onOptionChange&&this.props.onOptionChange({type:"optionchange",target:this,user:this.props.user,options:t})}},handleOptionChange:function(e){this.props.onOptionChange&&this.props.onOptionChange({type:"optionchange",target:this,user:this.props.user,options:e.options})},handleOptionComplete:function(e){var t=e.target.props.section,n=this.components[t+"PopUp"];n&&n.close()}})},"./views/user-view.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./views/user-view.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/author-names.jsx":function(e,t,n){"use strict";function s(e){var t,n=e.locale.translate,s=e.locale.pick,a=e.authors,c=r.map(a,function(e){return s(e.details.name)});switch(r.size(a)){case 0:t=" ";break;case 1:t=i.createElement("span",{key:1,className:"sole author"},c[0]);break;case 2:var l=i.createElement("span",{key:1,className:"lead author"},c[0]);t=n("story-author-$name1-and-$name2",l,i.createElement("span",{key:3,className:"co author"},c[1]));break;default:var l=i.createElement("span",{key:1,className:"lead author"},c[0]),u=r.slice(a,1),e={users:u,label:n("story-author-$count-others",u.length),title:n("story-coauthors"),locale:e.locale,theme:e.theme};t=n("story-author-$name1-and-$name2",l,i.createElement(d,o({key:3},e)))}return i.createElement("span",{className:"author-names selectable"},t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/src/locale/locale.js"),l=n("../../common/src/theme/theme.js"),d=n("./widgets/multiple-user-names.jsx");e.exports=s,n("./widgets/author-names.scss"),s.propTypes={authors:a.arrayOf(a.object),locale:a.instanceOf(c).isRequired,theme:a.instanceOf(l).isRequired}},"./widgets/author-names.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/author-names.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/bottom-navigation.jsx":function(e,t,n){"use strict";function s(e){var t="button";return e.className&&(t+=" "+e.className),e.active&&(t+=" active"),e.stacking&&(t+=" stacking"),e.stacking?r.createElement(x,{className:t,url:e.url,onClick:e.onClick},r.createElement("i",{className:"fa fa-"+e.icon}),e.children," ",r.createElement("span",{className:"label"},e.label)):r.createElement(x,{className:t,url:e.url,onClick:e.onClick},r.createElement("i",{className:"fa fa-"+e.icon})," ",r.createElement("span",{className:"label"},e.label),e.children)}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../node_modules/relaks/index.js"),c=n("../../common/src/utils/component-refs.js"),l=(n("../../common/src/errors/http-error.js"),n("../../common/src/objects/finders/notification-finder.js")),d=n("../../common/src/objects/finders/user-finder.js"),u=n("../../common/src/data/database.js"),p=n("../../common/src/routing/route.js"),m=n("../../common/src/locale/locale.js"),h=n("../../common/src/theme/theme.js"),f=n("./pages/news-page.jsx"),g=n("./pages/people-page.jsx"),v=n("./pages/notifications-page.jsx"),b=n("./pages/bookmarks-page.jsx"),y=n("./pages/settings-page.jsx"),j=n("../../common/src/mixins/update-check.js"),x=n("./widgets/link.jsx");n("./widgets/bottom-navigation.scss"),e.exports=r.createClass({displayName:"BottomNavigation",mixins:[j],propTypes:{settings:i.object.isRequired,hasAccess:i.bool,database:i.instanceOf(u).isRequired,route:i.instanceOf(p).isRequired,locale:i.instanceOf(m).isRequired,theme:i.instanceOf(h).isRequired},getInitialState:function(){return this.components=c({container:HTMLDivElement}),{height:this.isHidden()?0:"auto",stacking:!1}},isHidden:function(e){return e||(e=this.props.settings),!o.get(e,"navigation.bottom",!0)},getPageURL:function(e,t){t||(t=this.props.route);var n=e.configureUI?e.configureUI(t):null,s=o.get(n,"navigation.route");return s?t.find(e,s):null},componentWillReceiveProps:function(e){var t=this,n=this.isHidden(),s=this.isHidden(e.settings);if(n!==s){var o=this.components.container,r=o.offsetHeight;s?(this.setState({height:r}),setTimeout(function(){t.isHidden()&&t.setState({height:0})},0)):(this.setState({height:r}),setTimeout(function(){t.isHidden()||t.setState({height:"auto"})},1e3))}},render:function(){var e={height:this.state.height};return r.createElement("footer",{className:"bottom-navigation",style:e},this.renderButtons())},renderButtons:function(){var e=this.props.locale.translate,t=this.components.setters,n=(this.props.route,o.get(this.props.settings,"navigation.section")),i={label:e("bottom-nav-news"),icon:"newspaper-o",active:"news"===n,stacking:this.state.stacking,url:this.getPageURL(f),onClick:"news"===n?this.handleActiveButtonClick:null},a={label:e("bottom-nav-notifications"),icon:"comments",active:"notifications"===n,stacking:this.state.stacking,url:this.getPageURL(v),onClick:"notifications"===n?this.handleActiveButtonClick:null},c={label:e("bottom-nav-bookmarks"),icon:"bookmark",active:"bookmarks"===n,stacking:this.state.stacking,url:this.getPageURL(b),onClick:"bookmarks"===n?this.handleActiveButtonClick:null},l={label:e("bottom-nav-people"),icon:"users",active:"people"===n,stacking:this.state.stacking,url:this.getPageURL(g),onClick:"people"===n?this.handleActiveButtonClick:null},d={label:e("bottom-nav-settings"),icon:"gears",active:"settings"===n,stacking:this.state.stacking,url:this.getPageURL(y),onClick:"settings"===n?this.handleActiveButtonClick:null},u={hasAccess:this.props.hasAccess,database:this.props.database,route:this.props.route};return r.createElement("div",{ref:t.container,className:"container"},r.createElement(s,i),r.createElement(s,a,r.createElement(k,u)),r.createElement(s,c),r.createElement(s,l),r.createElement(s,d))},componentDidMount:function(){this.detectStacking(),window.addEventListener("resize",this.handleWindowResize)},componentWillUnmount:function(){window.removeEventListener("resize",this.handleWindowResize)},detectStacking:function(){var e=this.components.container;if(e){var t=e.getElementsByClassName("fa")[1],n=e.getElementsByClassName("label")[1],s=n.offsetTop>=t.offsetTop+t.offsetHeight;this.state.stacking!==s&&this.setState({stacking:s})}},handleWindowResize:function(e){this.detectStacking()},handleActiveButtonClick:function(e){var t=document.getElementsByClassName("page-container")[0];t&&t.scrollTop>0&&(/iPhone|iPad|iPod/.test(navigator.userAgent)?(t.style.overflowY="hidden",t.scrollTop=0,t.style.overflowY="scroll"):t.scrollTop=0)}});var w,k=a.createClass({displayName:"NewNotificationsBadge",propTypes:{stacking:i.bool,hasAccess:i.bool,database:i.instanceOf(u).isRequired,route:i.instanceOf(p).isRequired},renderAsync:function(e){var t=this.props.route.parameters;if(!t.schema)return null;if(!this.props.hasAccess)return null;var n=this.props.database.use({schema:t.schema,by:this});return n.start().then(function(e){return d.findUser(n,e).then(function(e){return l.findNotificationsUnseenByUser(n,e).then(function(e){var t=e.length;return _(t),E(t),t?r.createElement("span",{className:"badge"},r.createElement("span",{className:"number"},t)):null})})})}}),_=function(e){if(!w){var t=n("../assets/favicon-notification recursive \\.png$").keys();w=o.map(t,function(e){var t=e.substring(e.indexOf("/")+1,e.lastIndexOf("."));return{withoutBadge:n("../assets/favicon recursive ^\\.\\/.*\\.png$")("./"+t+".png"),withBadge:n("../assets/favicon-notification recursive ^\\.\\/.*\\.png$")("./"+t+".png")}})}var s=o.filter(document.head.getElementsByTagName("LINK"),function(e){if("icon"===e.rel||"apple-touch-icon-precomposed"===e.rel)return!0});o.each(s,function(t){var n=t.getAttribute("href");if(e>0){var s=o.find(w,{withoutBadge:n});s&&(t.href=s.withBadge)}else{var s=o.find(w,{withBadge:n});s&&(t.href=s.withoutBadge)}})},E=function(e){var t=o.replace(document.title,/^\(\d+\)\s*/,"");e>0&&(t="("+e+") "+t),document.title=t}},"./widgets/bottom-navigation.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/bottom-navigation.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/calendar-bar.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../node_modules/relaks/index.js"),c=n("../node_modules/moment/moment.js"),l=n("../../common/src/objects/finders/statistics-finder.js"),d=n("../../common/src/objects/finders/user-finder.js"),u=n("../../common/src/data/database.js"),p=n("../../common/src/routing/route.js"),m=n("../../common/src/locale/locale.js"),h=n("../../common/src/mixins/update-check.js"),f=n("./widgets/calendar.jsx");n("./widgets/calendar-bar.scss"),e.exports=a.createClass({displayName:"CalendarBar",propTypes:{settings:i.object.isRequired,database:i.instanceOf(u).isRequired,route:i.instanceOf(p).isRequired,locale:i.instanceOf(m).isRequired},renderAsync:function(e){var t=this,n=this.props.route.parameters,s=this.props.database.use({schema:n.schema,by:this}),i={dailyActivities:null,settings:this.props.settings,route:this.props.route,locale:this.props.locale};return e.show(r.createElement(g,i)),s.start().then(function(e){return d.findUser(s,e)}).then(function(e){var n=o.clone(t.props.settings.statistics);return"current"===n.user_id&&(n.user_id=e.id),"guest"===n.public&&(n.public="guest"===e.type),l.find(s,n)}).then(function(e){return i.dailyActivities=e,r.createElement(g,i)})}});var g=e.exports.Sync=r.createClass({displayName:"CalendarBar.Sync",mixins:[h],propTypes:{settings:i.object.isRequired,dailyActivities:i.object,route:i.instanceOf(p).isRequired,locale:i.instanceOf(m).isRequired},render:function(){var e=this,t=c().endOf("month"),n=[],i=!1,a=o.get(this.props.dailyActivities,"range.start"),l=o.get(this.props.dailyActivities,"range.end"),d=this.props.route.parameters.date;if(a&&l){var u=c(a).startOf("month"),p=c(l).endOf("month");u.year()!=p.year()&&(i=!0),t>p&&(p=t);for(var m=u.clone();m<=p;m.add(1,"month"))n.push({year:m.year(),month:m.month()+1})}else n.push({year:t.year(),month:t.month()+1});n.reverse();var h=o.map(n,function(t,n){var o={year:t.year,month:t.month,showYear:i,selection:d,locale:e.props.locale,onDateURL:e.handleDateURL};return r.createElement(f,s({key:n},o))});return r.createElement("div",{className:"calendar-bar"},h)},handleDateURL:function(e){if(o.get(this.props.dailyActivities,["daily",e.date])){var t=this.props.route,n=o.assign({date:e.date},this.props.settings.route);return t.find(t.component,n)}}})},"./widgets/calendar-bar.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/calendar-bar.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/calendar.jsx":function(e,t,n){"use strict";function s(e,t,n){return e+"-"+o(t)+"-"+o(n)}function o(e){var t=String(e);return 1===t.length&&(t="0"+t),t}var r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../node_modules/moment/moment.js"),l=n("../../common/src/utils/date-tracker.js"),d=n("../../common/src/locale/locale.js");n("./widgets/calendar.scss"),e.exports=i.createClass({displayName:"Calendar",propTypes:{year:a.number.isRequired,month:a.number.isRequired,showYear:a.bool,selection:a.string,locale:a.instanceOf(d).isRequired,onDateURL:a.func},getDefaultProps:function(){return{showYear:!1}},render:function(){var e=this,t=this.props.locale.localeCode,n=c.localeData(t),a=this.props.year,d=this.props.month,u=this.props.selection,p=c(s(a,d,1)).locale(t),m=n.firstDayOfWeek(),h=p.daysInMonth(),f=p.day(),g=[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],v=0,b=f-m;b<0&&(b+=7);for(var y=1;y<=h;y++)g[v][b++]=y,b>=7&&(b=0,v++);for(var j=r.slice(n.weekdaysShort()),x=[!0,!1,!1,!1,!1,!1,!0],w=0;w<m;w++)j.push(j.shift()),x.push(x.shift());var k=this.props.showYear?"MMMM YYYY":"MMMM",_=p.format(k),E=r.map(j,function(e,t){var n=[x[t]?"weekend":"workweek"];return i.createElement("th",{className:n.join(" "),key:t},e)}),C=r.map(g,function(t){return r.map(t,function(t,n){var s,r,c,p=[x[n]?"weekend":"workweek"];return t?(r=a+"-"+o(d)+"-"+o(t),s=t,c=e.getDateURL(r)):s=" ",u&&u===r&&p.push("selected"),r===l.today&&p.push("today"),i.createElement("td",{key:n,className:p.join(" ")},i.createElement("a",{href:c},s))})});return i.createElement("table",{className:"calendar"},i.createElement("thead",null,i.createElement("tr",{className:"title"},i.createElement("th",{colSpan:7},_)),i.createElement("tr",{className:"headings"},E)),i.createElement("tbody",null,i.createElement("tr",{className:"dates"},C[0]),i.createElement("tr",{className:"dates"},C[1]),i.createElement("tr",{className:"dates"},C[2]),i.createElement("tr",{className:"dates"},C[3]),i.createElement("tr",{className:"dates"},C[4]),i.createElement("tr",{className:"dates"},C[5])))},getDateURL:function(e){if(this.props.onDateURL)return this.props.onDateURL({type:"dateurl",target:this,date:e})}})},"./widgets/calendar.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/calendar.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/chart-toolbar.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/locale/locale.js"),a=n("./widgets/header-button.jsx");n("./widgets/chart-toolbar.scss"),e.exports=o.createClass({displayName:"ChartToolbar",propTypes:{chartType:r.oneOf(["bar","line","pie"]),locale:r.instanceOf(i).isRequired,onAction:r.func},render:function(){var e=this.props.locale.translate,t={label:e("statistics-bar"),icon:"bar-chart",highlighted:"bar"===this.props.chartType,onClick:this.handleBarChartClick},n={label:e("statistics-line"),icon:"line-chart",highlighted:"line"===this.props.chartType,onClick:this.handleLineChartClick},s={label:e("statistics-pie"),icon:"pie-chart",highlighted:"pie"===this.props.chartType,onClick:this.handlePieChartClick};return o.createElement("div",{className:"chart-toolbar"},o.createElement(a,t),o.createElement(a,n),o.createElement(a,s))},triggerActionEvent:function(e,t){this.props.onAction&&this.props.onAction(s.extend({type:"action",target:this,action:e},t))},handleBarChartClick:function(e){this.triggerActionEvent("chart-type-set",{value:"bar"})},handleLineChartClick:function(e){this.triggerActionEvent("chart-type-set",{value:"line"})},handlePieChartClick:function(e){this.triggerActionEvent("chart-type-set",{value:"pie"})}})},"./widgets/chart-toolbar.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/chart-toolbar.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/chartist.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/chartist.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/coauthoring-button.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=(n("../../common/src/media/device-manager.js"),n("../../common/src/data/database.js")),a=n("../../common/src/routing/route.js"),c=n("../../common/src/locale/locale.js"),l=n("../../common/src/theme/theme.js"),d=(n("./widgets/header-button.jsx"),n("./dialogs/user-selection-dialog-box.jsx"));n("./widgets/coauthoring-button.scss"),e.exports=o.createClass({displayName:"CoauthoringButton",propTypes:{coauthoring:r.bool,story:r.object.isRequired,database:r.instanceOf(i).isRequired,route:r.instanceOf(a).isRequired,locale:r.instanceOf(c).isRequired,theme:r.instanceOf(l).isRequired,onSelect:r.func,onRemove:r.func},getInitialState:function(){return{selecting:!1}},render:function(){var e,t,n=this.props.locale.translate;return this.props.coauthoring?(e="minus-square",t=n("story-remove-yourself")):(e="plus-square",t=n(this.props.story.user_ids.length>1?"story-add-remove-coauthor":"story-add-coauthor")),o.createElement("span",{className:"coauthoring-button",onClick:this.handleClick},o.createElement("i",{className:"fa fa-"+e}),o.createElement("span",{className:"label"},t),this.renderDialogBox())},renderDialogBox:function(){var e={show:this.state.selecting,selection:this.props.story.user_ids,disabled:s.slice(this.props.story.user_ids,0,1),database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme,onSelect:this.handleSelect,onCancel:this.handleCancel};return o.createElement(d,e)},handleClick:function(e){this.props.coauthoring?this.props.onRemove&&this.props.onRemove({type:"remove",target:this}):this.setState({selecting:!0})},handleCancel:function(e){this.setState({selecting:!1})},handleSelect:function(e){this.props.onSelect&&this.props.onSelect({type:"select",target:this,selection:e.selection}),this.setState({selecting:!1})}})},"./widgets/coauthoring-button.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/coauthoring-button.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/corner-pop-up.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/utils/component-refs.js"),a=n("./widgets/pop-up-menu.jsx");n("./widgets/corner-pop-up.scss"),e.exports=o.createClass({displayName:"CornerPopUp",propType:{onOpen:r.func,onClose:r.func},getInitialState:function(){return this.components=i({popUpMenu:a}),{open:!1}},close:function(){this.setState({open:!1}),this.components.popUpMenu.close()},render:function(){var e=this.components.setters,t={onOpen:this.handleOpen,onClose:this.handleClose},n=this.state.open?"left":"down";return o.createElement(a,s({ref:e.popUpMenu,className:"corner-pop-up"},t),o.createElement("button",null,o.createElement("i",{className:"fa fa-chevron-circle-"+n})),o.createElement("menu",null,this.props.children))},handleOpen:function(e){this.setState({open:!0}),this.props.onOpen&&this.props.onOpen({type:open,target:this})},handleClose:function(e){this.setState({open:!1}),this.props.onClose&&this.props.onClose({type:open,target:this})}})},"./widgets/corner-pop-up.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/corner-pop-up.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/device-placeholder.jsx":function(e,t,n){"use strict";function s(e){var t="device-placeholder";e.blocked&&(t+=" blocked");var n=e.icon;return o.createElement("div",{className:t},o.createElement("span",{className:"fa-stack fa-lg"},o.createElement("i",{className:"fa fa-"+n+" fa-stack-1x"}),o.createElement("i",{className:"fa fa-ban fa-stack-2x"})))}var o=n("../node_modules/react/react.js"),r=o.PropTypes;e.exports=s,n("./widgets/device-placeholder.scss"),s.propTypes={blocked:r.bool,icon:r.oneOf(["camera","video-camera","microphone"]).isRequired}},"./widgets/device-placeholder.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/device-placeholder.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/device-selector.jsx":function(e,t,n){"use strict";function s(e){var t=e.locale.translate,n=e.devices;if(n.length<2)return null;var s=2===n.length&&i.every(n,function(e){if(/front|back/i.test(e.label))return!0}),o=i.map(n,function(n,o){var i;"video"===e.type?i=s?t(/front/i.test(n.label)?"device-selector-camera-front":"device-selector-camera-back"):t("device-selector-camera-$number",o+1):"audio"===type&&(i=t("device-selector-mic-$number",o+1));var c={value:n.deviceId,selected:n.deviceId===e.selectedDeviceId};return a.createElement("option",r({key:o},c),i)});return a.createElement("div",{className:"device-selector"},a.createElement("select",{onChange:e.onSelect},o))}function o(e,t){return i.find(e,function(e){return"front"===t?/front/i.test(e.label):"back"===t?/back/i.test(e.label):void 0})}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i=n("../node_modules/lodash/lodash.js"),a=n("../node_modules/react/react.js");a.PropTypes;e.exports=s,e.exports.choose=o,n("./widgets/device-selector.scss")},"./widgets/device-selector.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/device-selector.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/drop-zone.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/react/react.js"),r=o.PropTypes;n("./widgets/drop-zone.scss"),e.exports=o.createClass({displayName:"DropZone",propTypes:{onDrop:r.func},getInitialState:function(){return{active:!1}},render:function(){return o.createElement("div",{className:"drop-zone",onDragEnter:this.handleDragEnter},this.props.children,this.renderOverlay())},renderOverlay:function(){if(!this.state.active)return null;var e={onDragLeave:this.handleDragLeave,onDragOver:this.handleDragOver,onDrop:this.handleDrop};return o.createElement("div",s({className:"overlay"},e))},handleDragEnter:function(e){this.setState({active:!0})},handleDragLeave:function(e){this.setState({active:!1})},handleDragOver:function(e){e.preventDefault()},handleDrop:function(e){return e.preventDefault(),this.state.active&&this.props.onDrop&&this.props.onDrop({type:"drop",files:e.dataTransfer.files,items:e.dataTransfer.items}),this.setState({active:!1}),null}})},"./widgets/drop-zone.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/drop-zone.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/duration-indicator.jsx":function(e,t,n){"use strict";function s(e){if("number"!=typeof e)return"";var t=String(Math.floor(e/36e5)),n=String(Math.floor(e/6e4)%60),s=String(Math.round(e/1e3)%60);return 1===n.length&&(n="0"+n),1===s.length&&(s="0"+s),t+":"+n+":"+s}var o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/mixins/update-check.js");n("./widgets/duration-indicator.scss"),e.exports=o.createClass({displayName:"DurationIndicator",mixins:[i],propTypes:{duration:r.number,startTime:r.instanceOf(Date)},calculateDuration:function(){var e=this.props.duration;if(this.props.startTime){e+=new Date-this.props.startTime}return e},componentWillMount:function(){this.props.startTime&&this.startTimer()},componentWillReceiveProps:function(e){!this.props.startTime&&e.startTime?this.startTimer():this.props.startTime&&!e.startTime&&this.stopTimer()},render:function(){var e=this.calculateDuration(),t="icon";return this.props.startTime&&(t+=" blinking"),o.createElement("div",{className:"duration-indiactor"},o.createElement("span",{className:t},o.createElement("i",{className:"fa fa-circle"})),o.createElement("span",{className:"duration"},s(e)))},componentWillUnmount:function(){this.stopTimer()},startTimer:function(){var e=this;this.interval||(this.interval=setInterval(function(){e.forceUpdate()},500))},stopTimer:function(){this.interval&&(clearInterval(this.interval),this.interval=null)}}),e.exports.format=s},"./widgets/duration-indicator.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/duration-indicator.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/empty-message.jsx":function(e,t,n){"use strict";function s(e){var t=e.locale.translate,n=e.phrase;return e.online||(n="empty-currently-offline"),o.createElement("div",{className:"empty-message"},o.createElement("div",{className:"text"},t(n)))}var o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/locale/locale.js");e.exports=s,n("./widgets/empty-message.scss"),s.propTypes={locale:r.instanceOf(i).isRequired,online:r.bool,phrase:r.string.isRequired},s.defaultProps={online:!0}},"./widgets/empty-message.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/empty-message.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/header-button.jsx":function(e,t,n){"use strict";function s(e){return e.hidden?null:a.createElement("label",{className:r(e),onClick:e.disabled?null:e.onClick},a.createElement("i",{className:i(e)}),a.createElement("span",{className:"label"},e.label))}function o(e){if(e.hidden)return null;var t={type:"file",value:"",disabled:e.disabled,multiple:e.multiple,onChange:e.onChange};return l?(t.id="file-input-"+d++,a.createElement("span",{className:r(e)},a.createElement("label",{htmlFor:t.id},a.createElement("i",{className:i(e)}),a.createElement("span",{className:"label"},e.label)),a.createElement("input",t))):a.createElement("label",{className:r(e)},a.createElement("i",{className:i(e)}),a.createElement("span",{className:"label"},e.label),a.createElement("input",t))}function r(e){var t=["header-button"];return e.className&&t.push(e.className),e.highlighted&&t.push("highlighted"),e.disabled&&t.push("disabled"),t.join(" ")}function i(e){var t=[];return e.icon&&t.push("fa","fa-"+e.icon),t.join(" ")}var a=n("../node_modules/react/react.js"),c=a.PropTypes;e.exports=s,e.exports.File=o,n("./widgets/header-button.scss"),s.propTypes={label:c.string,icon:c.string,hidden:c.bool,highlighted:c.bool,disabled:c.bool,onClick:c.func};var l=/Edge/.test(navigator.userAgent),d=1;o.propTypes={label:c.string,icon:c.string,hidden:c.bool,highlighted:c.bool,disabled:c.bool,multiple:c.bool,onChange:c.func}},"./widgets/header-button.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/header-button.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/link.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes;e.exports=o.createClass({displayName:"Link",propTypes:{url:r.string,alwaysAsLink:r.bool},getDefaultProps:function(){return{alwaysAsLink:!1}},getInitialState:function(){return{hasFocus:!1}},render:function(){var e=s.omit(this.props,"url","alwaysAsLink");return this.props.url&&(this.props.alwaysAsLink?e.href=this.props.url:(this.state.hasFocus?e.href=this.props.url:e["data-url"]=this.props.url,void 0===e.tabIndex&&(e.tabIndex=0),e.onFocus=this.handleFocus,e.onBlur=this.handleBlur)),o.createElement("a",e,this.props.children)},handleFocus:function(e){this.setState({hasFocus:!0})},handleBlur:function(e){this.setState({hasFocus:!1})}})},"./widgets/loading-animation.jsx":function(e,t,n){"use strict";function s(e){return o.createElement("div",{className:"loading-animation"},o.createElement("div",{className:"first dot"}),o.createElement("div",{className:"second dot"}),o.createElement("div",{className:"third dot"}),o.createElement("div",{className:"fourth dot"}))}var o=n("../node_modules/react/react.js");e.exports=s,n("./widgets/loading-animation.scss")},"./widgets/loading-animation.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/loading-animation.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/media-button.jsx":function(e,t,n){"use strict";function s(e){return e.hidden?null:a.createElement("label",{className:r(e),onClick:e.disabled?null:e.onClick},a.createElement("i",{className:i(e)}),a.createElement("span",{className:"label"},e.label))}function o(e){if(e.hidden)return null;var t=e.index+1+" / "+e.count;return a.createElement("div",{className:"media-direction"},a.createElement("label",{className:"backward-button",onClick:e.onBackwardClick},a.createElement("i",{className:"fa fa-caret-left"})),a.createElement("span",{className:"position"},t),a.createElement("label",{className:"forward-button",onClick:e.onForwardClick},a.createElement("i",{className:"fa fa-caret-right"})))}function r(e){var t=["media-button"];return e.className&&t.push(e.className),e.disabled&&t.push("disabled"),t.join(" ")}function i(e){var t=[];return e.icon&&t.push("fa","fa-"+e.icon),t.join(" ")}var a=n("../node_modules/react/react.js"),c=a.PropTypes;e.exports=s,e.exports.Direction=o,n("./widgets/media-button.scss"),o.propTypes={index:c.number,count:c.number,hidden:c.bool,onBackwardClick:c.func,onForwardClick:c.func},o.propTypes={label:c.string,icon:c.string,hidden:c.bool,highlighted:c.bool,disabled:c.bool,onChange:c.func}},"./widgets/media-button.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/media-button.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/media-placeholder.jsx":function(e,t,n){"use strict";function s(e){if("columns-1"===e.theme.mode)return null;var t,n=e.locale.translate;e.showHints&&(t=["story-drop-files-here","story-paste-image-here"]);var s=o.map(t,function(e,t){var s={animationDelay:10*t+"s"};return r.createElement("div",{key:t,className:"message",style:s},n(e))});return r.createElement("div",{className:"media-placeholder"},s)}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../../common/src/locale/locale.js"),c=n("../../common/src/theme/theme.js");e.exports=s,n("./widgets/media-placeholder.scss"),s.propTypes={showHints:i.bool,locale:i.instanceOf(a).isRequired,theme:i.instanceOf(c).isRequired}},"./widgets/media-placeholder.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/media-placeholder.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/media-toolbar.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/media/device-manager.js"),a=n("../../common/src/locale/locale.js"),c=n("./widgets/header-button.jsx"),l=n("./dialogs/photo-capture-dialog-box.jsx"),d=n("./dialogs/video-capture-dialog-box.jsx"),u=n("./dialogs/audio-capture-dialog-box.jsx");n("./widgets/media-toolbar.scss"),e.exports=o.createClass({displayName:"MediaToolbar",propTypes:{story:r.object.isRequired,capturing:r.oneOf(["image","video","audio"]),locale:r.instanceOf(a).isRequired,onAction:r.func},getInitialState:function(){return{hasCamera:i.hasDevice("videoinput"),hasMicrophone:i.hasDevice("audioinput")}},getResourceCounts:function(){var e={photo:0,video:0,audio:0,file:0},t=s.get(this.props.story,"details.resources");return s.each(t,function(t){if(t.imported)e.file++;else switch(t.type){case"image":e.photo++;break;case"video":e.video++;break;case"audio":e.audio++}}),e},render:function(){var e=this.props.locale.translate,t=this.getResourceCounts(),n=this.state.hasCamera&&l.isAvailable(),s=this.state.hasCamera&&d.isAvailable(),r=this.state.hasMicrophone&&u.isAvailable(),i={label:e("story-photo"),icon:"camera",hidden:!t.photo&&!n,disabled:!n,highlighted:t.photo>0||"image"===this.props.capturing,onClick:this.handlePhotoClick},a={label:e("story-video"),icon:"video-camera",hidden:!t.video&&!s,disabled:!s,highlighted:t.video>0||"video"===this.props.capturing,onClick:this.handleVideoClick},p={label:e("story-audio"),icon:"microphone",hidden:!t.audio&&!r,disabled:!r,highlighted:t.audio>0||"audio"===this.props.capturing,onClick:this.handleAudioClick},m={label:e("story-file"),icon:"file-photo-o",multiple:!0,highlighted:t.file>0,onChange:this.handleFileSelect};return o.createElement("div",{className:"media-toolbar"},o.createElement(c,i),o.createElement(c,a),o.createElement(c,p),o.createElement(c.File,m))},componentDidMount:function(){i.addEventListener("change",this.handleDeviceChange)},componentWillUnmount:function(){i.removeEventListener("change",this.handleDeviceChange)},triggerActionEvent:function(e,t){this.props.onAction&&this.props.onAction(s.extend({type:"action",target:this,action:e},t))},handlePhotoClick:function(e){this.triggerActionEvent("photo-capture")},handleVideoClick:function(e){this.triggerActionEvent("video-capture")},handleAudioClick:function(e){this.triggerActionEvent("audio-capture")},handleFileSelect:function(e){var t=e.target.files;s.isEmpty(t)||this.triggerActionEvent("file-import",{files:t})},handleDeviceChange:function(e){this.setState({hasCamera:i.hasDevice("videoinput"),hasMicrophone:i.hasDevice("audioinput")})}})},"./widgets/media-toolbar.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/media-toolbar.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/multiple-user-names.jsx":function(e,t,n){"use strict";function s(e){var t=["user"],n={user:e.user,theme:e.theme,size:"small"},s=e.locale.pick,o=s(e.user.details.name);return i.createElement("div",{className:t.join(" ")},i.createElement(m,n),i.createElement("span",{className:"name"},o))}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/src/locale/locale.js"),l=n("../../common/src/theme/theme.js"),d=n("../../common/src/widgets/overlay.jsx"),u=n("./widgets/push-button.jsx"),p=n("./widgets/scrollable.jsx"),m=n("./widgets/profile-image.jsx");n("./widgets/multiple-user-names.scss"),e.exports=i.createClass({displayName:"MultipleUserNames",propTypes:{label:a.string,title:a.string,users:a.arrayOf(a.object).isRequired,popupLimit:a.number,locale:a.instanceOf(c).isRequired,theme:a.instanceOf(l).isRequired},getDefaultProps:function(){return{popupLimit:8}},getInitialState:function(){return{showingPopUp:!1,showingDialogBox:!1,renderingDialogBox:!1}},render:function(){var e="multiple-user-names";this.props.className&&(e+=" "+this.props.className);var t={className:e,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},n={className:"label",onClick:this.handleClick};return i.createElement("span",t,i.createElement("span",n,this.props.label),this.renderPopUp(),this.renderDialogBox())},renderPopUp:function(){return this.state.showingPopUp?i.createElement("div",{className:"popup-container"},i.createElement("div",{className:"popup"},this.renderUserList(this.props.popupLimit))):null},renderDialogBox:function(){if(!this.state.renderingDialogBox)return null;var e={show:this.state.showingDialogBox,onBackgroundClick:this.handleDialogBoxClose},t={label:"OK",emphasized:!0,onClick:this.handleDialogBoxClose};return i.createElement(d,e,i.createElement("div",{className:"multiple-user-names-dialog-box"},i.createElement(p,null,i.createElement("div",{className:"list"},this.renderUserList())),i.createElement("div",{className:"buttons"},i.createElement(u,t))))},renderUserList:function(e){var t=this.props.locale.pick,n=r.sortBy(this.props.users,function(e){return t(e.details.name)});if(n.length>e){var s=this.props.locale.translate,o=r.slice(n,e),a=r.map(o,this.renderUser);return a.push(i.createElement("div",{key:0,className:"more"},s("list-$count-more",n.length-o.length))),a}return r.map(n,this.renderUser)},renderUser:function(e,t){var n={user:e,theme:this.props.theme,locale:this.props.locale};return i.createElement(s,o({key:e.id},n))},handleMouseEnter:function(e){this.setState({showingPopUp:!0})},handleMouseLeave:function(e){this.setState({showingPopUp:!1})},handleClick:function(e){this.setState({showingPopUp:!1,showingDialogBox:!0,renderingDialogBox:!0})},handleDialogBoxClose:function(e){var t=this;this.setState({showingDialogBox:!1},function(){setTimeout(function(){t.setState({renderingDialogBox:!1})},1e3)})}})},"./widgets/multiple-user-names.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/multiple-user-names.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/new-items-alert.jsx":function(e,t,n){"use strict";function s(e){var t=r.replace(e.route.url,/#(.*)/,""),n={className:"new-items-alert "+(e.show?"show":"hide"),href:t+"#"+e.hash,onClick:e.onClick};return i.createElement("a",n,i.createElement("i",{className:"fa fa-arrow-up"}),e.children)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../node_modules/react-dom/index.js"),l=n("../../common/src/routing/route.js");n("./widgets/new-items-alert.scss"),e.exports=i.createClass({displayName:"NewItemsAlertProxy",propTypes:{hash:a.string,route:a.instanceOf(l).isRequired,onClick:a.func},render:function(){return null},componentDidMount:function(){this.props.hash&&this.show(this.props)},componentWillReceiveProps:function(e){!this.props.hash&&e.hash?this.show(e):this.props.hash&&!e.hash?this.hide(this.props):this.props.children===e.children&&this.props.hash===e.hash||e.hash&&this.redraw(e,!0)},componentWillUnmount:function(){this.hide(this.props)},show:function(e){var t=this;this.containerNode?this.containerRemovalTimeout&&(clearTimeout(this.containerRemovalTimeout),this.containerRemovalTimeout=0):(this.containerNode=document.createElement("DIV"),this.viewport=document.getElementsByClassName("page-view-port")[0],this.viewport.appendChild(this.containerNode)),this.redraw(e,!1),setTimeout(function(){t.redraw(e,!0)},10)},redraw:function(e,t){this.props.route;c.render(i.createElement(s,o({},e,{show:t})),this.containerNode)},hide:function(e){var t=this;this.containerNode&&(this.containerRemovalTimeout||(this.containerRemovalTimeout=setTimeout(function(){c.unmountComponentAtNode(t.containerNode),t.viewport.removeChild(t.containerNode),t.viewport=null,t.containerNode=null,t.containerRemovalTimeout=0},500)),this.redraw(e,!1))}})},"./widgets/new-items-alert.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/new-items-alert.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/option-button.jsx":function(e,t,n){"use strict";function s(e){if(e.hidden)return null;var t={id:e.id,href:e.url,target:e.target,onClick:e.disabled?null:e.onClick},n={className:o(e)};return i.createElement("div",n,i.createElement("div",{className:"icon"},i.createElement("a",t,i.createElement("i",{className:r(e)}))),i.createElement("div",{className:"label"},e.beforeLabel,i.createElement("a",t,e.label),e.afterLabel))}function o(e){var t=["option-button"];return e.className&&t.push(e.className),e.selected&&t.push("selected"),e.disabled&&t.push("disabled"),t.join(" ")}function r(e){var t=["fa"];return e.icon?t.push("fa-"+e.icon):e.selected?t.push("fa-"+e.iconOn):t.push("fa-"+e.iconOff),t.join(" ")}var i=n("../node_modules/react/react.js"),a=i.PropTypes;e.exports=s,n("./widgets/option-button.scss"),s.propTypes={label:a.node,id:a.string,icon:a.string,iconOn:a.string,iconOff:a.string,url:a.string,target:a.string,hidden:a.bool,selected:a.bool,disabled:a.bool,onClick:a.func},s.defaultProps={iconOn:"check-circle",iconOff:"circle-o"}},"./widgets/option-button.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/option-button.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/page-container.jsx":function(e,t,n){"use strict";var s=n("../node_modules/react/react.js");n("./widgets/page-container.scss"),e.exports=s.createClass({displayName:"PageContainer",setNode:function(e){if(e){var t=document.activeElement;t&&t!==document.body||e.focus()}},render:function(){var e="page-container";return this.props.className&&(e+=" "+this.props.className),s.createElement("div",{className:e,tabIndex:0,ref:this.setNode},s.createElement("div",{className:"contents"},this.props.children))}})},"./widgets/page-container.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/page-container.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/pop-up-menu.jsx":function(e,t,n){"use strict";function s(e,t){for(var n=e;n!==document.body.parentNode;n=n.parentNode)if(n===t)return!0;return!1}function o(e,t){for(var n=e.offsetLeft,s=e.offsetTop,o=e.offsetParent;o&&o!==t;o=o.offsetParent)n+=o.offsetLeft-o.scrollLeft,s+=o.offsetTop-o.scrollTop;return{left:n,top:s}}function r(){return document.getElementById("app-container").getElementsByClassName("page-view-port")[0]}var i=n("../node_modules/lodash/lodash.js"),a=n("../node_modules/react/react.js"),c=a.PropTypes,l=n("../node_modules/react-dom/index.js"),d=n("../../common/src/widgets/overlay.jsx");n("./widgets/pop-up-menu.scss"),e.exports=a.createClass({displayName:"PopUpMenu",propTypes:{disabled:c.bool,popOut:c.bool},getDefaultProps:function(){return{disabled:!1,popOut:!1}},getInitialState:function(){return{open:!1}},getContents:function(e){var t=a.Children.toArray(this.props.children),n=i.find(t,{type:e});if(n)return n.props.children},close:function(){return this.setState({open:!1})},render:function(){var e="pop-up-menu";return this.props.className&&(e+=" "+this.props.className),a.createElement("span",{className:e},this.renderButton(),this.props.popOut?null:this.renderMenu())},renderButton:function(){var e="button";return this.props.disabled||(e+=" active"),a.createElement("span",{className:e,onClick:this.handleButtonClick},this.getContents("button"))},renderMenu:function(){return this.state.open?a.createElement("div",{className:"container"},a.createElement("div",{className:"menu"},this.getContents("menu"))):null},redrawPopOutMenu:function(){var e=l.findDOMNode(this),t=r(),n=o(e,t),s={position:"absolute",left:n.left+e.offsetWidth,top:n.top},i="pop-up-menu";this.props.className&&(i+=" "+this.props.className);var c=a.createElement("div",{className:i,style:s},a.createElement("div",{className:"container"},a.createElement("div",{className:"menu",onClick:this.handleMenuClick},this.getContents("menu"))));l.render(c,this.popOutContainer)},componentDidUpdate:function(e,t){var n=document.getElementById("application");!t.open&&this.state.open?(n.addEventListener("mousedown",this.handleBodyMouseDown),this.props.popOut&&this.addPopOutContainer()):t.open&&!this.state.open&&(n.removeEventListener("mousedown",this.handleBodyMouseDown),this.props.popOut&&this.removePopOutContainer()),this.state.open&&this.props.popOut&&this.redrawPopOutMenu()},componentWillUnmount:function(){document.getElementById("application").removeEventListener("mousedown",this.handleBodyMouseDown),this.removePopOutContainer()},addPopOutContainer:function(){if(!this.popOutContainer){var e=r();this.popOutContainer=document.createElement("DIV"),this.popOutContainer.style.left="0",this.popOutContainer.style.top="0",e.appendChild(this.popOutContainer),this.popOutContainer.style.position="absolute"}},removePopOutContainer:function(){this.popOutContainer&&(this.popOutContainer.parentNode.removeChild(this.popOutContainer),this.popOutContainer=null)},triggerEvent:function(e){e?this.props.onOpen&&this.props.onOpen({type:"open",target:this}):this.props.onClose&&this.props.onClose({type:"close",target:this})},handleButtonClick:function(e){this.props.disabled||(this.triggerEvent(!this.state.open),this.setState({open:!this.state.open}))},handleBodyMouseDown:function(e){if(0===e.button&&!d.active){var t=l.findDOMNode(this),n=s(e.target,t);!n&&this.popOutContainer&&(n=s(e.target,this.popOutContainer)),n||(this.setState({open:!1}),this.triggerEvent(!1))}}})},"./widgets/pop-up-menu.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/pop-up-menu.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/profile-image.jsx":function(e,t,n){"use strict";function s(e){var t,s="profile-image "+e.size,i=o.get(e.user,"details.resources"),c=o.find(i,{type:"image"});if(c){var d=l[e.size];t=r.createElement(a,{resource:c,theme:e.theme,width:d,height:d})}else{var u=n("../node_modules/octicons/build/svg/person.svg");t=r.createElement("div",{className:"placeholder"},r.createElement(u,null))}return e.href?r.createElement("a",{className:s,href:e.href},t):r.createElement("span",{className:s},t)}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=(n("../../common/src/transport/blob-manager.js"),n("../../common/src/widgets/resource-view.jsx")),c=n("../../common/src/theme/theme.js");e.exports=s,n("./widgets/profile-image.scss"),s.propTypes={user:i.object,size:i.oneOf(["small","medium","large"]),theme:i.instanceOf(c).isRequired},s.defaultProps={size:"small"};var l={small:24,medium:48,large:96}},"./widgets/profile-image.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/profile-image.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/push-button.jsx":function(e,t,n){"use strict";function s(e){if(e.hidden)return null;var t=["push-button"];return e.emphasized&&t.push("emphasized"),r.createElement("button",{className:t.join(" "),disabled:e.disabled,onClick:e.onClick},e.label)}function o(e){if(e.hidden)return null;var t={type:"file",value:"",disabled:e.disabled,multiple:e.multiple,accept:e.accept,onChange:e.onChange},n=["push-button"];return e.emphasized&&n.push("emphasized"),r.createElement("label",{className:n.join(" "),disabled:e.disabled,onClick:e.onClick},e.label,r.createElement("input",t))}var r=n("../node_modules/react/react.js"),i=r.PropTypes;n("./widgets/push-button.scss"),e.exports=s,e.exports.File=o,o.propTypes={label:i.string,icon:i.string,hidden:i.bool,disabled:i.bool,multiple:i.bool,onChange:i.func}},"./widgets/push-button.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/push-button.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/qr-code.jsx":function(e,t,n){"use strict";var s=n("../node_modules/react/react.js"),o=s.PropTypes,r=n("../node_modules/qrcode/lib/browser.js");e.exports=s.createClass({displayName:"QRCode",propTypes:{text:o.string,scale:o.number},getDefaultProps:function(){return{scale:4}},render:function(){return s.createElement("canvas",{ref:"canvas",className:"qr-code"})},componentDidMount:function(){this.redraw()},componentDidUpdate:function(e,t){this.redraw()},redraw:function(){var e=this.refs.canvas,t={scale:this.props.scale};r.toCanvas(e,this.props.text,t,function(e){})}})},"./widgets/reaction-media-toolbar.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/media/device-manager.js"),a=n("../../common/src/locale/locale.js"),c=n("./widgets/header-button.jsx"),l=n("./dialogs/photo-capture-dialog-box.jsx"),d=n("./dialogs/video-capture-dialog-box.jsx"),u=n("./dialogs/audio-capture-dialog-box.jsx");n("./widgets/reaction-media-toolbar.scss"),e.exports=o.createClass({displayName:"ReactionMediaToolbar",propTypes:{reaction:r.object.isRequired,capturing:r.oneOf(["image","video","audio"]),locale:r.instanceOf(a).isRequired,onAction:r.func},getInitialState:function(){return{hasCamera:i.hasDevice("videoinput"),hasMicrophone:i.hasDevice("audioinput")}},getResourceCounts:function(){var e={photo:0,video:0,audio:0,file:0},t=s.get(this.props.reaction,"details.resources");return s.each(t,function(t){if(t.imported)e.file++;else switch(t.type){case"image":e.photo++;break;case"video":e.video++;break;case"audio":e.audio++}}),e},render:function(){var e=this.props.locale.translate,t=this.getResourceCounts(),n=this.state.hasCamera&&l.isAvailable(),r=this.state.hasCamera&&d.isAvailable(),i=this.state.hasMicrophone&&u.isAvailable(),a={tooltip:e("story-photo"),icon:"camera",hidden:!t.photo&&!n,disabled:!n,highlighted:t.photo>0||"image"===this.props.capturing,onClick:this.handlePhotoClick},p={tooltip:e("story-video"),icon:"video-camera",hidden:!t.video&&!r,disabled:!r,highlighted:t.video>0||"video"===this.props.capturing,onClick:this.handleVideoClick},m={tooltip:e("story-audio"),icon:"microphone",hidden:!t.audio&&!i,disabled:!i,highlighted:t.audio>0||"audio"===this.props.capturing,onClick:this.handleAudioClick},h={tooltip:e("story-file"),icon:"file-photo-o",multiple:!0,highlighted:t.file>0,onChange:this.handleFileSelect},f=s.get(this.props.reaction,"details.markdown",!1),g={tooltip:e("story-markdown"),icon:"pencil-square",highlighted:f,onClick:this.handleMarkdownClick};return o.createElement("div",{className:"reaction-media-toolbar"},o.createElement(c,a),o.createElement(c,p),o.createElement(c,m),o.createElement(c.File,h),o.createElement(c,g))},componentDidMount:function(){i.addEventListener("change",this.handleDeviceChange)},componentWillUnmount:function(){i.removeEventListener("change",this.handleDeviceChange)},triggerActionEvent:function(e,t){this.props.onAction&&this.props.onAction(s.extend({type:"action",target:this,action:e},t))},handlePhotoClick:function(e){this.triggerActionEvent("photo-capture")},handleVideoClick:function(e){this.triggerActionEvent("video-capture")},handleAudioClick:function(e){this.triggerActionEvent("audio-capture")},handleFileSelect:function(e){var t=e.target.files;s.isEmpty(t)||this.triggerActionEvent("file-import",{files:t})},handleMarkdownClick:function(e){var t=this.props.reaction,n=!t.details.markdown;this.triggerActionEvent("markdown-set",{value:n})},handleDeviceChange:function(e){this.setState({hasCamera:i.hasDevice("videoinput"),hasMicrophone:i.hasDevice("audioinput")})}})},"./widgets/reaction-media-toolbar.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/reaction-media-toolbar.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/reaction-progress.jsx":function(e,t,n){"use strict";function s(e){var t,n=e.locale.translate;if(i.isActuallyPublished(e.reaction)){var s=e.status;t=s?n("reaction-status-"+s.action):o.createElement(c,{time:e.reaction.ptime,compact:!0,locale:e.locale})}else t=n("reaction-status-storage-pending");return o.createElement("span",{className:"reaction-progress"},t)}var o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/objects/utils/reaction-utils.js"),a=n("../../common/src/locale/locale.js"),c=n("../../common/src/widgets/time.jsx");e.exports=s,n("./widgets/reaction-progress.scss"),s.propTypes={status:r.object,reaction:r.object.isRequired,locale:r.instanceOf(a).isRequired}},"./widgets/reaction-progress.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/reaction-progress.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/reaction-toolbar.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/locale/locale.js"),a=n("../../common/src/theme/theme.js"),c=n("./widgets/header-button.jsx");n("./widgets/reaction-toolbar.scss"),e.exports=o.createClass({displayName:"ReactionToolbar",propTypes:{access:r.oneOf(["read-only","read-comment","read-write"]),currentUser:r.object,reactions:r.arrayOf(r.object),respondents:r.arrayOf(r.object),addingComment:r.bool,disabled:r.bool,locale:r.instanceOf(i),theme:r.instanceOf(a),onAction:r.func},getCurrentUserLike:function(){return s.find(this.props.reactions,{type:"like",user_id:s.get(this.props.currentUser,"id")})},getCurrentUserComments:function(){var e=s.get(this.props.currentUser,"id");return s.filter(this.props.reactions,function(t){if(t.user_id===e&&("comment"===t.type||"note"===t.type))return!0})},render:function(){var e=this.props.locale.translate,t=this.props.access,n="read-comment"===t||"read-write"===t,r={icon:"thumbs-up",label:e("story-like"),hidden:!n,highlighted:!!this.getCurrentUserLike(),disabled:this.props.disabled,onClick:this.handleLikeClick},i={icon:"comment",label:e("story-comment"),hidden:!n,highlighted:!s.isEmpty(this.getCurrentUserComments())||this.props.addingComment,disabled:this.props.disabled,onClick:this.handleCommentClick};return o.createElement("div",{className:"reaction-toolbar"},o.createElement(c,r),o.createElement(c,i))},triggerActionEvent:function(e,t){this.props.onAction&&this.props.onAction(s.extend({type:"action",target:this,action:e},t))},handleLikeClick:function(e){var t=this.getCurrentUserLike();t?this.triggerActionEvent("like-remove",{like:t}):this.triggerActionEvent("like-add")},handleCommentClick:function(e){this.triggerActionEvent("reaction-add")},handleShowClick:function(e){this.triggerActionEvent("reaction-expand")}})},"./widgets/reaction-toolbar.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/reaction-toolbar.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/role-filter-bar.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../node_modules/relaks/index.js"),c=n("../../common/src/utils/memoize.js"),l=n("../../common/src/objects/finders/project-finder.js"),d=n("../../common/src/objects/finders/role-finder.js"),u=n("../../common/src/objects/finders/user-finder.js"),p=n("../../common/src/data/database.js"),m=n("../../common/src/routing/route.js"),h=n("../../common/src/locale/locale.js"),f=n("../../common/src/theme/theme.js"),g=(n("../../common/src/mixins/update-check.js"),n("./widgets/role-filter-button.jsx"));n("./widgets/role-filter-bar.scss"),e.exports=a.createClass({displayName:"RoleFilterBar",propTypes:{settings:i.object.isRequired,database:i.instanceOf(p).isRequired,route:i.instanceOf(m).isRequired,locale:i.instanceOf(h).isRequired,theme:i.instanceOf(f).isRequired},renderAsync:function(e){var t=this.props.route.parameters,n=this.props.database.use({schema:t.schema,by:this}),s={roles:null,users:null,project:null,settings:this.props.settings,locale:this.props.locale,route:this.props.route,theme:this.props.theme};return e.show(r.createElement(v,s)),n.start().then(function(e){return l.findCurrentProject(n).then(function(e){s.project=e})}).then(function(){return u.findProjectMembers(n,s.project).then(function(e){s.users=e})}).then(function(){return d.findRolesOfUsers(n,s.users).then(function(e){s.roles=e})}).then(function(e){return r.createElement(v,s)})}});var v=e.exports.Sync=r.createClass({displayName:"RoleFilterBar.Sync",propTypes:{settings:i.object.isRequired,project:i.object,roles:i.arrayOf(i.object),users:i.arrayOf(i.object),route:i.instanceOf(m).isRequired,locale:i.instanceOf(h).isRequired,theme:i.instanceOf(f).isRequired},render:function(){return r.createElement("div",{className:"role-filter-bar"},this.renderButtons())},renderButtons:function(){var e=this.props.roles;if(o.isEmpty(e)){var t={role:null!==e?null:void 0,locale:this.props.locale,theme:this.props.theme};return r.createElement(g,t)}return o.map(e,this.renderButton)},renderButton:function(e){var t=b(this.props.users,e),n=this.props.route,i=n.parameters.roles,a=o.clone(this.props.settings.route);o.includes(i,e.id)?a.roles=o.without(i,e.id):a.roles=o.concat(i,e.id);var c=n.find(n.component,a),l={role:e,users:t,url:c,locale:this.props.locale,theme:this.props.theme,selected:o.includes(i,e.id),onRoleClick:this.handleRoleClick};return r.createElement(g,s({key:e.id},l))}}),b=c(function(e,t){var n=o.filter(e,function(e){return o.includes(e.role_ids,t.id)});return o.isEmpty(n),n})},"./widgets/role-filter-bar.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/role-filter-bar.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/role-filter-button.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/locale/locale.js"),a=n("../../common/src/theme/theme.js"),c=n("./widgets/profile-image.jsx");n("./widgets/role-filter-button.scss"),e.exports=o.createClass({displayName:"RoleFilterButton",propTypes:{role:r.object,users:r.arrayOf(r.object),selected:r.bool,url:r.string,locale:r.instanceOf(i).isRequired,theme:r.instanceOf(a).isRequired},render:function(){var e="role-filter-button";return this.props.selected&&(e+=" selected"),this.props.role||(e+=" no-roles"),o.createElement("a",{className:e,href:this.props.url},o.createElement("div",{className:"contents"},this.renderImageRow(0,4),this.renderImageRow(0,0),this.renderImageRow(4,4),this.renderTitle()))},renderImageRow:function(e,t){var n=s.filter(this.props.users,function(e){return s.some(e.details.resources,{type:"image"})});return n=s.slice(n,e,t),o.createElement("div",{className:"row"},s.map(n,this.renderProfileImage))},renderProfileImage:function(e,t){return o.createElement(c,{key:t,user:e,size:"medium",theme:this.props.theme})},renderTitle:function(){if(!this.props.role)return this.renderMessage();var e=this.props.locale.pick,t=this.props.role;return o.createElement("div",{className:"band"},o.createElement("div",{className:"title"},e(t.details.title)||t.name,this.renderUserCount()))},renderMessage:function(){if(void 0===this.props.role)return null;var e=this.props.locale.translate;return o.createElement("div",{className:"message"},e("role-filter-no-roles"))},renderUserCount:function(){if(!this.props.users)return null;var e=this.props.users.length;return o.createElement("div",{className:"user-count"},o.createElement("i",{className:"fa fa-male"}),o.createElement("span",{className:"number"},e))}})},"./widgets/role-filter-button.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/role-filter-button.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/scrollable.jsx":function(e,t,n){"use strict";function s(e){var t="scrollable";return e.className&&(t+=" "+e.className),e=o.clone(e),e.className=t,r.createElement("div",e,e.children)}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js");e.exports=s,n("./widgets/scrollable.scss")},"./widgets/scrollable.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/scrollable.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/search-bar.jsx":function(e,t,n){"use strict";function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return e=d.replace(e,/\+/g,""),e=d.replace(e,/\s+/g," "),d.split(e).join(" ")}function r(e){return d.map(g.findTags(e),d.toLower)}function i(e){var t;return d.some(e,function(e){if(void 0===t)t=e.offsetTop;else if(e.offsetTop>t)return!0})}function a(e){if(!e)return[];var t={},n={};d.each(e.daily,function(e,s){d.each(e,function(e,o){var r;if(r=s===f.today?4:s===f.yesterday?2:s>=f.oneWeekAgo?1:s>=f.twoWeeksAgo?.5:.25,/^#/.test(o)){var i=e*r;t[o]=(t[o]||0)+i,n[o]=(n[o]||0)+e}})});var s={},o={};d.each(t,function(e,t){var n=d.toLower(t),r=s[n];r||(r=s[n]=[]),r.push(t),o[n]=(o[n]||0)+e});var r={};d.each(o,function(e,t){var o=s[t];o.length>1&&(o=d.orderBy(o,function(e){return n[e]},"desc"));var i=o[0];r[i]=e});var i=d.transform(r,function(e,t,n){e.push({name:n,score:t})},[]);return d.sortBy(i,"name")}var c,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},d=n("../node_modules/lodash/lodash.js"),u=n("../node_modules/react/react.js"),p=u.PropTypes,m=n("../node_modules/relaks/index.js"),h=n("../../common/src/utils/component-refs.js"),f=n("../../common/src/utils/date-tracker.js"),g=n("../../common/src/utils/tag-scanner.js"),v=n("../../common/src/objects/finders/statistics-finder.js"),b=n("../../common/src/objects/finders/user-finder.js"),y=n("../../common/src/data/database.js"),j=n("../../common/src/routing/route.js"),x=n("../../common/src/locale/locale.js"),w=n("../../common/src/mixins/update-check.js");n("./widgets/search-bar.scss"),e.exports=m.createClass({displayName:"SearchBar",propTypes:{settings:p.object.isRequired,database:p.instanceOf(y),route:p.instanceOf(j),locale:p.instanceOf(x)},renderAsync:function(e){var t=this,n=this.props.route.parameters,s=this.props.database.use({schema:n.schema,by:this}),o={dailyActivities:null,settings:this.props.settings,route:this.props.route,locale:this.props.locale};return e.show(u.createElement(k,o)),s.start().then(function(e){return b.findUser(s,e)}).then(function(e){var n=d.clone(t.props.settings.statistics);return"current"===n.user_id&&(n.user_id=e.id),"guest"===n.public&&(n.public="guest"===e.type),v.find(s,n)}).then(function(e){return o.dailyActivities=e,u.createElement(k,o)})}});var k=e.exports.Sync=u.createClass((c={displayName:"SearchBar.Sync",mixins:[w],propTypes:{settings:p.object.isRequired,dailyActivities:p.object,route:p.instanceOf(j),locale:p.instanceOf(x)},getInitialState:function(){this.components=h({tags:HTMLDivElement});var e=this.props.route,t=e.query.search||"";return{keywords:t,hashTags:a(this.props.dailyActivities),selectedHashTags:r(t)}},componentWillReceiveProps:function(e){if(this.props.route!==e.route){var t=e.route,n=this.state.keywords,s=t.query.search||"";d.isEqual(o(n),o(s))||this.setState({keywords:s,selectedHashTags:r(s)})}if(this.props.dailyActivities!==e.dailyActivities){var i=a(e.dailyActivities);this.setState({hashTags:i})}},render:function(){return u.createElement("div",{className:"search-bar"},this.renderTextInput(),this.renderHashTags())},renderTextInput:function(){var e=this.props.locale.translate,t={type:"text",value:this.state.keywords,placeholder:e("search-bar-keywords"),onChange:this.handleTextChange,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus};return u.createElement("div",{className:"text-input"},u.createElement("input",t))},renderHashTags:function(){var e=this.components.setters;return u.createElement("div",{ref:e.tags,className:"tags"},d.map(this.state.hashTags,this.renderHashTag))},renderHashTag:function(e,t){var n=this.props.route,s=d.assign({search:e.name},this.props.settings.route),o=n.find(n.component,s),r={className:"tag",onClick:this.handleHashTagClick,"data-tag":e.name,href:o};return d.includes(this.state.selectedHashTags,d.toLower(e.name))&&(r.className+=" selected"),u.createElement("a",l({key:t},r),e.name)},componentDidMount:function(){window.addEventListener("resize",this.handleWindowResize)},componentDidUpdate:function(){this.hideUnpopularTags()}},s(c,"componentDidMount",function(){window.addEventListener("resize",this.handleWindowResize)}),s(c,"hideUnpopularTags",function(){var e=this.components.tags;if(e){var t={};d.each(e.children,function(e){"none"===e.style.display&&(e.style.display="");var n=e.getAttribute("data-tag");t[n]=e});for(var n=d.sortBy(this.state.hashTags,"score");i(t);){var s=n.shift();if(!s)break;var o=t[s.name];delete t[s.name],o.style.display="none"}}}),s(c,"performSearch",function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null);var e=this.props.route,t=d.clone(e.parameters);t.search=o(this.state.keywords),e.push(e.component,t)}),s(c,"handleTextChange",function(e){var t=e.target.value,n=r(t);this.setState({keywords:t,selectedHashTags:n}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.performSearch,800)}),s(c,"handleKeyDown",function(e){13===e.keyCode&&this.performSearch()}),s(c,"handleFocus",function(e){var t=e.target;t.selectionStart=0,t.selectionEnd=t.value.length}),s(c,"handleHashTagClick",function(e){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}),s(c,"handleWindowResize",function(e){this.hideUnpopularTags()}),c))},"./widgets/search-bar.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/search-bar.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/settings-panel.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js");r.PropTypes;n("./widgets/settings-panel.scss"),e.exports=r.createClass({displayName:"SettingsPanel",propTypes:{},render:function(){var e="settings-panel";return this.props.className&&(e+=" "+this.props.className),r.createElement("div",{className:e},this.renderPart("header"),this.renderPart("subheader"),this.renderPart("body"),this.renderPart("footer"))},renderPart:function(e){var t=r.Children.toArray(this.props.children),n=o.find(t,{type:e});return n?r.createElement("div",s({className:e},n.props),n.props.children):null}})},"./widgets/settings-panel.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/settings-panel.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/story-emblem.jsx":function(e,t,n){"use strict";function s(e){if(o.includes(e.story.tags,"#yippeekiyay"))return r.createElement("div",{className:"story-emblem die-hard"},r.createElement("img",{src:n("../assets/explosion.gif")}));var t=e.story.type,s="story-emblem";if(!o.includes(a.git,t))return null;s+=" git";var i=a.icons[t];if("issue"===t){var c=e.story.details.state;i=a.icons[t+"."+c]}return i?r.createElement("div",{className:s},r.createElement(i,{className:t})):null}var o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../../common/src/objects/types/story-types.js");e.exports=s,n("./widgets/story-emblem.scss"),s.propTypes={story:i.object.isRequired}},"./widgets/story-emblem.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/story-emblem.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/story-progress.jsx":function(e,t,n){"use strict";function s(e){var t,n=e.locale.translate;if(i.isActuallyPublished(e.story)){var s=e.status;s?t=n("story-status-"+s.action+"-$progress",s.progress):(t=o.createElement(c,{time:e.story.ptime,locale:e.locale}),e.pending&&(t=o.createElement("span",null,t," ",o.createElement("i",{className:"fa fa-spinner fa-pulse"}))))}else t=n("story-status-storage-pending");return o.createElement("span",{className:"story-progress"},t)}var o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/objects/utils/story-utils.js"),a=n("../../common/src/locale/locale.js"),c=n("../../common/src/widgets/time.jsx");e.exports=s,n("./widgets/story-progress.scss"),s.propTypes={status:r.object,story:r.object.isRequired,locale:r.instanceOf(a).isRequired}},"./widgets/story-progress.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/story-progress.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/text-field.jsx":function(e,t,n){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o=n("../node_modules/lodash/lodash.js"),r=n("../node_modules/react/react.js"),i=r.PropTypes,a=n("../../common/src/utils/component-refs.js"),c=n("../../common/src/locale/locale.js"),l=n("../../common/src/widgets/autosize-text-area.jsx");n("./widgets/text-field.scss"),e.exports=r.createClass({displayName:"TextField",propTypes:{locale:i.instanceOf(c).isRequired},getDefaultProps:function(){return{type:"text"}},getInitialState:function(){return this.components=a({input:HTMLInputElement}),{}},render:function(){var e=["text-field"],t="input",n=o.omit(this.props,"children","locale");if("textarea"===this.props.type&&(t=l,n=o.omit(n,"type")),this.props.readOnly){e.push("readonly");var i=this.props.locale.translate;n.placeholder=i("text-field-placeholder-none"),n.spellCheck=!1}return n.value=n.value||"",r.createElement("div",{className:e.join(" ")},r.createElement("label",{htmlFor:this.props.id},this.props.children),r.createElement(t,s({ref:this.components.setters.input},n)))},focus:function(){this.components.input.focus()}})},"./widgets/text-field.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/text-field.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/text-toolbar.jsx":function(e,t,n){"use strict";var s=n("../node_modules/lodash/lodash.js"),o=n("../node_modules/react/react.js"),r=o.PropTypes,i=n("../../common/src/locale/locale.js"),a=n("./widgets/header-button.jsx");n("./widgets/text-toolbar.scss"),e.exports=o.createClass({displayName:"TextToolbar",propTypes:{story:r.object.isRequired,locale:r.instanceOf(i).isRequired,onAction:r.func},render:function(){var e=this.props.locale.translate,t=this.props.story,n={label:e("story-markdown"),icon:"pencil-square",highlighted:t.details.markdown,onClick:this.handleMarkdownClick},s={label:e("story-task-list"),icon:"list-ol",highlighted:"task-list"===t.type,onClick:this.handleTaskListClick},r={label:e("story-survey"),icon:"list-ul",highlighted:"survey"===t.type,onClick:this.handleSurveyClick};return o.createElement("div",{className:"text-toolbar"},o.createElement(a,n),o.createElement(a,s),o.createElement(a,r))},triggerActionEvent:function(e,t){this.props.onAction&&this.props.onAction(s.extend({type:"action",target:this,action:e},t))},handleMarkdownClick:function(e){var t=this.props.story,n=!t.details.markdown;this.triggerActionEvent("markdown-set",{value:n})},handleTaskListClick:function(e){var t=this.props.story,n="task-list"!==t.type?"task-list":"post";this.triggerActionEvent("story-type-set",{value:n})},handleSurveyClick:function(e){var t=this.props.story,n="survey"!==t.type?"survey":"post";this.triggerActionEvent("story-type-set",{value:n})}})},"./widgets/text-toolbar.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/text-toolbar.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./widgets/top-navigation.jsx":function(e,t,n){"use strict";function s(e){var t="button",n=e.onClick;return e.className&&(t+=" "+e.className),e.active&&(t+=" active"),e.url||(t+=" disabled",n=null),i.createElement(m,{className:t,url:e.url,onClick:n},i.createElement("i",{className:"fa fa-"+e.icon}))}function o(e){var t=e.locale.translate;if(e.uploading){var n=r.fileSize(e.uploading.bytes),s=e.uploading.files,o=t("upload-progress-uploading-$count-files-$size-remaining",s,n);return i.createElement("span",{className:"connection",title:o},i.createElement("i",{className:"fa fa-cloud-upload"}))}if(e.searching)return i.createElement("span",{className:"connection"},i.createElement("i",{className:"fa fa-refresh"}));if(e.online){if(e.connected)return null;var o=t("warning-no-connection",s,n);return i.createElement("span",{className:"connection",title:o},i.createElement("i",{className:"fa fa-warning"}))}return i.createElement("span",{className:"connection"},i.createElement("i",{className:"fa fa-wifi"}),i.createElement("i",{className:"fa fa-ban"}))}var r=n("../node_modules/lodash/lodash.js"),i=n("../node_modules/react/react.js"),a=i.PropTypes,c=n("../../common/src/data/database.js"),l=n("../../common/src/transport/payloads.js"),d=n("../../common/src/routing/route.js"),u=n("../../common/src/locale/locale.js"),p=n("../../common/src/theme/theme.js"),m=n("./widgets/link.jsx"),h=n("../../common/src/widgets/collapsible-container.jsx"),f=n("./widgets/calendar-bar.jsx"),g=n("./widgets/role-filter-bar.jsx"),v=n("./widgets/search-bar.jsx");n("./widgets/top-navigation.scss"),e.exports=i.createClass({displayName:"TopNavigation",propTypes:{settings:a.object.isRequired,online:a.bool,connected:a.bool,searching:a.bool,database:a.instanceOf(c).isRequired,payloads:a.instanceOf(l).isRequired,route:a.instanceOf(d).isRequired,locale:a.instanceOf(u).isRequired,theme:a.instanceOf(p).isRequired},getDefaultProps:function(){return{online:!0,connected:!0}},getInitialState:function(){return{height:r.get(this.props.settings,"navigation.top",!0)?"auto":0}},isHidden:function(e){return e||(e=this.props.settings),!r.get(e,"navigation.top",!0)},getSelectedControl:function(e){e||(e=this.props.route);var t=e.parameters;return void 0!=t.search?"search":void 0!=t.date?"calendar":void 0!=t.roles?"filter":null},getControlURL:function(e){var t=this.getSelectedControl(),n=r.get(this.props.settings,e);if(!n)return null;var s=r.clone(n.route);if(e!==t)switch(e){case"search":s.search="";break;case"calendar":s.date="";break;case"filter":s.roles=[]}return this.props.route.find(this.props.route.component,s)},componentWillReceiveProps:function(e){var t=this,n=this.isHidden(),s=this.isHidden(e.settings);if(n!==s){var o=this.refs.container,r=o.offsetHeight;s?(this.setState({height:r}),setTimeout(function(){t.isHidden()&&t.setState({height:0})},0)):(this.setState({height:r}),setTimeout(function(){t.isHidden()||t.setState({height:"auto"})},1e3))}},render:function(){var e={height:this.state.height};return i.createElement("header",{className:"top-navigation",style:e},i.createElement("div",{ref:"container",className:"container"},this.renderButtonBar(),this.renderCollapsibleControl()))},renderButtonBar:function(){var e=this.getSelectedControl(),t={icon:"calendar",className:"calendar-btn",url:this.getControlURL("calendar"),active:"calendar"===e,onClick:this.handleButtonClick},n={icon:"filter",className:"filter-btn",url:this.getControlURL("filter"),active:"filter"===e,onClick:this.handleButtonClick},r={icon:"search",className:"search-btn",url:this.getControlURL("search"),active:"search"===e,onClick:this.handleButtonClick},a={locale:this.props.locale,uploading:this.props.payloads.uploading,searching:this.props.searching,online:this.props.online,connected:this.props.connected};return i.createElement("div",null,i.createElement(s,t),i.createElement(s,n),i.createElement(s,r),i.createElement(o,a))},renderCollapsibleControl:function(){var e=this.getSelectedControl();return i.createElement(h,{open:!!e},this.renderControl())},renderControl:function(){switch(this.getSelectedControl()){case"calendar":return this.renderCalendarBar();case"filter":return this.renderRoleFilterBar();case"search":return this.renderSearchBar()}},renderCalendarBar:function(){var e={settings:this.props.settings.calendar,database:this.props.database,route:this.props.route,locale:this.props.locale};return i.createElement(f,e)},renderRoleFilterBar:function(){var e={settings:this.props.settings.filter,database:this.props.database,route:this.props.route,locale:this.props.locale,theme:this.props.theme};return i.createElement(g,e)},renderSearchBar:function(){var e={settings:this.props.settings.search,database:this.props.database,route:this.props.route,locale:this.props.locale};return i.createElement(v,e)},handleButtonClick:function(e){}})},"./widgets/top-navigation.scss":function(e,t,n){var s=n('../node_modules/css-loader/index.js!../node_modules/postcss-loader/lib/index.js?{"config":{"path":"/home/cleong/trambar-build/codebase/client/postcss.config.js"}}!../node_modules/sass-loader/lib/loader.js!./widgets/top-navigation.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;n("../node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)}});