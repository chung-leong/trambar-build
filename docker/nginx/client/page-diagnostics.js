webpackJsonp(["page-diagnostics"],{"../../common/src/data/sqlite-cache.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e){try{return JSON.parse(e)}catch(e){return null}}Object.defineProperty(t,"__esModule",{value:!0}),t.SQLiteCache=t.default=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n("../../common/node_modules/lodash/lodash.js"),s=a(u),i=n("../../common/node_modules/bluebird/js/browser/bluebird.js"),c=a(i),d=n("../../common/src/data/local-search.js"),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),m=window.openDatabase;window.sqlitePlugin&&(m=window.sqlitePlugin.openDatabase);var p={databaseName:"database"},h=function(){function e(t){r(this,e),this.options=s.default.defaults({},t,p),this.tables={},this.recordCounts={},this.writeCount=0,this.readCount=0,this.deleteCount=0}return o(e,null,[{key:"isAvailable",value:function(){return!!m}}]),o(e,[{key:"initialize",value:function(){this.updateRecordCount("remote"),this.updateRecordCount("local")}},{key:"shutdown",value:function(){this.tables={}}},{key:"find",value:function(e){var t=this,n=e.address,a=e.schema,r=e.table,l=e.criteria;return void 0==n&&(n=""),this.fetchTable(n,a,r).then(function(e){var n=t.getObjectKeyName(a),o=[];if(s.default.isEqual(s.default.keys(l),[n])){var u=l[n];return u=u instanceof Array?s.default.sortBy(s.default.slice(u)):[u],s.default.each(u,function(t){var a={};a[n]=t;var r=s.default.sortedIndexBy(e,a,n),l=e[r];l&&l[n]===t&&o.push(l)}),o}return s.default.each(e,function(e){f.match(r,e,l)&&o.push(e)}),o}).then(function(n){return f.limit(r,n,e.criteria),t.readCount+=n.length,n})}},{key:"save",value:function(e,t){var n=this,a=e.address,r=e.schema,l=e.table;void 0==a&&(a="");var o=[],u=[];return s.default.each(t,function(e){var t=JSON.stringify(e);if("local"===r)o.push("\n                    INSERT OR REPLACE INTO local_data\n                    (table_name, key, json)\n                    VALUES (?, ?, ?)\n                "),u.push([l,e.key,t]);else{var n=new Date(e.rtime).getTime();o.push("\n                    INSERT OR REPLACE INTO remote_data\n                    (address, schema_name, table_name, id, json, rtime)\n                    VALUES (?, ?, ?, ?, ?, ?)\n                "),u.push([a,r,l,e.id,t,n])}}),this.execute(o,u).then(function(e){return n.writeCount+=e,n.updateTableEntry(a,r,l,t,!1),n.updateRecordCount(r,500),t})}},{key:"remove",value:function(e,t){var n=this,a=e.address,r=e.schema,l=e.table;void 0==a&&(a="");var o=[],u=[];return s.default.each(t,function(e){"local"===r?(o.push("\n                    DELETE FROM local_data\n                    WHERE table_name = ? AND key = ?\n                "),u.push([l,e.key])):(o.push("\n                    DELETE FROM remote_data\n                    WHERE address = ?\n                    AND schema_name = ?\n                    AND table_name = ?\n                    AND id = ?\n                "),u.push([a,r,l,e.id]))}),this.execute(o,u).then(function(e){return n.deleteCount+=e,n.updateTableEntry(a,r,l,t,!0),n.updateRecordCount(r,500),t})}},{key:"clean",value:function(e){var t=this,n=void 0,a=void 0;if(void 0!==e.address)e.schema&&"*"!==e.schema?(n="\n                    DELETE FROM remote_data\n                    WHERE address = ? AND schema_name = ?\n                ",a=[e.address||"",e.schema],console.log(n)):(n="\n                    DELETE FROM remote_data\n                    WHERE address = ?\n                ",a=[e.address||""]);else if(void 0!==e.count)n="\n                DELETE FROM remote_data\n                WHERE rowid IN (\n                    SELECT rowid FROM remote_data ORDER BY rtime LIMIT ?\n                )\n            ",a=[e.count];else{if(void 0===e.before)return c.default.resolve(0);var r=new Date(e.before).getTime();n="\n                DELETE FROM remote_data\n                WHERE rtime < ?\n            ",a=[r]}return this.execute(n,a).then(function(e){e>0&&(t.deleteCount+=e,t.updateRecordCount("remote_data"),t.tables.remote={})})}},{key:"query",value:function(e,t){return this.open().then(function(n){return new c.default(function(a,r){var l=function(e){r(new Error(e.message))};n.transaction(function(n){n.executeSql(e,t,function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r));a(n)})},l)})})}},{key:"execute",value:function(e,t){return this.open().then(function(n){return new c.default(function(a,r){var l=0,o=function(e){r(new Error(e.message))},u=function(){a(l)},s=function(e,t){l+=t.rowsAffected};n.transaction(function(n){if(e instanceof Array)for(var a=0;a<e.length;a++)n.executeSql(e[a],t[a],s);else n.executeSql(e,t,s)},o,u)})})}},{key:"fetchTable",value:function(e,t,n){var a=this.getTableEntry(e,t,n);return a.promise||(a.promise=this.loadTable(e,t,n).then(function(e){return a.objects=e,a.objects})),a.promise}},{key:"loadTable",value:function(e,t,n){var a=void 0,r=void 0;return"local"===t?(a="\n                SELECT json FROM local_data\n                WHERE table_name = ?\n                ORDER BY key\n            ",r=[n]):(a="\n                SELECT json FROM remote_data\n                WHERE address = ?\n                AND schema_name = ?\n                AND table_name = ?\n                ORDER BY id\n            ",r=[e,t,n]),this.query(a,r).then(function(e){return s.default.map(e,function(e){return l(e.json)})})}},{key:"open",value:function(){var e=this;return this.databasePromise||(this.databasePromise=c.default.try(function(){var t=e.options.databaseName,n=m(t,"","",52428800),a=["\n                        CREATE TABLE IF NOT EXISTS remote_data (\n                            address text,\n                            schema_name text,\n                            table_name text,\n                            id int,\n                            json text,\n                            rtime datetime\n                        )\n                    ","\n                        CREATE UNIQUE INDEX IF NOT EXISTS remote_data_idx_id\n                        ON remote_data (\n                            address,\n                            schema_name,\n                            table_name,\n                            id\n                        )\n                    ","\n                        CREATE INDEX IF NOT EXISTS remote_data_idx_location\n                        ON remote_data (\n                            address,\n                            schema_name,\n                            table_name\n                        )\n                    ","\n                        CREATE INDEX IF NOT EXISTS remote_data_idx_rtime\n                        ON remote_data (\n                            rtime\n                        )\n                    ","\n                        CREATE TABLE IF NOT EXISTS local_data (\n                            table_name text,\n                            key text,\n                            json text\n                        )\n                    ","\n                        CREATE UNIQUE INDEX IF NOT EXISTS local_data_idx_key\n                        ON local_data (\n                            table_name,\n                            key\n                        )\n                    "];return"1.0"!==n.version&&(a.unshift("DROP TABLE IF EXISTS remote_data"),a.unshift("DROP TABLE IF EXISTS local_data")),new c.default(function(e,t){var r=function(e){t(new Error(e.message))};n.transaction(function(e){s.default.each(a,function(t){e.executeSql(t)})},r,e)}).return(n)})),this.databasePromise}},{key:"reset",value:function(e,t){var n=void 0;n="local"===t?["local"]:s.default.filter(["remote",e,t]),s.default.unset(this.tables,n)}},{key:"getObjectKeyName",value:function(e){return"local"===e?"key":"id"}},{key:"getTableEntry",value:function(e,t,n){var a=void 0;a="local"===t?["local",n]:["remote",e,t,n];var r=s.default.get(this.tables,a);return r||(r={promise:null,objects:null},s.default.set(this.tables,a,r)),r}},{key:"updateTableEntry",value:function(e,t,n,a,r){var l=this.getTableEntry(e,t,n);if(l.objects){var o=this.getObjectKeyName(t);s.default.each(a,function(e){var t=s.default.sortedIndexBy(l.objects,e,o),n=l.objects[t];n&&n[o]===e[o]?r?l.objects.splice(t,1):l.objects[t]=e:r||l.objects.splice(t,0,e)})}}},{key:"updateRecordCount",value:function(e,t){var n=this,a="local"===e?"local_data":"remote_data",r="updateRecordCountTimeouts."+a,l=s.default.get(this,r);l&&clearTimeout(l),l=setTimeout(function(){var e="SELECT COUNT(*) as count FROM "+a;n.query(e).then(function(e){n.recordCounts[a]=e[0].count}).catch(function(e){}),s.default.set(n,r,0)},t||0),s.default.set(this,r,l)}}]),e}();t.default=h,t.SQLiteCache=h},"./diagnostics/code-push-panel.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){if(!e.package)return null;var t=e.package;return f.default.createElement(b.default,{label:e.label},f.default.createElement("div",null,"Label: ",t.label),f.default.createElement("div",null,"Description: ",t.description),f.default.createElement("div",null,"First run: ",t.isFristRun?"yes":"no"),f.default.createElement("div",null,"Mandatory: ",t.isMandatory?"yes":"no"),f.default.createElement("div",null,"Package hash: ",c.default.truncate(t.packageHash,{length:15})),f.default.createElement("div",null,"Package size: ",t.packageSize))}Object.defineProperty(t,"__esModule",{value:!0}),t.CodePushPanel=t.default=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n("../../common/node_modules/lodash/lodash.js"),c=a(i),d=n("../../common/node_modules/react/index.js"),f=a(d),m=n("./widgets/settings-panel.jsx"),p=a(m),h=n("./widgets/diagnostics-section.jsx"),b=a(h);n("./diagnostics/code-push-panel.scss");var y=n("../../common/src/transport/code-push.js"),E=(a(y),function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props.codePush,t=e.lastSyncTime,n=e.lastSyncStatus,a=e.currentPackage,r=e.pendingPackage;return f.default.createElement(p.default,{className:"code-push"},f.default.createElement("header",null,f.default.createElement("i",{className:"fa fa-gear"})," Code Push"),f.default.createElement("body",null,f.default.createElement(b.default,{label:"Update check"},f.default.createElement("div",null,"Last check: ",t),f.default.createElement("div",null,"Result: ",n)),f.default.createElement(u,{label:"Current package",package:a}),f.default.createElement(u,{label:"Pending package",package:r})))}}]),t}(d.Component));E.displayName="CodePushPanel",t.default=E,t.CodePushPanel=E},"./diagnostics/code-push-panel.scss":function(e,t){},"./diagnostics/environment-monitor-panel.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentMonitorPanel=t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("../../common/node_modules/lodash/lodash.js"),i=(a(s),n("../../common/node_modules/react/index.js")),c=a(i),d=n("./widgets/settings-panel.jsx"),f=a(d),m=n("./widgets/diagnostics-section.jsx"),p=a(m);n("./diagnostics/environment-monitor-panel.scss");var h=n("../../common/src/env/environment-monitor.js"),b=(a(h),function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props.envMonitor,t=e.online,n=e.os,a=e.connectionType,r=e.battery,l=e.screenWidth,o=e.screenHeight,u=e.viewportWidth,s=e.viewportHeight,i=e.devicePixelRatio,d=e.pointingDevice,m=e.webpSupport,h=e.browser,b=e.date;return c.default.createElement(f.default,{className:"env-monitor"},c.default.createElement("header",null,c.default.createElement("i",{className:"fa fa-gear"})," Environment"),c.default.createElement("body",null,c.default.createElement(p.default,{label:"Connectivity"},c.default.createElement("div",null,"Online: ",t?"yes":"no"),c.default.createElement("div",null,"Type: ",a)),c.default.createElement(p.default,{label:"Display"},c.default.createElement("div",null,"Screen width: ",l),c.default.createElement("div",null,"Screen height: ",o),c.default.createElement("div",null,"Viewport width: ",u),c.default.createElement("div",null,"Viewport height: ",s),c.default.createElement("div",null,"Device pixel ratio: ",i),c.default.createElement("div",null,"Pointing device: ",d)),c.default.createElement(p.default,{label:"Browser"},c.default.createElement("div",null,"Type: ",h),c.default.createElement("div",null,"OS: ",n),c.default.createElement("div",null,"WebP support: ",m?"yes":"no")),c.default.createElement(p.default,{label:"Battery"},c.default.createElement("div",null,"Charging: ",r.charging?"yes":"no"),c.default.createElement("div",null,"Level: ",Math.floor(100*r.level),"%")),c.default.createElement(p.default,{label:"Date"},c.default.createElement("div",null,"Today: ",b))))}}]),t}(i.Component));b.displayName="EnvironmentMonitorPanel",t.default=b,t.EnvironmentMonitorPanel=b},"./diagnostics/environment-monitor-panel.scss":function(e,t){},"./diagnostics/indexed-db-cache-panel.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDBCachePanel=t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("../../common/node_modules/lodash/lodash.js"),i=a(s),c=n("../../common/node_modules/react/index.js"),d=a(c),f=n("./widgets/settings-panel.jsx"),m=a(f),p=n("./widgets/diagnostics-section.jsx"),h=a(p);n("./diagnostics/indexed-db-cache-panel.scss");var b=n("../../common/src/data/indexed-db-cache.js"),y=(a(b),function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props.cache,t=e.options,n=e.recordCounts,a=e.writeCount,r=e.readCount,l=e.deleteCount,o=i.default.get(n,"local-data"),u=i.default.get(n,"remote-data");return d.default.createElement(m.default,{className:"indexed-db-cache"},d.default.createElement("header",null,d.default.createElement("i",{className:"fa fa-gear"})," IndexedDB Cache"),d.default.createElement("body",null,d.default.createElement(h.default,{label:"Database details"},d.default.createElement("div",null,"Name: ",t.databaseName)),d.default.createElement(h.default,{label:"Usage"},d.default.createElement("div",null,"Local objects: ",o),d.default.createElement("div",null,"Remote objects: ",u),d.default.createElement("div",null,"Objects read: ",r),d.default.createElement("div",null,"Objects written: ",a),d.default.createElement("div",null,"Objects deleted: ",l))))}}]),t}(c.Component));y.displayName="IndexedDBCachePanel",t.default=y,t.IndexedDBCachePanel=y},"./diagnostics/indexed-db-cache-panel.scss":function(e,t){},"./diagnostics/locale-manager-panel.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LocaleManagerPanel=t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("../../common/node_modules/lodash/lodash.js"),i=a(s),c=n("../../common/node_modules/react/index.js"),d=a(c),f=n("./widgets/settings-panel.jsx"),m=a(f),p=n("./widgets/diagnostics-section.jsx"),h=a(p);n("./diagnostics/locale-manager-panel.scss");var b=n("../../common/src/locale/locale-manager.js"),y=(a(b),function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props.localeManager,t=e.browserLocaleCode,n=e.localeCode,a=e.missingPhrases;return d.default.createElement(m.default,{className:"locale-manager"},d.default.createElement("header",null,d.default.createElement("i",{className:"fa fa-gear"})," Locale Manager"),d.default.createElement("body",null,d.default.createElement(h.default,{label:"Locale code"},d.default.createElement("div",null,"Current: ",n),d.default.createElement("div",null,"Browser: ",t)),d.default.createElement(h.default,{label:"Missing phrases",hidden:i.default.isEmpty(a)},i.default.map(a,function(e,t){return d.default.createElement("div",{key:t},e)}))))}}]),t}(c.Component));y.displayName="LocaleManagerPanel",t.default=y,t.LocaleManagerPanel=y},"./diagnostics/locale-manager-panel.scss":function(e,t){},"./diagnostics/payload-manager-panel.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return E.default.createElement("div",{key:t},E.default.createElement("div",null,"Payload ID: ",e.id),E.default.createElement("div",null,"Resource type: ",e.type),s(e),i(e),E.default.createElement("ol",null,p.default.map(e.parts,c)))}function s(e){if(!e.started)return null;if(e.sent){var t=.001*((0,b.default)(e.uploadEndTime)-(0,b.default)(e.uploadStartTime)),n=void 0,a=e.getSize();a>0&&(n="("+d(a/t)+" per sec)");var r=p.default.round(t,t<1?2:0)+"s";return E.default.createElement("div",null,"Upload duration: ",r," ",n)}var l=e.getSize(),o=e.getUploaded(),u=Math.round(o/l*100||0)+"%";return E.default.createElement("div",null,"Upload progress: ",u)}function i(e){if(!e.sent)return null;if(e.completed){var t=.001*((0,b.default)(e.processEndTime)-(0,b.default)(e.uploadEndTime)),n=p.default.round(t,t<1?2:0)+"s";return E.default.createElement("div",null,"Backend duration: ",n)}var a=e.processed+"%";return E.default.createElement("div",null,"Backend progress: ",a)}function c(e,t){var n=void 0,a=e.name;n=e.blob||e.cordovaFile?"File":e.stream?"Stream":e.url?"URL":"Unknown";var r=void 0;return e.size>0&&(r=E.default.createElement("span",{className:"file-size"},d(e.size))),E.default.createElement("li",{key:t},n," - ",a," ",r)}function d(e){return e>=1073741824?p.default.round(e/1073741824)+" GB":e>=1048576?p.default.round(e/1048576)+" MB":e>=1024?p.default.round(e/1024)+" KB":e>0?e+" bytes":"0"}Object.defineProperty(t,"__esModule",{value:!0}),t.PayloadManagerPanel=t.default=void 0;var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),m=n("../../common/node_modules/lodash/lodash.js"),p=a(m),h=n("../../common/node_modules/moment/moment.js"),b=a(h),y=n("../../common/node_modules/react/index.js"),E=a(y),v=n("./widgets/settings-panel.jsx"),g=a(v),_=n("./widgets/diagnostics-section.jsx"),j=a(_);n("./diagnostics/payload-manager-panel.scss");var w=n("../../common/src/transport/payload-manager.js"),O=(a(w),function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"render",value:function(){var e=this.props.payloadManager,t=e.payloads;if(p.default.isEmpty(t))return null;var n=p.default.filter(t,{started:!1}),a=p.default.filter(t,{started:!0,sent:!1,failed:!1}),r=p.default.filter(t,{sent:!0,completed:!1}),l=p.default.filter(t,{failed:!0}),o=p.default.filter(t,{completed:!0});return E.default.createElement(g.default,{className:"payload-manager"},E.default.createElement("header",null,E.default.createElement("i",{className:"fa fa-gear"})," Payloads"),E.default.createElement("body",null,E.default.createElement(j.default,{label:"Pending payloads",hidden:p.default.isEmpty(n)},p.default.map(n,u)),E.default.createElement(j.default,{label:"Payloads in transit",hidden:p.default.isEmpty(a)},p.default.map(a,u)),E.default.createElement(j.default,{label:"Payloads in backend process",hidden:p.default.isEmpty(r)},p.default.map(r,u)),E.default.createElement(j.default,{label:"Failed payloads",hidden:p.default.isEmpty(l)},p.default.map(l,u)),E.default.createElement(j.default,{label:"Completed payloads",hidden:p.default.isEmpty(o)},p.default.map(o,u))))}}]),t}(y.Component));O.displayName="PayloadManagerPanel",t.default=O,t.PayloadManagerPanel=O},"./diagnostics/payload-manager-panel.scss":function(e,t){},"./diagnostics/push-notifier-panel.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){var e=window.device;return e?{manufacturer:e.manufacturer,name:e.model}:{}}function s(e,t){return m.default.createElement("pre",{key:t},JSON.stringify(e,void 0,4))}Object.defineProperty(t,"__esModule",{value:!0}),t.PushNotifierPanel=t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n("../../common/node_modules/lodash/lodash.js"),d=a(c),f=n("../../common/node_modules/react/index.js"),m=a(f),p=n("./widgets/settings-panel.jsx"),h=a(p),b=n("./widgets/diagnostics-section.jsx"),y=a(b);n("./diagnostics/push-notifier-panel.scss");var E=n("../../common/src/transport/push-notifier.js"),v=(a(E),function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){var e=this.props.notifier,t=e.registrationID,n=e.registrationType,a=e.relayAddress,r=e.relayToken,l=e.recentMessages,o=u();return m.default.createElement(h.default,{className:"push-notifier"},m.default.createElement("header",null,m.default.createElement("i",{className:"fa fa-gear"})," Push Notification"),m.default.createElement("body",null,m.default.createElement(y.default,{label:"Registration"},m.default.createElement("div",null,"ID: ",t),m.default.createElement("div",null,"Network: ",n)),m.default.createElement(y.default,{label:"Push relay"},m.default.createElement("div",null,"Address: ",a),m.default.createElement("div",null,"Token: ",r)),m.default.createElement(y.default,{label:"Recent messages"},d.default.map(l,s)),m.default.createElement(y.default,{label:"Device"},m.default.createElement("div",null,"Manufacturer: ",o.manufacturer),m.default.createElement("div",null,"Model: ",o.name))))}}]),t}(f.Component));v.displayName="PushNotifierPanel",t.default=v,t.PushNotifierPanel=v},"./diagnostics/push-notifier-panel.scss":function(e,t){},"./diagnostics/remote-data-source-panel.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=f.default.filter(e.searches,function(e){return"local"!==e.schema}),n=function(e,t){var n=void 0;e.updating?n="updating":e.dirty&&(n="dirty");var a=e.duration?e.duration+"ms":"",r=JSON.stringify(e.criteria,void 0,4),l=JSON.stringify(e.criteria);return p.default.createElement("tr",{key:t,className:n},p.default.createElement("td",{className:"time"},a),p.default.createElement("td",{className:"schema"},e.schema),p.default.createElement("td",{className:"table"},e.table),p.default.createElement("td",{className:"criteria",title:i(r)},l),p.default.createElement("td",{className:"objects"},f.default.size(e.results)," (",e.lastRetrieved,")"),p.default.createElement("td",{className:"by"},f.default.join(e.by,", ")))};return p.default.createElement("table",{className:"recent-search-table"},p.default.createElement("thead",null,p.default.createElement("tr",null,p.default.createElement("th",{className:"time"},"Time"),p.default.createElement("th",{className:"schema"},"Schema"),p.default.createElement("th",{className:"table"},"Table"),p.default.createElement("th",{className:"criteria"},"Criteria"),p.default.createElement("th",{className:"objects"},"Objects (fresh)"),p.default.createElement("th",{className:"by"},"By"))),p.default.createElement("tbody",null,f.default.map(t,n)))}function s(e){var t=f.default.filter(e.stores,function(e){return"local"!==e.schema}),n=function(e,t){var n=e.duration?e.duration+"ms":"",a=JSON.stringify(e.results,void 0,4),r=JSON.stringify(e.results);return p.default.createElement("tr",{key:t},p.default.createElement("td",{className:"time"},n),p.default.createElement("td",{className:"schema"},e.schema),p.default.createElement("td",{className:"table"},e.table),p.default.createElement("td",{className:"objects",title:a},r),p.default.createElement("td",{className:"by"},e.by))};return p.default.createElement("table",{className:"recent-storage-table"},p.default.createElement("thead",null,p.default.createElement("tr",null,p.default.createElement("th",{className:"time"},"Time"),p.default.createElement("th",{className:"schema"},"Schema"),p.default.createElement("th",{className:"table"},"Table"),p.default.createElement("th",{className:"objects"},"Objects"),p.default.createElement("th",{className:"by"},"By"))),p.default.createElement("tbody",null,f.default.map(t,n)))}function i(e){return e.replace(/\[([^\]]{1,50},\s*)[^\]]{50,}?(\s*)\]/g,"[$1...$2]")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RemoteDataSourcePanel=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n("../../common/node_modules/lodash/lodash.js"),f=a(d),m=n("../../common/node_modules/react/index.js"),p=a(m),h=n("../../common/src/transport/code-push.js"),b=(a(h),n("./widgets/settings-panel.jsx")),y=a(b),E=n("./widgets/diagnostics-section.jsx"),v=a(E);n("./diagnostics/remote-data-source-panel.scss");var g=n("../../common/src/data/remote-data-source/index.js"),_=(a(g),function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"render",value:function(){var e=this.props.dataSource,t=e.recentSearchResults,n=e.recentStorageResults,a=e.recentRemovalResults;return p.default.createElement(y.default,{className:"remote-data-source"},p.default.createElement("header",null,p.default.createElement("i",{className:"fa fa-gear"})," Remote Data Source"),p.default.createElement("body",null,p.default.createElement(v.default,{label:"Recent searches"},p.default.createElement(u,{searches:t})),p.default.createElement(v.default,{label:"Recent storage",hidden:f.default.isEmpty(n)},p.default.createElement(s,{stores:n})),p.default.createElement(v.default,{label:"Recent removal",hidden:f.default.isEmpty(a)},p.default.createElement(j,{stores:a}))))}}]),t}(m.Component));_.displayName="RemoteDataSourcePanel";var j=s;t.RemoteDataSourcePanel=_,t.default=_},"./diagnostics/remote-data-source-panel.scss":function(e,t){},"./diagnostics/sqlite-cache-panel.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SQLiteCachePanel=t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("../../common/node_modules/lodash/lodash.js"),i=a(s),c=n("../../common/node_modules/react/index.js"),d=a(c),f=n("./widgets/settings-panel.jsx"),m=a(f),p=n("./widgets/diagnostics-section.jsx"),h=a(p);n("./diagnostics/sqlite-cache-panel.scss");var b=n("../../common/src/data/sqlite-cache.js"),y=(a(b),function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props.cache,t=e.options,n=e.recordCounts,a=e.writeCount,r=e.readCount,l=e.deleteCount,o=i.default.get(n,"local-data"),u=i.default.get(n,"remote-data");return d.default.createElement(m.default,{className:"sqlite-cache"},d.default.createElement("header",null,d.default.createElement("i",{className:"fa fa-gear"})," SQLite Cache"),d.default.createElement("body",null,d.default.createElement(h.default,{label:"Database details"},d.default.createElement("div",null,"Name: ",t.databaseName)),d.default.createElement(h.default,{label:"Usage"},d.default.createElement("div",null,"Local objects: ",o),d.default.createElement("div",null,"Remote objects: ",u),d.default.createElement("div",null,"Objects read: ",r),d.default.createElement("div",null,"Objects written: ",a),d.default.createElement("div",null,"Objects deleted: ",l))))}}]),t}(c.Component));y.displayName="SQLiteCachePanel",t.default=y,t.SQLiteCachePanel=y},"./diagnostics/sqlite-cache-panel.scss":function(e,t){},"./diagnostics/websocket-notifier-panel.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return f.default.createElement("pre",{key:t},JSON.stringify(e,void 0,4))}Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketNotifierPanel=t.default=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n("../../common/node_modules/lodash/lodash.js"),c=a(i),d=n("../../common/node_modules/react/index.js"),f=a(d),m=n("./widgets/settings-panel.jsx"),p=a(m),h=n("./widgets/diagnostics-section.jsx"),b=a(h);n("./diagnostics/websocket-notifier-panel.scss");var y=n("../../common/src/transport/websocket-notifier.js"),E=(a(y),function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props.notifier,t=e.socket,n=e.reconnectionCount,a=e.notificationPermitted,r=e.recentMessages;return f.default.createElement(p.default,{className:"websocket-notifier"},f.default.createElement("header",null,f.default.createElement("i",{className:"fa fa-gear"})," Web Socket"),f.default.createElement("body",null,f.default.createElement(b.default,{label:"Connection"},f.default.createElement("div",null,"ID: ",t?t.id:""),f.default.createElement("div",null,"Socket: ",t?"established":"none"),f.default.createElement("div",null,"Reconnection count: ",n),f.default.createElement("div",null,"Notification: ",a?"permitted":"denied")),f.default.createElement(b.default,{label:"Recent messages"},c.default.map(r,u))))}}]),t}(d.Component));E.displayName="WebsocketNotifierPanel",t.default=E,t.WebsocketNotifierPanel=E},"./diagnostics/websocket-notifier-panel.scss":function(e,t){},"./pages/diagnostics-page.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticsPage=t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("../../common/node_modules/lodash/lodash.js"),i=(a(s),n("../../common/node_modules/react/index.js")),c=a(i),d=n("../../common/src/data/indexed-db-cache.js"),f=a(d),m=n("../../common/src/data/sqlite-cache.js"),p=(a(m),n("../../common/src/transport/websocket-notifier.js")),h=a(p),b=n("../../common/src/transport/push-notifier.js"),y=a(b),E=n("./widgets/page-container.jsx"),v=a(E),g=n("./diagnostics/environment-monitor-panel.jsx"),_=a(g),j=n("./diagnostics/remote-data-source-panel.jsx"),w=a(j),O=n("./diagnostics/indexed-db-cache-panel.jsx"),P=a(O),N=n("./diagnostics/sqlite-cache-panel.jsx"),k=a(N),x=n("./diagnostics/locale-manager-panel.jsx"),T=a(x),C=n("./diagnostics/websocket-notifier-panel.jsx"),S=a(C),R=n("./diagnostics/push-notifier-panel.jsx"),M=a(R),D=n("./diagnostics/payload-manager-panel.jsx"),L=a(D),I=n("./diagnostics/code-push-panel.jsx"),A=a(I),B=n("../../common/src/widgets/error-boundary.jsx"),F=a(B);n("./pages/diagnostics-page.scss");var q=n("../../common/src/data/database.js"),U=(a(q),n("../../common/src/transport/payloads.js")),W=(a(U),n("../../common/src/routing/route.js")),X=(a(W),n("../../common/src/env/environment.js")),H=(a(X),n("../../common/src/env/environment-monitor.js")),z=(a(H),n("../../common/node_modules/relaks-route-manager/index.js")),J=(a(z),n("../../common/src/data/remote-data-source/index.js")),Q=(a(J),n("../../common/src/transport/payload-manager.js")),V=(a(Q),n("../../common/src/locale/locale-manager.js")),K=(a(V),n("../../common/src/transport/notifier.js")),Y=(a(K),n("../../common/src/transport/code-push.js")),$=(a(Y),function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props.env;return c.default.createElement(v.default,{className:"diagnostics-page"},c.default.createElement("div",{className:"panels"},c.default.createElement(F.default,{env:e},this.renderEnvironmentMonitorPanel(),this.renderRemoteDataSourcePanel(),this.renderCachePanel(),this.renderLocaleManagerPanel(),this.renderNotifierPanel(),this.renderPayloadManagerPanel(),this.renderCodePushPanel())),c.default.createElement("div",{className:"version"},"Version ","1.2.0"))}},{key:"renderEnvironmentMonitorPanel",value:function(){var e=this.props.envMonitor,t={envMonitor:e};return c.default.createElement(_.default,t)}},{key:"renderRemoteDataSourcePanel",value:function(){var e=this.props.dataSource,t={dataSource:e};return c.default.createElement(w.default,t)}},{key:"renderCachePanel",value:function(){var e=this.props.dataSource,t={cache:e.cache};return t.cache instanceof f.default?c.default.createElement(P.default,t):t.cache instanceof SQLiteCache?c.default.createElement(k.default,t):void 0}},{key:"renderLocaleManagerPanel",value:function(){var e=this.props.localeManager,t={localeManager:e};return c.default.createElement(T.default,t)}},{key:"renderNotifierPanel",value:function(){var e=this.props.notifier,t={notifier:e};return t.notifier instanceof h.default?c.default.createElement(S.default,t):t.notifier instanceof y.default?c.default.createElement(M.default,t):void 0}},{key:"renderPayloadManagerPanel",value:function(){var e=this.props.payloadManager,t={payloadManager:e};return c.default.createElement(L.default,t)}},{key:"renderCodePushPanel",value:function(){var e=this.props.codePush;if(!e)return null;var t={codePush:e};return c.default.createElement(A.default,t)}}]),t}(i.PureComponent));$.displayName="DiagnosticsPage",$.diagnostics=!0,t.default=$,t.DiagnosticsPage=$},"./pages/diagnostics-page.scss":function(e,t){}});